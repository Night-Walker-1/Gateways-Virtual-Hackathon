var rte=Object.defineProperty;var ste=(t,e,n)=>e in t?rte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var I4=(t,e,n)=>ste(t,typeof e!="symbol"?e+"":e,n);function _7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function po(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ite(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var O7={exports:{}},qx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ate=Symbol.for("react.transitional.element"),ote=Symbol.for("react.fragment");function D7(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:ate,type:t,key:r,ref:e!==void 0?e:null,props:n}}qx.Fragment=ote;qx.jsx=D7;qx.jsxs=D7;O7.exports=qx;var B=O7.exports,R7={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=Symbol.for("react.transitional.element"),lte=Symbol.for("react.portal"),ute=Symbol.for("react.fragment"),cte=Symbol.for("react.strict_mode"),fte=Symbol.for("react.profiler"),dte=Symbol.for("react.consumer"),hte=Symbol.for("react.context"),pte=Symbol.for("react.forward_ref"),mte=Symbol.for("react.suspense"),gte=Symbol.for("react.memo"),P7=Symbol.for("react.lazy"),qR=Symbol.iterator;function yte(t){return t===null||typeof t!="object"?null:(t=qR&&t[qR]||t["@@iterator"],typeof t=="function"?t:null)}var M7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F7=Object.assign,L7={};function kp(t,e,n){this.props=t,this.context=e,this.refs=L7,this.updater=n||M7}kp.prototype.isReactComponent={};kp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z7(){}z7.prototype=kp.prototype;function ZN(t,e,n){this.props=t,this.context=e,this.refs=L7,this.updater=n||M7}var QN=ZN.prototype=new z7;QN.constructor=ZN;F7(QN,kp.prototype);QN.isPureReactComponent=!0;var KR=Array.isArray,Bn={H:null,A:null,T:null,S:null,V:null},B7=Object.prototype.hasOwnProperty;function JN(t,e,n,r,s,i){return n=i.ref,{$$typeof:YN,type:t,key:e,ref:n!==void 0?n:null,props:i}}function vte(t,e){return JN(t.type,e,void 0,void 0,void 0,t.props)}function eA(t){return typeof t=="object"&&t!==null&&t.$$typeof===YN}function bte(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XR=/\/+/g;function _4(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bte(""+t.key):e.toString(36)}function YR(){}function xte(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(YR,YR):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function eh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case YN:case lte:a=!0;break;case P7:return a=t._init,eh(a(t._payload),e,n,r,s)}}if(a)return s=s(t),a=r===""?"."+_4(t,0):r,KR(s)?(n="",a!=null&&(n=a.replace(XR,"$&/")+"/"),eh(s,e,n,"",function(u){return u})):s!=null&&(eA(s)&&(s=vte(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(XR,"$&/")+"/")+a)),e.push(s)),1;a=0;var o=r===""?".":r+":";if(KR(t))for(var l=0;l<t.length;l++)r=t[l],i=o+_4(r,l),a+=eh(r,e,n,i,s);else if(l=yte(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,i=o+_4(r,l++),a+=eh(r,e,n,i,s);else if(i==="object"){if(typeof t.then=="function")return eh(xte(t),e,n,r,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function sv(t,e,n){if(t==null)return t;var r=[],s=0;return eh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wte(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ZR=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ste(){}_t.Children={map:sv,forEach:function(t,e,n){sv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sv(t,function(){e++}),e},toArray:function(t){return sv(t,function(e){return e})||[]},only:function(t){if(!eA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_t.Component=kp;_t.Fragment=ute;_t.Profiler=fte;_t.PureComponent=ZN;_t.StrictMode=cte;_t.Suspense=mte;_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Bn;_t.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Bn.H.useMemoCache(t)}};_t.cache=function(t){return function(){return t.apply(null,arguments)}};_t.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=F7({},t.props),s=t.key,i=void 0;if(e!=null)for(a in e.ref!==void 0&&(i=void 0),e.key!==void 0&&(s=""+e.key),e)!B7.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return JN(t.type,s,void 0,void 0,i,r)};_t.createContext=function(t){return t={$$typeof:hte,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:dte,_context:t},t};_t.createElement=function(t,e,n){var r,s={},i=null;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)B7.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return JN(t,i,void 0,void 0,null,s)};_t.createRef=function(){return{current:null}};_t.forwardRef=function(t){return{$$typeof:pte,render:t}};_t.isValidElement=eA;_t.lazy=function(t){return{$$typeof:P7,_payload:{_status:-1,_result:t},_init:wte}};_t.memo=function(t,e){return{$$typeof:gte,type:t,compare:e===void 0?null:e}};_t.startTransition=function(t){var e=Bn.T,n={};Bn.T=n;try{var r=t(),s=Bn.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Ste,ZR)}catch(i){ZR(i)}finally{Bn.T=e}};_t.unstable_useCacheRefresh=function(){return Bn.H.useCacheRefresh()};_t.use=function(t){return Bn.H.use(t)};_t.useActionState=function(t,e,n){return Bn.H.useActionState(t,e,n)};_t.useCallback=function(t,e){return Bn.H.useCallback(t,e)};_t.useContext=function(t){return Bn.H.useContext(t)};_t.useDebugValue=function(){};_t.useDeferredValue=function(t,e){return Bn.H.useDeferredValue(t,e)};_t.useEffect=function(t,e,n){var r=Bn.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};_t.useId=function(){return Bn.H.useId()};_t.useImperativeHandle=function(t,e,n){return Bn.H.useImperativeHandle(t,e,n)};_t.useInsertionEffect=function(t,e){return Bn.H.useInsertionEffect(t,e)};_t.useLayoutEffect=function(t,e){return Bn.H.useLayoutEffect(t,e)};_t.useMemo=function(t,e){return Bn.H.useMemo(t,e)};_t.useOptimistic=function(t,e){return Bn.H.useOptimistic(t,e)};_t.useReducer=function(t,e,n){return Bn.H.useReducer(t,e,n)};_t.useRef=function(t){return Bn.H.useRef(t)};_t.useState=function(t){return Bn.H.useState(t)};_t.useSyncExternalStore=function(t,e,n){return Bn.H.useSyncExternalStore(t,e,n)};_t.useTransition=function(){return Bn.H.useTransition()};_t.version="19.1.1";R7.exports=_t;var k=R7.exports;const Tt=po(k),j7=_7({__proto__:null,default:Tt},[k]);var U7={exports:{}},Kx={},V7={exports:{}},W7={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var Q=U.length;U.push(Y);e:for(;0<Q;){var se=Q-1>>>1,he=U[se];if(0<s(he,Y))U[se]=Y,U[Q]=he,Q=se;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],Q=U.pop();if(Q!==Y){U[0]=Q;e:for(var se=0,he=U.length,be=he>>>1;se<be;){var ue=2*(se+1)-1,Ne=U[ue],_e=ue+1,Ee=U[_e];if(0>s(Ne,Q))_e<he&&0>s(Ee,Ne)?(U[se]=Ee,U[_e]=Q,se=_e):(U[se]=Ne,U[ue]=Q,se=ue);else if(_e<he&&0>s(Ee,Q))U[se]=Ee,U[_e]=Q,se=_e;else break e}}return Y}function s(U,Y){var Q=U.sortIndex-Y.sortIndex;return Q!==0?Q:U.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function x(U){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=U)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function w(U){if(m=!1,x(U),!p)if(n(l)!==null)p=!0,C||(C=!0,z());else{var Y=n(u);Y!==null&&J(w,Y.startTime-U)}}var C=!1,E=-1,A=5,O=-1;function R(){return g?!0:!(t.unstable_now()-O<A)}function F(){if(g=!1,C){var U=t.unstable_now();O=U;var Y=!0;try{e:{p=!1,m&&(m=!1,v(E),E=-1),h=!0;var Q=d;try{t:{for(x(U),f=n(l);f!==null&&!(f.expirationTime>U&&R());){var se=f.callback;if(typeof se=="function"){f.callback=null,d=f.priorityLevel;var he=se(f.expirationTime<=U);if(U=t.unstable_now(),typeof he=="function"){f.callback=he,x(U),Y=!0;break t}f===n(l)&&r(l),x(U)}else r(l);f=n(l)}if(f!==null)Y=!0;else{var be=n(u);be!==null&&J(w,be.startTime-U),Y=!1}}break e}finally{f=null,d=Q,h=!1}Y=void 0}}finally{Y?z():C=!1}}}var z;if(typeof b=="function")z=function(){b(F)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=F,z=function(){H.postMessage(null)}}else z=function(){y(F,0)};function J(U,Y){E=y(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var Q=d;d=Y;try{return U()}finally{d=Q}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=d;d=U;try{return Y()}finally{d=Q}},t.unstable_scheduleCallback=function(U,Y,Q){var se=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?se+Q:se):Q=se,U){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,U={id:c++,callback:Y,priorityLevel:U,startTime:Q,expirationTime:he,sortIndex:-1},Q>se?(U.sortIndex=Q,e(u,U),n(l)===null&&U===n(u)&&(m?(v(E),E=-1):m=!0,J(w,Q-se))):(U.sortIndex=he,e(l,U),p||h||(p=!0,C||(C=!0,z()))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var Y=d;return function(){var Q=d;d=Y;try{return U.apply(this,arguments)}finally{d=Q}}}})(W7);V7.exports=W7;var Tte=V7.exports,G7={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cte=k;function H7(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vu(){}var qs={d:{f:vu,r:function(){throw Error(H7(522))},D:vu,C:vu,L:vu,m:vu,X:vu,S:vu,M:vu},p:0,findDOMNode:null},Ete=Symbol.for("react.portal");function kte(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ete,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var bg=Cte.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xx(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qs;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(H7(299));return kte(t,e,null,n)};ei.flushSync=function(t){var e=bg.T,n=qs.p;try{if(bg.T=null,qs.p=2,t)return t()}finally{bg.T=e,qs.p=n,qs.d.f()}};ei.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qs.d.C(t,e))};ei.prefetchDNS=function(t){typeof t=="string"&&qs.d.D(t)};ei.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Xx(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qs.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):n==="script"&&qs.d.X(t,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};ei.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Xx(e.as,e.crossOrigin);qs.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qs.d.M(t)};ei.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Xx(n,e.crossOrigin);qs.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};ei.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Xx(e.as,e.crossOrigin);qs.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qs.d.m(t)};ei.requestFormReset=function(t){qs.d.r(t)};ei.unstable_batchedUpdates=function(t,e){return t(e)};ei.useFormState=function(t,e,n){return bg.H.useFormState(t,e,n)};ei.useFormStatus=function(){return bg.H.useHostTransitionStatus()};ei.version="19.1.1";function q7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q7)}catch(t){console.error(t)}}q7(),G7.exports=ei;var K7=G7.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jr=Tte,X7=k,Nte=K7;function $e(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y7(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _y(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z7(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QR(t){if(_y(t)!==t)throw Error($e(188))}function Ate(t){var e=t.alternate;if(!e){if(e=_y(t),e===null)throw Error($e(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return QR(s),t;if(i===r)return QR(s),e;i=i.sibling}throw Error($e(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error($e(189))}}if(n.alternate!==r)throw Error($e(190))}if(n.tag!==3)throw Error($e(188));return n.stateNode.current===n?t:e}function Q7(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Q7(t),e!==null)return e;t=t.sibling}return null}var Rn=Object.assign,$te=Symbol.for("react.element"),iv=Symbol.for("react.transitional.element"),ig=Symbol.for("react.portal"),lh=Symbol.for("react.fragment"),J7=Symbol.for("react.strict_mode"),IC=Symbol.for("react.profiler"),Ite=Symbol.for("react.provider"),e9=Symbol.for("react.consumer"),El=Symbol.for("react.context"),tA=Symbol.for("react.forward_ref"),_C=Symbol.for("react.suspense"),OC=Symbol.for("react.suspense_list"),nA=Symbol.for("react.memo"),Tu=Symbol.for("react.lazy"),DC=Symbol.for("react.activity"),_te=Symbol.for("react.memo_cache_sentinel"),JR=Symbol.iterator;function Nm(t){return t===null||typeof t!="object"?null:(t=JR&&t[JR]||t["@@iterator"],typeof t=="function"?t:null)}var Ote=Symbol.for("react.client.reference");function RC(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ote?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lh:return"Fragment";case IC:return"Profiler";case J7:return"StrictMode";case _C:return"Suspense";case OC:return"SuspenseList";case DC:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ig:return"Portal";case El:return(t.displayName||"Context")+".Provider";case e9:return(t._context.displayName||"Context")+".Consumer";case tA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nA:return e=t.displayName||null,e!==null?e:RC(t.type)||"Memo";case Tu:e=t._payload,t=t._init;try{return RC(t(e))}catch{}}return null}var ag=Array.isArray,gt=X7.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,en=Nte.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nf={pending:!1,data:null,method:null,action:null},PC=[],uh=-1;function il(t){return{current:t}}function ss(t){0>uh||(t.current=PC[uh],PC[uh]=null,uh--)}function jn(t,e){uh++,PC[uh]=t.current,t.current=e}var Vo=il(null),jg=il(null),Uu=il(null),Wb=il(null);function Gb(t,e){switch(jn(Uu,e),jn(jg,t),jn(Vo,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?s5(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=s5(e),t=yB(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ss(Vo),jn(Vo,t)}function jh(){ss(Vo),ss(jg),ss(Uu)}function MC(t){t.memoizedState!==null&&jn(Wb,t);var e=Vo.current,n=yB(e,t.type);e!==n&&(jn(jg,t),jn(Vo,n))}function Hb(t){jg.current===t&&(ss(Vo),ss(jg)),Wb.current===t&&(ss(Wb),Zg._currentValue=Nf)}var FC=Object.prototype.hasOwnProperty,rA=jr.unstable_scheduleCallback,O4=jr.unstable_cancelCallback,Dte=jr.unstable_shouldYield,Rte=jr.unstable_requestPaint,Wo=jr.unstable_now,Pte=jr.unstable_getCurrentPriorityLevel,t9=jr.unstable_ImmediatePriority,n9=jr.unstable_UserBlockingPriority,qb=jr.unstable_NormalPriority,Mte=jr.unstable_LowPriority,r9=jr.unstable_IdlePriority,Fte=jr.log,Lte=jr.unstable_setDisableYieldValue,Oy=null,qi=null;function Ru(t){if(typeof Fte=="function"&&Lte(t),qi&&typeof qi.setStrictMode=="function")try{qi.setStrictMode(Oy,t)}catch{}}var Ki=Math.clz32?Math.clz32:jte,zte=Math.log,Bte=Math.LN2;function jte(t){return t>>>=0,t===0?32:31-(zte(t)/Bte|0)|0}var av=256,ov=4194304;function rf(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yx(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~i,r!==0?s=rf(r):(a&=o,a!==0?s=rf(a):n||(n=o&~t,n!==0&&(s=rf(n))))):(o=r&~i,o!==0?s=rf(o):a!==0?s=rf(a):n||(n=r&~t,n!==0&&(s=rf(n)))),s===0?0:e!==0&&e!==s&&!(e&i)&&(i=s&-s,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:s}function Dy(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Ute(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s9(){var t=av;return av<<=1,!(av&4194048)&&(av=256),t}function i9(){var t=ov;return ov<<=1,!(ov&62914560)&&(ov=4194304),t}function D4(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ry(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vte(t,e,n,r,s,i){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var c=31-Ki(n),f=1<<c;o[c]=0,l[c]=-1;var d=u[c];if(d!==null)for(u[c]=null,c=0;c<d.length;c++){var h=d[c];h!==null&&(h.lane&=-536870913)}n&=~f}r!==0&&a9(t,r,0),i!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=i&~(a&~e))}function a9(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-Ki(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function o9(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ki(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}function sA(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function iA(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function l9(){var t=en.p;return t!==0?t:(t=window.event,t===void 0?32:NB(t.type))}function Wte(t,e){var n=en.p;try{return en.p=t,e()}finally{en.p=n}}var Cc=Math.random().toString(36).slice(2),Os="__reactFiber$"+Cc,wi="__reactProps$"+Cc,Np="__reactContainer$"+Cc,LC="__reactEvents$"+Cc,Gte="__reactListeners$"+Cc,Hte="__reactHandles$"+Cc,e6="__reactResources$"+Cc,Py="__reactMarker$"+Cc;function aA(t){delete t[Os],delete t[wi],delete t[LC],delete t[Gte],delete t[Hte]}function ch(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Np]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o5(t);t!==null;){if(n=t[Os])return n;t=o5(t)}return e}t=n,n=t.parentNode}return null}function Ap(t){if(t=t[Os]||t[Np]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function og(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error($e(33))}function Ch(t){var e=t[e6];return e||(e=t[e6]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Jr(t){t[Py]=!0}var u9=new Set,c9={};function yd(t,e){Uh(t,e),Uh(t+"Capture",e)}function Uh(t,e){for(c9[t]=e,t=0;t<e.length;t++)u9.add(e[t])}var qte=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),t6={},n6={};function Kte(t){return FC.call(n6,t)?!0:FC.call(t6,t)?!1:qte.test(t)?n6[t]=!0:(t6[t]=!0,!1)}function fb(t,e,n){if(Kte(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function lv(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function dl(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var R4,r6;function th(t){if(R4===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R4=e&&e[1]||"",r6=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R4+t+r6}var P4=!1;function M4(t,e){if(!t||P4)return"";P4=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(h){var d=h}Reflect.construct(t,[],f)}else{try{f.call()}catch(h){d=h}t.call(f.prototype)}}else{try{throw Error()}catch(h){d=h}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(h){if(h&&d&&typeof h.stack=="string")return[h.stack,d.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split(`
`),u=o.split(`
`);for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===u.length)for(r=l.length-1,s=u.length-1;1<=r&&0<=s&&l[r]!==u[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==u[s]){if(r!==1||s!==1)do if(r--,s--,0>s||l[r]!==u[s]){var c=`
`+l[r].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=r&&0<=s);break}}}finally{P4=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?th(n):""}function Xte(t){switch(t.tag){case 26:case 27:case 5:return th(t.type);case 16:return th("Lazy");case 13:return th("Suspense");case 19:return th("SuspenseList");case 0:case 15:return M4(t.type,!1);case 11:return M4(t.type.render,!1);case 1:return M4(t.type,!0);case 31:return th("Activity");default:return""}}function s6(t){try{var e="";do e+=Xte(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ga(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yte(t){var e=f9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kb(t){t._valueTracker||(t._valueTracker=Yte(t))}function d9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zte=/[\n"\\]/g;function wa(t){return t.replace(Zte,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function zC(t,e,n,r,s,i,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ga(e)):t.value!==""+ga(e)&&(t.value=""+ga(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?BC(t,a,ga(e)):n!=null?BC(t,a,ga(n)):r!=null&&t.removeAttribute("value"),s==null&&i!=null&&(t.defaultChecked=!!i),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+ga(o):t.removeAttribute("name")}function h9(t,e,n,r,s,i,a,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null))return;n=n!=null?""+ga(n):"",e=e!=null?""+ga(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function BC(t,e,n){e==="number"&&Xb(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Eh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ga(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function p9(t,e,n){if(e!=null&&(e=""+ga(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ga(n):""}function m9(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error($e(92));if(ag(r)){if(1<r.length)throw Error($e(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=ga(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Vh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qte=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function i6(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||Qte.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function g9(t,e,n){if(e!=null&&typeof e!="object")throw Error($e(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var s in e)r=e[s],e.hasOwnProperty(s)&&n[s]!==r&&i6(t,s,r)}else for(var i in e)e.hasOwnProperty(i)&&i6(t,i,e[i])}function oA(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jte=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ene=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function db(t){return ene.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var jC=null;function lA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fh=null,kh=null;function a6(t){var e=Ap(t);if(e&&(t=e.stateNode)){var n=t[wi]||null;e:switch(t=e.stateNode,e.type){case"input":if(zC(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+wa(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=r[wi]||null;if(!s)throw Error($e(90));zC(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&d9(r)}break e;case"textarea":p9(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Eh(t,!!n.multiple,e,!1)}}}var F4=!1;function y9(t,e,n){if(F4)return t(e,n);F4=!0;try{var r=t(e);return r}finally{if(F4=!1,(fh!==null||kh!==null)&&(aw(),fh&&(e=fh,t=kh,kh=fh=null,a6(e),t)))for(e=0;e<t.length;e++)a6(t[e])}}function Ug(t,e){var n=t.stateNode;if(n===null)return null;var r=n[wi]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($e(231,e,typeof n));return n}var Bl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UC=!1;if(Bl)try{var Am={};Object.defineProperty(Am,"passive",{get:function(){UC=!0}}),window.addEventListener("test",Am,Am),window.removeEventListener("test",Am,Am)}catch{UC=!1}var Pu=null,uA=null,hb=null;function v9(){if(hb)return hb;var t,e=uA,n=e.length,r,s="value"in Pu?Pu.value:Pu.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return hb=s.slice(t,1<r?1-r:void 0)}function pb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uv(){return!0}function o6(){return!1}function ki(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?uv:o6,this.isPropagationStopped=o6,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uv)},persist:function(){},isPersistent:uv}),e}var vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zx=ki(vd),My=Rn({},vd,{view:0,detail:0}),tne=ki(My),L4,z4,$m,Qx=Rn({},My,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$m&&($m&&t.type==="mousemove"?(L4=t.screenX-$m.screenX,z4=t.screenY-$m.screenY):z4=L4=0,$m=t),L4)},movementY:function(t){return"movementY"in t?t.movementY:z4}}),l6=ki(Qx),nne=Rn({},Qx,{dataTransfer:0}),rne=ki(nne),sne=Rn({},My,{relatedTarget:0}),B4=ki(sne),ine=Rn({},vd,{animationName:0,elapsedTime:0,pseudoElement:0}),ane=ki(ine),one=Rn({},vd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lne=ki(one),une=Rn({},vd,{data:0}),u6=ki(une),cne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hne(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dne[t])?!!e[t]:!1}function cA(){return hne}var pne=Rn({},My,{key:function(t){if(t.key){var e=cne[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fne[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cA,charCode:function(t){return t.type==="keypress"?pb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mne=ki(pne),gne=Rn({},Qx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c6=ki(gne),yne=Rn({},My,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cA}),vne=ki(yne),bne=Rn({},vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),xne=ki(bne),wne=Rn({},Qx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sne=ki(wne),Tne=Rn({},vd,{newState:0,oldState:0}),Cne=ki(Tne),Ene=[9,13,27,32],fA=Bl&&"CompositionEvent"in window,xg=null;Bl&&"documentMode"in document&&(xg=document.documentMode);var kne=Bl&&"TextEvent"in window&&!xg,b9=Bl&&(!fA||xg&&8<xg&&11>=xg),f6=" ",d6=!1;function x9(t,e){switch(t){case"keyup":return Ene.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dh=!1;function Nne(t,e){switch(t){case"compositionend":return w9(e);case"keypress":return e.which!==32?null:(d6=!0,f6);case"textInput":return t=e.data,t===f6&&d6?null:t;default:return null}}function Ane(t,e){if(dh)return t==="compositionend"||!fA&&x9(t,e)?(t=v9(),hb=uA=Pu=null,dh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b9&&e.locale!=="ko"?null:e.data;default:return null}}var $ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$ne[t.type]:e==="textarea"}function S9(t,e,n,r){fh?kh?kh.push(r):kh=[r]:fh=r,e=h2(e,"onChange"),0<e.length&&(n=new Zx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wg=null,Vg=null;function Ine(t){pB(t,0)}function Jx(t){var e=og(t);if(d9(e))return t}function p6(t,e){if(t==="change")return e}var T9=!1;if(Bl){var j4;if(Bl){var U4="oninput"in document;if(!U4){var m6=document.createElement("div");m6.setAttribute("oninput","return;"),U4=typeof m6.oninput=="function"}j4=U4}else j4=!1;T9=j4&&(!document.documentMode||9<document.documentMode)}function g6(){wg&&(wg.detachEvent("onpropertychange",C9),Vg=wg=null)}function C9(t){if(t.propertyName==="value"&&Jx(Vg)){var e=[];S9(e,Vg,t,lA(t)),y9(Ine,e)}}function _ne(t,e,n){t==="focusin"?(g6(),wg=e,Vg=n,wg.attachEvent("onpropertychange",C9)):t==="focusout"&&g6()}function One(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jx(Vg)}function Dne(t,e){if(t==="click")return Jx(e)}function Rne(t,e){if(t==="input"||t==="change")return Jx(e)}function Pne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qi=typeof Object.is=="function"?Object.is:Pne;function Wg(t,e){if(Qi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!FC.call(e,s)||!Qi(t[s],e[s]))return!1}return!0}function y6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v6(t,e){var n=y6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y6(n)}}function E9(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E9(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k9(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Xb(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xb(t.document)}return e}function dA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Mne=Bl&&"documentMode"in document&&11>=document.documentMode,hh=null,VC=null,Sg=null,WC=!1;function b6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;WC||hh==null||hh!==Xb(r)||(r=hh,"selectionStart"in r&&dA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sg&&Wg(Sg,r)||(Sg=r,r=h2(VC,"onSelect"),0<r.length&&(e=new Zx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hh)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ph={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionrun:Zc("Transition","TransitionRun"),transitionstart:Zc("Transition","TransitionStart"),transitioncancel:Zc("Transition","TransitionCancel"),transitionend:Zc("Transition","TransitionEnd")},V4={},N9={};Bl&&(N9=document.createElement("div").style,"AnimationEvent"in window||(delete ph.animationend.animation,delete ph.animationiteration.animation,delete ph.animationstart.animation),"TransitionEvent"in window||delete ph.transitionend.transition);function bd(t){if(V4[t])return V4[t];if(!ph[t])return t;var e=ph[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in N9)return V4[t]=e[n];return t}var A9=bd("animationend"),$9=bd("animationiteration"),I9=bd("animationstart"),Fne=bd("transitionrun"),Lne=bd("transitionstart"),zne=bd("transitioncancel"),_9=bd("transitionend"),O9=new Map,GC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");GC.push("scrollEnd");function mo(t,e){O9.set(t,e),yd(e,[t])}var x6=new WeakMap;function Sa(t,e){if(typeof t=="object"&&t!==null){var n=x6.get(t);return n!==void 0?n:(e={value:t,source:e,stack:s6(e)},x6.set(t,e),e)}return{value:t,source:e,stack:s6(e)}}var pa=[],mh=0,hA=0;function ew(){for(var t=mh,e=hA=mh=0;e<t;){var n=pa[e];pa[e++]=null;var r=pa[e];pa[e++]=null;var s=pa[e];pa[e++]=null;var i=pa[e];if(pa[e++]=null,r!==null&&s!==null){var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}i!==0&&D9(n,s,i)}}function tw(t,e,n,r){pa[mh++]=t,pa[mh++]=e,pa[mh++]=n,pa[mh++]=r,hA|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function pA(t,e,n,r){return tw(t,e,n,r),Yb(t)}function $p(t,e){return tw(t,null,null,e),Yb(t)}function D9(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var s=!1,i=t.return;i!==null;)i.childLanes|=n,r=i.alternate,r!==null&&(r.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(s=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,s&&e!==null&&(s=31-Ki(n),t=i.hiddenUpdates,r=t[s],r===null?t[s]=[e]:r.push(e),e.lane=n|536870912),i):null}function Yb(t){if(50<Og)throw Og=0,dE=null,Error($e(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var gh={};function Bne(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(t,e,n,r){return new Bne(t,e,n,r)}function mA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rl(t,e){var n=t.alternate;return n===null?(n=Vi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function R9(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mb(t,e,n,r,s,i){var a=0;if(r=t,typeof t=="function")mA(t)&&(a=1);else if(typeof t=="string")a=Ure(t,n,Vo.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case DC:return t=Vi(31,n,e,s),t.elementType=DC,t.lanes=i,t;case lh:return Af(n.children,s,i,e);case J7:a=8,s|=24;break;case IC:return t=Vi(12,n,e,s|2),t.elementType=IC,t.lanes=i,t;case _C:return t=Vi(13,n,e,s),t.elementType=_C,t.lanes=i,t;case OC:return t=Vi(19,n,e,s),t.elementType=OC,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ite:case El:a=10;break e;case e9:a=9;break e;case tA:a=11;break e;case nA:a=14;break e;case Tu:a=16,r=null;break e}a=29,n=Error($e(130,t===null?"null":typeof t,"")),r=null}return e=Vi(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Af(t,e,n,r){return t=Vi(7,t,r,e),t.lanes=n,t}function W4(t,e,n){return t=Vi(6,t,null,e),t.lanes=n,t}function G4(t,e,n){return e=Vi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var yh=[],vh=0,Zb=null,Qb=0,ya=[],va=0,$f=null,kl=1,Nl="";function sf(t,e){yh[vh++]=Qb,yh[vh++]=Zb,Zb=t,Qb=e}function P9(t,e,n){ya[va++]=kl,ya[va++]=Nl,ya[va++]=$f,$f=t;var r=kl;t=Nl;var s=32-Ki(r)-1;r&=~(1<<s),n+=1;var i=32-Ki(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,kl=1<<32-Ki(e)+s|n<<s|r,Nl=i+t}else kl=1<<i|n<<s|r,Nl=t}function gA(t){t.return!==null&&(sf(t,1),P9(t,1,0))}function yA(t){for(;t===Zb;)Zb=yh[--vh],yh[vh]=null,Qb=yh[--vh],yh[vh]=null;for(;t===$f;)$f=ya[--va],ya[va]=null,Nl=ya[--va],ya[va]=null,kl=ya[--va],ya[va]=null}var Gs=null,er=null,Qt=!1,If=null,Fo=!1,HC=Error($e(519));function Wf(t){var e=Error($e(418,""));throw Gg(Sa(e,t)),HC}function w6(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Os]=t,e[wi]=r,n){case"dialog":Lt("cancel",e),Lt("close",e);break;case"iframe":case"object":case"embed":Lt("load",e);break;case"video":case"audio":for(n=0;n<Kg.length;n++)Lt(Kg[n],e);break;case"source":Lt("error",e);break;case"img":case"image":case"link":Lt("error",e),Lt("load",e);break;case"details":Lt("toggle",e);break;case"input":Lt("invalid",e),h9(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Kb(e);break;case"select":Lt("invalid",e);break;case"textarea":Lt("invalid",e),m9(e,r.value,r.defaultValue,r.children),Kb(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||gB(e.textContent,n)?(r.popover!=null&&(Lt("beforetoggle",e),Lt("toggle",e)),r.onScroll!=null&&Lt("scroll",e),r.onScrollEnd!=null&&Lt("scrollend",e),r.onClick!=null&&(e.onclick=uw),e=!0):e=!1,e||Wf(t)}function S6(t){for(Gs=t.return;Gs;)switch(Gs.tag){case 5:case 13:Fo=!1;return;case 27:case 3:Fo=!0;return;default:Gs=Gs.return}}function Im(t){if(t!==Gs)return!1;if(!Qt)return S6(t),Qt=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||vE(t.type,t.memoizedProps)),n=!n),n&&er&&Wf(t),S6(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){er=ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}er=null}}else e===27?(e=er,Ec(t.type)?(t=wE,wE=null,er=t):er=e):er=Gs?ro(t.stateNode.nextSibling):null;return!0}function Fy(){er=Gs=null,Qt=!1}function T6(){var t=If;return t!==null&&(ci===null?ci=t:ci.push.apply(ci,t),If=null),t}function Gg(t){If===null?If=[t]:If.push(t)}var qC=il(null),xd=null,Al=null;function Au(t,e,n){jn(qC,e._currentValue),e._currentValue=n}function Pl(t){t._currentValue=qC.current,ss(qC)}function KC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function XC(t,e,n,r){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){var a=s.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=s;for(var l=0;l<e.length;l++)if(o.context===e[l]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),KC(i.return,n,t),r||(a=null);break e}i=o.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error($e(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),KC(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Ly(t,e,n,r){t=null;for(var s=e,i=!1;s!==null;){if(!i){if(s.flags&524288)i=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error($e(387));if(a=a.memoizedProps,a!==null){var o=s.type;Qi(s.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(s===Wb.current){if(a=s.alternate,a===null)throw Error($e(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Zg):t=[Zg])}s=s.return}t!==null&&XC(e,t,n,r),e.flags|=262144}function Jb(t){for(t=t.firstContext;t!==null;){if(!Qi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gf(t){xd=t,Al=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ds(t){return M9(xd,t)}function cv(t,e){return xd===null&&Gf(t),M9(t,e)}function M9(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Al===null){if(t===null)throw Error($e(308));Al=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Al=Al.next=e;return n}var jne=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Une=jr.unstable_scheduleCallback,Vne=jr.unstable_NormalPriority,Mr={$$typeof:El,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vA(){return{controller:new jne,data:new Map,refCount:0}}function zy(t){t.refCount--,t.refCount===0&&Une(Vne,function(){t.controller.abort()})}var Tg=null,YC=0,Wh=0,Nh=null;function Wne(t,e){if(Tg===null){var n=Tg=[];YC=0,Wh=jA(),Nh={status:"pending",value:void 0,then:function(r){n.push(r)}}}return YC++,e.then(C6,C6),e}function C6(){if(--YC===0&&Tg!==null){Nh!==null&&(Nh.status="fulfilled");var t=Tg;Tg=null,Wh=0,Nh=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Gne(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var E6=gt.S;gt.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Wne(t,e),E6!==null&&E6(t,e)};var _f=il(null);function bA(){var t=_f.current;return t!==null?t:kn.pooledCache}function gb(t,e){e===null?jn(_f,_f.current):jn(_f,e.pool)}function F9(){var t=bA();return t===null?null:{parent:Mr._currentValue,pool:t}}var By=Error($e(460)),L9=Error($e(474)),nw=Error($e(542)),ZC={then:function(){}};function k6(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fv(){}function z9(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(fv,fv),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,A6(t),t;default:if(typeof e.status=="string")e.then(fv,fv);else{if(t=kn,t!==null&&100<t.shellSuspendCounter)throw Error($e(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=r}},function(r){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,A6(t),t}throw Cg=e,By}}var Cg=null;function N6(){if(Cg===null)throw Error($e(459));var t=Cg;return Cg=null,t}function A6(t){if(t===By||t===nw)throw Error($e(483))}var Cu=!1;function xA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function QC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vu(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,on&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,e=Yb(t),D9(t,null,n),e}return tw(t,r,e,n),Yb(t)}function Eg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o9(t,n)}}function H4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var JC=!1;function kg(){if(JC){var t=Nh;if(t!==null)throw t}}function Ng(t,e,n,r){JC=!1;var s=t.updateQueue;Cu=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,c=u=l=null,o=i;do{var d=o.lane&-536870913,h=d!==o.lane;if(h?(qt&d)===d:(r&d)===d){d!==0&&d===Wh&&(JC=!0),c!==null&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=t,m=o;d=e;var g=n;switch(m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(g,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(g,f,d):p,d==null)break e;f=Rn({},f,d);break e;case 2:Cu=!0}}d=o.callback,d!==null&&(t.flags|=64,h&&(t.flags|=8192),h=s.callbacks,h===null?s.callbacks=[d]:h.push(d))}else h={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,a|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,i===null&&(s.shared.lanes=0),oc|=a,t.lanes=a,t.memoizedState=f}}function B9(t,e){if(typeof t!="function")throw Error($e(191,t));t.call(e)}function j9(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)B9(n[t],e)}var Gh=il(null),e2=il(0);function $6(t,e){t=Vl,jn(e2,t),jn(Gh,e),Vl=t|e.baseLanes}function eE(){jn(e2,Vl),jn(Gh,Gh.current)}function wA(){Vl=e2.current,ss(Gh),ss(e2)}var ic=0,Mt=null,fn=null,vr=null,t2=!1,Ah=!1,Hf=!1,n2=0,Hg=0,$h=null,Hne=0;function ur(){throw Error($e(321))}function SA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qi(t[n],e[n]))return!1;return!0}function TA(t,e,n,r,s,i){return ic=i,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gt.H=t===null||t.memoizedState===null?vz:bz,Hf=!1,i=n(r,s),Hf=!1,Ah&&(i=V9(e,n,r,s)),U9(t),i}function U9(t){gt.H=r2;var e=fn!==null&&fn.next!==null;if(ic=0,vr=fn=Mt=null,t2=!1,Hg=0,$h=null,e)throw Error($e(300));t===null||ns||(t=t.dependencies,t!==null&&Jb(t)&&(ns=!0))}function V9(t,e,n,r){Mt=t;var s=0;do{if(Ah&&($h=null),Hg=0,Ah=!1,25<=s)throw Error($e(301));if(s+=1,vr=fn=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}gt.H=Jne,i=e(n,r)}while(Ah);return i}function qne(){var t=gt.H,e=t.useState()[0];return e=typeof e.then=="function"?jy(e):e,t=t.useState()[0],(fn!==null?fn.memoizedState:null)!==t&&(Mt.flags|=1024),e}function CA(){var t=n2!==0;return n2=0,t}function EA(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function kA(t){if(t2){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}t2=!1}ic=0,vr=fn=Mt=null,Ah=!1,Hg=n2=0,$h=null}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Mt.memoizedState=vr=t:vr=vr.next=t,vr}function Ar(){if(fn===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=vr===null?Mt.memoizedState:vr.next;if(e!==null)vr=e,fn=t;else{if(t===null)throw Mt.alternate===null?Error($e(467)):Error($e(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},vr===null?Mt.memoizedState=vr=t:vr=vr.next=t}return vr}function NA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jy(t){var e=Hg;return Hg+=1,$h===null&&($h=[]),t=z9($h,t,e),e=Mt,(vr===null?e.memoizedState:vr.next)===null&&(e=e.alternate,gt.H=e===null||e.memoizedState===null?vz:bz),t}function rw(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return jy(t);if(t.$$typeof===El)return Ds(t)}throw Error($e(438,String(t)))}function AA(t){var e=null,n=Mt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Mt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=NA(),Mt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=_te;return e.index++,n}function jl(t,e){return typeof e=="function"?e(t):e}function yb(t){var e=Ar();return $A(e,fn,t)}function $A(t,e,n){var r=t.queue;if(r===null)throw Error($e(311));r.lastRenderedReducer=n;var s=t.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}e.baseQueue=s=i,r.pending=null}if(i=t.baseState,s===null)t.memoizedState=i;else{e=s.next;var o=a=null,l=null,u=e,c=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(qt&f)===f:(ic&f)===f){var d=u.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Wh&&(c=!0);else if((ic&d)===d){u=u.next,d===Wh&&(c=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=f,a=i):l=l.next=f,Mt.lanes|=d,oc|=d;f=u.action,Hf&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else d={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=d,a=i):l=l.next=d,Mt.lanes|=f,oc|=f;u=u.next}while(u!==null&&u!==e);if(l===null?a=i:l.next=o,!Qi(i,t.memoizedState)&&(ns=!0,c&&(n=Nh,n!==null)))throw n;t.memoizedState=i,t.baseState=a,t.baseQueue=l,r.lastRenderedState=i}return s===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function q4(t){var e=Ar(),n=e.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Qi(i,e.memoizedState)||(ns=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W9(t,e,n){var r=Mt,s=Ar(),i=Qt;if(i){if(n===void 0)throw Error($e(407));n=n()}else n=e();var a=!Qi((fn||s).memoizedState,n);a&&(s.memoizedState=n,ns=!0),s=s.queue;var o=q9.bind(null,r,s,t);if(Uy(2048,8,o,[t]),s.getSnapshot!==e||a||vr!==null&&vr.memoizedState.tag&1){if(r.flags|=2048,Hh(9,sw(),H9.bind(null,r,s,n,e),null),kn===null)throw Error($e(349));i||ic&124||G9(r,e,n)}return n}function G9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e=NA(),Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H9(t,e,n,r){e.value=n,e.getSnapshot=r,K9(e)&&X9(t)}function q9(t,e,n){return n(function(){K9(e)&&X9(t)})}function K9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qi(t,n)}catch{return!0}}function X9(t){var e=$p(t,2);e!==null&&Yi(e,t,2)}function tE(t){var e=oi();if(typeof t=="function"){var n=t;if(t=n(),Hf){Ru(!0);try{n()}finally{Ru(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e}function Y9(t,e,n,r){return t.baseState=n,$A(t,fn,typeof r=="function"?r:jl)}function Kne(t,e,n,r,s){if(iw(t))throw Error($e(485));if(t=e.action,t!==null){var i={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){i.listeners.push(a)}};gt.T!==null?n(!0):i.isTransition=!1,r(i),n=e.pending,n===null?(i.next=e.pending=i,Z9(e,i)):(i.next=n.next,e.pending=n.next=i)}}function Z9(t,e){var n=e.action,r=e.payload,s=t.state;if(e.isTransition){var i=gt.T,a={};gt.T=a;try{var o=n(s,r),l=gt.S;l!==null&&l(a,o),I6(t,e,o)}catch(u){nE(t,e,u)}finally{gt.T=i}}else try{i=n(s,r),I6(t,e,i)}catch(u){nE(t,e,u)}}function I6(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){_6(t,e,r)},function(r){return nE(t,e,r)}):_6(t,e,n)}function _6(t,e,n){e.status="fulfilled",e.value=n,Q9(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Z9(t,n)))}function nE(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,Q9(e),e=e.next;while(e!==r)}t.action=null}function Q9(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function J9(t,e){return e}function O6(t,e){if(Qt){var n=kn.formState;if(n!==null){e:{var r=Mt;if(Qt){if(er){t:{for(var s=er,i=Fo;s.nodeType!==8;){if(!i){s=null;break t}if(s=ro(s.nextSibling),s===null){s=null;break t}}i=s.data,s=i==="F!"||i==="F"?s:null}if(s){er=ro(s.nextSibling),r=s.data==="F!";break e}}Wf(r)}r=!1}r&&(e=n[0])}}return n=oi(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J9,lastRenderedState:e},n.queue=r,n=mz.bind(null,Mt,r),r.dispatch=n,r=tE(!1),i=DA.bind(null,Mt,!1,r.queue),r=oi(),s={state:e,dispatch:null,action:t,pending:null},r.queue=s,n=Kne.bind(null,Mt,s,i,n),s.dispatch=n,r.memoizedState=t,[e,n,!1]}function D6(t){var e=Ar();return ez(e,fn,t)}function ez(t,e,n){if(e=$A(t,e,J9)[0],t=yb(jl)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=jy(e)}catch(a){throw a===By?nw:a}else r=e;e=Ar();var s=e.queue,i=s.dispatch;return n!==e.memoizedState&&(Mt.flags|=2048,Hh(9,sw(),Xne.bind(null,s,n),null)),[r,i,t]}function Xne(t,e){t.action=e}function R6(t){var e=Ar(),n=fn;if(n!==null)return ez(e,n,t);Ar(),e=e.memoizedState,n=Ar();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Hh(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Mt.updateQueue,e===null&&(e=NA(),Mt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function sw(){return{destroy:void 0,resource:void 0}}function tz(){return Ar().memoizedState}function vb(t,e,n,r){var s=oi();r=r===void 0?null:r,Mt.flags|=t,s.memoizedState=Hh(1|e,sw(),n,r)}function Uy(t,e,n,r){var s=Ar();r=r===void 0?null:r;var i=s.memoizedState.inst;fn!==null&&r!==null&&SA(r,fn.memoizedState.deps)?s.memoizedState=Hh(e,i,n,r):(Mt.flags|=t,s.memoizedState=Hh(1|e,i,n,r))}function P6(t,e){vb(8390656,8,t,e)}function nz(t,e){Uy(2048,8,t,e)}function rz(t,e){return Uy(4,2,t,e)}function sz(t,e){return Uy(4,4,t,e)}function iz(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function az(t,e,n){n=n!=null?n.concat([t]):null,Uy(4,4,iz.bind(null,e,t),n)}function IA(){}function oz(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&SA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lz(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&SA(e,r[1]))return r[0];if(r=t(),Hf){Ru(!0);try{t()}finally{Ru(!1)}}return n.memoizedState=[r,e],r}function _A(t,e,n){return n===void 0||ic&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Qz(),Mt.lanes|=t,oc|=t,n)}function uz(t,e,n,r){return Qi(n,e)?n:Gh.current!==null?(t=_A(t,n,r),Qi(t,e)||(ns=!0),t):ic&42?(t=Qz(),Mt.lanes|=t,oc|=t,e):(ns=!0,t.memoizedState=n)}function cz(t,e,n,r,s){var i=en.p;en.p=i!==0&&8>i?i:8;var a=gt.T,o={};gt.T=o,DA(t,!1,e,n);try{var l=s(),u=gt.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=Gne(l,r);Ag(t,e,c,Xi(t))}else Ag(t,e,r,Xi(t))}catch(f){Ag(t,e,{then:function(){},status:"rejected",reason:f},Xi())}finally{en.p=i,gt.T=a}}function Yne(){}function rE(t,e,n,r){if(t.tag!==5)throw Error($e(476));var s=fz(t).queue;cz(t,s,e,Nf,n===null?Yne:function(){return dz(t),n(r)})}function fz(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Nf,baseState:Nf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:Nf},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function dz(t){var e=fz(t).next.queue;Ag(t,e,{},Xi())}function OA(){return Ds(Zg)}function hz(){return Ar().memoizedState}function pz(){return Ar().memoizedState}function Zne(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Xi();t=Vu(n);var r=Wu(e,t,n);r!==null&&(Yi(r,e,n),Eg(r,e,n)),e={cache:vA()},t.payload=e;return}e=e.return}}function Qne(t,e,n){var r=Xi();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},iw(t)?gz(e,n):(n=pA(t,e,n,r),n!==null&&(Yi(n,t,r),yz(n,e,r)))}function mz(t,e,n){var r=Xi();Ag(t,e,n,r)}function Ag(t,e,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(iw(t))gz(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Qi(o,a))return tw(t,e,s,0),kn===null&&ew(),!1}catch{}finally{}if(n=pA(t,e,s,r),n!==null)return Yi(n,t,r),yz(n,e,r),!0}return!1}function DA(t,e,n,r){if(r={lane:2,revertLane:jA(),action:r,hasEagerState:!1,eagerState:null,next:null},iw(t)){if(e)throw Error($e(479))}else e=pA(t,n,r,2),e!==null&&Yi(e,t,2)}function iw(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function gz(t,e){Ah=t2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yz(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o9(t,n)}}var r2={readContext:Ds,use:rw,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur},vz={readContext:Ds,use:rw,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:Ds,useEffect:P6,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,vb(4194308,4,iz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vb(4194308,4,t,e)},useInsertionEffect:function(t,e){vb(4,2,t,e)},useMemo:function(t,e){var n=oi();e=e===void 0?null:e;var r=t();if(Hf){Ru(!0);try{t()}finally{Ru(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=oi();if(n!==void 0){var s=n(e);if(Hf){Ru(!0);try{n(e)}finally{Ru(!1)}}}else s=e;return r.memoizedState=r.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=Qne.bind(null,Mt,t),[r.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:function(t){t=tE(t);var e=t.queue,n=mz.bind(null,Mt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:IA,useDeferredValue:function(t,e){var n=oi();return _A(n,t,e)},useTransition:function(){var t=tE(!1);return t=cz.bind(null,Mt,t.queue,!0,!1),oi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Mt,s=oi();if(Qt){if(n===void 0)throw Error($e(407));n=n()}else{if(n=e(),kn===null)throw Error($e(349));qt&124||G9(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,P6(q9.bind(null,r,i,t),[t]),r.flags|=2048,Hh(9,sw(),H9.bind(null,r,i,n,e),null),n},useId:function(){var t=oi(),e=kn.identifierPrefix;if(Qt){var n=Nl,r=kl;n=(r&~(1<<32-Ki(r)-1)).toString(32)+n,e="«"+e+"R"+n,n=n2++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=Hne++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:OA,useFormState:O6,useActionState:O6,useOptimistic:function(t){var e=oi();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=DA.bind(null,Mt,!0,n),n.dispatch=e,[t,e]},useMemoCache:AA,useCacheRefresh:function(){return oi().memoizedState=Zne.bind(null,Mt)}},bz={readContext:Ds,use:rw,useCallback:oz,useContext:Ds,useEffect:nz,useImperativeHandle:az,useInsertionEffect:rz,useLayoutEffect:sz,useMemo:lz,useReducer:yb,useRef:tz,useState:function(){return yb(jl)},useDebugValue:IA,useDeferredValue:function(t,e){var n=Ar();return uz(n,fn.memoizedState,t,e)},useTransition:function(){var t=yb(jl)[0],e=Ar().memoizedState;return[typeof t=="boolean"?t:jy(t),e]},useSyncExternalStore:W9,useId:hz,useHostTransitionStatus:OA,useFormState:D6,useActionState:D6,useOptimistic:function(t,e){var n=Ar();return Y9(n,fn,t,e)},useMemoCache:AA,useCacheRefresh:pz},Jne={readContext:Ds,use:rw,useCallback:oz,useContext:Ds,useEffect:nz,useImperativeHandle:az,useInsertionEffect:rz,useLayoutEffect:sz,useMemo:lz,useReducer:q4,useRef:tz,useState:function(){return q4(jl)},useDebugValue:IA,useDeferredValue:function(t,e){var n=Ar();return fn===null?_A(n,t,e):uz(n,fn.memoizedState,t,e)},useTransition:function(){var t=q4(jl)[0],e=Ar().memoizedState;return[typeof t=="boolean"?t:jy(t),e]},useSyncExternalStore:W9,useId:hz,useHostTransitionStatus:OA,useFormState:R6,useActionState:R6,useOptimistic:function(t,e){var n=Ar();return fn!==null?Y9(n,fn,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:AA,useCacheRefresh:pz},Ih=null,qg=0;function dv(t){var e=qg;return qg+=1,Ih===null&&(Ih=[]),z9(Ih,t,e)}function _m(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function hv(t,e){throw e.$$typeof===$te?Error($e(525)):(t=Object.prototype.toString.call(e),Error($e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function M6(t){var e=t._init;return e(t._payload)}function xz(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(y,v){return y=Rl(y,v),y.index=0,y.sibling=null,y}function i(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=67108866,v):b):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,v,b,x){return v===null||v.tag!==6?(v=W4(b,y.mode,x),v.return=y,v):(v=s(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===lh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tu&&M6(w)===v.type)?(v=s(v,b.props),_m(v,b),v.return=y,v):(v=mb(b.type,b.key,b.props,null,y.mode,x),_m(v,b),v.return=y,v)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=G4(b,y.mode,x),v.return=y,v):(v=s(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Af(b,y.mode,x,w),v.return=y,v):(v=s(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=W4(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case iv:return b=mb(v.type,v.key,v.props,null,y.mode,b),_m(b,v),b.return=y,b;case ig:return v=G4(v,y.mode,b),v.return=y,v;case Tu:var x=v._init;return v=x(v._payload),f(y,v,b)}if(ag(v)||Nm(v))return v=Af(v,y.mode,b,null),v.return=y,v;if(typeof v.then=="function")return f(y,dv(v),b);if(v.$$typeof===El)return f(y,cv(y,v),b);hv(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return w!==null?null:o(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case iv:return b.key===w?l(y,v,b,x):null;case ig:return b.key===w?u(y,v,b,x):null;case Tu:return w=b._init,b=w(b._payload),d(y,v,b,x)}if(ag(b)||Nm(b))return w!==null?null:c(y,v,b,x,null);if(typeof b.then=="function")return d(y,v,dv(b),x);if(b.$$typeof===El)return d(y,v,cv(y,b),x);hv(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return y=y.get(b)||null,o(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case iv:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case ig:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Tu:var C=x._init;return x=C(x._payload),h(y,v,b,x,w)}if(ag(x)||Nm(x))return y=y.get(b)||null,c(v,y,x,w,null);if(typeof x.then=="function")return h(y,v,b,dv(x),w);if(x.$$typeof===El)return h(y,v,b,cv(v,x),w);hv(v,x)}return null}function p(y,v,b,x){for(var w=null,C=null,E=v,A=v=0,O=null;E!==null&&A<b.length;A++){E.index>A?(O=E,E=null):O=E.sibling;var R=d(y,E,b[A],x);if(R===null){E===null&&(E=O);break}t&&E&&R.alternate===null&&e(y,E),v=i(R,v,A),C===null?w=R:C.sibling=R,C=R,E=O}if(A===b.length)return n(y,E),Qt&&sf(y,A),w;if(E===null){for(;A<b.length;A++)E=f(y,b[A],x),E!==null&&(v=i(E,v,A),C===null?w=E:C.sibling=E,C=E);return Qt&&sf(y,A),w}for(E=r(E);A<b.length;A++)O=h(E,y,A,b[A],x),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?A:O.key),v=i(O,v,A),C===null?w=O:C.sibling=O,C=O);return t&&E.forEach(function(F){return e(y,F)}),Qt&&sf(y,A),w}function m(y,v,b,x){if(b==null)throw Error($e(151));for(var w=null,C=null,E=v,A=v=0,O=null,R=b.next();E!==null&&!R.done;A++,R=b.next()){E.index>A?(O=E,E=null):O=E.sibling;var F=d(y,E,R.value,x);if(F===null){E===null&&(E=O);break}t&&E&&F.alternate===null&&e(y,E),v=i(F,v,A),C===null?w=F:C.sibling=F,C=F,E=O}if(R.done)return n(y,E),Qt&&sf(y,A),w;if(E===null){for(;!R.done;A++,R=b.next())R=f(y,R.value,x),R!==null&&(v=i(R,v,A),C===null?w=R:C.sibling=R,C=R);return Qt&&sf(y,A),w}for(E=r(E);!R.done;A++,R=b.next())R=h(E,y,A,R.value,x),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?A:R.key),v=i(R,v,A),C===null?w=R:C.sibling=R,C=R);return t&&E.forEach(function(z){return e(y,z)}),Qt&&sf(y,A),w}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===lh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case iv:e:{for(var w=b.key;v!==null;){if(v.key===w){if(w=b.type,w===lh){if(v.tag===7){n(y,v.sibling),x=s(v,b.props.children),x.return=y,y=x;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tu&&M6(w)===v.type){n(y,v.sibling),x=s(v,b.props),_m(x,b),x.return=y,y=x;break e}n(y,v);break}else e(y,v);v=v.sibling}b.type===lh?(x=Af(b.props.children,y.mode,x,b.key),x.return=y,y=x):(x=mb(b.type,b.key,b.props,null,y.mode,x),_m(x,b),x.return=y,y=x)}return a(y);case ig:e:{for(w=b.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),x=s(v,b.children||[]),x.return=y,y=x;break e}else{n(y,v);break}else e(y,v);v=v.sibling}x=G4(b,y.mode,x),x.return=y,y=x}return a(y);case Tu:return w=b._init,b=w(b._payload),g(y,v,b,x)}if(ag(b))return p(y,v,b,x);if(Nm(b)){if(w=Nm(b),typeof w!="function")throw Error($e(150));return b=w.call(b),m(y,v,b,x)}if(typeof b.then=="function")return g(y,v,dv(b),x);if(b.$$typeof===El)return g(y,v,cv(y,b),x);hv(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),x=s(v,b),x.return=y,y=x):(n(y,v),x=W4(b,y.mode,x),x.return=y,y=x),a(y)):n(y,v)}return function(y,v,b,x){try{qg=0;var w=g(y,v,b,x);return Ih=null,w}catch(E){if(E===By||E===nw)throw E;var C=Vi(29,E,null,y.mode);return C.lanes=x,C.return=y,C}finally{}}}var qh=xz(!0),wz=xz(!1),Pa=il(null),Go=null;function $u(t){var e=t.alternate;jn(Lr,Lr.current&1),jn(Pa,t),Go===null&&(e===null||Gh.current!==null||e.memoizedState!==null)&&(Go=t)}function Sz(t){if(t.tag===22){if(jn(Lr,Lr.current),jn(Pa,t),Go===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Go=t)}}else Iu()}function Iu(){jn(Lr,Lr.current),jn(Pa,Pa.current)}function $l(t){ss(Pa),Go===t&&(Go=null),ss(Lr)}var Lr=il(0);function s2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||xE(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function K4(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sE={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xi(),s=Vu(r);s.payload=e,n!=null&&(s.callback=n),e=Wu(t,s,r),e!==null&&(Yi(e,t,r),Eg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xi(),s=Vu(r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wu(t,s,r),e!==null&&(Yi(e,t,r),Eg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xi(),r=Vu(n);r.tag=2,e!=null&&(r.callback=e),e=Wu(t,r,n),e!==null&&(Yi(e,t,n),Eg(e,t,n))}};function F6(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Wg(n,r)||!Wg(s,i):!0}function L6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sE.enqueueReplaceState(e,e.state,null)}function qf(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=Rn({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var i2=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Tz(t){i2(t)}function Cz(t){console.error(t)}function Ez(t){i2(t)}function a2(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function z6(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function iE(t,e,n){return n=Vu(n),n.tag=3,n.payload={element:null},n.callback=function(){a2(t,e)},n}function kz(t){return t=Vu(t),t.tag=3,t}function Nz(t,e,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=r.value;t.payload=function(){return s(i)},t.callback=function(){z6(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){z6(e,n,r),typeof s!="function"&&(Gu===null?Gu=new Set([this]):Gu.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function ere(t,e,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&Ly(e,n,s,!0),n=Pa.current,n!==null){switch(n.tag){case 13:return Go===null?hE():n.alternate===null&&tr===0&&(tr=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ZC?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),iT(t,r,s)),!1;case 22:return n.flags|=65536,r===ZC?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),iT(t,r,s)),!1}throw Error($e(435,n.tag))}return iT(t,r,s),hE(),!1}if(Qt)return e=Pa.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,r!==HC&&(t=Error($e(422),{cause:r}),Gg(Sa(t,n)))):(r!==HC&&(e=Error($e(423),{cause:r}),Gg(Sa(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,r=Sa(r,n),s=iE(t.stateNode,r,s),H4(t,s),tr!==4&&(tr=2)),!1;var i=Error($e(520),{cause:r});if(i=Sa(i,n),_g===null?_g=[i]:_g.push(i),tr!==4&&(tr=2),e===null)return!0;r=Sa(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=iE(n.stateNode,r,t),H4(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Gu===null||!Gu.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,s=kz(s),Nz(s,t,n,r),H4(n,s),!1}n=n.return}while(n!==null);return!1}var Az=Error($e(461)),ns=!1;function gs(t,e,n,r){e.child=t===null?wz(e,null,n,r):qh(e,t.child,n,r)}function B6(t,e,n,r,s){n=n.render;var i=e.ref;if("ref"in r){var a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}else a=r;return Gf(e),r=TA(t,e,n,a,i,s),o=CA(),t!==null&&!ns?(EA(t,e,s),Ul(t,e,s)):(Qt&&o&&gA(e),e.flags|=1,gs(t,e,r,s),e.child)}function j6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mA(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,$z(t,e,i,r,s)):(t=mb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!RA(t,s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wg,n(a,r)&&t.ref===e.ref)return Ul(t,e,s)}return e.flags|=1,t=Rl(i,r),t.ref=e.ref,t.return=e,e.child=t}function $z(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Wg(i,r)&&t.ref===e.ref)if(ns=!1,e.pendingProps=r=i,RA(t,s))t.flags&131072&&(ns=!0);else return e.lanes=t.lanes,Ul(t,e,s)}return aE(t,e,n,r,s)}function Iz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;e.childLanes=i&~r}else e.childLanes=0,e.child=null;return U6(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&gb(e,i!==null?i.cachePool:null),i!==null?$6(e,i):eE(),Sz(e);else return e.lanes=e.childLanes=536870912,U6(t,e,i!==null?i.baseLanes|n:n,n)}else i!==null?(gb(e,i.cachePool),$6(e,i),Iu(),e.memoizedState=null):(t!==null&&gb(e,null),eE(),Iu());return gs(t,e,s,n),e.child}function U6(t,e,n,r){var s=bA();return s=s===null?null:{parent:Mr._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&gb(e,null),eE(),Sz(e),t!==null&&Ly(t,e,r,!0),null}function bb(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error($e(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function aE(t,e,n,r,s){return Gf(e),n=TA(t,e,n,r,void 0,s),r=CA(),t!==null&&!ns?(EA(t,e,s),Ul(t,e,s)):(Qt&&r&&gA(e),e.flags|=1,gs(t,e,n,s),e.child)}function V6(t,e,n,r,s,i){return Gf(e),e.updateQueue=null,n=V9(e,r,n,s),U9(t),r=CA(),t!==null&&!ns?(EA(t,e,i),Ul(t,e,i)):(Qt&&r&&gA(e),e.flags|=1,gs(t,e,n,i),e.child)}function W6(t,e,n,r,s){if(Gf(e),e.stateNode===null){var i=gh,a=n.contextType;typeof a=="object"&&a!==null&&(i=Ds(a)),i=new n(r,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=sE,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=r,i.state=e.memoizedState,i.refs={},xA(e),a=n.contextType,i.context=typeof a=="object"&&a!==null?Ds(a):gh,i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(K4(e,n,a,r),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(a=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),a!==i.state&&sE.enqueueReplaceState(i,i.state,null),Ng(e,r,i,s),kg(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,l=qf(n,o);i.props=l;var u=i.context,c=n.contextType;a=gh,typeof c=="object"&&c!==null&&(a=Ds(c));var f=n.getDerivedStateFromProps;c=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,c||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||u!==a)&&L6(e,i,r,a),Cu=!1;var d=e.memoizedState;i.state=d,Ng(e,r,i,s),kg(),u=e.memoizedState,o||d!==u||Cu?(typeof f=="function"&&(K4(e,n,f,r),u=e.memoizedState),(l=Cu||F6(e,n,l,r,d,u,a))?(c||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=a,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,QC(t,e),a=e.memoizedProps,c=qf(n,a),i.props=c,f=e.pendingProps,d=i.context,u=n.contextType,l=gh,typeof u=="object"&&u!==null&&(l=Ds(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||d!==l)&&L6(e,i,r,l),Cu=!1,d=e.memoizedState,i.state=d,Ng(e,r,i,s),kg();var h=e.memoizedState;a!==f||d!==h||Cu||t!==null&&t.dependencies!==null&&Jb(t.dependencies)?(typeof o=="function"&&(K4(e,n,o,r),h=e.memoizedState),(c=Cu||F6(e,n,c,r,d,h,l)||t!==null&&t.dependencies!==null&&Jb(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,h,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,h,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),i.props=r,i.state=h,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return i=r,bb(t,e),r=(e.flags&128)!==0,i||r?(i=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&r?(e.child=qh(e,t.child,null,s),e.child=qh(e,null,n,s)):gs(t,e,n,s),e.memoizedState=i.state,t=e.child):t=Ul(t,e,s),t}function G6(t,e,n,r){return Fy(),e.flags|=256,gs(t,e,n,r),e.child}var X4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y4(t){return{baseLanes:t,cachePool:F9()}}function Z4(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ca),t}function _z(t,e,n){var r=e.pendingProps,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(Lr.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Qt){if(s?$u(e):Iu(),Qt){var o=er,l;if(l=o){e:{for(l=o,o=Fo;l.nodeType!==8;){if(!o){o=null;break e}if(l=ro(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:$f!==null?{id:kl,overflow:Nl}:null,retryLane:536870912,hydrationErrors:null},l=Vi(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Gs=e,er=null,l=!0):l=!1}l||Wf(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return xE(o)?e.lanes=32:e.lanes=536870912,null;$l(e)}return o=r.children,r=r.fallback,s?(Iu(),s=e.mode,o=o2({mode:"hidden",children:o},s),r=Af(r,s,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,s=e.child,s.memoizedState=Y4(n),s.childLanes=Z4(t,a,n),e.memoizedState=X4,r):($u(e),oE(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(i)e.flags&256?($u(e),e.flags&=-257,e=Q4(t,e,n)):e.memoizedState!==null?(Iu(),e.child=t.child,e.flags|=128,e=null):(Iu(),s=r.fallback,o=e.mode,r=o2({mode:"visible",children:r.children},o),s=Af(s,o,n,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,qh(e,t.child,null,n),r=e.child,r.memoizedState=Y4(n),r.childLanes=Z4(t,a,n),e.memoizedState=X4,e=s);else if($u(e),xE(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,r=Error($e(419)),r.stack="",r.digest=a,Gg({value:r,source:null,stack:null}),e=Q4(t,e,n)}else if(ns||Ly(t,e,n,!1),a=(n&t.childLanes)!==0,ns||a){if(a=kn,a!==null&&(r=n&-n,r=r&42?1:sA(r),r=r&(a.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,$p(t,r),Yi(a,t,r),Az;o.data==="$?"||hE(),e=Q4(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,er=ro(o.nextSibling),Gs=e,Qt=!0,If=null,Fo=!1,t!==null&&(ya[va++]=kl,ya[va++]=Nl,ya[va++]=$f,kl=t.id,Nl=t.overflow,$f=e),e=oE(e,r.children),e.flags|=4096);return e}return s?(Iu(),s=r.fallback,o=e.mode,l=t.child,u=l.sibling,r=Rl(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u!==null?s=Rl(u,s):(s=Af(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o===null?o=Y4(n):(l=o.cachePool,l!==null?(u=Mr._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=F9(),o={baseLanes:o.baseLanes|n,cachePool:l}),s.memoizedState=o,s.childLanes=Z4(t,a,n),e.memoizedState=X4,r):($u(e),n=t.child,t=n.sibling,n=Rl(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function oE(t,e){return e=o2({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function o2(t,e){return t=Vi(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Q4(t,e,n){return qh(e,t.child,null,n),t=oE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),KC(t.return,e,n)}function J4(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Oz(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gs(t,e,r.children,n),r=Lr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H6(t,n,e);else if(t.tag===19)H6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(jn(Lr,r),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&s2(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),J4(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&s2(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}J4(e,!0,n,null,i);break;case"together":J4(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ul(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oc|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ly(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error($e(153));if(e.child!==null){for(t=e.child,n=Rl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RA(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Jb(t)))}function tre(t,e,n){switch(e.tag){case 3:Gb(e,e.stateNode.containerInfo),Au(e,Mr,t.memoizedState.cache),Fy();break;case 27:case 5:MC(e);break;case 4:Gb(e,e.stateNode.containerInfo);break;case 10:Au(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?($u(e),e.flags|=128,null):n&e.child.childLanes?_z(t,e,n):($u(e),t=Ul(t,e,n),t!==null?t.sibling:null);$u(e);break;case 19:var s=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(Ly(t,e,n,!1),r=(n&e.childLanes)!==0),s){if(r)return Oz(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jn(Lr,Lr.current),r)break;return null;case 22:case 23:return e.lanes=0,Iz(t,e,n);case 24:Au(e,Mr,t.memoizedState.cache)}return Ul(t,e,n)}function Dz(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ns=!0;else{if(!RA(t,n)&&!(e.flags&128))return ns=!1,tre(t,e,n);ns=!!(t.flags&131072)}else ns=!1,Qt&&e.flags&1048576&&P9(e,Qb,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,s=r._init;if(r=s(r._payload),e.type=r,typeof r=="function")mA(r)?(t=qf(r,t),e.tag=1,e=W6(null,e,r,t,n)):(e.tag=0,e=aE(null,e,r,t,n));else{if(r!=null){if(s=r.$$typeof,s===tA){e.tag=11,e=B6(null,e,r,t,n);break e}else if(s===nA){e.tag=14,e=j6(null,e,r,t,n);break e}}throw e=RC(r)||r,Error($e(306,e,""))}}return e;case 0:return aE(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,s=qf(r,e.pendingProps),W6(t,e,r,s,n);case 3:e:{if(Gb(e,e.stateNode.containerInfo),t===null)throw Error($e(387));r=e.pendingProps;var i=e.memoizedState;s=i.element,QC(t,e),Ng(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Au(e,Mr,r),r!==i.cache&&XC(e,[Mr],n,!0),kg(),r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=G6(t,e,r,n);break e}else if(r!==s){s=Sa(Error($e(424)),e),Gg(s),e=G6(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(er=ro(t.firstChild),Gs=e,Qt=!0,If=null,Fo=!0,n=wz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Fy(),r===s){e=Ul(t,e,n);break e}gs(t,e,r,n)}e=e.child}return e;case 26:return bb(t,e),t===null?(n=u5(e.type,null,e.pendingProps,null))?e.memoizedState=n:Qt||(n=e.type,t=e.pendingProps,r=p2(Uu.current).createElement(n),r[Os]=e,r[wi]=t,bs(r,n,t),Jr(r),e.stateNode=r):e.memoizedState=u5(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return MC(e),t===null&&Qt&&(r=e.stateNode=bB(e.type,e.pendingProps,Uu.current),Gs=e,Fo=!0,s=er,Ec(e.type)?(wE=s,er=ro(r.firstChild)):er=s),gs(t,e,e.pendingProps.children,n),bb(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Qt&&((s=r=er)&&(r=$re(r,e.type,e.pendingProps,Fo),r!==null?(e.stateNode=r,Gs=e,er=ro(r.firstChild),Fo=!1,s=!0):s=!1),s||Wf(e)),MC(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,r=i.children,vE(s,i)?r=null:a!==null&&vE(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=TA(t,e,qne,null,null,n),Zg._currentValue=s),bb(t,e),gs(t,e,r,n),e.child;case 6:return t===null&&Qt&&((t=n=er)&&(n=Ire(n,e.pendingProps,Fo),n!==null?(e.stateNode=n,Gs=e,er=null,t=!0):t=!1),t||Wf(e)),null;case 13:return _z(t,e,n);case 4:return Gb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qh(e,null,r,n):gs(t,e,r,n),e.child;case 11:return B6(t,e,e.type,e.pendingProps,n);case 7:return gs(t,e,e.pendingProps,n),e.child;case 8:return gs(t,e,e.pendingProps.children,n),e.child;case 12:return gs(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Au(e,e.type,r.value),gs(t,e,r.children,n),e.child;case 9:return s=e.type._context,r=e.pendingProps.children,Gf(e),s=Ds(s),r=r(s),e.flags|=1,gs(t,e,r,n),e.child;case 14:return j6(t,e,e.type,e.pendingProps,n);case 15:return $z(t,e,e.type,e.pendingProps,n);case 19:return Oz(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=o2(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Rl(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Iz(t,e,n);case 24:return Gf(e),r=Ds(Mr),t===null?(s=bA(),s===null&&(s=kn,i=vA(),s.pooledCache=i,i.refCount++,i!==null&&(s.pooledCacheLanes|=n),s=i),e.memoizedState={parent:r,cache:s},xA(e),Au(e,Mr,s)):(t.lanes&n&&(QC(t,e),Ng(e,null,null,n),kg()),s=t.memoizedState,i=e.memoizedState,s.parent!==r?(s={parent:r,cache:r},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Au(e,Mr,r)):(r=i.cache,Au(e,Mr,r),r!==s.cache&&XC(e,[Mr],n,!0))),gs(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error($e(156,e.tag))}function hl(t){t.flags|=4}function q6(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!SB(e)){if(e=Pa.current,e!==null&&((qt&4194048)===qt?Go!==null:(qt&62914560)!==qt&&!(qt&536870912)||e!==Go))throw Cg=ZC,L9;t.flags|=8192}}function pv(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?i9():536870912,t.lanes|=e,Kh|=e)}function Om(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nre(t,e,n){var r=e.pendingProps;switch(yA(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(e),null;case 1:return Kn(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Pl(Mr),jh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Im(e)?hl(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,T6())),Kn(e),null;case 26:return n=e.memoizedState,t===null?(hl(e),n!==null?(Kn(e),q6(e,n)):(Kn(e),e.flags&=-16777217)):n?n!==t.memoizedState?(hl(e),Kn(e),q6(e,n)):(Kn(e),e.flags&=-16777217):(t.memoizedProps!==r&&hl(e),Kn(e),e.flags&=-16777217),null;case 27:Hb(e),n=Uu.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&hl(e);else{if(!r){if(e.stateNode===null)throw Error($e(166));return Kn(e),null}t=Vo.current,Im(e)?w6(e):(t=bB(s,r,n),e.stateNode=t,hl(e))}return Kn(e),null;case 5:if(Hb(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&hl(e);else{if(!r){if(e.stateNode===null)throw Error($e(166));return Kn(e),null}if(t=Vo.current,Im(e))w6(e);else{switch(s=p2(Uu.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?s.createElement(n,{is:r.is}):s.createElement(n)}}t[Os]=e,t[wi]=r;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(bs(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&hl(e)}}return Kn(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&hl(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error($e(166));if(t=Uu.current,Im(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,s=Gs,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}t[Os]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||gB(t.nodeValue,n)),t||Wf(e)}else t=p2(t).createTextNode(r),t[Os]=e,e.stateNode=t}return Kn(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Im(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($e(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($e(317));s[Os]=e}else Fy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kn(e),s=!1}else s=T6(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?($l(e),e):($l(e),null)}if($l(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),pv(e,e.updateQueue),Kn(e),null;case 4:return jh(),t===null&&UA(e.stateNode.containerInfo),Kn(e),null;case 10:return Pl(e.type),Kn(e),null;case 19:if(ss(Lr),s=e.memoizedState,s===null)return Kn(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Om(s,!1);else{if(tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=s2(t),i!==null){for(e.flags|=128,Om(s,!1),t=i.updateQueue,e.updateQueue=t,pv(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)R9(n,t),n=n.sibling;return jn(Lr,Lr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Wo()>u2&&(e.flags|=128,r=!0,Om(s,!1),e.lanes=4194304)}else{if(!r)if(t=s2(i),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,pv(e,t),Om(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Qt)return Kn(e),null}else 2*Wo()-s.renderingStartTime>u2&&n!==536870912&&(e.flags|=128,r=!0,Om(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Wo(),e.sibling=null,t=Lr.current,jn(Lr,r?t&1|2:t&1),e):(Kn(e),null);case 22:case 23:return $l(e),wA(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(Kn(e),e.subtreeFlags&6&&(e.flags|=8192)):Kn(e),n=e.updateQueue,n!==null&&pv(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&ss(_f),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Pl(Mr),Kn(e),null;case 25:return null;case 30:return null}throw Error($e(156,e.tag))}function rre(t,e){switch(yA(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pl(Mr),jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Hb(e),null;case 13:if($l(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($e(340));Fy()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ss(Lr),null;case 4:return jh(),null;case 10:return Pl(e.type),null;case 22:case 23:return $l(e),wA(),t!==null&&ss(_f),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Pl(Mr),null;case 25:return null;default:return null}}function Rz(t,e){switch(yA(e),e.tag){case 3:Pl(Mr),jh();break;case 26:case 27:case 5:Hb(e);break;case 4:jh();break;case 13:$l(e);break;case 19:ss(Lr);break;case 10:Pl(e.type);break;case 22:case 23:$l(e),wA(),t!==null&&ss(_f);break;case 24:Pl(Mr)}}function Vy(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&t)===t){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){yn(e,e.return,o)}}function ac(t,e,n){try{var r=e.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var i=s.next;r=i;do{if((r.tag&t)===t){var a=r.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,s=e;var l=n,u=o;try{u()}catch(c){yn(s,l,c)}}}r=r.next}while(r!==i)}}catch(c){yn(e,e.return,c)}}function Pz(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{j9(e,n)}catch(r){yn(t,t.return,r)}}}function Mz(t,e,n){n.props=qf(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){yn(t,e,r)}}function $g(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(s){yn(t,e,s)}}function Lo(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){yn(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){yn(t,e,s)}else n.current=null}function Fz(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){yn(t,t.return,s)}}function eT(t,e,n){try{var r=t.stateNode;Cre(r,t.type,n,e),r[wi]=e}catch(s){yn(t,t.return,s)}}function Lz(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ec(t.type)||t.tag===4}function tT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ec(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uw));else if(r!==4&&(r===27&&Ec(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(lE(t,e,n),t=t.sibling;t!==null;)lE(t,e,n),t=t.sibling}function l2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Ec(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(l2(t,e,n),t=t.sibling;t!==null;)l2(t,e,n),t=t.sibling}function zz(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);bs(e,r,n),e[Os]=t,e[wi]=n}catch(i){yn(t,t.return,i)}}var wl=!1,fr=!1,nT=!1,K6=typeof WeakSet=="function"?WeakSet:Set,Zr=null;function sre(t,e){if(t=t.containerInfo,gE=v2,t=k9(t),dA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++u===s&&(o=a),d===i&&++c===r&&(l=a),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yE={focusedElem:t,selectionRange:n},v2=!1,Zr=e;Zr!==null;)if(e=Zr,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Zr=t;else for(;Zr!==null;){switch(e=Zr,i=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=qf(n.type,s,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=t}catch(m){yn(n,n.return,m)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)bE(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bE(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error($e(163))}if(t=e.sibling,t!==null){t.return=e.return,Zr=t;break}Zr=e.return}}function Bz(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:bu(t,n),r&4&&Vy(5,n);break;case 1:if(bu(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){yn(n,n.return,a)}else{var s=qf(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){yn(n,n.return,a)}}r&64&&Pz(n),r&512&&$g(n,n.return);break;case 3:if(bu(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{j9(t,e)}catch(a){yn(n,n.return,a)}}break;case 27:e===null&&r&4&&zz(n);case 26:case 5:bu(t,n),e===null&&r&4&&Fz(n),r&512&&$g(n,n.return);break;case 12:bu(t,n);break;case 13:bu(t,n),r&4&&Vz(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=hre.bind(null,n),_re(t,n))));break;case 22:if(r=n.memoizedState!==null||wl,!r){e=e!==null&&e.memoizedState!==null||fr,s=wl;var i=fr;wl=r,(fr=e)&&!i?wu(t,n,(n.subtreeFlags&8772)!==0):bu(t,n),wl=s,fr=i}break;case 30:break;default:bu(t,n)}}function jz(t){var e=t.alternate;e!==null&&(t.alternate=null,jz(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&aA(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fn=null,li=!1;function pl(t,e,n){for(n=n.child;n!==null;)Uz(t,e,n),n=n.sibling}function Uz(t,e,n){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Oy,n)}catch{}switch(n.tag){case 26:fr||Lo(n,e),pl(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:fr||Lo(n,e);var r=Fn,s=li;Ec(n.type)&&(Fn=n.stateNode,li=!1),pl(t,e,n),Dg(n.stateNode),Fn=r,li=s;break;case 5:fr||Lo(n,e);case 6:if(r=Fn,s=li,Fn=null,pl(t,e,n),Fn=r,li=s,Fn!==null)if(li)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(n.stateNode)}catch(i){yn(n,e,i)}else try{Fn.removeChild(n.stateNode)}catch(i){yn(n,e,i)}break;case 18:Fn!==null&&(li?(t=Fn,a5(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ey(t)):a5(Fn,n.stateNode));break;case 4:r=Fn,s=li,Fn=n.stateNode.containerInfo,li=!0,pl(t,e,n),Fn=r,li=s;break;case 0:case 11:case 14:case 15:fr||ac(2,n,e),fr||ac(4,n,e),pl(t,e,n);break;case 1:fr||(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Mz(n,e,r)),pl(t,e,n);break;case 21:pl(t,e,n);break;case 22:fr=(r=fr)||n.memoizedState!==null,pl(t,e,n),fr=r;break;default:pl(t,e,n)}}function Vz(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ey(t)}catch(n){yn(e,e.return,n)}}function ire(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new K6),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new K6),e;default:throw Error($e(435,t.tag))}}function rT(t,e){var n=ire(t);e.forEach(function(r){var s=pre.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}function Pi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Ec(o.type)){Fn=o.stateNode,li=!1;break e}break;case 5:Fn=o.stateNode,li=!1;break e;case 3:case 4:Fn=o.stateNode.containerInfo,li=!0;break e}o=o.return}if(Fn===null)throw Error($e(160));Uz(i,a,s),Fn=null,li=!1,i=s.alternate,i!==null&&(i.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Wz(e,t),e=e.sibling}var Xa=null;function Wz(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Pi(e,t),Mi(t),r&4&&(ac(3,t,t.return),Vy(3,t),ac(5,t,t.return));break;case 1:Pi(e,t),Mi(t),r&512&&(fr||n===null||Lo(n,n.return)),r&64&&wl&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=Xa;if(Pi(e,t),Mi(t),r&512&&(fr||n===null||Lo(n,n.return)),r&4){var i=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":i=s.getElementsByTagName("title")[0],(!i||i[Py]||i[Os]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),bs(i,r,n),i[Os]=t,Jr(i),r=i;break e;case"link":var a=f5("link","href",s).get(r+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(i=a[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}i=s.createElement(r),bs(i,r,n),s.head.appendChild(i);break;case"meta":if(a=f5("meta","content",s).get(r+(n.content||""))){for(o=0;o<a.length;o++)if(i=a[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}i=s.createElement(r),bs(i,r,n),s.head.appendChild(i);break;default:throw Error($e(468,r))}i[Os]=t,Jr(i),r=i}t.stateNode=r}else d5(s,t.type,t.stateNode);else t.stateNode=c5(s,r,t.memoizedProps);else i!==r?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,r===null?d5(s,t.type,t.stateNode):c5(s,r,t.memoizedProps)):r===null&&t.stateNode!==null&&eT(t,t.memoizedProps,n.memoizedProps)}break;case 27:Pi(e,t),Mi(t),r&512&&(fr||n===null||Lo(n,n.return)),n!==null&&r&4&&eT(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Pi(e,t),Mi(t),r&512&&(fr||n===null||Lo(n,n.return)),t.flags&32){s=t.stateNode;try{Vh(s,"")}catch(h){yn(t,t.return,h)}}r&4&&t.stateNode!=null&&(s=t.memoizedProps,eT(t,s,n!==null?n.memoizedProps:s)),r&1024&&(nT=!0);break;case 6:if(Pi(e,t),Mi(t),r&4){if(t.stateNode===null)throw Error($e(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(h){yn(t,t.return,h)}}break;case 3:if(Sb=null,s=Xa,Xa=m2(e.containerInfo),Pi(e,t),Xa=s,Mi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ey(e.containerInfo)}catch(h){yn(t,t.return,h)}nT&&(nT=!1,Gz(t));break;case 4:r=Xa,Xa=m2(t.stateNode.containerInfo),Pi(e,t),Mi(t),Xa=r;break;case 12:Pi(e,t),Mi(t);break;case 13:Pi(e,t),Mi(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zA=Wo()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,rT(t,r)));break;case 22:s=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=wl,c=fr;if(wl=u||s,fr=c||l,Pi(e,t),fr=c,wl=u,Mi(t),r&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||l||wl||fr||af(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(i=l.stateNode,s)a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,d=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(h){yn(l,l.return,h)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(h){yn(l,l.return,h)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,rT(t,n))));break;case 19:Pi(e,t),Mi(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,rT(t,r)));break;case 30:break;case 21:break;default:Pi(e,t),Mi(t)}}function Mi(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(Lz(r)){n=r;break}r=r.return}if(n==null)throw Error($e(160));switch(n.tag){case 27:var s=n.stateNode,i=tT(t);l2(t,i,s);break;case 5:var a=n.stateNode;n.flags&32&&(Vh(a,""),n.flags&=-33);var o=tT(t);l2(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,u=tT(t);lE(t,u,l);break;default:throw Error($e(161))}}catch(c){yn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gz(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Gz(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function bu(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Bz(t,e.alternate,e),e=e.sibling}function af(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ac(4,e,e.return),af(e);break;case 1:Lo(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Mz(e,e.return,n),af(e);break;case 27:Dg(e.stateNode);case 26:case 5:Lo(e,e.return),af(e);break;case 22:e.memoizedState===null&&af(e);break;case 30:af(e);break;default:af(e)}t=t.sibling}}function wu(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,s=t,i=e,a=i.flags;switch(i.tag){case 0:case 11:case 15:wu(s,i,n),Vy(4,i);break;case 1:if(wu(s,i,n),r=i,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){yn(r,r.return,u)}if(r=i,s=r.updateQueue,s!==null){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)B9(l[s],o)}catch(u){yn(r,r.return,u)}}n&&a&64&&Pz(i),$g(i,i.return);break;case 27:zz(i);case 26:case 5:wu(s,i,n),n&&r===null&&a&4&&Fz(i),$g(i,i.return);break;case 12:wu(s,i,n);break;case 13:wu(s,i,n),n&&a&4&&Vz(s,i);break;case 22:i.memoizedState===null&&wu(s,i,n),$g(i,i.return);break;case 30:break;default:wu(s,i,n)}e=e.sibling}}function PA(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&zy(n))}function MA(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zy(t))}function ko(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Hz(t,e,n,r),e=e.sibling}function Hz(t,e,n,r){var s=e.flags;switch(e.tag){case 0:case 11:case 15:ko(t,e,n,r),s&2048&&Vy(9,e);break;case 1:ko(t,e,n,r);break;case 3:ko(t,e,n,r),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zy(t)));break;case 12:if(s&2048){ko(t,e,n,r),t=e.stateNode;try{var i=e.memoizedProps,a=i.id,o=i.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){yn(e,e.return,l)}}else ko(t,e,n,r);break;case 13:ko(t,e,n,r);break;case 23:break;case 22:i=e.stateNode,a=e.alternate,e.memoizedState!==null?i._visibility&2?ko(t,e,n,r):Ig(t,e):i._visibility&2?ko(t,e,n,r):(i._visibility|=2,nh(t,e,n,r,(e.subtreeFlags&10256)!==0)),s&2048&&PA(a,e);break;case 24:ko(t,e,n,r),s&2048&&MA(e.alternate,e);break;default:ko(t,e,n,r)}}function nh(t,e,n,r,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var i=t,a=e,o=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:nh(i,a,o,l,s),Vy(8,a);break;case 23:break;case 22:var c=a.stateNode;a.memoizedState!==null?c._visibility&2?nh(i,a,o,l,s):Ig(i,a):(c._visibility|=2,nh(i,a,o,l,s)),s&&u&2048&&PA(a.alternate,a);break;case 24:nh(i,a,o,l,s),s&&u&2048&&MA(a.alternate,a);break;default:nh(i,a,o,l,s)}e=e.sibling}}function Ig(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,s=r.flags;switch(r.tag){case 22:Ig(n,r),s&2048&&PA(r.alternate,r);break;case 24:Ig(n,r),s&2048&&MA(r.alternate,r);break;default:Ig(n,r)}e=e.sibling}}var lg=8192;function Wd(t){if(t.subtreeFlags&lg)for(t=t.child;t!==null;)qz(t),t=t.sibling}function qz(t){switch(t.tag){case 26:Wd(t),t.flags&lg&&t.memoizedState!==null&&Wre(Xa,t.memoizedState,t.memoizedProps);break;case 5:Wd(t);break;case 3:case 4:var e=Xa;Xa=m2(t.stateNode.containerInfo),Wd(t),Xa=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=lg,lg=16777216,Wd(t),lg=e):Wd(t));break;default:Wd(t)}}function Kz(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Dm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Zr=r,Yz(r,t)}Kz(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xz(t),t=t.sibling}function Xz(t){switch(t.tag){case 0:case 11:case 15:Dm(t),t.flags&2048&&ac(9,t,t.return);break;case 3:Dm(t);break;case 12:Dm(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,xb(t)):Dm(t);break;default:Dm(t)}}function xb(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Zr=r,Yz(r,t)}Kz(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ac(8,e,e.return),xb(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,xb(e));break;default:xb(e)}t=t.sibling}}function Yz(t,e){for(;Zr!==null;){var n=Zr;switch(n.tag){case 0:case 11:case 15:ac(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:zy(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Zr=r;else e:for(n=t;Zr!==null;){r=Zr;var s=r.sibling,i=r.return;if(jz(r),r===n){Zr=null;break e}if(s!==null){s.return=i,Zr=s;break e}Zr=i}}}var are={getCacheForType:function(t){var e=Ds(Mr),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},ore=typeof WeakMap=="function"?WeakMap:Map,on=0,kn=null,zt=null,qt=0,sn=0,Bi=null,Mu=!1,Ip=!1,FA=!1,Vl=0,tr=0,oc=0,Of=0,LA=0,Ca=0,Kh=0,_g=null,ci=null,uE=!1,zA=0,u2=1/0,c2=null,Gu=null,vs=0,Hu=null,Xh=null,_h=0,cE=0,fE=null,Zz=null,Og=0,dE=null;function Xi(){if(on&2&&qt!==0)return qt&-qt;if(gt.T!==null){var t=Wh;return t!==0?t:jA()}return l9()}function Qz(){Ca===0&&(Ca=!(qt&536870912)||Qt?s9():536870912);var t=Pa.current;return t!==null&&(t.flags|=32),Ca}function Yi(t,e,n){(t===kn&&(sn===2||sn===9)||t.cancelPendingCommit!==null)&&(Yh(t,0),Fu(t,qt,Ca,!1)),Ry(t,n),(!(on&2)||t!==kn)&&(t===kn&&(!(on&2)&&(Of|=n),tr===4&&Fu(t,qt,Ca,!1)),al(t))}function Jz(t,e,n){if(on&6)throw Error($e(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Dy(t,e),s=r?cre(t,e):sT(t,e,!0),i=r;do{if(s===0){Ip&&!r&&Fu(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!lre(n)){s=sT(t,e,!1),i=!1;continue}if(s===2){if(i=e,t.errorRecoveryDisabledLanes&i)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;s=_g;var l=o.current.memoizedState.isDehydrated;if(l&&(Yh(o,a).flags|=256),a=sT(o,a,!1),a!==2){if(FA&&!l){o.errorRecoveryDisabledLanes|=i,Of|=i,s=4;break e}i=ci,ci=s,i!==null&&(ci===null?ci=i:ci.push.apply(ci,i))}s=a}if(i=!1,s!==2)continue}}if(s===1){Yh(t,0),Fu(t,e,0,!0);break}e:{switch(r=t,i=s,i){case 0:case 1:throw Error($e(345));case 4:if((e&4194048)!==e)break;case 6:Fu(r,e,Ca,!Mu);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error($e(329))}if((e&62914560)===e&&(s=zA+300-Wo(),10<s)){if(Fu(r,e,Ca,!Mu),Yx(r,0,!0)!==0)break e;r.timeoutHandle=vB(X6.bind(null,r,n,ci,c2,uE,e,Ca,Of,Kh,Mu,i,2,-0,0),s);break e}X6(r,n,ci,c2,uE,e,Ca,Of,Kh,Mu,i,0,-0,0)}}break}while(!0);al(t)}function X6(t,e,n,r,s,i,a,o,l,u,c,f,d,h){if(t.timeoutHandle=-1,f=e.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Yg={stylesheets:null,count:0,unsuspend:Vre},qz(e),f=Gre(),f!==null)){t.cancelPendingCommit=f(Z6.bind(null,t,e,i,n,r,s,a,o,l,c,1,d,h)),Fu(t,i,a,!u);return}Z6(t,e,i,n,r,s,a,o,l)}function lre(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qi(i(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fu(t,e,n,r){e&=~LA,e&=~Of,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var s=e;0<s;){var i=31-Ki(s),a=1<<i;r[i]=-1,s&=~a}n!==0&&a9(t,n,e)}function aw(){return on&6?!0:(Wy(0),!1)}function BA(){if(zt!==null){if(sn===0)var t=zt.return;else t=zt,Al=xd=null,kA(t),Ih=null,qg=0,t=zt;for(;t!==null;)Rz(t.alternate,t),t=t.return;zt=null}}function Yh(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,kre(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),BA(),kn=t,zt=n=Rl(t.current,null),qt=e,sn=0,Bi=null,Mu=!1,Ip=Dy(t,e),FA=!1,Kh=Ca=LA=Of=oc=tr=0,ci=_g=null,uE=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var s=31-Ki(r),i=1<<s;e|=t[s],r&=~i}return Vl=e,ew(),n}function eB(t,e){Mt=null,gt.H=r2,e===By||e===nw?(e=N6(),sn=3):e===L9?(e=N6(),sn=4):sn=e===Az?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Bi=e,zt===null&&(tr=1,a2(t,Sa(e,t.current)))}function tB(){var t=gt.H;return gt.H=r2,t===null?r2:t}function nB(){var t=gt.A;return gt.A=are,t}function hE(){tr=4,Mu||(qt&4194048)!==qt&&Pa.current!==null||(Ip=!0),!(oc&134217727)&&!(Of&134217727)||kn===null||Fu(kn,qt,Ca,!1)}function sT(t,e,n){var r=on;on|=2;var s=tB(),i=nB();(kn!==t||qt!==e)&&(c2=null,Yh(t,e)),e=!1;var a=tr;e:do try{if(sn!==0&&zt!==null){var o=zt,l=Bi;switch(sn){case 8:BA(),a=6;break e;case 3:case 2:case 9:case 6:Pa.current===null&&(e=!0);var u=sn;if(sn=0,Bi=null,bh(t,o,l,u),n&&Ip){a=0;break e}break;default:u=sn,sn=0,Bi=null,bh(t,o,l,u)}}ure(),a=tr;break}catch(c){eB(t,c)}while(!0);return e&&t.shellSuspendCounter++,Al=xd=null,on=r,gt.H=s,gt.A=i,zt===null&&(kn=null,qt=0,ew()),a}function ure(){for(;zt!==null;)rB(zt)}function cre(t,e){var n=on;on|=2;var r=tB(),s=nB();kn!==t||qt!==e?(c2=null,u2=Wo()+500,Yh(t,e)):Ip=Dy(t,e);e:do try{if(sn!==0&&zt!==null){e=zt;var i=Bi;t:switch(sn){case 1:sn=0,Bi=null,bh(t,e,i,1);break;case 2:case 9:if(k6(i)){sn=0,Bi=null,Y6(e);break}e=function(){sn!==2&&sn!==9||kn!==t||(sn=7),al(t)},i.then(e,e);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:k6(i)?(sn=0,Bi=null,Y6(e)):(sn=0,Bi=null,bh(t,e,i,7));break;case 5:var a=null;switch(zt.tag){case 26:a=zt.memoizedState;case 5:case 27:var o=zt;if(!a||SB(a)){sn=0,Bi=null;var l=o.sibling;if(l!==null)zt=l;else{var u=o.return;u!==null?(zt=u,ow(u)):zt=null}break t}}sn=0,Bi=null,bh(t,e,i,5);break;case 6:sn=0,Bi=null,bh(t,e,i,6);break;case 8:BA(),tr=6;break e;default:throw Error($e(462))}}fre();break}catch(c){eB(t,c)}while(!0);return Al=xd=null,gt.H=r,gt.A=s,on=n,zt!==null?0:(kn=null,qt=0,ew(),tr)}function fre(){for(;zt!==null&&!Dte();)rB(zt)}function rB(t){var e=Dz(t.alternate,t,Vl);t.memoizedProps=t.pendingProps,e===null?ow(t):zt=e}function Y6(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=V6(n,e,e.pendingProps,e.type,void 0,qt);break;case 11:e=V6(n,e,e.pendingProps,e.type.render,e.ref,qt);break;case 5:kA(e);default:Rz(n,e),e=zt=R9(e,Vl),e=Dz(n,e,Vl)}t.memoizedProps=t.pendingProps,e===null?ow(t):zt=e}function bh(t,e,n,r){Al=xd=null,kA(e),Ih=null,qg=0;var s=e.return;try{if(ere(t,s,e,n,qt)){tr=1,a2(t,Sa(n,t.current)),zt=null;return}}catch(i){if(s!==null)throw zt=s,i;tr=1,a2(t,Sa(n,t.current)),zt=null;return}e.flags&32768?(Qt||r===1?t=!0:Ip||qt&536870912?t=!1:(Mu=t=!0,(r===2||r===9||r===3||r===6)&&(r=Pa.current,r!==null&&r.tag===13&&(r.flags|=16384))),sB(e,t)):ow(e)}function ow(t){var e=t;do{if(e.flags&32768){sB(e,Mu);return}t=e.return;var n=nre(e.alternate,e,Vl);if(n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);tr===0&&(tr=5)}function sB(t,e){do{var n=rre(t.alternate,t);if(n!==null){n.flags&=32767,zt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){zt=t;return}zt=t=n}while(t!==null);tr=6,zt=null}function Z6(t,e,n,r,s,i,a,o,l){t.cancelPendingCommit=null;do lw();while(vs!==0);if(on&6)throw Error($e(327));if(e!==null){if(e===t.current)throw Error($e(177));if(i=e.lanes|e.childLanes,i|=hA,Vte(t,n,i,a,o,l),t===kn&&(zt=kn=null,qt=0),Xh=e,Hu=t,_h=n,cE=i,fE=s,Zz=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,mre(qb,function(){return uB(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=gt.T,gt.T=null,s=en.p,en.p=2,a=on,on|=4;try{sre(t,e,n)}finally{on=a,en.p=s,gt.T=r}}vs=1,iB(),aB(),oB()}}function iB(){if(vs===1){vs=0;var t=Hu,e=Xh,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=gt.T,gt.T=null;var r=en.p;en.p=2;var s=on;on|=4;try{Wz(e,t);var i=yE,a=k9(t.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&E9(o.ownerDocument.documentElement,o)){if(l!==null&&dA(o)){var u=l.start,c=l.end;if(c===void 0&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var f=o.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var h=d.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=l.end===void 0?m:Math.min(l.end,p);!h.extend&&m>g&&(a=g,g=m,m=a);var y=v6(o,m),v=v6(o,g);if(y&&v&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var b=f.createRange();b.setStart(y.node,y.offset),h.removeAllRanges(),m>g?(h.addRange(b),h.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),h.addRange(b))}}}}for(f=[],h=o;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var x=f[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}v2=!!gE,yE=gE=null}finally{on=s,en.p=r,gt.T=n}}t.current=e,vs=2}}function aB(){if(vs===2){vs=0;var t=Hu,e=Xh,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=gt.T,gt.T=null;var r=en.p;en.p=2;var s=on;on|=4;try{Bz(t,e.alternate,e)}finally{on=s,en.p=r,gt.T=n}}vs=3}}function oB(){if(vs===4||vs===3){vs=0,Rte();var t=Hu,e=Xh,n=_h,r=Zz;e.subtreeFlags&10256||e.flags&10256?vs=5:(vs=0,Xh=Hu=null,lB(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(Gu=null),iA(n),e=e.stateNode,qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Oy,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=gt.T,s=en.p,en.p=2,gt.T=null;try{for(var i=t.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{gt.T=e,en.p=s}}_h&3&&lw(),al(t),s=t.pendingLanes,n&4194090&&s&42?t===dE?Og++:(Og=0,dE=t):Og=0,Wy(0)}}function lB(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,zy(e)))}function lw(t){return iB(),aB(),oB(),uB()}function uB(){if(vs!==5)return!1;var t=Hu,e=cE;cE=0;var n=iA(_h),r=gt.T,s=en.p;try{en.p=32>n?32:n,gt.T=null,n=fE,fE=null;var i=Hu,a=_h;if(vs=0,Xh=Hu=null,_h=0,on&6)throw Error($e(331));var o=on;if(on|=4,Xz(i.current),Hz(i,i.current,a,n),on=o,Wy(0,!1),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Oy,i)}catch{}return!0}finally{en.p=s,gt.T=r,lB(t,e)}}function Q6(t,e,n){e=Sa(n,e),e=iE(t.stateNode,e,2),t=Wu(t,e,2),t!==null&&(Ry(t,2),al(t))}function yn(t,e,n){if(t.tag===3)Q6(t,t,n);else for(;e!==null;){if(e.tag===3){Q6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gu===null||!Gu.has(r))){t=Sa(n,t),n=kz(2),r=Wu(e,n,2),r!==null&&(Nz(n,r,e,t),Ry(r,2),al(r));break}}e=e.return}}function iT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ore;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(FA=!0,s.add(n),t=dre.bind(null,t,e,n),e.then(t,t))}function dre(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,kn===t&&(qt&n)===n&&(tr===4||tr===3&&(qt&62914560)===qt&&300>Wo()-zA?!(on&2)&&Yh(t,0):LA|=n,Kh===qt&&(Kh=0)),al(t)}function cB(t,e){e===0&&(e=i9()),t=$p(t,e),t!==null&&(Ry(t,e),al(t))}function hre(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cB(t,n)}function pre(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error($e(314))}r!==null&&r.delete(e),cB(t,n)}function mre(t,e){return rA(t,e)}var f2=null,rh=null,pE=!1,d2=!1,aT=!1,Df=0;function al(t){t!==rh&&t.next===null&&(rh===null?f2=rh=t:rh=rh.next=t),d2=!0,pE||(pE=!0,yre())}function Wy(t,e){if(!aT&&d2){aT=!0;do for(var n=!1,r=f2;r!==null;){if(t!==0){var s=r.pendingLanes;if(s===0)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-Ki(42|t)+1)-1,i&=s&~(a&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,J6(r,i))}else i=qt,i=Yx(r,r===kn?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(i&3)||Dy(r,i)||(n=!0,J6(r,i));r=r.next}while(n);aT=!1}}function gre(){fB()}function fB(){d2=pE=!1;var t=0;Df!==0&&(Ere()&&(t=Df),Df=0);for(var e=Wo(),n=null,r=f2;r!==null;){var s=r.next,i=dB(r,e);i===0?(r.next=null,n===null?f2=s:n.next=s,s===null&&(rh=n)):(n=r,(t!==0||i&3)&&(d2=!0)),r=s}Wy(t)}function dB(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var a=31-Ki(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=Ute(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}if(e=kn,n=qt,n=Yx(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(sn===2||sn===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&O4(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Dy(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&O4(r),iA(n)){case 2:case 8:n=n9;break;case 32:n=qb;break;case 268435456:n=r9;break;default:n=qb}return r=hB.bind(null,t),n=rA(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&O4(r),t.callbackPriority=2,t.callbackNode=null,2}function hB(t,e){if(vs!==0&&vs!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(lw()&&t.callbackNode!==n)return null;var r=qt;return r=Yx(t,t===kn?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Jz(t,r,e),dB(t,Wo()),t.callbackNode!=null&&t.callbackNode===n?hB.bind(null,t):null)}function J6(t,e){if(lw())return null;Jz(t,e,!0)}function yre(){Nre(function(){on&6?rA(t9,gre):fB()})}function jA(){return Df===0&&(Df=s9()),Df}function e5(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:db(""+t)}function t5(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function vre(t,e,n,r,s){if(e==="submit"&&n&&n.stateNode===s){var i=e5((s[wi]||null).action),a=r.submitter;a&&(e=(e=a[wi]||null)?e5(e.formAction):a.getAttribute("formAction"),e!==null&&(i=e,a=null));var o=new Zx("action","action",null,r,s);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Df!==0){var l=a?t5(s,a):new FormData(s);rE(n,{pending:!0,data:l,method:s.method,action:i},null,l)}}else typeof i=="function"&&(o.preventDefault(),l=a?t5(s,a):new FormData(s),rE(n,{pending:!0,data:l,method:s.method,action:i},i,l))},currentTarget:s}]})}}for(var oT=0;oT<GC.length;oT++){var lT=GC[oT],bre=lT.toLowerCase(),xre=lT[0].toUpperCase()+lT.slice(1);mo(bre,"on"+xre)}mo(A9,"onAnimationEnd");mo($9,"onAnimationIteration");mo(I9,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(Fne,"onTransitionRun");mo(Lne,"onTransitionStart");mo(zne,"onTransitionCancel");mo(_9,"onTransitionEnd");Uh("onMouseEnter",["mouseout","mouseover"]);Uh("onMouseLeave",["mouseout","mouseover"]);Uh("onPointerEnter",["pointerout","pointerover"]);Uh("onPointerLeave",["pointerout","pointerover"]);yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wre=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kg));function pB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=u;try{i(s)}catch(c){i2(c)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=u;try{i(s)}catch(c){i2(c)}s.currentTarget=null,i=l}}}}function Lt(t,e){var n=e[LC];n===void 0&&(n=e[LC]=new Set);var r=t+"__bubble";n.has(r)||(mB(e,t,2,!1),n.add(r))}function uT(t,e,n){var r=0;e&&(r|=4),mB(n,t,r,e)}var mv="_reactListening"+Math.random().toString(36).slice(2);function UA(t){if(!t[mv]){t[mv]=!0,u9.forEach(function(n){n!=="selectionchange"&&(wre.has(n)||uT(n,!1,t),uT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mv]||(e[mv]=!0,uT("selectionchange",!1,e))}}function mB(t,e,n,r){switch(NB(e)){case 2:var s=Kre;break;case 8:s=Xre;break;default:s=HA}n=s.bind(null,e,n,t),s=void 0,!UC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cT(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;o!==null;){if(a=ch(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){r=i=a;continue e}o=o.parentNode}}r=r.return}y9(function(){var u=i,c=lA(n),f=[];e:{var d=O9.get(t);if(d!==void 0){var h=Zx,p=t;switch(t){case"keypress":if(pb(n)===0)break e;case"keydown":case"keyup":h=mne;break;case"focusin":p="focus",h=B4;break;case"focusout":p="blur",h=B4;break;case"beforeblur":case"afterblur":h=B4;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=l6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=rne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=vne;break;case A9:case $9:case I9:h=ane;break;case _9:h=xne;break;case"scroll":case"scrollend":h=tne;break;case"wheel":h=Sne;break;case"copy":case"cut":case"paste":h=lne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=c6;break;case"toggle":case"beforetoggle":h=Cne}var m=(e&4)!==0,g=!m&&(t==="scroll"||t==="scrollend"),y=m?d!==null?d+"Capture":null:d;m=[];for(var v=u,b;v!==null;){var x=v;if(b=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||b===null||y===null||(x=Ug(v,y),x!=null&&m.push(Xg(v,x,b))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==jC&&(p=n.relatedTarget||n.fromElement)&&(ch(p)||p[Np]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?ch(p):null,p!==null&&(g=_y(p),m=p.tag,p!==g||m!==5&&m!==27&&m!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=l6,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=c6,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:og(h),b=p==null?d:og(p),d=new m(x,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,x=null,ch(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Gd(b))v++;for(b=0,x=y;x;x=Gd(x))b++;for(;0<v-b;)m=Gd(m),v--;for(;0<b-v;)y=Gd(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Gd(m),y=Gd(y)}m=null}else m=null;h!==null&&n5(f,d,h,m,!1),p!==null&&g!==null&&n5(f,g,p,m,!0)}}e:{if(d=u?og(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=p6;else if(h6(d))if(T9)w=Rne;else{w=One;var C=_ne}else h=d.nodeName,!h||h.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?u&&oA(u.elementType)&&(w=p6):w=Dne;if(w&&(w=w(t,u))){S9(f,w,n,c);break e}C&&C(t,d,u),t==="focusout"&&u&&d.type==="number"&&u.memoizedProps.value!=null&&BC(d,"number",d.value)}switch(C=u?og(u):window,t){case"focusin":(h6(C)||C.contentEditable==="true")&&(hh=C,VC=u,Sg=null);break;case"focusout":Sg=VC=hh=null;break;case"mousedown":WC=!0;break;case"contextmenu":case"mouseup":case"dragend":WC=!1,b6(f,n,c);break;case"selectionchange":if(Mne)break;case"keydown":case"keyup":b6(f,n,c)}var E;if(fA)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else dh?x9(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(b9&&n.locale!=="ko"&&(dh||A!=="onCompositionStart"?A==="onCompositionEnd"&&dh&&(E=v9()):(Pu=c,uA="value"in Pu?Pu.value:Pu.textContent,dh=!0)),C=h2(u,A),0<C.length&&(A=new u6(A,t,null,n,c),f.push({event:A,listeners:C}),E?A.data=E:(E=w9(n),E!==null&&(A.data=E)))),(E=kne?Nne(t,n):Ane(t,n))&&(A=h2(u,"onBeforeInput"),0<A.length&&(C=new u6("onBeforeInput","beforeinput",null,n,c),f.push({event:C,listeners:A}),C.data=E)),vre(f,t,u,n,c)}pB(f,e)})}function Xg(t,e,n){return{instance:t,listener:e,currentTarget:n}}function h2(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||i===null||(s=Ug(t,n),s!=null&&r.unshift(Xg(t,s,i)),s=Ug(t,e),s!=null&&r.push(Xg(t,s,i))),t.tag===3)return r;t=t.return}return[]}function Gd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n5(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===r)break;o!==5&&o!==26&&o!==27||u===null||(l=u,s?(u=Ug(n,i),u!=null&&a.unshift(Xg(n,u,l))):s||(u=Ug(n,i),u!=null&&a.push(Xg(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Sre=/\r\n?/g,Tre=/\u0000|\uFFFD/g;function r5(t){return(typeof t=="string"?t:""+t).replace(Sre,`
`).replace(Tre,"")}function gB(t,e){return e=r5(e),r5(t)===e}function uw(){}function cn(t,e,n,r,s,i){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Vh(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Vh(t,""+r);break;case"className":lv(t,"class",r);break;case"tabIndex":lv(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lv(t,n,r);break;case"style":g9(t,r,i);break;case"data":if(e!=="object"){lv(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=db(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&cn(t,e,"name",s.name,s,null),cn(t,e,"formEncType",s.formEncType,s,null),cn(t,e,"formMethod",s.formMethod,s,null),cn(t,e,"formTarget",s.formTarget,s,null)):(cn(t,e,"encType",s.encType,s,null),cn(t,e,"method",s.method,s,null),cn(t,e,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=db(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=uw);break;case"onScroll":r!=null&&Lt("scroll",t);break;case"onScrollEnd":r!=null&&Lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error($e(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error($e(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=db(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Lt("beforetoggle",t),Lt("toggle",t),fb(t,"popover",r);break;case"xlinkActuate":dl(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":dl(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":dl(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":dl(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":dl(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":dl(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":dl(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":dl(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":dl(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":fb(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Jte.get(n)||n,fb(t,n,r))}}function mE(t,e,n,r,s,i){switch(n){case"style":g9(t,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error($e(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error($e(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Vh(t,r):(typeof r=="number"||typeof r=="bigint")&&Vh(t,""+r);break;case"onScroll":r!=null&&Lt("scroll",t);break;case"onScrollEnd":r!=null&&Lt("scrollend",t);break;case"onClick":r!=null&&(t.onclick=uw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!c9.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),i=t[wi]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,s),typeof r=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,s);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):fb(t,n,r)}}}function bs(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",t),Lt("load",t);var r=!1,s=!1,i;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a!=null)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error($e(137,e));default:cn(t,e,i,a,n,null)}}s&&cn(t,e,"srcSet",n.srcSet,n,null),r&&cn(t,e,"src",n.src,n,null);return;case"input":Lt("invalid",t);var o=i=a=s=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var c=n[r];if(c!=null)switch(r){case"name":s=c;break;case"type":a=c;break;case"checked":l=c;break;case"defaultChecked":u=c;break;case"value":i=c;break;case"defaultValue":o=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error($e(137,e));break;default:cn(t,e,r,c,n,null)}}h9(t,i,o,l,u,a,s,!1),Kb(t);return;case"select":Lt("invalid",t),r=a=i=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":a=o;break;case"multiple":r=o;default:cn(t,e,s,o,n,null)}e=i,n=a,t.multiple=!!r,e!=null?Eh(t,!!r,e,!1):n!=null&&Eh(t,!!r,n,!0);return;case"textarea":Lt("invalid",t),i=s=r=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":r=o;break;case"defaultValue":s=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error($e(91));break;default:cn(t,e,a,o,n,null)}m9(t,r,s,i),Kb(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:cn(t,e,l,r,n,null)}return;case"dialog":Lt("beforetoggle",t),Lt("toggle",t),Lt("cancel",t),Lt("close",t);break;case"iframe":case"object":Lt("load",t);break;case"video":case"audio":for(r=0;r<Kg.length;r++)Lt(Kg[r],t);break;case"image":Lt("error",t),Lt("load",t);break;case"details":Lt("toggle",t);break;case"embed":case"source":case"link":Lt("error",t),Lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error($e(137,e));default:cn(t,e,u,r,n,null)}return;default:if(oA(e)){for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!==void 0&&mE(t,e,c,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&cn(t,e,o,r,n,null))}function Cre(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,a=null,o=null,l=null,u=null,c=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&f!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=f;default:r.hasOwnProperty(h)||cn(t,e,h,null,r,f)}}for(var d in r){var h=r[d];if(f=n[d],r.hasOwnProperty(d)&&(h!=null||f!=null))switch(d){case"type":i=h;break;case"name":s=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error($e(137,e));break;default:h!==f&&cn(t,e,d,h,r,f)}}zC(t,a,o,l,u,c,i,s);return;case"select":h=a=o=d=null;for(i in n)if(l=n[i],n.hasOwnProperty(i)&&l!=null)switch(i){case"value":break;case"multiple":h=l;default:r.hasOwnProperty(i)||cn(t,e,i,null,r,l)}for(s in r)if(i=r[s],l=n[s],r.hasOwnProperty(s)&&(i!=null||l!=null))switch(s){case"value":d=i;break;case"defaultValue":o=i;break;case"multiple":a=i;default:i!==l&&cn(t,e,s,i,r,l)}e=o,n=a,r=h,d!=null?Eh(t,!!n,d,!1):!!r!=!!n&&(e!=null?Eh(t,!!n,e,!0):Eh(t,!!n,n?[]:"",!1));return;case"textarea":h=d=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:cn(t,e,o,null,r,s)}for(a in r)if(s=r[a],i=n[a],r.hasOwnProperty(a)&&(s!=null||i!=null))switch(a){case"value":d=s;break;case"defaultValue":h=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error($e(91));break;default:s!==i&&cn(t,e,a,s,r,i)}p9(t,d,h);return;case"option":for(var p in n)if(d=n[p],n.hasOwnProperty(p)&&d!=null&&!r.hasOwnProperty(p))switch(p){case"selected":t.selected=!1;break;default:cn(t,e,p,null,r,d)}for(l in r)if(d=r[l],h=n[l],r.hasOwnProperty(l)&&d!==h&&(d!=null||h!=null))switch(l){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:cn(t,e,l,d,r,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)d=n[m],n.hasOwnProperty(m)&&d!=null&&!r.hasOwnProperty(m)&&cn(t,e,m,null,r,d);for(u in r)if(d=r[u],h=n[u],r.hasOwnProperty(u)&&d!==h&&(d!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error($e(137,e));break;default:cn(t,e,u,d,r,h)}return;default:if(oA(e)){for(var g in n)d=n[g],n.hasOwnProperty(g)&&d!==void 0&&!r.hasOwnProperty(g)&&mE(t,e,g,void 0,r,d);for(c in r)d=r[c],h=n[c],!r.hasOwnProperty(c)||d===h||d===void 0&&h===void 0||mE(t,e,c,d,r,h);return}}for(var y in n)d=n[y],n.hasOwnProperty(y)&&d!=null&&!r.hasOwnProperty(y)&&cn(t,e,y,null,r,d);for(f in r)d=r[f],h=n[f],!r.hasOwnProperty(f)||d===h||d==null&&h==null||cn(t,e,f,d,r,h)}var gE=null,yE=null;function p2(t){return t.nodeType===9?t:t.ownerDocument}function s5(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yB(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function vE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fT=null;function Ere(){var t=window.event;return t&&t.type==="popstate"?t===fT?!1:(fT=t,!0):(fT=null,!1)}var vB=typeof setTimeout=="function"?setTimeout:void 0,kre=typeof clearTimeout=="function"?clearTimeout:void 0,i5=typeof Promise=="function"?Promise:void 0,Nre=typeof queueMicrotask=="function"?queueMicrotask:typeof i5<"u"?function(t){return i5.resolve(null).then(t).catch(Are)}:vB;function Are(t){setTimeout(function(){throw t})}function Ec(t){return t==="head"}function a5(t,e){var n=e,r=0,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<r&&8>r){n=r;var a=t.ownerDocument;if(n&1&&Dg(a.documentElement),n&2&&Dg(a.body),n&4)for(n=a.head,Dg(n),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Py]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(s===0){t.removeChild(i),ey(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);ey(e)}function bE(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bE(n),aA(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function $re(t,e,n,r){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Py])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=ro(t.nextSibling),t===null)break}return null}function Ire(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ro(t.nextSibling),t===null))return null;return t}function xE(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function _re(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var wE=null;function o5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function bB(t,e,n){switch(e=p2(n),t){case"html":if(t=e.documentElement,!t)throw Error($e(452));return t;case"head":if(t=e.head,!t)throw Error($e(453));return t;case"body":if(t=e.body,!t)throw Error($e(454));return t;default:throw Error($e(451))}}function Dg(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);aA(t)}var Ma=new Map,l5=new Set;function m2(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var tu=en.d;en.d={f:Ore,r:Dre,D:Rre,C:Pre,L:Mre,m:Fre,X:zre,S:Lre,M:Bre};function Ore(){var t=tu.f(),e=aw();return t||e}function Dre(t){var e=Ap(t);e!==null&&e.tag===5&&e.type==="form"?dz(e):tu.r(t)}var _p=typeof document>"u"?null:document;function xB(t,e,n){var r=_p;if(r&&typeof e=="string"&&e){var s=wa(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),l5.has(s)||(l5.add(s),t={rel:t,crossOrigin:n,href:e},r.querySelector(s)===null&&(e=r.createElement("link"),bs(e,"link",t),Jr(e),r.head.appendChild(e)))}}function Rre(t){tu.D(t),xB("dns-prefetch",t,null)}function Pre(t,e){tu.C(t,e),xB("preconnect",t,e)}function Mre(t,e,n){tu.L(t,e,n);var r=_p;if(r&&t&&e){var s='link[rel="preload"][as="'+wa(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+wa(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+wa(n.imageSizes)+'"]')):s+='[href="'+wa(t)+'"]';var i=s;switch(e){case"style":i=Zh(t);break;case"script":i=Op(t)}Ma.has(i)||(t=Rn({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Ma.set(i,t),r.querySelector(s)!==null||e==="style"&&r.querySelector(Gy(i))||e==="script"&&r.querySelector(Hy(i))||(e=r.createElement("link"),bs(e,"link",t),Jr(e),r.head.appendChild(e)))}}function Fre(t,e){tu.m(t,e);var n=_p;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+wa(r)+'"][href="'+wa(t)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Op(t)}if(!Ma.has(i)&&(t=Rn({rel:"modulepreload",href:t},e),Ma.set(i,t),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Hy(i)))return}r=n.createElement("link"),bs(r,"link",t),Jr(r),n.head.appendChild(r)}}}function Lre(t,e,n){tu.S(t,e,n);var r=_p;if(r&&t){var s=Ch(r).hoistableStyles,i=Zh(t);e=e||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Gy(i)))o.loading=5;else{t=Rn({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ma.get(i))&&VA(t,n);var l=a=r.createElement("link");Jr(l),bs(l,"link",t),l._p=new Promise(function(u,c){l.onload=u,l.onerror=c}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,wb(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}}function zre(t,e){tu.X(t,e);var n=_p;if(n&&t){var r=Ch(n).hoistableScripts,s=Op(t),i=r.get(s);i||(i=n.querySelector(Hy(s)),i||(t=Rn({src:t,async:!0},e),(e=Ma.get(s))&&WA(t,e),i=n.createElement("script"),Jr(i),bs(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}function Bre(t,e){tu.M(t,e);var n=_p;if(n&&t){var r=Ch(n).hoistableScripts,s=Op(t),i=r.get(s);i||(i=n.querySelector(Hy(s)),i||(t=Rn({src:t,async:!0,type:"module"},e),(e=Ma.get(s))&&WA(t,e),i=n.createElement("script"),Jr(i),bs(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}function u5(t,e,n,r){var s=(s=Uu.current)?m2(s):null;if(!s)throw Error($e(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Zh(n.href),n=Ch(s).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Zh(n.href);var i=Ch(s).hoistableStyles,a=i.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,a),(i=s.querySelector(Gy(t)))&&!i._p&&(a.instance=i,a.state.loading=5),Ma.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ma.set(t,n),i||jre(s,t,n,a.state))),e&&r===null)throw Error($e(528,""));return a}if(e&&r!==null)throw Error($e(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Op(n),n=Ch(s).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error($e(444,t))}}function Zh(t){return'href="'+wa(t)+'"'}function Gy(t){return'link[rel="stylesheet"]['+t+"]"}function wB(t){return Rn({},t,{"data-precedence":t.precedence,precedence:null})}function jre(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),bs(e,"link",n),Jr(e),t.head.appendChild(e))}function Op(t){return'[src="'+wa(t)+'"]'}function Hy(t){return"script[async]"+t}function c5(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+wa(n.href)+'"]');if(r)return e.instance=r,Jr(r),r;var s=Rn({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Jr(r),bs(r,"style",s),wb(r,n.precedence,t),e.instance=r;case"stylesheet":s=Zh(n.href);var i=t.querySelector(Gy(s));if(i)return e.state.loading|=4,e.instance=i,Jr(i),i;r=wB(n),(s=Ma.get(s))&&VA(r,s),i=(t.ownerDocument||t).createElement("link"),Jr(i);var a=i;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),bs(i,"link",r),e.state.loading|=4,wb(i,n.precedence,t),e.instance=i;case"script":return i=Op(n.src),(s=t.querySelector(Hy(i)))?(e.instance=s,Jr(s),s):(r=n,(s=Ma.get(i))&&(r=Rn({},n),WA(r,s)),t=t.ownerDocument||t,s=t.createElement("script"),Jr(s),bs(s,"link",r),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error($e(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,wb(r,n.precedence,t));return e.instance}function wb(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===e)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function VA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function WA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Sb=null;function f5(t,e,n){if(Sb===null){var r=new Map,s=Sb=new Map;s.set(n,r)}else s=Sb,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var i=n[s];if(!(i[Py]||i[Os]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var a=i.getAttribute(e)||"";a=t+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function d5(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Ure(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function SB(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Yg=null;function Vre(){}function Wre(t,e,n){if(Yg===null)throw Error($e(475));var r=Yg;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=Zh(n.href),i=t.querySelector(Gy(s));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=g2.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=i,Jr(i);return}i=t.ownerDocument||t,n=wB(n),(s=Ma.get(s))&&VA(n,s),i=i.createElement("link"),Jr(i);var a=i;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),bs(i,"link",n),e.instance=i}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=g2.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function Gre(){if(Yg===null)throw Error($e(475));var t=Yg;return t.stylesheets&&t.count===0&&SE(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&SE(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function g2(){if(this.count--,this.count===0){if(this.stylesheets)SE(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var y2=null;function SE(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,y2=new Map,e.forEach(Hre,t),y2=null,g2.call(t))}function Hre(t,e){if(!(e.state.loading&4)){var n=y2.get(t);if(n)var r=n.get(null);else{n=new Map,y2.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}s=e.instance,a=s.getAttribute("data-precedence"),i=n.get(a)||r,i===r&&n.set(null,s),n.set(a,s),this.count++,r=g2.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Zg={$$typeof:El,Provider:null,Consumer:null,_currentValue:Nf,_currentValue2:Nf,_threadCount:0};function qre(t,e,n,r,s,i,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=D4(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D4(0),this.hiddenUpdates=D4(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function TB(t,e,n,r,s,i,a,o,l,u,c,f){return t=new qre(t,e,n,a,o,l,u,f),e=1,i===!0&&(e|=24),i=Vi(3,null,null,e),t.current=i,i.stateNode=t,e=vA(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:e},xA(i),t}function CB(t){return t?(t=gh,t):gh}function EB(t,e,n,r,s,i){s=CB(s),r.context===null?r.context=s:r.pendingContext=s,r=Vu(e),r.payload={element:n},i=i===void 0?null:i,i!==null&&(r.callback=i),n=Wu(t,r,e),n!==null&&(Yi(n,t,e),Eg(n,t,e))}function h5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function GA(t,e){h5(t,e),(t=t.alternate)&&h5(t,e)}function kB(t){if(t.tag===13){var e=$p(t,67108864);e!==null&&Yi(e,t,67108864),GA(t,67108864)}}var v2=!0;function Kre(t,e,n,r){var s=gt.T;gt.T=null;var i=en.p;try{en.p=2,HA(t,e,n,r)}finally{en.p=i,gt.T=s}}function Xre(t,e,n,r){var s=gt.T;gt.T=null;var i=en.p;try{en.p=8,HA(t,e,n,r)}finally{en.p=i,gt.T=s}}function HA(t,e,n,r){if(v2){var s=TE(r);if(s===null)cT(t,e,r,b2,n),p5(t,r);else if(Zre(s,t,e,n,r))r.stopPropagation();else if(p5(t,r),e&4&&-1<Yre.indexOf(t)){for(;s!==null;){var i=Ap(s);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var a=rf(i.pendingLanes);if(a!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Ki(a);o.entanglements[1]|=l,a&=~l}al(i),!(on&6)&&(u2=Wo()+500,Wy(0))}}break;case 13:o=$p(i,2),o!==null&&Yi(o,i,2),aw(),GA(i,2)}if(i=TE(r),i===null&&cT(t,e,r,b2,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cT(t,e,r,null,n)}}function TE(t){return t=lA(t),qA(t)}var b2=null;function qA(t){if(b2=null,t=ch(t),t!==null){var e=_y(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Z7(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return b2=t,null}function NB(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pte()){case t9:return 2;case n9:return 8;case qb:case Mte:return 32;case r9:return 268435456;default:return 32}default:return 32}}var CE=!1,qu=null,Ku=null,Xu=null,Qg=new Map,Jg=new Map,_u=[],Yre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p5(t,e){switch(t){case"focusin":case"focusout":qu=null;break;case"dragenter":case"dragleave":Ku=null;break;case"mouseover":case"mouseout":Xu=null;break;case"pointerover":case"pointerout":Qg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(e.pointerId)}}function Rm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ap(e),e!==null&&kB(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Zre(t,e,n,r,s){switch(e){case"focusin":return qu=Rm(qu,t,e,n,r,s),!0;case"dragenter":return Ku=Rm(Ku,t,e,n,r,s),!0;case"mouseover":return Xu=Rm(Xu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qg.set(i,Rm(Qg.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Jg.set(i,Rm(Jg.get(i)||null,t,e,n,r,s)),!0}return!1}function AB(t){var e=ch(t.target);if(e!==null){var n=_y(e);if(n!==null){if(e=n.tag,e===13){if(e=Z7(n),e!==null){t.blockedOn=e,Wte(t.priority,function(){if(n.tag===13){var r=Xi();r=sA(r);var s=$p(n,r);s!==null&&Yi(s,n,r),GA(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=TE(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jC=r,n.target.dispatchEvent(r),jC=null}else return e=Ap(n),e!==null&&kB(e),t.blockedOn=n,!1;e.shift()}return!0}function m5(t,e,n){Tb(t)&&n.delete(e)}function Qre(){CE=!1,qu!==null&&Tb(qu)&&(qu=null),Ku!==null&&Tb(Ku)&&(Ku=null),Xu!==null&&Tb(Xu)&&(Xu=null),Qg.forEach(m5),Jg.forEach(m5)}function gv(t,e){t.blockedOn===e&&(t.blockedOn=null,CE||(CE=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,Qre)))}var yv=null;function g5(t){yv!==t&&(yv=t,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,function(){yv===t&&(yv=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],s=t[e+2];if(typeof r!="function"){if(qA(r||n)===null)continue;break}var i=Ap(n);i!==null&&(t.splice(e,3),e-=3,rE(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function ey(t){function e(l){return gv(l,t)}qu!==null&&gv(qu,t),Ku!==null&&gv(Ku,t),Xu!==null&&gv(Xu,t),Qg.forEach(e),Jg.forEach(e);for(var n=0;n<_u.length;n++){var r=_u[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<_u.length&&(n=_u[0],n.blockedOn===null);)AB(n),n.blockedOn===null&&_u.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[wi]||null;if(typeof i=="function")a||g5(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[wi]||null)o=a.formAction;else if(qA(s)!==null)continue}else o=a.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),g5(n)}}}function KA(t){this._internalRoot=t}cw.prototype.render=KA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($e(409));var n=e.current,r=Xi();EB(n,r,t,e,null,null)};cw.prototype.unmount=KA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;EB(t.current,2,null,t,null,null),aw(),e[Np]=null}};function cw(t){this._internalRoot=t}cw.prototype.unstable_scheduleHydration=function(t){if(t){var e=l9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_u.length&&e!==0&&e<_u[n].priority;n++);_u.splice(n,0,t),n===0&&AB(t)}};var y5=X7.version;if(y5!=="19.1.1")throw Error($e(527,y5,"19.1.1"));en.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($e(188)):(t=Object.keys(t).join(","),Error($e(268,t)));return t=Ate(e),t=t!==null?Q7(t):null,t=t===null?null:t.stateNode,t};var Jre={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:gt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{Oy=vv.inject(Jre),qi=vv}catch{}}Kx.createRoot=function(t,e){if(!Y7(t))throw Error($e(299));var n=!1,r="",s=Tz,i=Cz,a=Ez,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=TB(t,1,!1,null,null,n,r,s,i,a,o,null),t[Np]=e.current,UA(t),new KA(e)};Kx.hydrateRoot=function(t,e,n){if(!Y7(t))throw Error($e(299));var r=!1,s="",i=Tz,a=Cz,o=Ez,l=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),e=TB(t,1,!0,e,n??null,r,s,i,a,o,l,u),e.context=CB(null),n=e.current,r=Xi(),r=sA(r),s=Vu(r),s.callback=null,Wu(n,s,r),n=r,e.current.lanes=n,Ry(e,n),al(e),t[Np]=e.current,UA(t),new cw(e)};Kx.version="19.1.1";function $B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($B)}catch(t){console.error(t)}}$B(),U7.exports=Kx;var ese=U7.exports;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ty.apply(this,arguments)}var Lu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lu||(Lu={}));const v5="popstate";function tse(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return EE("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:x2(s)}return rse(e,n,null,t)}function hr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function IB(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nse(){return Math.random().toString(36).substr(2,8)}function b5(t,e){return{usr:t.state,key:t.key,idx:e}}function EE(t,e,n,r){return n===void 0&&(n=null),ty({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Dp(e):e,{state:n,key:e&&e.key||r||nse()})}function x2(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rse(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Lu.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(ty({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function f(){o=Lu.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:o,location:m.location,delta:y})}function d(g,y){o=Lu.Push;let v=EE(m.location,g,y);u=c()+1;let b=b5(v,u),x=m.createHref(v);try{a.pushState(b,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(x)}i&&l&&l({action:o,location:m.location,delta:1})}function h(g,y){o=Lu.Replace;let v=EE(m.location,g,y);u=c();let b=b5(v,u),x=m.createHref(v);a.replaceState(b,"",x),i&&l&&l({action:o,location:m.location,delta:0})}function p(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof g=="string"?g:x2(g);return v=v.replace(/ $/,"%20"),hr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return o},get location(){return t(s,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(v5,f),l=g,()=>{s.removeEventListener(v5,f),l=null}},createHref(g){return e(s,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return a.go(g)}};return m}var x5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x5||(x5={}));function sse(t,e,n){return n===void 0&&(n="/"),ise(t,e,n)}function ise(t,e,n,r){let s=typeof e=="string"?Dp(e):e,i=XA(s.pathname||"/",n);if(i==null)return null;let a=_B(t);ase(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=vse(i);o=mse(a[l],u)}return o}function _B(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(hr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Yu([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(hr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_B(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:hse(u,i.index),routesMeta:c})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of OB(i.path))s(i,a,l)}),e}function OB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=OB(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function ase(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pse(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ose=/^:[\w-]+$/,lse=3,use=2,cse=1,fse=10,dse=-2,w5=t=>t==="*";function hse(t,e){let n=t.split("/"),r=n.length;return n.some(w5)&&(r+=dse),e&&(r+=use),n.filter(s=>!w5(s)).reduce((s,i)=>s+(ose.test(i)?lse:i===""?cse:fse),r)}function pse(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function mse(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=gse({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Yu([i,f.pathname]),pathnameBase:Sse(Yu([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Yu([i,f.pathnameBase]))}return a}function gse(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yse(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=o[f]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function yse(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),IB(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vse(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return IB(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function XA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bse(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Dp(t):t;return{pathname:n?n.startsWith("/")?n:xse(n,e):e,search:Tse(r),hash:Cse(s)}}function xse(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dT(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wse(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function YA(t,e){let n=wse(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ZA(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Dp(t):(s=ty({},t),hr(!s.pathname||!s.pathname.includes("?"),dT("?","pathname","search",s)),hr(!s.pathname||!s.pathname.includes("#"),dT("#","pathname","hash",s)),hr(!s.search||!s.search.includes("#"),dT("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=bse(s,o),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Yu=t=>t.join("/").replace(/\/\/+/g,"/"),Sse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tse=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ese(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DB=["post","put","patch","delete"];new Set(DB);const kse=["get",...DB];new Set(kse);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ny(){return ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ny.apply(this,arguments)}const QA=k.createContext(null),Nse=k.createContext(null),kc=k.createContext(null),fw=k.createContext(null),Nc=k.createContext({outlet:null,matches:[],isDataRoute:!1}),RB=k.createContext(null);function Ase(t,e){let{relative:n}=e===void 0?{}:e;Rp()||hr(!1);let{basename:r,navigator:s}=k.useContext(kc),{hash:i,pathname:a,search:o}=MB(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Yu([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Rp(){return k.useContext(fw)!=null}function Pp(){return Rp()||hr(!1),k.useContext(fw).location}function PB(t){k.useContext(kc).static||k.useLayoutEffect(t)}function dw(){let{isDataRoute:t}=k.useContext(Nc);return t?jse():$se()}function $se(){Rp()||hr(!1);let t=k.useContext(QA),{basename:e,future:n,navigator:r}=k.useContext(kc),{matches:s}=k.useContext(Nc),{pathname:i}=Pp(),a=JSON.stringify(YA(s,n.v7_relativeSplatPath)),o=k.useRef(!1);return PB(()=>{o.current=!0}),k.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=ZA(u,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Yu([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,a,i,t])}function MB(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(kc),{matches:s}=k.useContext(Nc),{pathname:i}=Pp(),a=JSON.stringify(YA(s,r.v7_relativeSplatPath));return k.useMemo(()=>ZA(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function Ise(t,e){return _se(t,e)}function _se(t,e,n,r){Rp()||hr(!1);let{navigator:s}=k.useContext(kc),{matches:i}=k.useContext(Nc),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Pp(),c;if(e){var f;let g=typeof e=="string"?Dp(e):e;l==="/"||(f=g.pathname)!=null&&f.startsWith(l)||hr(!1),c=g}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=sse(t,{pathname:h}),m=Mse(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Yu([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Yu([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&m?k.createElement(fw.Provider,{value:{location:ny({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Lu.Pop}},m):m}function Ose(){let t=Bse(),e=Ese(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const Dse=k.createElement(Ose,null);class Rse extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Nc.Provider,{value:this.props.routeContext},k.createElement(RB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pse(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(QA);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Nc.Provider,{value:e},r)}function Mse(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let c=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);c>=0||hr(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||Dse,l&&(u<0&&d===0?(Use("route-fallback"),p=!0,g=null):u===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,k.createElement(Pse,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(Rse,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var FB=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FB||{}),LB=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(LB||{});function Fse(t){let e=k.useContext(QA);return e||hr(!1),e}function Lse(t){let e=k.useContext(Nse);return e||hr(!1),e}function zse(t){let e=k.useContext(Nc);return e||hr(!1),e}function zB(t){let e=zse(),n=e.matches[e.matches.length-1];return n.route.id||hr(!1),n.route.id}function Bse(){var t;let e=k.useContext(RB),n=Lse(),r=zB();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jse(){let{router:t}=Fse(FB.UseNavigateStable),e=zB(LB.UseNavigateStable),n=k.useRef(!1);return PB(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ny({fromRouteId:e},i)))},[t,e])}const S5={};function Use(t,e,n){S5[t]||(S5[t]=!0)}function kE(t){let{to:e,replace:n,state:r,relative:s}=t;Rp()||hr(!1);let{future:i,static:a}=k.useContext(kc),{matches:o}=k.useContext(Nc),{pathname:l}=Pp(),u=dw(),c=ZA(e,YA(o,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(c);return k.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Ao(t){hr(!1)}function Vse(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Lu.Pop,navigator:i,static:a=!1,future:o}=t;Rp()&&hr(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:i,static:a,future:ny({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Dp(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=k.useMemo(()=>{let g=XA(c,l);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:s}},[l,c,f,d,h,p,s]);return m==null?null:k.createElement(kc.Provider,{value:u},k.createElement(fw.Provider,{children:n,value:m}))}function Wse(t){let{children:e,location:n}=t;return Ise(NE(e),n)}new Promise(()=>{});function NE(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,NE(r.props.children,i));return}r.type!==Ao&&hr(!1),!r.props.index||!r.props.children||hr(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=NE(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}function Gse(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Hse(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qse(t,e){return t.button===0&&(!e||e==="_self")&&!Hse(t)}const Kse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Xse="6";try{window.__reactRouterVersion=Xse}catch{}const Yse="startTransition",T5=j7[Yse];function Zse(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=tse({window:s,v5Compat:!0}));let a=i.current,[o,l]=k.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=k.useCallback(f=>{u&&T5?T5(()=>l(f)):l(f)},[l,u]);return k.useLayoutEffect(()=>a.listen(c),[a,c]),k.createElement(Vse,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Qse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hw=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:c,unstable_viewTransition:f}=e,d=Gse(e,Kse),{basename:h}=k.useContext(kc),p,m=!1;if(typeof u=="string"&&Jse.test(u)&&(p=u,Qse))try{let b=new URL(window.location.href),x=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=XA(x.pathname,h);x.origin===b.origin&&w!=null?u=w+x.search+x.hash:m=!0}catch{}let g=Ase(u,{relative:s}),y=eie(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:s,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return k.createElement("a",AE({},d,{href:p||g,onClick:m||i?r:v,ref:n,target:l}))});var C5;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C5||(C5={}));var E5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(E5||(E5={}));function eie(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,unstable_viewTransition:o}=e===void 0?{}:e,l=dw(),u=Pp(),c=MB(t,{relative:a});return k.useCallback(f=>{if(qse(f,n)){f.preventDefault();let d=r!==void 0?r:x2(u)===x2(c);l(t,{replace:d,state:s,preventScrollReset:i,relative:a,unstable_viewTransition:o})}},[u,l,c,r,s,n,t,i,a,o])}function BB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=BB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ft(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=BB(t))&&(r&&(r+=" "),r+=e);return r}function tie(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}tie(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var qy=t=>typeof t=="number"&&!isNaN(t),Kf=t=>typeof t=="string",Wl=t=>typeof t=="function",nie=t=>Kf(t)||qy(t),$E=t=>Kf(t)||Wl(t)?t:null,rie=(t,e)=>t===!1||qy(t)&&t>0?t:e,IE=t=>k.isValidElement(t)||Kf(t)||Wl(t)||qy(t);function sie(t,e,n=300){let{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function iie({enter:t,exit:e,appendPosition:n=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:i,position:a,preventExitTransition:o,done:l,nodeRef:u,isIn:c,playToast:f}){let d=n?`${t}--${a}`:t,h=n?`${e}--${a}`:e,p=k.useRef(0);return k.useLayoutEffect(()=>{let m=u.current,g=d.split(" "),y=v=>{v.target===u.current&&(f(),m.removeEventListener("animationend",y),m.removeEventListener("animationcancel",y),p.current===0&&v.type!=="animationcancel"&&m.classList.remove(...g))};m.classList.add(...g),m.addEventListener("animationend",y),m.addEventListener("animationcancel",y)},[]),k.useEffect(()=>{let m=u.current,g=()=>{m.removeEventListener("animationend",g),r?sie(m,l,s):l()};c||(o?g():(p.current=1,m.className+=` ${h}`,m.addEventListener("animationend",g)))},[c]),Tt.createElement(Tt.Fragment,null,i)}}function k5(t,e){return{content:jB(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function jB(t,e,n=!1){return k.isValidElement(t)&&!Kf(t.type)?k.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Wl(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function aie({closeToast:t,theme:e,ariaLabel:n="close"}){return Tt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":n},Tt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Tt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function oie({delay:t,isRunning:e,closeToast:n,type:r="default",hide:s,className:i,controlledProgress:a,progress:o,rtl:l,isIn:u,theme:c}){let f=s||a&&o===0,d={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};a&&(d.transform=`scaleX(${o})`);let h=Ft("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${c}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":l}),p=Wl(i)?i({rtl:l,type:r,defaultClassName:h}):Ft(h,i),m={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{u&&n()}};return Tt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},Tt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${c} Toastify__progress-bar--${r}`}),Tt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:p,style:d,...m}))}var lie=1,UB=()=>`${lie++}`;function uie(t,e,n){let r=1,s=0,i=[],a=[],o=e,l=new Map,u=new Set,c=v=>(u.add(v),()=>u.delete(v)),f=()=>{a=Array.from(l.values()),u.forEach(v=>v())},d=({containerId:v,toastId:b,updateId:x})=>{let w=v?v!==t:t!==1,C=l.has(b)&&x==null;return w||C},h=(v,b)=>{l.forEach(x=>{var w;(b==null||b===x.props.toastId)&&((w=x.toggle)==null||w.call(x,v))})},p=v=>{var b,x;(x=(b=v.props)==null?void 0:b.onClose)==null||x.call(b,v.removalReason),v.isActive=!1},m=v=>{if(v==null)l.forEach(p);else{let b=l.get(v);b&&p(b)}f()},g=()=>{s-=i.length,i=[]},y=v=>{var b,x;let{toastId:w,updateId:C}=v.props,E=C==null;v.staleId&&l.delete(v.staleId),v.isActive=!0,l.set(w,v),f(),n(k5(v,E?"added":"updated")),E&&((x=(b=v.props).onOpen)==null||x.call(b))};return{id:t,props:o,observe:c,toggle:h,removeToast:m,toasts:l,clearQueue:g,buildToast:(v,b)=>{if(d(b))return;let{toastId:x,updateId:w,data:C,staleId:E,delay:A}=b,O=w==null;O&&s++;let R={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(b).filter(([z,j])=>j!=null)),toastId:x,updateId:w,data:C,isIn:!1,className:$E(b.className||o.toastClassName),progressClassName:$E(b.progressClassName||o.progressClassName),autoClose:b.isLoading?!1:rie(b.autoClose,o.autoClose),closeToast(z){l.get(x).removalReason=z,m(x)},deleteToast(){let z=l.get(x);if(z!=null){if(n(k5(z,"removed")),l.delete(x),s--,s<0&&(s=0),i.length>0){y(i.shift());return}f()}}};R.closeButton=o.closeButton,b.closeButton===!1||IE(b.closeButton)?R.closeButton=b.closeButton:b.closeButton===!0&&(R.closeButton=IE(o.closeButton)?o.closeButton:!0);let F={content:v,props:R,staleId:E};o.limit&&o.limit>0&&s>o.limit&&O?i.push(F):qy(A)?setTimeout(()=>{y(F)},A):y(F)},setProps(v){o=v},setToggle:(v,b)=>{let x=l.get(v);x&&(x.toggle=b)},isToastActive:v=>{var b;return(b=l.get(v))==null?void 0:b.isActive},getSnapshot:()=>a}}var Ks=new Map,ry=[],_E=new Set,cie=t=>_E.forEach(e=>e(t)),VB=()=>Ks.size>0;function fie(){ry.forEach(t=>GB(t.content,t.options)),ry=[]}var die=(t,{containerId:e})=>{var n;return(n=Ks.get(e||1))==null?void 0:n.toasts.get(t)};function WB(t,e){var n;if(e)return!!((n=Ks.get(e))!=null&&n.isToastActive(t));let r=!1;return Ks.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function hie(t){if(!VB()){ry=ry.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||nie(t))Ks.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Ks.get(t.containerId);e?e.removeToast(t.id):Ks.forEach(n=>{n.removeToast(t.id)})}}var pie=(t={})=>{Ks.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function GB(t,e){IE(t)&&(VB()||ry.push({content:t,options:e}),Ks.forEach(n=>{n.buildToast(t,e)}))}function mie(t){var e;(e=Ks.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function HB(t,e){Ks.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function gie(t){let e=t.containerId||1;return{subscribe(n){let r=uie(e,t,cie);Ks.set(e,r);let s=r.observe(n);return fie(),()=>{s(),Ks.delete(e)}},setProps(n){var r;(r=Ks.get(e))==null||r.setProps(n)},getSnapshot(){var n;return(n=Ks.get(e))==null?void 0:n.getSnapshot()}}}function yie(t){return _E.add(t),()=>{_E.delete(t)}}function vie(t){return t&&(Kf(t.toastId)||qy(t.toastId))?t.toastId:UB()}function Ky(t,e){return GB(t,e),e.toastId}function pw(t,e){return{...e,type:e&&e.type||t,toastId:vie(e)}}function mw(t){return(e,n)=>Ky(e,pw(t,n))}function Bt(t,e){return Ky(t,pw("default",e))}Bt.loading=(t,e)=>Ky(t,pw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function bie(t,{pending:e,error:n,success:r},s){let i;e&&(i=Kf(e)?Bt.loading(e,s):Bt.loading(e.render,{...s,...e}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(u,c,f)=>{if(c==null){Bt.dismiss(i);return}let d={type:u,...a,...s,data:f},h=Kf(c)?{render:c}:c;return i?Bt.update(i,{...d,...h}):Bt(h.render,{...d,...h}),f},l=Wl(t)?t():t;return l.then(u=>o("success",r,u)).catch(u=>o("error",n,u)),l}Bt.promise=bie;Bt.success=mw("success");Bt.info=mw("info");Bt.error=mw("error");Bt.warning=mw("warning");Bt.warn=Bt.warning;Bt.dark=(t,e)=>Ky(t,pw("default",{theme:"dark",...e}));function xie(t){hie(t)}Bt.dismiss=xie;Bt.clearWaitingQueue=pie;Bt.isActive=WB;Bt.update=(t,e={})=>{let n=die(t,e);if(n){let{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:UB()};i.toastId!==t&&(i.staleId=t);let a=i.render||s;delete i.render,Ky(a,i)}};Bt.done=t=>{Bt.update(t,{progress:1})};Bt.onChange=yie;Bt.play=t=>HB(!0,t);Bt.pause=t=>HB(!1,t);function wie(t){var e;let{subscribe:n,getSnapshot:r,setProps:s}=k.useRef(gie(t)).current;s(t);let i=(e=k.useSyncExternalStore(n,r,r))==null?void 0:e.slice();function a(o){if(!i)return[];let l=new Map;return t.newestOnTop&&i.reverse(),i.forEach(u=>{let{position:c}=u.props;l.has(c)||l.set(c,[]),l.get(c).push(u)}),Array.from(l,u=>o(u[0],u[1]))}return{getToastToRender:a,isToastActive:WB,count:i==null?void 0:i.length}}function Sie(t){let[e,n]=k.useState(!1),[r,s]=k.useState(!1),i=k.useRef(null),a=k.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:l,closeToast:u,onClick:c,closeOnClick:f}=t;mie({id:t.toastId,containerId:t.containerId,fn:n}),k.useEffect(()=>{if(t.pauseOnFocusLoss)return d(),()=>{h()}},[t.pauseOnFocusLoss]);function d(){document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)}function h(){window.removeEventListener("focus",g),window.removeEventListener("blur",y)}function p(E){if(t.draggable===!0||t.draggable===E.pointerType){v();let A=i.current;a.canCloseOnClick=!0,a.canDrag=!0,A.style.transition="none",t.draggableDirection==="x"?(a.start=E.clientX,a.removalDistance=A.offsetWidth*(t.draggablePercent/100)):(a.start=E.clientY,a.removalDistance=A.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function m(E){let{top:A,bottom:O,left:R,right:F}=i.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=R&&E.clientX<=F&&E.clientY>=A&&E.clientY<=O?y():g()}function g(){n(!0)}function y(){n(!1)}function v(){a.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",w)}function b(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",w)}function x(E){let A=i.current;if(a.canDrag&&A){a.didMove=!0,e&&y(),t.draggableDirection==="x"?a.delta=E.clientX-a.start:a.delta=E.clientY-a.start,a.start!==E.clientX&&(a.canCloseOnClick=!1);let O=t.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;A.style.transform=`translate3d(${O},0)`,A.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function w(){b();let E=i.current;if(a.canDrag&&a.didMove&&E){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){s(!0),t.closeToast(!0),t.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let C={onPointerDown:p,onPointerUp:m};return o&&l&&(C.onMouseEnter=y,t.stacked||(C.onMouseLeave=g)),f&&(C.onClick=E=>{c&&c(E),a.canCloseOnClick&&u(!0)}),{playToast:g,pauseToast:y,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:C}}var Tie=typeof window<"u"?k.useLayoutEffect:k.useEffect,gw=({theme:t,type:e,isLoading:n,...r})=>Tt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function Cie(t){return Tt.createElement(gw,{...t},Tt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Eie(t){return Tt.createElement(gw,{...t},Tt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function kie(t){return Tt.createElement(gw,{...t},Tt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Nie(t){return Tt.createElement(gw,{...t},Tt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Aie(){return Tt.createElement("div",{className:"Toastify__spinner"})}var OE={info:Eie,warning:Cie,success:kie,error:Nie,spinner:Aie},$ie=t=>t in OE;function Iie({theme:t,type:e,isLoading:n,icon:r}){let s=null,i={theme:t,type:e};return r===!1||(Wl(r)?s=r({...i,isLoading:n}):k.isValidElement(r)?s=k.cloneElement(r,i):n?s=OE.spinner():$ie(e)&&(s=OE[e](i))),s}var _ie=t=>{let{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=Sie(t),{closeButton:a,children:o,autoClose:l,onClick:u,type:c,hideProgressBar:f,closeToast:d,transition:h,position:p,className:m,style:g,progressClassName:y,updateId:v,role:b,progress:x,rtl:w,toastId:C,deleteToast:E,isIn:A,isLoading:O,closeOnClick:R,theme:F,ariaLabel:z}=t,j=Ft("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":R}),H=Wl(m)?m({rtl:w,position:p,type:c,defaultClassName:j}):Ft(j,m),J=Iie(t),U=!!x||!l,Y={closeToast:d,type:c,theme:F},Q=null;return a===!1||(Wl(a)?Q=a(Y):k.isValidElement(a)?Q=k.cloneElement(a,Y):Q=aie(Y)),Tt.createElement(h,{isIn:A,done:E,position:p,preventExitTransition:n,nodeRef:r,playToast:i},Tt.createElement("div",{id:C,tabIndex:0,onClick:u,"data-in":A,className:H,...s,style:g,ref:r,...A&&{role:b,"aria-label":z}},J!=null&&Tt.createElement("div",{className:Ft("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},J),jB(o,t,!e),Q,!t.customProgressBar&&Tt.createElement(oie,{...v&&!U?{key:`p-${v}`}:{},rtl:w,theme:F,delay:l,isRunning:e,isIn:A,closeToast:d,hide:f,type:c,className:y,controlledProgress:U,progress:x||0})))},Oie=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),Die=iie(Oie("bounce",!0)),Rie={position:"top-right",transition:Die,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function Pie(t){let e={...Rie,...t},n=t.stacked,[r,s]=k.useState(!0),i=k.useRef(null),{getToastToRender:a,isToastActive:o,count:l}=wie(e),{className:u,style:c,rtl:f,containerId:d,hotKeys:h}=e;function p(g){let y=Ft("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":f});return Wl(u)?u({position:g,rtl:f,defaultClassName:y}):Ft(y,$E(u))}function m(){n&&(s(!0),Bt.play())}return Tie(()=>{var g;if(n){let y=i.current.querySelectorAll('[data-in="true"]'),v=12,b=(g=e.position)==null?void 0:g.includes("top"),x=0,w=0;Array.from(y).reverse().forEach((C,E)=>{let A=C;A.classList.add("Toastify__toast--stacked"),E>0&&(A.dataset.collapsed=`${r}`),A.dataset.pos||(A.dataset.pos=b?"top":"bot");let O=x*(r?.2:1)+(r?0:v*E);A.style.setProperty("--y",`${b?O:O*-1}px`),A.style.setProperty("--g",`${v}`),A.style.setProperty("--s",`${1-(r?w:0)}`),x+=A.offsetHeight,w+=.025})}},[r,l,n]),k.useEffect(()=>{function g(y){var v;let b=i.current;h(y)&&((v=b.querySelector('[tabIndex="0"]'))==null||v.focus(),s(!1),Bt.pause()),y.key==="Escape"&&(document.activeElement===b||b!=null&&b.contains(document.activeElement))&&(s(!0),Bt.play())}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[h]),Tt.createElement("section",{ref:i,className:"Toastify",id:d,onMouseEnter:()=>{n&&(s(!1),Bt.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},a((g,y)=>{let v=y.length?{...c}:{...c,pointerEvents:"none"};return Tt.createElement("div",{tabIndex:-1,className:p(g),"data-stacked":n,style:v,key:`c-${g}`},y.map(({content:b,props:x})=>Tt.createElement(_ie,{...x,stacked:n,collapseAll:m,isIn:o(x.toastId,x.containerId),key:`t-${x.key}`},b)))}))}function qB(t,e){return function(){return t.apply(e,arguments)}}const{toString:Mie}=Object.prototype,{getPrototypeOf:JA}=Object,{iterator:yw,toStringTag:KB}=Symbol,vw=(t=>e=>{const n=Mie.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),go=t=>(t=t.toLowerCase(),e=>vw(e)===t),bw=t=>e=>typeof e===t,{isArray:Mp}=Array,Qh=bw("undefined");function Xy(t){return t!==null&&!Qh(t)&&t.constructor!==null&&!Qh(t.constructor)&&vi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const XB=go("ArrayBuffer");function Fie(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&XB(t.buffer),e}const Lie=bw("string"),vi=bw("function"),YB=bw("number"),Yy=t=>t!==null&&typeof t=="object",zie=t=>t===!0||t===!1,Cb=t=>{if(vw(t)!=="object")return!1;const e=JA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(KB in t)&&!(yw in t)},Bie=t=>{if(!Yy(t)||Xy(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},jie=go("Date"),Uie=go("File"),Vie=go("Blob"),Wie=go("FileList"),Gie=t=>Yy(t)&&vi(t.pipe),Hie=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vi(t.append)&&((e=vw(t))==="formdata"||e==="object"&&vi(t.toString)&&t.toString()==="[object FormData]"))},qie=go("URLSearchParams"),[Kie,Xie,Yie,Zie]=["ReadableStream","Request","Response","Headers"].map(go),Qie=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zy(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Mp(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Xy(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(r=0;r<a;r++)o=i[r],e.call(null,t[o],o,t)}}function ZB(t,e){if(Xy(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const mf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QB=t=>!Qh(t)&&t!==mf;function DE(){const{caseless:t,skipUndefined:e}=QB(this)&&this||{},n={},r=(s,i)=>{const a=t&&ZB(n,i)||i;Cb(n[a])&&Cb(s)?n[a]=DE(n[a],s):Cb(s)?n[a]=DE({},s):Mp(s)?n[a]=s.slice():(!e||!Qh(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Zy(arguments[s],r);return n}const Jie=(t,e,n,{allOwnKeys:r}={})=>(Zy(e,(s,i)=>{n&&vi(s)?t[i]=qB(s,n):t[i]=s},{allOwnKeys:r}),t),eae=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tae=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nae=(t,e,n,r)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&JA(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rae=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sae=t=>{if(!t)return null;if(Mp(t))return t;let e=t.length;if(!YB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iae=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&JA(Uint8Array)),aae=(t,e)=>{const r=(t&&t[yw]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},oae=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lae=go("HTMLFormElement"),uae=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),N5=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cae=go("RegExp"),JB=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Zy(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},fae=t=>{JB(t,(e,n)=>{if(vi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(vi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dae=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Mp(t)?r(t):r(String(t).split(e)),n},hae=()=>{},pae=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mae(t){return!!(t&&vi(t.append)&&t[KB]==="FormData"&&t[yw])}const gae=t=>{const e=new Array(10),n=(r,s)=>{if(Yy(r)){if(e.indexOf(r)>=0)return;if(Xy(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Mp(r)?[]:{};return Zy(r,(a,o)=>{const l=n(a,s+1);!Qh(l)&&(i[o]=l)}),e[s]=void 0,i}}return r};return n(t,0)},yae=go("AsyncFunction"),vae=t=>t&&(Yy(t)||vi(t))&&vi(t.then)&&vi(t.catch),ej=((t,e)=>t?setImmediate:e?((n,r)=>(mf.addEventListener("message",({source:s,data:i})=>{s===mf&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),mf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vi(mf.postMessage)),bae=typeof queueMicrotask<"u"?queueMicrotask.bind(mf):typeof process<"u"&&process.nextTick||ej,xae=t=>t!=null&&vi(t[yw]),ge={isArray:Mp,isArrayBuffer:XB,isBuffer:Xy,isFormData:Hie,isArrayBufferView:Fie,isString:Lie,isNumber:YB,isBoolean:zie,isObject:Yy,isPlainObject:Cb,isEmptyObject:Bie,isReadableStream:Kie,isRequest:Xie,isResponse:Yie,isHeaders:Zie,isUndefined:Qh,isDate:jie,isFile:Uie,isBlob:Vie,isRegExp:cae,isFunction:vi,isStream:Gie,isURLSearchParams:qie,isTypedArray:iae,isFileList:Wie,forEach:Zy,merge:DE,extend:Jie,trim:Qie,stripBOM:eae,inherits:tae,toFlatObject:nae,kindOf:vw,kindOfTest:go,endsWith:rae,toArray:sae,forEachEntry:aae,matchAll:oae,isHTMLForm:lae,hasOwnProperty:N5,hasOwnProp:N5,reduceDescriptors:JB,freezeMethods:fae,toObjectSet:dae,toCamelCase:uae,noop:hae,toFiniteNumber:pae,findKey:ZB,global:mf,isContextDefined:QB,isSpecCompliantForm:mae,toJSONObject:gae,isAsyncFn:yae,isThenable:vae,setImmediate:ej,asap:bae,isIterable:xae};function Et(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ge.inherits(Et,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const tj=Et.prototype,nj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{nj[t]={value:t}});Object.defineProperties(Et,nj);Object.defineProperty(tj,"isAxiosError",{value:!0});Et.from=(t,e,n,r,s,i)=>{const a=Object.create(tj);ge.toFlatObject(t,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Et.call(a,o,l,n,r,s),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const wae=null;function RE(t){return ge.isPlainObject(t)||ge.isArray(t)}function rj(t){return ge.endsWith(t,"[]")?t.slice(0,-2):t}function A5(t,e,n){return t?t.concat(e).map(function(s,i){return s=rj(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Sae(t){return ge.isArray(t)&&!t.some(RE)}const Tae=ge.toFlatObject(ge,{},null,function(e){return/^is[A-Z]/.test(e)});function xw(t,e,n){if(!ge.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!ge.isUndefined(g[m])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(e);if(!ge.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(ge.isDate(p))return p.toISOString();if(ge.isBoolean(p))return p.toString();if(!l&&ge.isBlob(p))throw new Et("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(p)||ge.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(ge.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(ge.isArray(p)&&Sae(p)||(ge.isFileList(p)||ge.endsWith(m,"[]"))&&(y=ge.toArray(p)))return m=rj(m),y.forEach(function(b,x){!(ge.isUndefined(b)||b===null)&&e.append(a===!0?A5([m],x,i):a===null?m:m+"[]",u(b))}),!1}return RE(p)?!0:(e.append(A5(g,m,i),u(p)),!1)}const f=[],d=Object.assign(Tae,{defaultVisitor:c,convertValue:u,isVisitable:RE});function h(p,m){if(!ge.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),ge.forEach(p,function(y,v){(!(ge.isUndefined(y)||y===null)&&s.call(e,y,ge.isString(v)?v.trim():v,m,d))===!0&&h(y,m?m.concat(v):[v])}),f.pop()}}if(!ge.isObject(t))throw new TypeError("data must be an object");return h(t),e}function $5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function e$(t,e){this._pairs=[],t&&xw(t,this,e)}const sj=e$.prototype;sj.append=function(e,n){this._pairs.push([e,n])};sj.toString=function(e){const n=e?function(r){return e.call(this,r,$5)}:$5;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Cae(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ij(t,e,n){if(!e)return t;const r=n&&n.encode||Cae;ge.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=ge.isURLSearchParams(e)?e.toString():new e$(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class I5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ge.forEach(this.handlers,function(r){r!==null&&e(r)})}}const aj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Eae=typeof URLSearchParams<"u"?URLSearchParams:e$,kae=typeof FormData<"u"?FormData:null,Nae=typeof Blob<"u"?Blob:null,Aae={isBrowser:!0,classes:{URLSearchParams:Eae,FormData:kae,Blob:Nae},protocols:["http","https","file","blob","url","data"]},t$=typeof window<"u"&&typeof document<"u",PE=typeof navigator=="object"&&navigator||void 0,$ae=t$&&(!PE||["ReactNative","NativeScript","NS"].indexOf(PE.product)<0),Iae=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_ae=t$&&window.location.href||"http://localhost",Oae=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t$,hasStandardBrowserEnv:$ae,hasStandardBrowserWebWorkerEnv:Iae,navigator:PE,origin:_ae},Symbol.toStringTag,{value:"Module"})),Is={...Oae,...Aae};function Dae(t,e){return xw(t,new Is.classes.URLSearchParams,{visitor:function(n,r,s,i){return Is.isNode&&ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Rae(t){return ge.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Pae(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function oj(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=n.length;return a=!a&&ge.isArray(s)?s.length:a,l?(ge.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!o):((!s[a]||!ge.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&ge.isArray(s[a])&&(s[a]=Pae(s[a])),!o)}if(ge.isFormData(t)&&ge.isFunction(t.entries)){const n={};return ge.forEachEntry(t,(r,s)=>{e(Rae(r),s,n,0)}),n}return null}function Mae(t,e,n){if(ge.isString(t))try{return(e||JSON.parse)(t),ge.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qy={transitional:aj,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ge.isObject(e);if(i&&ge.isHTMLForm(e)&&(e=new FormData(e)),ge.isFormData(e))return s?JSON.stringify(oj(e)):e;if(ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e)||ge.isReadableStream(e))return e;if(ge.isArrayBufferView(e))return e.buffer;if(ge.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Dae(e,this.formSerializer).toString();if((o=ge.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return xw(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Mae(e)):e}],transformResponse:[function(e){const n=this.transitional||Qy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ge.isResponse(e)||ge.isReadableStream(e))return e;if(e&&ge.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Et.from(o,Et.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Is.classes.FormData,Blob:Is.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],t=>{Qy.headers[t]={}});const Fae=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lae=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&Fae[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_5=Symbol("internals");function Pm(t){return t&&String(t).trim().toLowerCase()}function Eb(t){return t===!1||t==null?t:ge.isArray(t)?t.map(Eb):String(t)}function zae(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Bae=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hT(t,e,n,r,s){if(ge.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ge.isString(e)){if(ge.isString(r))return e.indexOf(r)!==-1;if(ge.isRegExp(r))return r.test(e)}}function jae(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Uae(t,e){const n=ge.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let bi=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(o,l,u){const c=Pm(l);if(!c)throw new Error("header name must be a non-empty string");const f=ge.findKey(s,c);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||l]=Eb(o))}const a=(o,l)=>ge.forEach(o,(u,c)=>i(u,c,l));if(ge.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(ge.isString(e)&&(e=e.trim())&&!Bae(e))a(Lae(e),n);else if(ge.isObject(e)&&ge.isIterable(e)){let o={},l,u;for(const c of e){if(!ge.isArray(c))throw TypeError("Object iterator must return a key-value pair");o[u=c[0]]=(l=o[u])?ge.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}a(o,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Pm(e),e){const r=ge.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return zae(s);if(ge.isFunction(n))return n.call(this,s,r);if(ge.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Pm(e),e){const r=ge.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||hT(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=Pm(a),a){const o=ge.findKey(r,a);o&&(!n||hT(r,r[o],o,n))&&(delete r[o],s=!0)}}return ge.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||hT(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ge.forEach(this,(s,i)=>{const a=ge.findKey(r,i);if(a){n[a]=Eb(s),delete n[i];return}const o=e?jae(i):String(i).trim();o!==i&&delete n[i],n[o]=Eb(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ge.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[_5]=this[_5]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=Pm(a);r[o]||(Uae(s,a),r[o]=!0)}return ge.isArray(e)?e.forEach(i):i(e),this}};bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(bi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ge.freezeMethods(bi);function pT(t,e){const n=this||Qy,r=e||n,s=bi.from(r.headers);let i=r.data;return ge.forEach(t,function(o){i=o.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function lj(t){return!!(t&&t.__CANCEL__)}function Fp(t,e,n){Et.call(this,t??"canceled",Et.ERR_CANCELED,e,n),this.name="CanceledError"}ge.inherits(Fp,Et,{__CANCEL__:!0});function uj(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Et("Request failed with status code "+n.status,[Et.ERR_BAD_REQUEST,Et.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Vae(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Wae(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[i];a||(a=u),n[s]=l,r[s]=u;let f=i,d=0;for(;f!==s;)d+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const h=c&&u-c;return h?Math.round(d*1e3/h):void 0}}function Gae(t,e){let n=0,r=1e3/e,s,i;const a=(u,c=Date.now())=>{n=c,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const c=Date.now(),f=c-n;f>=r?a(u,c):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-f)))},()=>s&&a(s)]}const w2=(t,e,n=3)=>{let r=0;const s=Wae(50,250);return Gae(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-r,u=s(l),c=a<=o;r=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(f)},n)},O5=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},D5=t=>(...e)=>ge.asap(()=>t(...e)),Hae=Is.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Is.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Is.origin),Is.navigator&&/(msie|trident)/i.test(Is.navigator.userAgent)):()=>!0,qae=Is.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];ge.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ge.isString(r)&&a.push("path="+r),ge.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Kae(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Xae(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function cj(t,e,n){let r=!Kae(e);return t&&(r||n==!1)?Xae(t,e):e}const R5=t=>t instanceof bi?{...t}:t;function Xf(t,e){e=e||{};const n={};function r(u,c,f,d){return ge.isPlainObject(u)&&ge.isPlainObject(c)?ge.merge.call({caseless:d},u,c):ge.isPlainObject(c)?ge.merge({},c):ge.isArray(c)?c.slice():c}function s(u,c,f,d){if(ge.isUndefined(c)){if(!ge.isUndefined(u))return r(void 0,u,f,d)}else return r(u,c,f,d)}function i(u,c){if(!ge.isUndefined(c))return r(void 0,c)}function a(u,c){if(ge.isUndefined(c)){if(!ge.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function o(u,c,f){if(f in e)return r(u,c);if(f in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c,f)=>s(R5(u),R5(c),f,!0)};return ge.forEach(Object.keys({...t,...e}),function(c){const f=l[c]||s,d=f(t[c],e[c],c);ge.isUndefined(d)&&f!==o||(n[c]=d)}),n}const fj=t=>{const e=Xf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=e;if(e.headers=a=bi.from(a),e.url=ij(cj(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ge.isFormData(n)){if(Is.hasStandardBrowserEnv||Is.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ge.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,f])=>{u.includes(c.toLowerCase())&&a.set(c,f)})}}if(Is.hasStandardBrowserEnv&&(r&&ge.isFunction(r)&&(r=r(e)),r||r!==!1&&Hae(e.url))){const l=s&&i&&qae.read(i);l&&a.set(s,l)}return e},Yae=typeof XMLHttpRequest<"u",Zae=Yae&&function(t){return new Promise(function(n,r){const s=fj(t);let i=s.data;const a=bi.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=s,c,f,d,h,p;function m(){h&&h(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function y(){if(!g)return;const b=bi.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:t,request:g};uj(function(E){n(E),m()},function(E){r(E),m()},w),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new Et("Request aborted",Et.ECONNABORTED,t,g)),g=null)},g.onerror=function(x){const w=x&&x.message?x.message:"Network Error",C=new Et(w,Et.ERR_NETWORK,t,g);C.event=x||null,r(C),g=null},g.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||aj;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),r(new Et(x,w.clarifyTimeoutError?Et.ETIMEDOUT:Et.ECONNABORTED,t,g)),g=null},i===void 0&&a.setContentType(null),"setRequestHeader"in g&&ge.forEach(a.toJSON(),function(x,w){g.setRequestHeader(w,x)}),ge.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),o&&o!=="json"&&(g.responseType=s.responseType),u&&([d,p]=w2(u,!0),g.addEventListener("progress",d)),l&&g.upload&&([f,h]=w2(l),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(c=b=>{g&&(r(!b||b.type?new Fp(null,t,g):b),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const v=Vae(s.url);if(v&&Is.protocols.indexOf(v)===-1){r(new Et("Unsupported protocol "+v+":",Et.ERR_BAD_REQUEST,t));return}g.send(i||null)})},Qae=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,o();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Et?c:new Fp(c instanceof Error?c.message:c))}};let a=e&&setTimeout(()=>{a=null,i(new Et(`timeout ${e} of ms exceeded`,Et.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>ge.asap(o),l}},Jae=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},eoe=async function*(t,e){for await(const n of toe(t))yield*Jae(n,e)},toe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},P5=(t,e,n,r)=>{const s=eoe(t,e);let i=0,a,o=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await s.next();if(u){o(),l.close();return}let f=c.byteLength;if(n){let d=i+=f;n(d)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},M5=64*1024,{isFunction:bv}=ge,noe=(({Request:t,Response:e})=>({Request:t,Response:e}))(ge.global),{ReadableStream:F5,TextEncoder:L5}=ge.global,z5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},roe=t=>{t=ge.merge.call({skipUndefined:!0},noe,t);const{fetch:e,Request:n,Response:r}=t,s=e?bv(e):typeof fetch=="function",i=bv(n),a=bv(r);if(!s)return!1;const o=s&&bv(F5),l=s&&(typeof L5=="function"?(p=>m=>p.encode(m))(new L5):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=i&&o&&z5(()=>{let p=!1;const m=new n(Is.origin,{body:new F5,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),c=a&&o&&z5(()=>ge.isReadableStream(new r("").body)),f={stream:c&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(m,g)=>{let y=m&&m[p];if(y)return y.call(m);throw new Et(`Response type '${p}' is not supported`,Et.ERR_NOT_SUPPORT,g)})});const d=async p=>{if(p==null)return 0;if(ge.isBlob(p))return p.size;if(ge.isSpecCompliantForm(p))return(await new n(Is.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(p)||ge.isArrayBuffer(p))return p.byteLength;if(ge.isURLSearchParams(p)&&(p=p+""),ge.isString(p))return(await l(p)).byteLength},h=async(p,m)=>{const g=ge.toFiniteNumber(p.getContentLength());return g??d(m)};return async p=>{let{url:m,method:g,data:y,signal:v,cancelToken:b,timeout:x,onDownloadProgress:w,onUploadProgress:C,responseType:E,headers:A,withCredentials:O="same-origin",fetchOptions:R}=fj(p),F=e||fetch;E=E?(E+"").toLowerCase():"text";let z=Qae([v,b&&b.toAbortSignal()],x),j=null;const H=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let J;try{if(C&&u&&g!=="get"&&g!=="head"&&(J=await h(A,y))!==0){let be=new n(m,{method:"POST",body:y,duplex:"half"}),ue;if(ge.isFormData(y)&&(ue=be.headers.get("content-type"))&&A.setContentType(ue),be.body){const[Ne,_e]=O5(J,w2(D5(C)));y=P5(be.body,M5,Ne,_e)}}ge.isString(O)||(O=O?"include":"omit");const U=i&&"credentials"in n.prototype,Y={...R,signal:z,method:g.toUpperCase(),headers:A.normalize().toJSON(),body:y,duplex:"half",credentials:U?O:void 0};j=i&&new n(m,Y);let Q=await(i?F(j,R):F(m,Y));const se=c&&(E==="stream"||E==="response");if(c&&(w||se&&H)){const be={};["status","statusText","headers"].forEach(Ee=>{be[Ee]=Q[Ee]});const ue=ge.toFiniteNumber(Q.headers.get("content-length")),[Ne,_e]=w&&O5(ue,w2(D5(w),!0))||[];Q=new r(P5(Q.body,M5,Ne,()=>{_e&&_e(),H&&H()}),be)}E=E||"text";let he=await f[ge.findKey(f,E)||"text"](Q,p);return!se&&H&&H(),await new Promise((be,ue)=>{uj(be,ue,{data:he,headers:bi.from(Q.headers),status:Q.status,statusText:Q.statusText,config:p,request:j})})}catch(U){throw H&&H(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Et("Network Error",Et.ERR_NETWORK,p,j),{cause:U.cause||U}):Et.from(U,U&&U.code,p,j)}}},soe=new Map,dj=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let a=i.length,o=a,l,u,c=soe;for(;o--;)l=i[o],u=c.get(l),u===void 0&&c.set(l,u=o?new Map:roe(e)),c=u;return u};dj();const ME={http:wae,xhr:Zae,fetch:{get:dj}};ge.forEach(ME,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const B5=t=>`- ${t}`,ioe=t=>ge.isFunction(t)||t===null||t===!1,hj={getAdapter:(t,e)=>{t=ge.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let a=0;a<n;a++){r=t[a];let o;if(s=r,!ioe(r)&&(s=ME[(o=String(r)).toLowerCase()],s===void 0))throw new Et(`Unknown adapter '${o}'`);if(s&&(ge.isFunction(s)||(s=s.get(e))))break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=n?a.length>1?`since :
`+a.map(B5).join(`
`):" "+B5(a[0]):"as no adapter specified";throw new Et("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:ME};function mT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fp(null,t)}function j5(t){return mT(t),t.headers=bi.from(t.headers),t.data=pT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hj.getAdapter(t.adapter||Qy.adapter,t)(t).then(function(r){return mT(t),r.data=pT.call(t,t.transformResponse,r),r.headers=bi.from(r.headers),r},function(r){return lj(r)||(mT(t),r&&r.response&&(r.response.data=pT.call(t,t.transformResponse,r.response),r.response.headers=bi.from(r.response.headers))),Promise.reject(r)})}const pj="1.12.2",ww={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ww[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const U5={};ww.transitional=function(e,n,r){function s(i,a){return"[Axios v"+pj+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,o)=>{if(e===!1)throw new Et(s(a," has been removed"+(n?" in "+n:"")),Et.ERR_DEPRECATED);return n&&!U5[a]&&(U5[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,o):!0}};ww.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function aoe(t,e,n){if(typeof t!="object")throw new Et("options must be an object",Et.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const o=t[i],l=o===void 0||a(o,i,t);if(l!==!0)throw new Et("option "+i+" must be "+l,Et.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Et("Unknown option "+i,Et.ERR_BAD_OPTION)}}const kb={assertOptions:aoe,validators:ww},No=kb.validators;let Rf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new I5,response:new I5}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xf(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&kb.assertOptions(r,{silentJSONParsing:No.transitional(No.boolean),forcedJSONParsing:No.transitional(No.boolean),clarifyTimeoutError:No.transitional(No.boolean)},!1),s!=null&&(ge.isFunction(s)?n.paramsSerializer={serialize:s}:kb.assertOptions(s,{encode:No.function,serialize:No.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),kb.assertOptions(n,{baseUrl:No.spelling("baseURL"),withXsrfToken:No.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&ge.merge(i.common,i[n.method]);i&&ge.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=bi.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,f=0,d;if(!l){const p=[j5.bind(this),void 0];for(p.unshift(...o),p.push(...u),d=p.length,c=Promise.resolve(n);f<d;)c=c.then(p[f++],p[f++]);return c}d=o.length;let h=n;for(;f<d;){const p=o[f++],m=o[f++];try{h=p(h)}catch(g){m.call(this,g);break}}try{c=j5.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=u.length;f<d;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=Xf(this.defaults,e);const n=cj(e.baseURL,e.url,e.allowAbsoluteUrls);return ij(n,e.params,e.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(e){Rf.prototype[e]=function(n,r){return this.request(Xf(r||{},{method:e,url:n,data:(r||{}).data}))}});ge.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,o){return this.request(Xf(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Rf.prototype[e]=n(),Rf.prototype[e+"Form"]=n(!0)});let ooe=class mj{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{r.subscribe(o),i=o}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,o){r.reason||(r.reason=new Fp(i,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new mj(function(s){e=s}),cancel:e}}};function loe(t){return function(n){return t.apply(null,n)}}function uoe(t){return ge.isObject(t)&&t.isAxiosError===!0}const FE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FE).forEach(([t,e])=>{FE[e]=t});function gj(t){const e=new Rf(t),n=qB(Rf.prototype.request,e);return ge.extend(n,Rf.prototype,e,{allOwnKeys:!0}),ge.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return gj(Xf(t,s))},n}const sr=gj(Qy);sr.Axios=Rf;sr.CanceledError=Fp;sr.CancelToken=ooe;sr.isCancel=lj;sr.VERSION=pj;sr.toFormData=xw;sr.AxiosError=Et;sr.Cancel=sr.CanceledError;sr.all=function(e){return Promise.all(e)};sr.spread=loe;sr.isAxiosError=uoe;sr.mergeConfig=Xf;sr.AxiosHeaders=bi;sr.formToJSON=t=>oj(ge.isHTMLForm(t)?new FormData(t):t);sr.getAdapter=hj.getAdapter;sr.HttpStatusCode=FE;sr.default=sr;const{Axios:MQe,AxiosError:FQe,CanceledError:LQe,isCancel:zQe,CancelToken:BQe,VERSION:jQe,all:UQe,Cancel:VQe,isAxiosError:WQe,spread:GQe,toFormData:HQe,AxiosHeaders:qQe,HttpStatusCode:KQe,formToJSON:XQe,getAdapter:YQe,mergeConfig:ZQe}=sr,yj="http://localhost:5000",Ea=sr.create({baseURL:yj,headers:{"Content-Type":"application/json"}});Ea.interceptors.request.use(t=>{const e=localStorage.getItem("accessToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ea.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===403&&!e._retry){e._retry=!0;try{const r=localStorage.getItem("refreshToken");if(r){const s=await sr.post(`${yj}/auth/refresh`,{refreshToken:r}),{accessToken:i}=s.data;return localStorage.setItem("accessToken",i),e.headers.Authorization=`Bearer ${i}`,Ea(e)}}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"}}return Promise.reject(t)});const xv={async login(t){return(await Ea.post("/auth/login",t)).data},async register(t){return(await Ea.post("/auth/register",t)).data},async refresh(t){return(await Ea.post("/auth/refresh",{refreshToken:t})).data},async getMe(){return(await Ea.get("/auth/me")).data},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},vj={user:null,loading:!0,error:null,isAuthenticated:!1},coe=(t,e)=>{switch(e.type){case"SET_LOADING":return{...t,loading:e.payload};case"SET_USER":return{...t,user:e.payload,isAuthenticated:!!e.payload,loading:!1,error:null};case"SET_ERROR":return{...t,error:e.payload,loading:!1};case"CLEAR_ERROR":return{...t,error:null};case"LOGOUT":return{...vj,loading:!1};default:return t}},bj=k.createContext(void 0),wd=()=>{const t=k.useContext(bj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},foe=({children:t})=>{const[e,n]=k.useReducer(coe,vj);k.useEffect(()=>{r()},[]);const r=async()=>{try{if(localStorage.getItem("accessToken")){const{user:u}=await xv.getMe();n({type:"SET_USER",payload:u})}else n({type:"SET_LOADING",payload:!1})}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),n({type:"SET_LOADING",payload:!1})}},s=async l=>{var u,c;try{n({type:"SET_LOADING",payload:!0});const f=await xv.login(l);localStorage.setItem("accessToken",f.accessToken),localStorage.setItem("refreshToken",f.refreshToken),n({type:"SET_USER",payload:f.user}),Bt.success("Login successful!")}catch(f){const d=((c=(u=f.response)==null?void 0:u.data)==null?void 0:c.error)||"Login failed";throw n({type:"SET_ERROR",payload:d}),Bt.error(d),f}},i=async l=>{var u,c;try{n({type:"SET_LOADING",payload:!0});const f=await xv.register(l);localStorage.setItem("accessToken",f.accessToken),localStorage.setItem("refreshToken",f.refreshToken),n({type:"SET_USER",payload:f.user}),Bt.success("Registration successful!")}catch(f){const d=((c=(u=f.response)==null?void 0:u.data)==null?void 0:c.error)||"Registration failed";throw n({type:"SET_ERROR",payload:d}),Bt.error(d),f}},a=()=>{xv.logout(),n({type:"LOGOUT"}),Bt.info("Logged out successfully")},o=()=>{n({type:"CLEAR_ERROR"})};return B.jsx(bj.Provider,{value:{...e,login:s,register:i,logout:a,clearError:o},children:t})},Mm=({children:t})=>{const{isAuthenticated:e,loading:n}=wd(),r=Pp();return n?B.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):e?B.jsx(B.Fragment,{children:t}):B.jsx(kE,{to:"/login",state:{from:r},replace:!0})};var Jy=t=>t.type==="checkbox",gf=t=>t instanceof Date,Bs=t=>t==null;const xj=t=>typeof t=="object";var pr=t=>!Bs(t)&&!Array.isArray(t)&&xj(t)&&!gf(t),doe=t=>pr(t)&&t.target?Jy(t.target)?t.target.checked:t.target.value:t,hoe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,poe=(t,e)=>t.has(hoe(e)),moe=t=>{const e=t.constructor&&t.constructor.prototype;return pr(e)&&e.hasOwnProperty("isPrototypeOf")},n$=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(n$&&(t instanceof Blob||r))&&(n||pr(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!moe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Xr(t[s]));else return t;return e}var Sw=t=>/^\w*$/.test(t),br=t=>t===void 0,r$=t=>Array.isArray(t)?t.filter(Boolean):[],s$=t=>r$(t.replace(/["|']|\]/g,"").split(/\.|\[/)),tt=(t,e,n)=>{if(!e||!pr(t))return n;const r=(Sw(e)?[e]:s$(e)).reduce((s,i)=>Bs(s)?s:s[i],t);return br(r)||r===t?br(t[e])?n:t[e]:r},_o=t=>typeof t=="boolean",mn=(t,e,n)=>{let r=-1;const s=Sw(e)?[e]:s$(e),i=s.length,a=i-1;for(;++r<i;){const o=s[r];let l=n;if(r!==a){const u=t[o];l=pr(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=l,t=t[o]}};const V5={BLUR:"blur",FOCUS_OUT:"focusout"},Ja={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ml={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},goe=Tt.createContext(null);goe.displayName="HookFormContext";var yoe=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==Ja.all&&(e._proxyFormState[a]=!r||Ja.all),t[a]}});return s};const voe=typeof window<"u"?Tt.useLayoutEffect:Tt.useEffect;var zo=t=>typeof t=="string",boe=(t,e,n,r,s)=>zo(t)?(r&&e.watch.add(t),tt(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),tt(n,i))):(r&&(e.watchAll=!0),n),LE=t=>Bs(t)||!xj(t);function Ou(t,e,n=new WeakSet){if(LE(t)||LE(e))return t===e;if(gf(t)&&gf(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const a=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=e[i];if(gf(a)&&gf(o)||pr(a)&&pr(o)||Array.isArray(a)&&Array.isArray(o)?!Ou(a,o,n):a!==o)return!1}}return!0}var wj=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Rg=t=>Array.isArray(t)?t:[t],W5=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},ui=t=>pr(t)&&!Object.keys(t).length,i$=t=>t.type==="file",eo=t=>typeof t=="function",S2=t=>{if(!n$)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Sj=t=>t.type==="select-multiple",a$=t=>t.type==="radio",xoe=t=>a$(t)||Jy(t),gT=t=>S2(t)&&t.isConnected;function woe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=br(t)?r++:t[e[r++]];return t}function Soe(t){for(const e in t)if(t.hasOwnProperty(e)&&!br(t[e]))return!1;return!0}function yr(t,e){const n=Array.isArray(e)?e:Sw(e)?[e]:s$(e),r=n.length===1?t:woe(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(pr(r)&&ui(r)||Array.isArray(r)&&Soe(r))&&yr(t,n.slice(0,-1)),t}var Tj=t=>{for(const e in t)if(eo(t[e]))return!0;return!1};function T2(t,e={}){const n=Array.isArray(t);if(pr(t)||n)for(const r in t)Array.isArray(t[r])||pr(t[r])&&!Tj(t[r])?(e[r]=Array.isArray(t[r])?[]:{},T2(t[r],e[r])):Bs(t[r])||(e[r]=!0);return e}function Cj(t,e,n){const r=Array.isArray(t);if(pr(t)||r)for(const s in t)Array.isArray(t[s])||pr(t[s])&&!Tj(t[s])?br(e)||LE(n[s])?n[s]=Array.isArray(t[s])?T2(t[s],[]):{...T2(t[s])}:Cj(t[s],Bs(e)?{}:e[s],n[s]):n[s]=!Ou(t[s],e[s]);return n}var Fm=(t,e)=>Cj(t,e,T2(e));const G5={value:!1,isValid:!1},H5={value:!0,isValid:!0};var Ej=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!br(t[0].attributes.value)?br(t[0].value)||t[0].value===""?H5:{value:t[0].value,isValid:!0}:H5:G5}return G5},kj=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>br(t)?t:e?t===""?NaN:t&&+t:n&&zo(t)?new Date(t):r?r(t):t;const q5={isValid:!1,value:null};var Nj=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,q5):q5;function K5(t){const e=t.ref;return i$(e)?e.files:a$(e)?Nj(t.refs).value:Sj(e)?[...e.selectedOptions].map(({value:n})=>n):Jy(e)?Ej(t.refs).value:kj(br(e.value)?t.ref.value:e.value,t)}var Toe=(t,e,n,r)=>{const s={};for(const i of t){const a=tt(e,i);a&&mn(s,i,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},C2=t=>t instanceof RegExp,Lm=t=>br(t)?t:C2(t)?t.source:pr(t)?C2(t.value)?t.value.source:t.value:t,X5=t=>({isOnSubmit:!t||t===Ja.onSubmit,isOnBlur:t===Ja.onBlur,isOnChange:t===Ja.onChange,isOnAll:t===Ja.all,isOnTouch:t===Ja.onTouched});const Y5="AsyncFunction";var Coe=t=>!!t&&!!t.validate&&!!(eo(t.validate)&&t.validate.constructor.name===Y5||pr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Y5)),Eoe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Z5=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Pg=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=tt(t,s);if(i){const{_f:a,...o}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Pg(o,e))break}else if(pr(o)&&Pg(o,e))break}}};function Q5(t,e,n){const r=tt(t,n);if(r||Sw(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=tt(e,i),o=tt(t,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};s.pop()}return{name:n}}var koe=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return ui(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!r||Ja.all))},Noe=(t,e,n)=>!t||!e||t===e||Rg(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Aoe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,$oe=(t,e)=>!r$(tt(t,e)).length&&yr(t,e),Ioe=(t,e,n)=>{const r=Rg(tt(t,n));return mn(r,"root",e[n]),mn(t,n,r),t},Nb=t=>zo(t);function J5(t,e,n="validate"){if(Nb(t)||Array.isArray(t)&&t.every(Nb)||_o(t)&&!t)return{type:n,message:Nb(t)?t:"",ref:e}}var Hd=t=>pr(t)&&!C2(t)?t:{value:t,message:""},eP=async(t,e,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:u,minLength:c,min:f,max:d,pattern:h,validate:p,name:m,valueAsNumber:g,mount:y}=t._f,v=tt(n,m);if(!y||e.has(m))return{};const b=o?o[0]:a,x=z=>{s&&b.reportValidity&&(b.setCustomValidity(_o(z)?"":z||""),b.reportValidity())},w={},C=a$(a),E=Jy(a),A=C||E,O=(g||i$(a))&&br(a.value)&&br(v)||S2(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,R=wj.bind(null,m,r,w),F=(z,j,H,J=ml.maxLength,U=ml.minLength)=>{const Y=z?j:H;w[m]={type:z?J:U,message:Y,ref:a,...R(z?J:U,Y)}};if(i?!Array.isArray(v)||!v.length:l&&(!A&&(O||Bs(v))||_o(v)&&!v||E&&!Ej(o).isValid||C&&!Nj(o).isValid)){const{value:z,message:j}=Nb(l)?{value:!!l,message:l}:Hd(l);if(z&&(w[m]={type:ml.required,message:j,ref:b,...R(ml.required,j)},!r))return x(j),w}if(!O&&(!Bs(f)||!Bs(d))){let z,j;const H=Hd(d),J=Hd(f);if(!Bs(v)&&!isNaN(v)){const U=a.valueAsNumber||v&&+v;Bs(H.value)||(z=U>H.value),Bs(J.value)||(j=U<J.value)}else{const U=a.valueAsDate||new Date(v),Y=he=>new Date(new Date().toDateString()+" "+he),Q=a.type=="time",se=a.type=="week";zo(H.value)&&v&&(z=Q?Y(v)>Y(H.value):se?v>H.value:U>new Date(H.value)),zo(J.value)&&v&&(j=Q?Y(v)<Y(J.value):se?v<J.value:U<new Date(J.value))}if((z||j)&&(F(!!z,H.message,J.message,ml.max,ml.min),!r))return x(w[m].message),w}if((u||c)&&!O&&(zo(v)||i&&Array.isArray(v))){const z=Hd(u),j=Hd(c),H=!Bs(z.value)&&v.length>+z.value,J=!Bs(j.value)&&v.length<+j.value;if((H||J)&&(F(H,z.message,j.message),!r))return x(w[m].message),w}if(h&&!O&&zo(v)){const{value:z,message:j}=Hd(h);if(C2(z)&&!v.match(z)&&(w[m]={type:ml.pattern,message:j,ref:a,...R(ml.pattern,j)},!r))return x(j),w}if(p){if(eo(p)){const z=await p(v,n),j=J5(z,b);if(j&&(w[m]={...j,...R(ml.validate,j.message)},!r))return x(j.message),w}else if(pr(p)){let z={};for(const j in p){if(!ui(z)&&!r)break;const H=J5(await p[j](v,n),b,j);H&&(z={...H,...R(j,H.message)},x(H.message),r&&(w[m]=z))}if(!ui(z)&&(w[m]={ref:b,...z},!r))return w}}return x(!0),w};const _oe={mode:Ja.onSubmit,reValidateMode:Ja.onChange,shouldFocusError:!0};function Ooe(t={}){let e={..._oe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:eo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=pr(e.defaultValues)||pr(e.values)?Xr(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Xr(s),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...c};const d={array:W5(),state:W5()},h=e.criteriaMode===Ja.all,p=K=>ae=>{clearTimeout(u),u=setTimeout(K,ae)},m=async K=>{if(!e.disabled&&(c.isValid||f.isValid||K)){const ae=e.resolver?ui((await E()).errors):await O(r,!0);ae!==n.isValid&&d.state.next({isValid:ae})}},g=(K,ae)=>{!e.disabled&&(c.isValidating||c.validatingFields||f.isValidating||f.validatingFields)&&((K||Array.from(o.mount)).forEach(ve=>{ve&&(ae?mn(n.validatingFields,ve,ae):yr(n.validatingFields,ve))}),d.state.next({validatingFields:n.validatingFields,isValidating:!ui(n.validatingFields)}))},y=(K,ae=[],ve,je,Pe=!0,De=!0)=>{if(je&&ve&&!e.disabled){if(a.action=!0,De&&Array.isArray(tt(r,K))){const We=ve(tt(r,K),je.argA,je.argB);Pe&&mn(r,K,We)}if(De&&Array.isArray(tt(n.errors,K))){const We=ve(tt(n.errors,K),je.argA,je.argB);Pe&&mn(n.errors,K,We),$oe(n.errors,K)}if((c.touchedFields||f.touchedFields)&&De&&Array.isArray(tt(n.touchedFields,K))){const We=ve(tt(n.touchedFields,K),je.argA,je.argB);Pe&&mn(n.touchedFields,K,We)}(c.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Fm(s,i)),d.state.next({name:K,isDirty:F(K,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else mn(i,K,ae)},v=(K,ae)=>{mn(n.errors,K,ae),d.state.next({errors:n.errors})},b=K=>{n.errors=K,d.state.next({errors:n.errors,isValid:!1})},x=(K,ae,ve,je)=>{const Pe=tt(r,K);if(Pe){const De=tt(i,K,br(ve)?tt(s,K):ve);br(De)||je&&je.defaultChecked||ae?mn(i,K,ae?De:K5(Pe._f)):H(K,De),a.mount&&m()}},w=(K,ae,ve,je,Pe)=>{let De=!1,We=!1;const vt={name:K};if(!e.disabled){if(!ve||je){(c.isDirty||f.isDirty)&&(We=n.isDirty,n.isDirty=vt.isDirty=F(),De=We!==vt.isDirty);const dt=Ou(tt(s,K),ae);We=!!tt(n.dirtyFields,K),dt?yr(n.dirtyFields,K):mn(n.dirtyFields,K,!0),vt.dirtyFields=n.dirtyFields,De=De||(c.dirtyFields||f.dirtyFields)&&We!==!dt}if(ve){const dt=tt(n.touchedFields,K);dt||(mn(n.touchedFields,K,ve),vt.touchedFields=n.touchedFields,De=De||(c.touchedFields||f.touchedFields)&&dt!==ve)}De&&Pe&&d.state.next(vt)}return De?vt:{}},C=(K,ae,ve,je)=>{const Pe=tt(n.errors,K),De=(c.isValid||f.isValid)&&_o(ae)&&n.isValid!==ae;if(e.delayError&&ve?(l=p(()=>v(K,ve)),l(e.delayError)):(clearTimeout(u),l=null,ve?mn(n.errors,K,ve):yr(n.errors,K)),(ve?!Ou(Pe,ve):Pe)||!ui(je)||De){const We={...je,...De&&_o(ae)?{isValid:ae}:{},errors:n.errors,name:K};n={...n,...We},d.state.next(We)}},E=async K=>{g(K,!0);const ae=await e.resolver(i,e.context,Toe(K||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return g(K),ae},A=async K=>{const{errors:ae}=await E(K);if(K)for(const ve of K){const je=tt(ae,ve);je?mn(n.errors,ve,je):yr(n.errors,ve)}else n.errors=ae;return ae},O=async(K,ae,ve={valid:!0})=>{for(const je in K){const Pe=K[je];if(Pe){const{_f:De,...We}=Pe;if(De){const vt=o.array.has(De.name),dt=Pe._f&&Coe(Pe._f);dt&&c.validatingFields&&g([je],!0);const wn=await eP(Pe,o.disabled,i,h,e.shouldUseNativeValidation&&!ae,vt);if(dt&&c.validatingFields&&g([je]),wn[De.name]&&(ve.valid=!1,ae))break;!ae&&(tt(wn,De.name)?vt?Ioe(n.errors,wn,De.name):mn(n.errors,De.name,wn[De.name]):yr(n.errors,De.name))}!ui(We)&&await O(We,ae,ve)}}return ve.valid},R=()=>{for(const K of o.unMount){const ae=tt(r,K);ae&&(ae._f.refs?ae._f.refs.every(ve=>!gT(ve)):!gT(ae._f.ref))&&He(K)}o.unMount=new Set},F=(K,ae)=>!e.disabled&&(K&&ae&&mn(i,K,ae),!Ou(he(),s)),z=(K,ae,ve)=>boe(K,o,{...a.mount?i:br(ae)?s:zo(K)?{[K]:ae}:ae},ve,ae),j=K=>r$(tt(a.mount?i:s,K,e.shouldUnregister?tt(s,K,[]):[])),H=(K,ae,ve={})=>{const je=tt(r,K);let Pe=ae;if(je){const De=je._f;De&&(!De.disabled&&mn(i,K,kj(ae,De)),Pe=S2(De.ref)&&Bs(ae)?"":ae,Sj(De.ref)?[...De.ref.options].forEach(We=>We.selected=Pe.includes(We.value)):De.refs?Jy(De.ref)?De.refs.forEach(We=>{(!We.defaultChecked||!We.disabled)&&(Array.isArray(Pe)?We.checked=!!Pe.find(vt=>vt===We.value):We.checked=Pe===We.value||!!Pe)}):De.refs.forEach(We=>We.checked=We.value===Pe):i$(De.ref)?De.ref.value="":(De.ref.value=Pe,De.ref.type||d.state.next({name:K,values:Xr(i)})))}(ve.shouldDirty||ve.shouldTouch)&&w(K,Pe,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&se(K)},J=(K,ae,ve)=>{for(const je in ae){if(!ae.hasOwnProperty(je))return;const Pe=ae[je],De=K+"."+je,We=tt(r,De);(o.array.has(K)||pr(Pe)||We&&!We._f)&&!gf(Pe)?J(De,Pe,ve):H(De,Pe,ve)}},U=(K,ae,ve={})=>{const je=tt(r,K),Pe=o.array.has(K),De=Xr(ae);mn(i,K,De),Pe?(d.array.next({name:K,values:Xr(i)}),(c.isDirty||c.dirtyFields||f.isDirty||f.dirtyFields)&&ve.shouldDirty&&d.state.next({name:K,dirtyFields:Fm(s,i),isDirty:F(K,De)})):je&&!je._f&&!Bs(De)?J(K,De,ve):H(K,De,ve),Z5(K,o)&&d.state.next({...n,name:K}),d.state.next({name:a.mount?K:void 0,values:Xr(i)})},Y=async K=>{a.mount=!0;const ae=K.target;let ve=ae.name,je=!0;const Pe=tt(r,ve),De=dt=>{je=Number.isNaN(dt)||gf(dt)&&isNaN(dt.getTime())||Ou(dt,tt(i,ve,dt))},We=X5(e.mode),vt=X5(e.reValidateMode);if(Pe){let dt,wn;const ti=ae.type?K5(Pe._f):doe(K),qr=K.type===V5.BLUR||K.type===V5.FOCUS_OUT,hu=!Eoe(Pe._f)&&!e.resolver&&!tt(n.errors,ve)&&!Pe._f.deps||Aoe(qr,tt(n.touchedFields,ve),n.isSubmitted,vt,We),_i=Z5(ve,o,qr);mn(i,ve,ti),qr?(!ae||!ae.readOnly)&&(Pe._f.onBlur&&Pe._f.onBlur(K),l&&l(0)):Pe._f.onChange&&Pe._f.onChange(K);const qn=w(ve,ti,qr),Sn=!ui(qn)||_i;if(!qr&&d.state.next({name:ve,type:K.type,values:Xr(i)}),hu)return(c.isValid||f.isValid)&&(e.mode==="onBlur"?qr&&m():qr||m()),Sn&&d.state.next({name:ve,..._i?{}:qn});if(!qr&&_i&&d.state.next({...n}),e.resolver){const{errors:Mn}=await E([ve]);if(De(ti),je){const hs=Q5(n.errors,r,ve),wo=Q5(Mn,r,hs.name||ve);dt=wo.error,ve=wo.name,wn=ui(Mn)}}else g([ve],!0),dt=(await eP(Pe,o.disabled,i,h,e.shouldUseNativeValidation))[ve],g([ve]),De(ti),je&&(dt?wn=!1:(c.isValid||f.isValid)&&(wn=await O(r,!0)));je&&(Pe._f.deps&&se(Pe._f.deps),C(ve,wn,dt,qn))}},Q=(K,ae)=>{if(tt(n.errors,ae)&&K.focus)return K.focus(),1},se=async(K,ae={})=>{let ve,je;const Pe=Rg(K);if(e.resolver){const De=await A(br(K)?K:Pe);ve=ui(De),je=K?!Pe.some(We=>tt(De,We)):ve}else K?(je=(await Promise.all(Pe.map(async De=>{const We=tt(r,De);return await O(We&&We._f?{[De]:We}:We)}))).every(Boolean),!(!je&&!n.isValid)&&m()):je=ve=await O(r);return d.state.next({...!zo(K)||(c.isValid||f.isValid)&&ve!==n.isValid?{}:{name:K},...e.resolver||!K?{isValid:ve}:{},errors:n.errors}),ae.shouldFocus&&!je&&Pg(r,Q,K?Pe:o.mount),je},he=K=>{const ae={...a.mount?i:s};return br(K)?ae:zo(K)?tt(ae,K):K.map(ve=>tt(ae,ve))},be=(K,ae)=>({invalid:!!tt((ae||n).errors,K),isDirty:!!tt((ae||n).dirtyFields,K),error:tt((ae||n).errors,K),isValidating:!!tt(n.validatingFields,K),isTouched:!!tt((ae||n).touchedFields,K)}),ue=K=>{K&&Rg(K).forEach(ae=>yr(n.errors,ae)),d.state.next({errors:K?n.errors:{}})},Ne=(K,ae,ve)=>{const je=(tt(r,K,{_f:{}})._f||{}).ref,Pe=tt(n.errors,K)||{},{ref:De,message:We,type:vt,...dt}=Pe;mn(n.errors,K,{...dt,...ae,ref:je}),d.state.next({name:K,errors:n.errors,isValid:!1}),ve&&ve.shouldFocus&&je&&je.focus&&je.focus()},_e=(K,ae)=>eo(K)?d.state.subscribe({next:ve=>"values"in ve&&K(z(void 0,ae),ve)}):z(K,ae,!0),Ee=K=>d.state.subscribe({next:ae=>{Noe(K.name,ae.name,K.exact)&&koe(ae,K.formState||c,Ct,K.reRenderRoot)&&K.callback({values:{...i},...n,...ae,defaultValues:s})}}).unsubscribe,Me=K=>(a.mount=!0,f={...f,...K.formState},Ee({...K,formState:f})),He=(K,ae={})=>{for(const ve of K?Rg(K):o.mount)o.mount.delete(ve),o.array.delete(ve),ae.keepValue||(yr(r,ve),yr(i,ve)),!ae.keepError&&yr(n.errors,ve),!ae.keepDirty&&yr(n.dirtyFields,ve),!ae.keepTouched&&yr(n.touchedFields,ve),!ae.keepIsValidating&&yr(n.validatingFields,ve),!e.shouldUnregister&&!ae.keepDefaultValue&&yr(s,ve);d.state.next({values:Xr(i)}),d.state.next({...n,...ae.keepDirty?{isDirty:F()}:{}}),!ae.keepIsValid&&m()},Ze=({disabled:K,name:ae})=>{(_o(K)&&a.mount||K||o.disabled.has(ae))&&(K?o.disabled.add(ae):o.disabled.delete(ae))},ye=(K,ae={})=>{let ve=tt(r,K);const je=_o(ae.disabled)||_o(e.disabled);return mn(r,K,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:K}},name:K,mount:!0,...ae}}),o.mount.add(K),ve?Ze({disabled:_o(ae.disabled)?ae.disabled:e.disabled,name:K}):x(K,!0,ae.value),{...je?{disabled:ae.disabled||e.disabled}:{},...e.progressive?{required:!!ae.required,min:Lm(ae.min),max:Lm(ae.max),minLength:Lm(ae.minLength),maxLength:Lm(ae.maxLength),pattern:Lm(ae.pattern)}:{},name:K,onChange:Y,onBlur:Y,ref:Pe=>{if(Pe){ye(K,ae),ve=tt(r,K);const De=br(Pe.value)&&Pe.querySelectorAll&&Pe.querySelectorAll("input,select,textarea")[0]||Pe,We=xoe(De),vt=ve._f.refs||[];if(We?vt.find(dt=>dt===De):De===ve._f.ref)return;mn(r,K,{_f:{...ve._f,...We?{refs:[...vt.filter(gT),De,...Array.isArray(tt(s,K))?[{}]:[]],ref:{type:De.type,name:K}}:{ref:De}}}),x(K,!1,void 0,De)}else ve=tt(r,K,{}),ve._f&&(ve._f.mount=!1),(e.shouldUnregister||ae.shouldUnregister)&&!(poe(o.array,K)&&a.action)&&o.unMount.add(K)}}},Re=()=>e.shouldFocusError&&Pg(r,Q,o.mount),Oe=K=>{_o(K)&&(d.state.next({disabled:K}),Pg(r,(ae,ve)=>{const je=tt(r,ve);je&&(ae.disabled=je._f.disabled||K,Array.isArray(je._f.refs)&&je._f.refs.forEach(Pe=>{Pe.disabled=je._f.disabled||K}))},0,!1))},me=(K,ae)=>async ve=>{let je;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let Pe=Xr(i);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:De,values:We}=await E();n.errors=De,Pe=Xr(We)}else await O(r);if(o.disabled.size)for(const De of o.disabled)yr(Pe,De);if(yr(n.errors,"root"),ui(n.errors)){d.state.next({errors:{}});try{await K(Pe,ve)}catch(De){je=De}}else ae&&await ae({...n.errors},ve),Re(),setTimeout(Re);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ui(n.errors)&&!je,submitCount:n.submitCount+1,errors:n.errors}),je)throw je},ft=(K,ae={})=>{tt(r,K)&&(br(ae.defaultValue)?U(K,Xr(tt(s,K))):(U(K,ae.defaultValue),mn(s,K,Xr(ae.defaultValue))),ae.keepTouched||yr(n.touchedFields,K),ae.keepDirty||(yr(n.dirtyFields,K),n.isDirty=ae.defaultValue?F(K,Xr(tt(s,K))):F()),ae.keepError||(yr(n.errors,K),c.isValid&&m()),d.state.next({...n}))},st=(K,ae={})=>{const ve=K?Xr(K):s,je=Xr(ve),Pe=ui(K),De=Pe?s:je;if(ae.keepDefaultValues||(s=ve),!ae.keepValues){if(ae.keepDirtyValues){const We=new Set([...o.mount,...Object.keys(Fm(s,i))]);for(const vt of Array.from(We))tt(n.dirtyFields,vt)?mn(De,vt,tt(i,vt)):U(vt,tt(De,vt))}else{if(n$&&br(K))for(const We of o.mount){const vt=tt(r,We);if(vt&&vt._f){const dt=Array.isArray(vt._f.refs)?vt._f.refs[0]:vt._f.ref;if(S2(dt)){const wn=dt.closest("form");if(wn){wn.reset();break}}}}if(ae.keepFieldsRef)for(const We of o.mount)U(We,tt(De,We));else r={}}i=e.shouldUnregister?ae.keepDefaultValues?Xr(s):{}:Xr(De),d.array.next({values:{...De}}),d.state.next({values:{...De}})}o={mount:ae.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!c.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,a.watch=!!e.shouldUnregister,d.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:Pe?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!Ou(K,s)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Pe?{}:ae.keepDirtyValues?ae.keepDefaultValues&&i?Fm(s,i):n.dirtyFields:ae.keepDefaultValues&&K?Fm(s,K):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ot=(K,ae)=>st(eo(K)?K(i):K,ae),lt=(K,ae={})=>{const ve=tt(r,K),je=ve&&ve._f;if(je){const Pe=je.refs?je.refs[0]:je.ref;Pe.focus&&(Pe.focus(),ae.shouldSelect&&eo(Pe.select)&&Pe.select())}},Ct=K=>{n={...n,...K}},Pn={control:{register:ye,unregister:He,getFieldState:be,handleSubmit:me,setError:Ne,_subscribe:Ee,_runSchema:E,_focusError:Re,_getWatch:z,_getDirty:F,_setValid:m,_setFieldArray:y,_setDisabledField:Ze,_setErrors:b,_getFieldArray:j,_reset:st,_resetDefaultValues:()=>eo(e.defaultValues)&&e.defaultValues().then(K=>{ot(K,e.resetOptions),d.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Oe,_subjects:d,_proxyFormState:c,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(K){a=K},get _defaultValues(){return s},get _names(){return o},set _names(K){o=K},get _formState(){return n},get _options(){return e},set _options(K){e={...e,...K}}},subscribe:Me,trigger:se,register:ye,handleSubmit:me,watch:_e,setValue:U,getValues:he,reset:ot,resetField:ft,clearErrors:ue,unregister:He,setError:Ne,setFocus:lt,getFieldState:be};return{...Pn,formControl:Pn}}function o$(t={}){const e=Tt.useRef(void 0),n=Tt.useRef(void 0),[r,s]=Tt.useState({isDirty:!1,isValidating:!1,isLoading:eo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:eo(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!eo(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...o}=Ooe(t);e.current={...o,formState:r}}const i=e.current.control;return i._options=t,voe(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(o=>({...o,isReady:!0})),i._formState.isReady=!0,a},[i]),Tt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Tt.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Tt.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Tt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Tt.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Tt.useEffect(()=>{t.values&&!Ou(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),Tt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=yoe(r,i),e.current}const tP=(t,e,n)=>{if(t&&"reportValidity"in t){const r=tt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},Aj=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?tP(r.ref,n,t):r&&r.refs&&r.refs.forEach(s=>tP(s,n,t))}},Doe=(t,e)=>{e.shouldUseNativeValidation&&Aj(t,e);const n={};for(const r in t){const s=tt(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(Roe(e.names||Object.keys(t),r)){const a=Object.assign({},tt(n,r));mn(a,"root",i),mn(n,r,a)}else mn(n,r,i)}return n},Roe=(t,e)=>{const n=nP(e);return t.some(r=>nP(r).match(`^${n}\\.\\d+`))};function nP(t){return t.replace(/\]|\[/g,"")}function $j(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(a,o){try{var l=(e!=null&&e.context,Promise.resolve(t[n.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},e,{context:s}))).then(function(u){return i.shouldUseNativeValidation&&Aj({},i),{values:n.raw?Object.assign({},r):u,errors:{}}}))}catch(u){return o(u)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(!a.inner)throw a;return{values:{},errors:Doe((o=a,l=!i.shouldUseNativeValidation&&i.criteriaMode==="all",(o.inner||[]).reduce(function(u,c){if(u[c.path]||(u[c.path]={message:c.message,type:c.type}),l){var f=u[c.path].types,d=f&&f[c.type];u[c.path]=wj(c.path,l,u,c.type,d?[].concat(d,c.message):c.message)}return u},{})),i)};var o,l}))}catch(a){return Promise.reject(a)}}}function Sd(t){this._maxSize=t,this.clear()}Sd.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Sd.prototype.get=function(t){return this._values[t]};Sd.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var Poe=/[^.^\]^[]+|(?=\[\]|\.\.)/g,Ij=/^\d+$/,Moe=/^\d/,Foe=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Loe=/^\s*(['"]?)(.*?)(\1)\s*$/,l$=512,rP=new Sd(l$),sP=new Sd(l$),iP=new Sd(l$),Pf={Cache:Sd,split:zE,normalizePath:yT,setter:function(t){var e=yT(t);return sP.get(t)||sP.set(t,function(r,s){for(var i=0,a=e.length,o=r;i<a-1;){var l=e[i];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;o=o[e[i++]]}o[e[i]]=s})},getter:function(t,e){var n=yT(t);return iP.get(t)||iP.set(t,function(s){for(var i=0,a=n.length;i<a;)if(s!=null||!e)s=s[n[i++]];else return;return s})},join:function(t){return t.reduce(function(e,n){return e+(u$(n)||Ij.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){zoe(Array.isArray(t)?t:zE(t),e,n)}};function yT(t){return rP.get(t)||rP.set(t,zE(t).map(function(e){return e.replace(Loe,"$2")}))}function zE(t){return t.match(Poe)||[""]}function zoe(t,e,n){var r=t.length,s,i,a,o;for(i=0;i<r;i++)s=t[i],s&&(Uoe(s)&&(s='"'+s+'"'),o=u$(s),a=!o&&/^\d+$/.test(s),e.call(n,s,o,a,i,t))}function u$(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function Boe(t){return t.match(Moe)&&!t.match(Ij)}function joe(t){return Foe.test(t)}function Uoe(t){return!u$(t)&&(Boe(t)||joe(t))}const Voe=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Tw=t=>t.match(Voe)||[],Cw=t=>t[0].toUpperCase()+t.slice(1),c$=(t,e)=>Tw(t).join(e).toLowerCase(),_j=t=>Tw(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Woe=t=>Cw(_j(t)),Goe=t=>c$(t,"_"),Hoe=t=>c$(t,"-"),qoe=t=>Cw(c$(t," ")),Koe=t=>Tw(t).map(Cw).join(" ");var vT={words:Tw,upperFirst:Cw,camelCase:_j,pascalCase:Woe,snakeCase:Goe,kebabCase:Hoe,sentenceCase:qoe,titleCase:Koe},f$={exports:{}};f$.exports=function(t){return Oj(Xoe(t),t)};f$.exports.array=Oj;function Oj(t,e){var n=t.length,r=new Array(n),s={},i=n,a=Yoe(e),o=Zoe(t);for(e.forEach(function(u){if(!o.has(u[0])||!o.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(t[i],i,new Set);return r;function l(u,c,f){if(f.has(u)){var d;try{d=", node was:"+JSON.stringify(u)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!o.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!s[c]){s[c]=!0;var h=a.get(u)||new Set;if(h=Array.from(h),c=h.length){f.add(u);do{var p=h[--c];l(p,o.get(p),f)}while(c);f.delete(u)}r[--n]=u}}}function Xoe(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}function Yoe(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function Zoe(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var Qoe=f$.exports;const Joe=po(Qoe),ele=Object.prototype.toString,tle=Error.prototype.toString,nle=RegExp.prototype.toString,rle=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",sle=/^Symbol\((.*)\)(.*)$/;function ile(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function aP(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return ile(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return rle.call(t).replace(sle,"Symbol($1)");const r=ele.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+tle.call(t)+"]":r==="RegExp"?nle.call(t):null}function Zu(t,e){let n=aP(t,e);return n!==null?n:JSON.stringify(t,function(r,s){let i=aP(this[r],e);return i!==null?i:s},2)}function Dj(t){return t==null?[]:[].concat(t)}let Rj,Pj,Mj,ale=/\$\{\s*(\w+)\s*\}/g;Rj=Symbol.toStringTag;class oP{constructor(e,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Rj]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],Dj(e).forEach(i=>{if(js.isError(i)){this.errors.push(...i.errors);const a=i.inner.length?i.inner:[i];this.inner.push(...a)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}Pj=Symbol.hasInstance;Mj=Symbol.toStringTag;class js extends Error{static formatError(e,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof e=="string"?e.replace(ale,(s,i)=>Zu(n[i])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,i){const a=new oP(e,n,r,s);if(i)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Mj]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,js)}static[Pj](e){return oP[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Oo={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Zu(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Zu(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${Zu(n,!0)}\``+s}},ii={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ole={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},BE={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},lle={isValue:"${path} field must be ${value}"},Ab={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},ule={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},cle={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Zu(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Zu(n,!0)}\``}return js.formatError(Oo.notType,t)}};Object.assign(Object.create(null),{mixed:Oo,string:ii,number:ole,date:BE,object:Ab,array:ule,boolean:lle,tuple:cle});const d$=t=>t&&t.__isYupSchema__;class E2{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:i}=n,a=typeof r=="function"?r:(...o)=>o.every(l=>l===r);return new E2(e,(o,l)=>{var u;let c=a(...o)?s:i;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(i=>i.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!d$(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const wv={context:"$",value:"."};function fle(t,e){return new Ac(t,e)}class Ac{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===wv.context,this.isValue=this.key[0]===wv.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?wv.context:this.isValue?wv.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Pf.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Ac.prototype.__isYupRef=!0;const yf=t=>t==null;function qd(t){function e({value:n,path:r="",options:s,originalValue:i,schema:a},o,l){const{name:u,test:c,params:f,message:d,skipAbsent:h}=t;let{parent:p,context:m,abortEarly:g=a.spec.abortEarly,disableStackTrace:y=a.spec.disableStackTrace}=s;const v={value:n,parent:p,context:m};function b(F={}){const z=Fj(Object.assign({value:n,originalValue:i,label:a.spec.label,path:F.path||r,spec:a.spec,disableStackTrace:F.disableStackTrace||y},f,F.params),v),j=new js(js.formatError(F.message||d,z),n,z.path,F.type||u,z.disableStackTrace);return j.params=z,j}const x=g?o:l;let w={path:r,parent:p,type:u,from:s.from,createError:b,resolve(F){return Lj(F,v)},options:s,originalValue:i,schema:a};const C=F=>{js.isError(F)?x(F):F?l(null):x(b())},E=F=>{js.isError(F)?x(F):o(F)};if(h&&yf(n))return C(!0);let O;try{var R;if(O=c.call(w,n,w),typeof((R=O)==null?void 0:R.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(O).then(C,E)}}catch(F){E(F);return}C(O)}return e.OPTIONS=t,e}function Fj(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=Lj(t[n],e);return t}function Lj(t,e){return Ac.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function dle(t,e,n,r=n){let s,i,a;return e?(Pf.forEach(e,(o,l,u)=>{let c=l?o.slice(1,o.length-1):o;t=t.resolve({context:r,parent:s,value:n});let f=t.type==="tuple",d=u?parseInt(c,10):0;if(t.innerType||f){if(f&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(n&&d>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[d],t=f?t.spec.types[d]:t.innerType}if(!u){if(!t.fields||!t.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);s=n,n=n&&n[c],t=t.fields[c]}i=c,a=l?"["+o+"]":"."+o}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class k2 extends Set{describe(){const e=[];for(const n of this.values())e.push(Ac.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new k2(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function xh(t,e=new Map){if(d$(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=xh(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,xh(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(xh(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=xh(s,e)}else throw Error(`Unable to clone ${t}`);return n}function hle(t){if(!(t!=null&&t.length))return;const e=[];let n="",r=!1,s=!1;for(let i=0;i<t.length;i++){const a=t[i];if(a==="["&&!s){n&&(e.push(...n.split(".").filter(Boolean)),n=""),r=!0;continue}if(a==="]"&&!s){n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),r=!1;continue}if(a==='"'){s=!s;continue}if(a==="."&&!r&&!s){n&&(e.push(n),n="");continue}n+=a}return n&&e.push(...n.split(".").filter(Boolean)),e}function ple(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map(r=>({message:r,path:hle(n)}))}function zj(t,e){var n;if(!((n=t.inner)!=null&&n.length)&&t.errors.length)return ple(t,e);const r=e?`${e}.${t.path}`:t.path;return t.inner.flatMap(s=>zj(s,r))}class Qo{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new k2,this._blacklist=new k2,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Oo.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=xh(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(i=>{e.tests.forEach(a=>{i.test(a.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,i)=>i.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,i;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",i=r._cast(e,n);if(n.assert!==!1&&!r.isType(i)){if(s&&yf(i))return i;let a=Zu(e),o=Zu(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${a} 
`+(o!==a?`result of cast: ${o}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:i,originalValue:a=e,strict:o=this.spec.strict}=n,l=e;o||(l=this._cast(l,Object.assign({assert:!1},n)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:i,value:l,originalValue:a,options:n,tests:u},r,c=>{if(c.length)return s(c,l);this.runTests({path:i,value:l,originalValue:a,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:i,value:a,originalValue:o,path:l,options:u}=e,c=m=>{s||(s=!0,n(m,a))},f=m=>{s||(s=!0,r(m,a))},d=i.length,h=[];if(!d)return f([]);let p={value:a,originalValue:o,path:l,options:u,schema:this};for(let m=0;m<i.length;m++){const g=i[m];g(p,c,function(v){v&&(Array.isArray(v)?h.push(...v):h.push(v)),--d<=0&&f(h)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:i,options:a}){const o=e??n;if(o==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof o=="number";let u=r[o];const c=Object.assign({},a,{strict:!0,parent:r,value:u,originalValue:i[o],key:void 0,[l?"index":"key"]:o,path:l||o.includes(".")?`${s||""}[${l?o:`"${o}"`}]`:(s?`${s}.`:"")+e});return(f,d,h)=>this.resolve(c)._validate(u,c,d,h)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((a,o)=>s._validate(e,n,(l,u)=>{js.isError(l)&&(l.value=u),o(l)},(l,u)=>{l.length?o(new js(l,u,void 0,void 0,i)):a(u)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i,a=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(o,l)=>{throw js.isError(o)&&(o.value=l),o},(o,l)=>{if(o.length)throw new js(o,e,void 0,void 0,a);i=l}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(js.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(js.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):xh(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=qd({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=qd({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=Oo.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Oo.notNull){return this.nullability(!1,e)}required(e=Oo.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=Oo.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=qd(n),i=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(a=>!(a.OPTIONS.name===n.name&&(i||a.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=Dj(e).map(i=>new Ac(i));return s.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof n=="function"?new E2(s,n):E2.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=qd({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=Oo.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=qd({message:n,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,a=i.resolveAll(this.resolve);return a.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:a}})}}),r}notOneOf(e,n=Oo.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=qd({message:n,name:"notOneOf",test(s){let i=this.schema._blacklist,a=i.resolveAll(this.resolve);return a.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:a}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:i,nullable:a}=n.spec;return{meta:s,label:r,optional:i,nullable:a,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.filter((l,u,c)=>c.findIndex(f=>f.OPTIONS.name===l.OPTIONS.name)===u).map(l=>{const u=l.OPTIONS.params&&e?Fj(Object.assign({},l.OPTIONS.params),e):l.OPTIONS.params;return{name:l.OPTIONS.name,params:u}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(s){if(s instanceof js)return{issues:zj(s)};throw s}}}}}Qo.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Qo.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:a}=dle(this,e,n,r.context);return a[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])Qo.prototype[t]=Qo.prototype.oneOf;for(const t of["not","nope"])Qo.prototype[t]=Qo.prototype.notOneOf;const mle=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function gle(t){const e=jE(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function jE(t){var e,n;const r=mle.exec(t);return r?{year:gl(r[1]),month:gl(r[2],1)-1,day:gl(r[3],1),hour:gl(r[4]),minute:gl(r[5]),second:gl(r[6]),millisecond:r[7]?gl(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:gl(r[10]),minuteOffset:gl(r[11])}:null}function gl(t,e=0){return Number(t)||e}let yle=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vle=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,ble=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,xle="^\\d{4}-\\d{2}-\\d{2}",wle="\\d{2}:\\d{2}:\\d{2}",Sle="(([+-]\\d{2}(:?\\d{2})?)|Z)",Tle=new RegExp(`${xle}T${wle}(\\.\\d+)?${Sle}$`),Cle=t=>yf(t)||t===t.trim(),Ele={}.toString();function vf(){return new Bj}class Bj extends Qo{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===Ele?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||Oo.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=ii.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=ii.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=ii.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,i;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:i}=n:s=n),this.test({name:i||"matches",message:s||ii.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&r||a.search(e)!==-1})}email(e=ii.email){return this.matches(yle,{name:"email",message:e,excludeEmptyString:!0})}url(e=ii.url){return this.matches(vle,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=ii.uuid){return this.matches(ble,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,s;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=e:n=e),this.matches(Tle,{name:"datetime",message:n||ii.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||ii.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:i=>{if(!i||r)return!0;const a=jE(i);return a?!!a.z:!1}}).test({name:"datetime_precision",message:n||ii.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const a=jE(i);return a?a.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=ii.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:Cle})}lowercase(e=ii.lowercase){return this.transform(n=>yf(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>yf(n)||n===n.toLowerCase()})}uppercase(e=ii.uppercase){return this.transform(n=>yf(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>yf(n)||n===n.toUpperCase()})}}vf.prototype=Bj.prototype;let kle=new Date(""),Nle=t=>Object.prototype.toString.call(t)==="[object Date]";class h$ extends Qo{constructor(){super({type:"date",check(e){return Nle(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=gle(e),isNaN(e)?h$.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(Ac.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=BE.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=BE.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}h$.INVALID_DATE=kle;function Ale(t,e=[]){let n=[],r=new Set,s=new Set(e.map(([a,o])=>`${a}-${o}`));function i(a,o){let l=Pf.split(a)[0];r.add(l),s.has(`${o}-${l}`)||n.push([o,l])}for(const a of Object.keys(t)){let o=t[a];r.add(a),Ac.isRef(o)&&o.isSibling?i(o.path,a):d$(o)&&"deps"in o&&o.deps.forEach(l=>i(l,a))}return Joe.array(Array.from(r),n).reverse()}function lP(t,e){let n=1/0;return t.some((r,s)=>{var i;if((i=e.path)!=null&&i.includes(r))return n=s,!0}),n}function jj(t){return(e,n)=>lP(t,e)-lP(t,n)}const $le=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function $b(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=$b(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=$b(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map($b)}):"optional"in t?t.optional():t}const Ile=(t,e)=>{const n=[...Pf.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),s=Pf.getter(Pf.join(n),!0)(t);return!!(s&&r in s)};let uP=t=>Object.prototype.toString.call(t)==="[object Object]";function cP(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const _le=jj([]);function p$(t){return new Uj(t)}class Uj extends Qo{constructor(e){super({type:"object",check(n){return uP(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=_le,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let i=this.fields,a=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(s).filter(f=>!this._nodes.includes(f))),l={},u=Object.assign({},n,{parent:l,__validating:n.__validating||!1}),c=!1;for(const f of o){let d=i[f],h=f in s;if(d){let p,m=s[f];u.path=(n.path?`${n.path}.`:"")+f,d=d.resolve({value:m,context:n.context,parent:l});let g=d instanceof Qo?d.spec:void 0,y=g==null?void 0:g.strict;if(g!=null&&g.strip){c=c||f in s;continue}p=!n.__validating||!y?d.cast(s[f],u):s[f],p!==void 0&&(l[f]=p)}else h&&!a&&(l[f]=s[f]);(h!==f in l||l[f]!==s[f])&&(c=!0)}return c?l:s}_validate(e,n={},r,s){let{from:i=[],originalValue:a=e,recursive:o=this.spec.recursive}=n;n.from=[{schema:this,value:a},...i],n.__validating=!0,n.originalValue=a,super._validate(e,n,r,(l,u)=>{if(!o||!uP(u)){s(l,u);return}a=a||u;let c=[];for(let f of this._nodes){let d=this.fields[f];!d||Ac.isRef(d)||c.push(d.asNestedTest({options:n,key:f,parent:u,parentPath:n.path,originalParent:a}))}this.runTests({tests:c,value:u,originalValue:a,options:n},r,f=>{s(f.sort(this._sortErrors).concat(l),u)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,i]of Object.entries(this.fields)){const a=r[s];r[s]=a===void 0?i:a}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const i=this.fields[r];let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[r]})),n[r]=i&&"getDefault"in i?i.getDefault(a):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=Ale(e,n),r._sortErrors=jj(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return $b(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=Pf.getter(e,!0);return this.transform(i=>{if(!i)return i;let a=i;return Ile(i,e)&&(a=Object.assign({},i),r||delete a[e],a[n]=s(i)),a})}json(){return this.transform($le)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Ab.exact,test(n){if(n==null)return!0;const r=cP(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,n=Ab.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const i=cP(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Ab.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(vT.camelCase)}snakeCase(){return this.transformKeys(vT.snakeCase)}constantCase(){return this.transformKeys(e=>vT.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[i,a]of Object.entries(n.fields)){var s;let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[i]})),r.fields[i]=a.describe(o)}return r}}p$.prototype=Uj.prototype;var pi=function(){return pi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pi.apply(this,arguments)};function N2(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var In="-ms-",Mg="-moz-",tn="-webkit-",Vj="comm",Ew="rule",m$="decl",Ole="@import",Wj="@keyframes",Dle="@layer",Gj=Math.abs,g$=String.fromCharCode,UE=Object.assign;function Rle(t,e){return Qr(t,0)^45?(((e<<2^Qr(t,0))<<2^Qr(t,1))<<2^Qr(t,2))<<2^Qr(t,3):0}function Hj(t){return t.trim()}function yl(t,e){return(t=e.exec(t))?t[0]:t}function It(t,e,n){return t.replace(e,n)}function Ib(t,e,n){return t.indexOf(e,n)}function Qr(t,e){return t.charCodeAt(e)|0}function Jh(t,e,n){return t.slice(e,n)}function Do(t){return t.length}function qj(t){return t.length}function ug(t,e){return e.push(t),t}function Ple(t,e){return t.map(e).join("")}function fP(t,e){return t.filter(function(n){return!yl(n,e)})}var kw=1,ep=1,Kj=0,Fa=0,wr=0,Lp="";function Nw(t,e,n,r,s,i,a,o){return{value:t,root:e,parent:n,type:r,props:s,children:i,line:kw,column:ep,length:a,return:"",siblings:o}}function Su(t,e){return UE(Nw("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Kd(t){for(;t.root;)t=Su(t.root,{children:[t]});ug(t,t.siblings)}function Mle(){return wr}function Fle(){return wr=Fa>0?Qr(Lp,--Fa):0,ep--,wr===10&&(ep=1,kw--),wr}function so(){return wr=Fa<Kj?Qr(Lp,Fa++):0,ep++,wr===10&&(ep=1,kw++),wr}function Mf(){return Qr(Lp,Fa)}function _b(){return Fa}function Aw(t,e){return Jh(Lp,t,e)}function VE(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lle(t){return kw=ep=1,Kj=Do(Lp=t),Fa=0,[]}function zle(t){return Lp="",t}function bT(t){return Hj(Aw(Fa-1,WE(t===91?t+2:t===40?t+1:t)))}function Ble(t){for(;(wr=Mf())&&wr<33;)so();return VE(t)>2||VE(wr)>3?"":" "}function jle(t,e){for(;--e&&so()&&!(wr<48||wr>102||wr>57&&wr<65||wr>70&&wr<97););return Aw(t,_b()+(e<6&&Mf()==32&&so()==32))}function WE(t){for(;so();)switch(wr){case t:return Fa;case 34:case 39:t!==34&&t!==39&&WE(wr);break;case 40:t===41&&WE(t);break;case 92:so();break}return Fa}function Ule(t,e){for(;so()&&t+wr!==57;)if(t+wr===84&&Mf()===47)break;return"/*"+Aw(e,Fa-1)+"*"+g$(t===47?t:so())}function Vle(t){for(;!VE(Mf());)so();return Aw(t,Fa)}function Wle(t){return zle(Ob("",null,null,null,[""],t=Lle(t),0,[0],t))}function Ob(t,e,n,r,s,i,a,o,l){for(var u=0,c=0,f=a,d=0,h=0,p=0,m=1,g=1,y=1,v=0,b="",x=s,w=i,C=r,E=b;g;)switch(p=v,v=so()){case 40:if(p!=108&&Qr(E,f-1)==58){Ib(E+=It(bT(v),"&","&\f"),"&\f",Gj(u?o[u-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:E+=bT(v);break;case 9:case 10:case 13:case 32:E+=Ble(p);break;case 92:E+=jle(_b()-1,7);continue;case 47:switch(Mf()){case 42:case 47:ug(Gle(Ule(so(),_b()),e,n,l),l);break;default:E+="/"}break;case 123*m:o[u++]=Do(E)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:y==-1&&(E=It(E,/\f/g,"")),h>0&&Do(E)-f&&ug(h>32?hP(E+";",r,n,f-1,l):hP(It(E," ","")+";",r,n,f-2,l),l);break;case 59:E+=";";default:if(ug(C=dP(E,e,n,u,c,s,o,b,x=[],w=[],f,i),i),v===123)if(c===0)Ob(E,e,C,C,x,i,f,o,w);else switch(d===99&&Qr(E,3)===110?100:d){case 100:case 108:case 109:case 115:Ob(t,C,C,r&&ug(dP(t,C,C,0,0,s,o,b,s,x=[],f,w),w),s,w,f,o,r?x:w);break;default:Ob(E,C,C,C,[""],w,0,o,w)}}u=c=h=0,m=y=1,b=E="",f=a;break;case 58:f=1+Do(E),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&Fle()==125)continue}switch(E+=g$(v),v*m){case 38:y=c>0?1:(E+="\f",-1);break;case 44:o[u++]=(Do(E)-1)*y,y=1;break;case 64:Mf()===45&&(E+=bT(so())),d=Mf(),c=f=Do(b=E+=Vle(_b())),v++;break;case 45:p===45&&Do(E)==2&&(m=0)}}return i}function dP(t,e,n,r,s,i,a,o,l,u,c,f){for(var d=s-1,h=s===0?i:[""],p=qj(h),m=0,g=0,y=0;m<r;++m)for(var v=0,b=Jh(t,d+1,d=Gj(g=a[m])),x=t;v<p;++v)(x=Hj(g>0?h[v]+" "+b:It(b,/&\f/g,h[v])))&&(l[y++]=x);return Nw(t,e,n,s===0?Ew:o,l,u,c,f)}function Gle(t,e,n,r){return Nw(t,e,n,Vj,g$(Mle()),Jh(t,2,-2),0,r)}function hP(t,e,n,r,s){return Nw(t,e,n,m$,Jh(t,0,r),Jh(t,r+1,-1),r,s)}function Xj(t,e,n){switch(Rle(t,e)){case 5103:return tn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return tn+t+t;case 4789:return Mg+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return tn+t+Mg+t+In+t+t;case 5936:switch(Qr(t,e+11)){case 114:return tn+t+In+It(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return tn+t+In+It(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return tn+t+In+It(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return tn+t+In+t+t;case 6165:return tn+t+In+"flex-"+t+t;case 5187:return tn+t+It(t,/(\w+).+(:[^]+)/,tn+"box-$1$2"+In+"flex-$1$2")+t;case 5443:return tn+t+In+"flex-item-"+It(t,/flex-|-self/g,"")+(yl(t,/flex-|baseline/)?"":In+"grid-row-"+It(t,/flex-|-self/g,""))+t;case 4675:return tn+t+In+"flex-line-pack"+It(t,/align-content|flex-|-self/g,"")+t;case 5548:return tn+t+In+It(t,"shrink","negative")+t;case 5292:return tn+t+In+It(t,"basis","preferred-size")+t;case 6060:return tn+"box-"+It(t,"-grow","")+tn+t+In+It(t,"grow","positive")+t;case 4554:return tn+It(t,/([^-])(transform)/g,"$1"+tn+"$2")+t;case 6187:return It(It(It(t,/(zoom-|grab)/,tn+"$1"),/(image-set)/,tn+"$1"),t,"")+t;case 5495:case 3959:return It(t,/(image-set\([^]*)/,tn+"$1$`$1");case 4968:return It(It(t,/(.+:)(flex-)?(.*)/,tn+"box-pack:$3"+In+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+tn+t+t;case 4200:if(!yl(t,/flex-|baseline/))return In+"grid-column-align"+Jh(t,e)+t;break;case 2592:case 3360:return In+It(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,s){return e=s,yl(r.props,/grid-\w+-end/)})?~Ib(t+(n=n[e].value),"span",0)?t:In+It(t,"-start","")+t+In+"grid-row-span:"+(~Ib(n,"span",0)?yl(n,/\d+/):+yl(n,/\d+/)-+yl(t,/\d+/))+";":In+It(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return yl(r.props,/grid-\w+-start/)})?t:In+It(It(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return It(t,/(.+)-inline(.+)/,tn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Do(t)-1-e>6)switch(Qr(t,e+1)){case 109:if(Qr(t,e+4)!==45)break;case 102:return It(t,/(.+:)(.+)-([^]+)/,"$1"+tn+"$2-$3$1"+Mg+(Qr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ib(t,"stretch",0)?Xj(It(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return It(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,i,a,o,l,u){return In+s+":"+i+u+(a?In+s+"-span:"+(o?l:+l-+i)+u:"")+t});case 4949:if(Qr(t,e+6)===121)return It(t,":",":"+tn)+t;break;case 6444:switch(Qr(t,Qr(t,14)===45?18:11)){case 120:return It(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+tn+(Qr(t,14)===45?"inline-":"")+"box$3$1"+tn+"$2$3$1"+In+"$2box$3")+t;case 100:return It(t,":",":"+In)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return It(t,"scroll-","scroll-snap-")+t}return t}function A2(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Hle(t,e,n,r){switch(t.type){case Dle:if(t.children.length)break;case Ole:case m$:return t.return=t.return||t.value;case Vj:return"";case Wj:return t.return=t.value+"{"+A2(t.children,r)+"}";case Ew:if(!Do(t.value=t.props.join(",")))return""}return Do(n=A2(t.children,r))?t.return=t.value+"{"+n+"}":""}function qle(t){var e=qj(t);return function(n,r,s,i){for(var a="",o=0;o<e;o++)a+=t[o](n,r,s,i)||"";return a}}function Kle(t){return function(e){e.root||(e=e.return)&&t(e)}}function Xle(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case m$:t.return=Xj(t.value,t.length,n);return;case Wj:return A2([Su(t,{value:It(t.value,"@","@"+tn)})],r);case Ew:if(t.length)return Ple(n=t.props,function(s){switch(yl(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Kd(Su(t,{props:[It(s,/:(read-\w+)/,":"+Mg+"$1")]})),Kd(Su(t,{props:[s]})),UE(t,{props:fP(n,r)});break;case"::placeholder":Kd(Su(t,{props:[It(s,/:(plac\w+)/,":"+tn+"input-$1")]})),Kd(Su(t,{props:[It(s,/:(plac\w+)/,":"+Mg+"$1")]})),Kd(Su(t,{props:[It(s,/:(plac\w+)/,In+"input-$1")]})),Kd(Su(t,{props:[s]})),UE(t,{props:fP(n,r)});break}return""})}}var Yle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zi={},tp=typeof process<"u"&&zi!==void 0&&(zi.REACT_APP_SC_ATTR||zi.SC_ATTR)||"data-styled",Yj="active",Zj="data-styled-version",$w="6.1.19",y$=`/*!sc*/
`,$2=typeof window<"u"&&typeof document<"u",Zle=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&zi!==void 0&&zi.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&zi.REACT_APP_SC_DISABLE_SPEEDY!==""?zi.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&zi.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&zi!==void 0&&zi.SC_DISABLE_SPEEDY!==void 0&&zi.SC_DISABLE_SPEEDY!==""&&zi.SC_DISABLE_SPEEDY!=="false"&&zi.SC_DISABLE_SPEEDY),Iw=Object.freeze([]),np=Object.freeze({});function Qle(t,e,n){return n===void 0&&(n=np),t.theme!==n.theme&&t.theme||e||n.theme}var Qj=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Jle=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eue=/(^-|-$)/g;function pP(t){return t.replace(Jle,"-").replace(eue,"")}var tue=/(a)(d)/gi,Sv=52,mP=function(t){return String.fromCharCode(t+(t>25?39:97))};function GE(t){var e,n="";for(e=Math.abs(t);e>Sv;e=e/Sv|0)n=mP(e%Sv)+n;return(mP(e%Sv)+n).replace(tue,"$1-$2")}var xT,Jj=5381,wh=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},eU=function(t){return wh(Jj,t)};function nue(t){return GE(eU(t)>>>0)}function rue(t){return t.displayName||t.name||"Component"}function wT(t){return typeof t=="string"&&!0}var tU=typeof Symbol=="function"&&Symbol.for,nU=tU?Symbol.for("react.memo"):60115,sue=tU?Symbol.for("react.forward_ref"):60112,iue={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aue={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},rU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oue=((xT={})[sue]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xT[nU]=rU,xT);function gP(t){return("type"in(e=t)&&e.type.$$typeof)===nU?rU:"$$typeof"in t?oue[t.$$typeof]:iue;var e}var lue=Object.defineProperty,uue=Object.getOwnPropertyNames,yP=Object.getOwnPropertySymbols,cue=Object.getOwnPropertyDescriptor,fue=Object.getPrototypeOf,vP=Object.prototype;function sU(t,e,n){if(typeof e!="string"){if(vP){var r=fue(e);r&&r!==vP&&sU(t,r,n)}var s=uue(e);yP&&(s=s.concat(yP(e)));for(var i=gP(t),a=gP(e),o=0;o<s.length;++o){var l=s[o];if(!(l in aue||n&&n[l]||a&&l in a||i&&l in i)){var u=cue(e,l);try{lue(t,l,u)}catch{}}}}return t}function rp(t){return typeof t=="function"}function v$(t){return typeof t=="object"&&"styledComponentId"in t}function bf(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function bP(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function sy(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function HE(t,e,n){if(n===void 0&&(n=!1),!n&&!sy(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=HE(t[r],e[r]);else if(sy(e))for(var r in e)t[r]=HE(t[r],e[r]);return t}function b$(t,e){Object.defineProperty(t,"toString",{value:e})}function e1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var due=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,i=s;e>=i;)if((i<<=1)<0)throw e1(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var a=s;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),l=(a=0,n.length);a<l;a++)this.tag.insertRule(o,n[a])&&(this.groupSizes[e]++,o++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),s=r+n;this.groupSizes[e]=0;for(var i=r;i<s;i++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],s=this.indexOfGroup(e),i=s+r,a=s;a<i;a++)n+="".concat(this.tag.getRule(a)).concat(y$);return n},t}(),Db=new Map,I2=new Map,Rb=1,Tv=function(t){if(Db.has(t))return Db.get(t);for(;I2.has(Rb);)Rb++;var e=Rb++;return Db.set(t,e),I2.set(e,t),e},hue=function(t,e){Rb=e+1,Db.set(t,e),I2.set(e,t)},pue="style[".concat(tp,"][").concat(Zj,'="').concat($w,'"]'),mue=new RegExp("^".concat(tp,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),gue=function(t,e,n){for(var r,s=n.split(","),i=0,a=s.length;i<a;i++)(r=s[i])&&t.registerName(e,r)},yue=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(y$),s=[],i=0,a=r.length;i<a;i++){var o=r[i].trim();if(o){var l=o.match(mue);if(l){var u=0|parseInt(l[1],10),c=l[2];u!==0&&(hue(c,u),gue(t,c,l[3]),t.getTag().insertRules(u,s)),s.length=0}else s.push(o)}}},xP=function(t){for(var e=document.querySelectorAll(pue),n=0,r=e.length;n<r;n++){var s=e[n];s&&s.getAttribute(tp)!==Yj&&(yue(t,s),s.parentNode&&s.parentNode.removeChild(s))}};function vue(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var iU=function(t){var e=document.head,n=t||e,r=document.createElement("style"),s=function(o){var l=Array.from(o.querySelectorAll("style[".concat(tp,"]")));return l[l.length-1]}(n),i=s!==void 0?s.nextSibling:null;r.setAttribute(tp,Yj),r.setAttribute(Zj,$w);var a=vue();return a&&r.setAttribute("nonce",a),n.insertBefore(r,i),r},bue=function(){function t(e){this.element=iU(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,s=0,i=r.length;s<i;s++){var a=r[s];if(a.ownerNode===n)return a}throw e1(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),xue=function(){function t(e){this.element=iU(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),wue=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),wP=$2,Sue={isServer:!$2,useCSSOMInjection:!Zle},aU=function(){function t(e,n,r){e===void 0&&(e=np),n===void 0&&(n={});var s=this;this.options=pi(pi({},Sue),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&$2&&wP&&(wP=!1,xP(this)),b$(this,function(){return function(i){for(var a=i.getTag(),o=a.length,l="",u=function(f){var d=function(y){return I2.get(y)}(f);if(d===void 0)return"continue";var h=i.names.get(d),p=a.getGroup(f);if(h===void 0||!h.size||p.length===0)return"continue";var m="".concat(tp,".g").concat(f,'[id="').concat(d,'"]'),g="";h!==void 0&&h.forEach(function(y){y.length>0&&(g+="".concat(y,","))}),l+="".concat(p).concat(m,'{content:"').concat(g,'"}').concat(y$)},c=0;c<o;c++)u(c);return l}(s)})}return t.registerId=function(e){return Tv(e)},t.prototype.rehydrate=function(){!this.server&&$2&&xP(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(pi(pi({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,s=n.target;return n.isServer?new wue(s):r?new bue(s):new xue(s)}(this.options),new due(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Tv(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Tv(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Tv(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Tue=/&/g,Cue=/^\s*\/\/.*$/gm;function oU(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=oU(n.children,e)),n})}function Eue(t){var e,n,r,s=np,i=s.options,a=i===void 0?np:i,o=s.plugins,l=o===void 0?Iw:o,u=function(d,h,p){return p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):d},c=l.slice();c.push(function(d){d.type===Ew&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(Tue,n).replace(r,u))}),a.prefix&&c.push(Xle),c.push(Hle);var f=function(d,h,p,m){h===void 0&&(h=""),p===void 0&&(p=""),m===void 0&&(m="&"),e=m,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var g=d.replace(Cue,""),y=Wle(p||h?"".concat(p," ").concat(h," { ").concat(g," }"):g);a.namespace&&(y=oU(y,a.namespace));var v=[];return A2(y,qle(c.concat(Kle(function(b){return v.push(b)})))),v};return f.hash=l.length?l.reduce(function(d,h){return h.name||e1(15),wh(d,h.name)},Jj).toString():"",f}var kue=new aU,qE=Eue(),lU=Tt.createContext({shouldForwardProp:void 0,styleSheet:kue,stylis:qE});lU.Consumer;Tt.createContext(void 0);function SP(){return k.useContext(lU)}var Nue=function(){function t(e,n){var r=this;this.inject=function(s,i){i===void 0&&(i=qE);var a=r.name+i.hash;s.hasNameForId(r.id,a)||s.insertRules(r.id,a,i(r.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,b$(this,function(){throw e1(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=qE),this.name+e.hash},t}(),Aue=function(t){return t>="A"&&t<="Z"};function TP(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;Aue(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var uU=function(t){return t==null||t===!1||t===""},cU=function(t){var e,n,r=[];for(var s in t){var i=t[s];t.hasOwnProperty(s)&&!uU(i)&&(Array.isArray(i)&&i.isCss||rp(i)?r.push("".concat(TP(s),":"),i,";"):sy(i)?r.push.apply(r,N2(N2(["".concat(s," {")],cU(i),!1),["}"],!1)):r.push("".concat(TP(s),": ").concat((e=s,(n=i)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Yle||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Ff(t,e,n,r){if(uU(t))return[];if(v$(t))return[".".concat(t.styledComponentId)];if(rp(t)){if(!rp(i=t)||i.prototype&&i.prototype.isReactComponent||!e)return[t];var s=t(e);return Ff(s,e,n,r)}var i;return t instanceof Nue?n?(t.inject(n,r),[t.getName(r)]):[t]:sy(t)?cU(t):Array.isArray(t)?Array.prototype.concat.apply(Iw,t.map(function(a){return Ff(a,e,n,r)})):[t.toString()]}function $ue(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(rp(n)&&!v$(n))return!1}return!0}var Iue=eU($w),_ue=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&$ue(e),this.componentId=n,this.baseHash=wh(Iue,n),this.baseStyle=r,aU.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))s=bf(s,this.staticRulesId);else{var i=bP(Ff(this.rules,e,n,r)),a=GE(wh(this.baseHash,i)>>>0);if(!n.hasNameForId(this.componentId,a)){var o=r(i,".".concat(a),void 0,this.componentId);n.insertRules(this.componentId,a,o)}s=bf(s,a),this.staticRulesId=a}else{for(var l=wh(this.baseHash,r.hash),u="",c=0;c<this.rules.length;c++){var f=this.rules[c];if(typeof f=="string")u+=f;else if(f){var d=bP(Ff(f,e,n,r));l=wh(l,d+c),u+=d}}if(u){var h=GE(l>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),s=bf(s,h)}}return s},t}(),fU=Tt.createContext(void 0);fU.Consumer;var ST={};function Oue(t,e,n){var r=v$(t),s=t,i=!wT(t),a=e.attrs,o=a===void 0?Iw:a,l=e.componentId,u=l===void 0?function(x,w){var C=typeof x!="string"?"sc":pP(x);ST[C]=(ST[C]||0)+1;var E="".concat(C,"-").concat(nue($w+C+ST[C]));return w?"".concat(w,"-").concat(E):E}(e.displayName,e.parentComponentId):l,c=e.displayName,f=c===void 0?function(x){return wT(x)?"styled.".concat(x):"Styled(".concat(rue(x),")")}(t):c,d=e.displayName&&e.componentId?"".concat(pP(e.displayName),"-").concat(e.componentId):e.componentId||u,h=r&&s.attrs?s.attrs.concat(o).filter(Boolean):o,p=e.shouldForwardProp;if(r&&s.shouldForwardProp){var m=s.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;p=function(x,w){return m(x,w)&&g(x,w)}}else p=m}var y=new _ue(n,d,r?s.componentStyle:void 0);function v(x,w){return function(C,E,A){var O=C.attrs,R=C.componentStyle,F=C.defaultProps,z=C.foldedComponentIds,j=C.styledComponentId,H=C.target,J=Tt.useContext(fU),U=SP(),Y=C.shouldForwardProp||U.shouldForwardProp,Q=Qle(E,J,F)||np,se=function(Ee,Me,He){for(var Ze,ye=pi(pi({},Me),{className:void 0,theme:He}),Re=0;Re<Ee.length;Re+=1){var Oe=rp(Ze=Ee[Re])?Ze(ye):Ze;for(var me in Oe)ye[me]=me==="className"?bf(ye[me],Oe[me]):me==="style"?pi(pi({},ye[me]),Oe[me]):Oe[me]}return Me.className&&(ye.className=bf(ye.className,Me.className)),ye}(O,E,Q),he=se.as||H,be={};for(var ue in se)se[ue]===void 0||ue[0]==="$"||ue==="as"||ue==="theme"&&se.theme===Q||(ue==="forwardedAs"?be.as=se.forwardedAs:Y&&!Y(ue,he)||(be[ue]=se[ue]));var Ne=function(Ee,Me){var He=SP(),Ze=Ee.generateAndInjectStyles(Me,He.styleSheet,He.stylis);return Ze}(R,se),_e=bf(z,j);return Ne&&(_e+=" "+Ne),se.className&&(_e+=" "+se.className),be[wT(he)&&!Qj.has(he)?"class":"className"]=_e,A&&(be.ref=A),k.createElement(he,be)}(b,x,w)}v.displayName=f;var b=Tt.forwardRef(v);return b.attrs=h,b.componentStyle=y,b.displayName=f,b.shouldForwardProp=p,b.foldedComponentIds=r?bf(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=d,b.target=r?s.target:t,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(w){for(var C=[],E=1;E<arguments.length;E++)C[E-1]=arguments[E];for(var A=0,O=C;A<O.length;A++)HE(w,O[A],!0);return w}({},s.defaultProps,x):x}}),b$(b,function(){return".".concat(b.styledComponentId)}),i&&sU(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function CP(t,e){for(var n=[t[0]],r=0,s=e.length;r<s;r+=1)n.push(e[r],t[r+1]);return n}var EP=function(t){return Object.assign(t,{isCss:!0})};function Due(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rp(t)||sy(t))return EP(Ff(CP(Iw,N2([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Ff(r):EP(Ff(CP(r,e)))}function KE(t,e,n){if(n===void 0&&(n=np),!e)throw e1(1,e);var r=function(s){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return t(e,n,Due.apply(void 0,N2([s],i,!1)))};return r.attrs=function(s){return KE(t,e,pi(pi({},n),{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return KE(t,e,pi(pi({},n),s))},r}var dU=function(t){return KE(Oue,t)},we=dU;Qj.forEach(function(t){we[t]=dU(t)});const Rue=p$({email:vf().email("Invalid email").required("Email is required"),password:vf().required("Password is required")}),Pue=we.div`
  min-height: 100vh;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 1rem;
`,Mue=we.div`
  background: white;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 400px;
  
  @media (min-width: 768px) {
    padding: 2.5rem;
  }
`,Fue=we.h1`
  text-align: center;
  margin-bottom: 2rem;
  color: #333;
  font-size: clamp(1.5rem, 4vw, 2rem);
`,Lue=we.form`
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
`,kP=we.div`
  display: flex;
  flex-direction: column;
`,NP=we.label`
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #555;
`,AP=we.input`
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 0.5rem;
  font-size: 1rem;
  transition: border-color 0.3s;

  &:focus {
    outline: none;
    border-color: #667eea;
  }
`,$P=we.span`
  color: #e74c3c;
  font-size: 0.875rem;
  margin-top: 0.25rem;
`,zue=we.button`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.75rem;
  border: none;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s;

  &:hover {
    transform: translateY(-2px);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
`,Bue=we.p`
  text-align: center;
  margin-top: 1.5rem;
  color: #666;

  a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;

    &:hover {
      text-decoration: underline;
    }
  }
`,jue=()=>{const{login:t,loading:e}=wd(),n=dw(),{register:r,handleSubmit:s,formState:{errors:i}}=o$({resolver:$j(Rue)}),a=async o=>{try{await t(o),n("/dashboard")}catch{}};return B.jsx(Pue,{children:B.jsxs(Mue,{children:[B.jsx(Fue,{children:"Welcome Back"}),B.jsxs(Lue,{onSubmit:s(a),children:[B.jsxs(kP,{children:[B.jsx(NP,{htmlFor:"email",children:"Email"}),B.jsx(AP,{id:"email",type:"email",placeholder:"Enter your email",...r("email")}),i.email&&B.jsx($P,{children:i.email.message})]}),B.jsxs(kP,{children:[B.jsx(NP,{htmlFor:"password",children:"Password"}),B.jsx(AP,{id:"password",type:"password",placeholder:"Enter your password",...r("password")}),i.password&&B.jsx($P,{children:i.password.message})]}),B.jsx(zue,{type:"submit",disabled:e,children:e?"Signing In...":"Sign In"})]}),B.jsxs(Bue,{children:["Don't have an account? ",B.jsx(hw,{to:"/register",children:"Sign up here"})]})]})})},Uue=p$({name:vf().min(2,"Name must be at least 2 characters").required("Name is required"),email:vf().email("Invalid email").required("Email is required"),password:vf().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:vf().oneOf([fle("password")],"Passwords must match").required("Please confirm your password")}),Vue=we.div`
  min-height: 100vh;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 1rem;
`,Wue=we.div`
  background: white;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 400px;
  
  @media (min-width: 768px) {
    padding: 2.5rem;
  }
`,Gue=we.h1`
  text-align: center;
  margin-bottom: 2rem;
  color: #333;
  font-size: clamp(1.5rem, 4vw, 2rem);
`,Hue=we.form`
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
`,Cv=we.div`
  display: flex;
  flex-direction: column;
`,Ev=we.label`
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #555;
`,kv=we.input`
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 0.5rem;
  font-size: 1rem;
  transition: border-color 0.3s;

  &:focus {
    outline: none;
    border-color: #667eea;
  }
`,Nv=we.span`
  color: #e74c3c;
  font-size: 0.875rem;
  margin-top: 0.25rem;
`,que=we.button`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.75rem;
  border: none;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s;

  &:hover {
    transform: translateY(-2px);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
`,Kue=we.p`
  text-align: center;
  margin-top: 1.5rem;
  color: #666;

  a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;

    &:hover {
      text-decoration: underline;
    }
  }
`,Xue=()=>{const{register:t,loading:e}=wd(),n=dw(),{register:r,handleSubmit:s,formState:{errors:i}}=o$({resolver:$j(Uue)}),a=async o=>{try{const{confirmPassword:l,...u}=o;await t(u),n("/dashboard")}catch{}};return B.jsx(Vue,{children:B.jsxs(Wue,{children:[B.jsx(Gue,{children:"Join MindGuard AI"}),B.jsxs(Hue,{onSubmit:s(a),children:[B.jsxs(Cv,{children:[B.jsx(Ev,{htmlFor:"name",children:"Full Name"}),B.jsx(kv,{id:"name",type:"text",placeholder:"Enter your full name",...r("name")}),i.name&&B.jsx(Nv,{children:i.name.message})]}),B.jsxs(Cv,{children:[B.jsx(Ev,{htmlFor:"email",children:"Email"}),B.jsx(kv,{id:"email",type:"email",placeholder:"Enter your email",...r("email")}),i.email&&B.jsx(Nv,{children:i.email.message})]}),B.jsxs(Cv,{children:[B.jsx(Ev,{htmlFor:"password",children:"Password"}),B.jsx(kv,{id:"password",type:"password",placeholder:"Create a password",...r("password")}),i.password&&B.jsx(Nv,{children:i.password.message})]}),B.jsxs(Cv,{children:[B.jsx(Ev,{htmlFor:"confirmPassword",children:"Confirm Password"}),B.jsx(kv,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",...r("confirmPassword")}),i.confirmPassword&&B.jsx(Nv,{children:i.confirmPassword.message})]}),B.jsx(que,{type:"submit",disabled:e,children:e?"Creating Account...":"Create Account"})]}),B.jsxs(Kue,{children:["Already have an account? ",B.jsx(hw,{to:"/login",children:"Sign in here"})]})]})})};var _w={},hU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(hU);var x$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(x$);var w$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(w$);var Ow={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],s=n.length;if(s===0)return r;let i=0,a="",o="",l=!1;for(n.charCodeAt(0)===46&&(r.push(""),i++);i<s;){const u=n[i];o?u==="\\"&&i+1<s?(i++,a+=n[i]):u===o?o="":a+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,r.push(a),a=""):a+=u:u==="["?(l=!0,a&&(r.push(a),a="")):u==="."?a&&(r.push(a),a=""):a+=u,i++}return a&&r.push(a),r}t.toPath=e})(Ow);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hU,n=x$,r=w$,s=Ow;function i(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?n.isDeepKey(l)?i(o,s.toPath(l),u):u:c}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const c=o[l];return c===void 0?u:c}default:{if(Array.isArray(l))return a(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const c=o[l];return c===void 0?u:c}}}function a(o,l,u){if(l.length===0)return u;let c=o;for(let f=0;f<l.length;f++){if(c==null||e.isUnsafeProperty(l[f]))return u;c=c[l[f]]}return c===void 0?u:c}t.get=i})(_w);var Yue=_w.get;const Yf=po(Yue);var pU={exports:{}},xn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S$=Symbol.for("react.transitional.element"),T$=Symbol.for("react.portal"),Dw=Symbol.for("react.fragment"),Rw=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),Mw=Symbol.for("react.consumer"),Fw=Symbol.for("react.context"),Lw=Symbol.for("react.forward_ref"),zw=Symbol.for("react.suspense"),Bw=Symbol.for("react.suspense_list"),jw=Symbol.for("react.memo"),Uw=Symbol.for("react.lazy"),Zue=Symbol.for("react.view_transition"),Que=Symbol.for("react.client.reference");function Va(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case S$:switch(t=t.type,t){case Dw:case Pw:case Rw:case zw:case Bw:case Zue:return t;default:switch(t=t&&t.$$typeof,t){case Fw:case Lw:case Uw:case jw:return t;case Mw:return t;default:return e}}case T$:return e}}}xn.ContextConsumer=Mw;xn.ContextProvider=Fw;xn.Element=S$;xn.ForwardRef=Lw;xn.Fragment=Dw;xn.Lazy=Uw;xn.Memo=jw;xn.Portal=T$;xn.Profiler=Pw;xn.StrictMode=Rw;xn.Suspense=zw;xn.SuspenseList=Bw;xn.isContextConsumer=function(t){return Va(t)===Mw};xn.isContextProvider=function(t){return Va(t)===Fw};xn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===S$};xn.isForwardRef=function(t){return Va(t)===Lw};xn.isFragment=function(t){return Va(t)===Dw};xn.isLazy=function(t){return Va(t)===Uw};xn.isMemo=function(t){return Va(t)===jw};xn.isPortal=function(t){return Va(t)===T$};xn.isProfiler=function(t){return Va(t)===Pw};xn.isStrictMode=function(t){return Va(t)===Rw};xn.isSuspense=function(t){return Va(t)===zw};xn.isSuspenseList=function(t){return Va(t)===Bw};xn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Dw||t===Pw||t===Rw||t===zw||t===Bw||typeof t=="object"&&t!==null&&(t.$$typeof===Uw||t.$$typeof===jw||t.$$typeof===Fw||t.$$typeof===Mw||t.$$typeof===Lw||t.$$typeof===Que||t.getModuleId!==void 0)};xn.typeOf=Va;pU.exports=xn;var Jue=pU.exports,rs=t=>t===0?0:t>0?1:-1,Ji=t=>typeof t=="number"&&t!=+t,xf=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ct=t=>(typeof t=="number"||t instanceof Number)&&!Ji(t),Jo=t=>ct(t)||typeof t=="string",ece=0,iy=t=>{var e=++ece;return"".concat(t||"").concat(e)},Rs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ct(e)&&typeof e!="string")return r;var i;if(xf(e)){if(n==null)return r;var a=e.indexOf("%");i=n*parseFloat(e.slice(0,a))/100}else i=+e;return Ji(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},mU=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function nr(t,e,n){return ct(t)&&ct(e)?t+n*(e-t):e}function gU(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Yf(r,e))===n)}var Wn=t=>t===null||typeof t>"u",t1=t=>Wn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),tce=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function C$(t){if(typeof t!="string")return!1;var e=tce;return e.includes(t)}var nce=["viewBox","children"],IP=["points","pathLength"],TT={svg:nce,polygon:IP,polyline:IP},E$=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(k.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{C$(s)&&(r[s]=i=>n[s](n,i))}),r},rce=(t,e,n)=>r=>(t(e,n,r),null),Vw=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var i=t[s];C$(s)&&typeof i=="function"&&(r||(r={}),r[s]=rce(i,e,n))}),r},sce=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function yU(t){if(typeof t!="string")return!1;var e=sce;return e.includes(t)}function ol(t){var e=Object.entries(t).filter(n=>{var[r]=n;return yU(r)});return Object.fromEntries(e)}var _P=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",OP=null,CT=null,vU=t=>{if(t===OP&&Array.isArray(CT))return CT;var e=[];return k.Children.forEach(t,n=>{Wn(n)||(Jue.isFragment(n)?e=e.concat(vU(n.props.children)):e.push(n))}),CT=e,OP=t,e};function k$(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(s=>_P(s)):r=[_P(e)],vU(t).forEach(s=>{var i=Yf(s,"type.displayName")||Yf(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}var bU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,ice=(t,e,n,r)=>{var s;if(typeof e=="symbol"||typeof e=="number")return!0;var i=(s=r&&(TT==null?void 0:TT[r]))!==null&&s!==void 0?s:[],a=e.startsWith("data-"),o=typeof t!="function"&&(!!r&&i.includes(e)||yU(e)),l=!!n&&C$(e);return a||o||l},Qn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(k.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(i=>{var a;ice((a=r)===null||a===void 0?void 0:a[i],i,e,n)&&(s[i]=r[i])}),s},ace=["children","width","height","viewBox","className","style","title","desc"];function XE(){return XE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XE.apply(null,arguments)}function oce(t,e){if(t==null)return{};var n,r,s=lce(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function lce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xU=k.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:i,className:a,style:o,title:l,desc:u}=t,c=oce(t,ace),f=i||{width:r,height:s,x:0,y:0},d=Ft("recharts-surface",a);return k.createElement("svg",XE({},Qn(c,!0,"svg"),{className:d,width:r,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),k.createElement("title",null,l),k.createElement("desc",null,u),n)}),uce=["children","className"];function YE(){return YE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YE.apply(null,arguments)}function cce(t,e){if(t==null)return{};var n,r,s=fce(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function fce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ws=k.forwardRef((t,e)=>{var{children:n,className:r}=t,s=cce(t,uce),i=Ft("recharts-layer",r);return k.createElement("g",YE({className:i},Qn(s,!0),{ref:e}),n)}),dce=k.createContext(null);function Cn(t){return function(){return t}}const wU=Math.cos,_2=Math.sin,yo=Math.sqrt,O2=Math.PI,Ww=2*O2,ZE=Math.PI,QE=2*ZE,of=1e-6,hce=QE-of;function SU(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function pce(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return SU;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class mce{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?SU:pce(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,a){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,l=r-e,u=s-n,c=a-e,f=o-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>of)if(!(Math.abs(f*l-u*c)>of)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-a,p=s-o,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=i*Math.tan((ZE-Math.acos((m+d-g)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>of&&this._append`L${e+x*c},${n+x*f}`,this._append`A${i},${i},0,0,${+(f*h>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,s,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),l=r*Math.sin(s),u=e+o,c=n+l,f=1^a,d=a?s-i:i-s;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>of||Math.abs(this._y1-c)>of)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%QE+QE),d>hce?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>of&&this._append`A${r},${r},0,${+(d>=ZE)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function N$(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new mce(e)}function A$(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TU(t){this._context=t}TU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Gw(t){return new TU(t)}function CU(t){return t[0]}function EU(t){return t[1]}function kU(t,e){var n=Cn(!0),r=null,s=Gw,i=null,a=N$(o);t=typeof t=="function"?t:t===void 0?CU:Cn(t),e=typeof e=="function"?e:e===void 0?EU:Cn(e);function o(l){var u,c=(l=A$(l)).length,f,d=!1,h;for(r==null&&(i=s(h=a())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(f,u,l),+e(f,u,l));if(h)return i=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Cn(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Cn(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Cn(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),o):r},o}function Av(t,e,n){var r=null,s=Cn(!0),i=null,a=Gw,o=null,l=N$(u);t=typeof t=="function"?t:t===void 0?CU:Cn(+t),e=typeof e=="function"?e:Cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?EU:Cn(+n);function u(f){var d,h,p,m=(f=A$(f)).length,g,y=!1,v,b=new Array(m),x=new Array(m);for(i==null&&(o=a(v=l())),d=0;d<=m;++d){if(!(d<m&&s(g=f[d],d,f))===y)if(y=!y)h=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=h;--p)o.point(b[p],x[p]);o.lineEnd(),o.areaEnd()}y&&(b[d]=+t(g,d,f),x[d]=+e(g,d,f),o.point(r?+r(g,d,f):b[d],n?+n(g,d,f):x[d]))}if(v)return o=null,v+""||null}function c(){return kU().defined(s).curve(a).context(i)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Cn(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Cn(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Cn(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Cn(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Cn(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Cn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Cn(!!f),u):s},u.curve=function(f){return arguments.length?(a=f,i!=null&&(o=a(i)),u):a},u.context=function(f){return arguments.length?(f==null?i=o=null:o=a(i=f),u):i},u}class NU{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function gce(t){return new NU(t,!0)}function yce(t){return new NU(t,!1)}const $$={draw(t,e){const n=yo(e/O2);t.moveTo(n,0),t.arc(0,0,n,0,Ww)}},vce={draw(t,e){const n=yo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},AU=yo(1/3),bce=AU*2,xce={draw(t,e){const n=yo(e/bce),r=n*AU;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},wce={draw(t,e){const n=yo(e),r=-n/2;t.rect(r,r,n,n)}},Sce=.8908130915292852,$U=_2(O2/10)/_2(7*O2/10),Tce=_2(Ww/10)*$U,Cce=-wU(Ww/10)*$U,Ece={draw(t,e){const n=yo(e*Sce),r=Tce*n,s=Cce*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const a=Ww*i/5,o=wU(a),l=_2(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*s,l*r+o*s)}t.closePath()}},ET=yo(3),kce={draw(t,e){const n=-yo(e/(ET*3));t.moveTo(0,n*2),t.lineTo(-ET*n,-n),t.lineTo(ET*n,-n),t.closePath()}},la=-.5,ua=yo(3)/2,JE=1/yo(12),Nce=(JE/2+1)*3,Ace={draw(t,e){const n=yo(e/Nce),r=n/2,s=n*JE,i=r,a=n*JE+n,o=-i,l=a;t.moveTo(r,s),t.lineTo(i,a),t.lineTo(o,l),t.lineTo(la*r-ua*s,ua*r+la*s),t.lineTo(la*i-ua*a,ua*i+la*a),t.lineTo(la*o-ua*l,ua*o+la*l),t.lineTo(la*r+ua*s,la*s-ua*r),t.lineTo(la*i+ua*a,la*a-ua*i),t.lineTo(la*o+ua*l,la*l-ua*o),t.closePath()}};function $ce(t,e){let n=null,r=N$(s);t=typeof t=="function"?t:Cn(t||$$),e=typeof e=="function"?e:Cn(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Cn(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function D2(){}function R2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function IU(t){this._context=t}IU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:R2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ice(t){return new IU(t)}function _U(t){this._context=t}_U.prototype={areaStart:D2,areaEnd:D2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _ce(t){return new _U(t)}function OU(t){this._context=t}OU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:R2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Oce(t){return new OU(t)}function DU(t){this._context=t}DU.prototype={areaStart:D2,areaEnd:D2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Dce(t){return new DU(t)}function DP(t){return t<0?-1:1}function RP(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),a=(n-t._y1)/(s||r<0&&-0),o=(i*s+a*r)/(r+s);return(DP(i)+DP(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(o))||0}function PP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kT(t,e,n){var r=t._x0,s=t._y0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,s+o*e,i-o,a-o*n,i,a)}function P2(t){this._context=t}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kT(this,this._t0,PP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kT(this,PP(this,n=RP(this,t,e)),n);break;default:kT(this,this._t0,n=RP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function RU(t){this._context=new PU(t)}(RU.prototype=Object.create(P2.prototype)).point=function(t,e){P2.prototype.point.call(this,e,t)};function PU(t){this._context=t}PU.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function Rce(t){return new P2(t)}function Pce(t){return new RU(t)}function MU(t){this._context=t}MU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=MP(t),s=MP(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function MP(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),a=new Array(n);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,a[e]-=r*a[e-1];for(s[n-1]=a[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function Mce(t){return new MU(t)}function Hw(t,e){this._context=t,this._t=e}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Fce(t){return new Hw(t,.5)}function Lce(t){return new Hw(t,0)}function zce(t){return new Hw(t,1)}function sp(t,e){if((a=t.length)>1)for(var n=1,r,s,i=t[e[0]],a,o=i.length;n<a;++n)for(s=i,i=t[e[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function ek(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Bce(t,e){return t[e]}function jce(t){const e=[];return e.key=t,e}function Uce(){var t=Cn([]),e=ek,n=sp,r=Bce;function s(i){var a=Array.from(t.apply(this,arguments),jce),o,l=a.length,u=-1,c;for(const f of i)for(o=0,++u;o<l;++o)(a[o][u]=[0,+r(f,a[o].key,u,i)]).data=f;for(o=0,c=A$(e(a));o<l;++o)a[c[o]].index=o;return n(a,c),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Cn(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?ek:typeof i=="function"?i:Cn(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??sp,s):n},s}function Vce(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,a;s<i;++s){for(a=n=0;n<r;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<r;++n)t[n][s][1]/=a}sp(t,e)}}function Wce(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var a=0,o=0;a<s;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}sp(t,e)}}function Gce(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,a;r<i;++r){for(var o=0,l=0,u=0;o<a;++o){for(var c=t[e[o]],f=c[r][1]||0,d=c[r-1][1]||0,h=(f-d)/2,p=0;p<o;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;h+=g-y}l+=f,u+=h*f}s[r-1][1]+=s[r-1][0]=n,l&&(n-=u/l)}s[r-1][1]+=s[r-1][0]=n,sp(t,e)}}var Hce=["type","size","sizeType"];function tk(){return tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tk.apply(null,arguments)}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){qce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qce(t,e,n){return(e=Kce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kce(t){var e=Xce(t,"string");return typeof e=="symbol"?e:e+""}function Xce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yce(t,e){if(t==null)return{};var n,r,s=Zce(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Zce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FU={symbolCircle:$$,symbolCross:vce,symbolDiamond:xce,symbolSquare:wce,symbolStar:Ece,symbolTriangle:kce,symbolWye:Ace},Qce=Math.PI/180,Jce=t=>{var e="symbol".concat(t1(t));return FU[e]||$$},efe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Qce;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},tfe=(t,e)=>{FU["symbol".concat(t1(t))]=e},LU=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=Yce(t,Hce),i=LP(LP({},s),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var d=Jce(a),h=$ce().type(d).size(efe(n,r,a));return h()},{className:l,cx:u,cy:c}=i,f=Qn(i,!0);return u===+u&&c===+c&&n===+n?k.createElement("path",tk({},f,{className:Ft("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(c,")"),d:o()})):null};LU.registerSymbol=tfe;var zU={},BU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let i=0;i<n.length;i++){const a=n[i],o=r(a);s.has(o)||s.set(o,a)}return Array.from(s.values())}t.uniqBy=e})(BU);var I$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(I$);var jU={},qw={},UU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(UU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UU;function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(qw);var VU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(VU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qw,n=VU;function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(jU);var WU={},GU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_w;function n(r){return function(s){return e.get(s,r)}}t.property=n})(GU);var HU={},NT={},AT={},_$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(_$);var O$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(O$);var D$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(D$);var zP;function nfe(){return zP||(zP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R$(),n=_$,r=O$,s=D$;function i(f,d,h){return typeof h!="function"?e.isMatch(f,d):a(f,d,function p(m,g,y,v,b,x){const w=h(m,g,y,v,b,x);return w!==void 0?!!w:a(m,g,p,x)},new Map)}function a(f,d,h,p){if(d===f)return!0;switch(typeof d){case"object":return o(f,d,h,p);case"function":return Object.keys(d).length>0?a(f,{...d},h,p):s.eq(f,d);default:return n.isObject(f)?typeof d=="string"?d==="":!0:s.eq(f,d)}}function o(f,d,h,p){if(d==null)return!0;if(Array.isArray(d))return u(f,d,h,p);if(d instanceof Map)return l(f,d,h,p);if(d instanceof Set)return c(f,d,h,p);const m=Object.keys(d);if(f==null)return m.length===0;if(m.length===0)return!0;if(p&&p.has(d))return p.get(d)===f;p&&p.set(d,f);try{for(let g=0;g<m.length;g++){const y=m[g];if(!r.isPrimitive(f)&&!(y in f)||d[y]===void 0&&f[y]!==void 0||d[y]===null&&f[y]!==null||!h(f[y],d[y],y,f,d,p))return!1}return!0}finally{p&&p.delete(d)}}function l(f,d,h,p){if(d.size===0)return!0;if(!(f instanceof Map))return!1;for(const[m,g]of d.entries()){const y=f.get(m);if(h(y,g,m,f,d,p)===!1)return!1}return!0}function u(f,d,h,p){if(d.length===0)return!0;if(!Array.isArray(f))return!1;const m=new Set;for(let g=0;g<d.length;g++){const y=d[g];let v=!1;for(let b=0;b<f.length;b++){if(m.has(b))continue;const x=f[b];let w=!1;if(h(x,y,g,f,d,p)&&(w=!0),w){m.add(b),v=!0;break}}if(!v)return!1}return!0}function c(f,d,h,p){return d.size===0?!0:f instanceof Set?u([...f],[...d],h,p):!1}t.isMatchWith=i,t.isSetMatch=c}(AT)),AT}var BP;function R$(){return BP||(BP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nfe();function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n}(NT)),NT}var qU={},P$={},KU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(KU);var M$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(M$);var F$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",c="[object Array]",f="[object Function]",d="[object ArrayBuffer]",h="[object Object]",p="[object Error]",m="[object DataView]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",b="[object Uint32Array]",x="[object BigUint64Array]",w="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",A="[object BigInt64Array]",O="[object Float32Array]",R="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=d,t.arrayTag=c,t.bigInt64ArrayTag=A,t.bigUint64ArrayTag=x,t.booleanTag=s,t.dataViewTag=m,t.dateTag=o,t.errorTag=p,t.float32ArrayTag=O,t.float64ArrayTag=R,t.functionTag=f,t.int16ArrayTag=C,t.int32ArrayTag=E,t.int8ArrayTag=w,t.mapTag=l,t.numberTag=r,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=v,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=y})(F$);var XU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(XU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KU,n=M$,r=F$,s=O$,i=XU;function a(c,f){return o(c,void 0,c,new Map,f)}function o(c,f,d,h=new Map,p=void 0){const m=p==null?void 0:p(c,f,d,h);if(m!==void 0)return m;if(s.isPrimitive(c))return c;if(h.has(c))return h.get(c);if(Array.isArray(c)){const g=new Array(c.length);h.set(c,g);for(let y=0;y<c.length;y++)g[y]=o(c[y],y,d,h,p);return Object.hasOwn(c,"index")&&(g.index=c.index),Object.hasOwn(c,"input")&&(g.input=c.input),g}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const g=new RegExp(c.source,c.flags);return g.lastIndex=c.lastIndex,g}if(c instanceof Map){const g=new Map;h.set(c,g);for(const[y,v]of c)g.set(y,o(v,y,d,h,p));return g}if(c instanceof Set){const g=new Set;h.set(c,g);for(const y of c)g.add(o(y,void 0,d,h,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(i.isTypedArray(c)){const g=new(Object.getPrototypeOf(c)).constructor(c.length);h.set(c,g);for(let y=0;y<c.length;y++)g[y]=o(c[y],y,d,h,p);return g}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const g=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return h.set(c,g),l(g,c,d,h,p),g}if(typeof File<"u"&&c instanceof File){const g=new File([c],c.name,{type:c.type});return h.set(c,g),l(g,c,d,h,p),g}if(c instanceof Blob){const g=new Blob([c],{type:c.type});return h.set(c,g),l(g,c,d,h,p),g}if(c instanceof Error){const g=new c.constructor;return h.set(c,g),g.message=c.message,g.name=c.name,g.stack=c.stack,g.cause=c.cause,l(g,c,d,h,p),g}if(typeof c=="object"&&u(c)){const g=Object.create(Object.getPrototypeOf(c));return h.set(c,g),l(g,c,d,h,p),g}return c}function l(c,f,d=c,h,p){const m=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<m.length;g++){const y=m[g],v=Object.getOwnPropertyDescriptor(c,y);(v==null||v.writable)&&(c[y]=o(f[y],y,d,h,p))}}function u(c){switch(n.getTag(c)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(P$);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P$;function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(qU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R$(),n=qU;function r(s){return s=n.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=r})(HU);var YU={},ZU={},QU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P$,n=F$;function r(s,i){return e.cloneDeepWith(s,(a,o,l,u)=>{const c=i==null?void 0:i(a,o,l,u);if(c!==void 0)return c;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new s.constructor(s==null?void 0:s.valueOf());return e.copyProperties(f,s),f}case n.argumentsTag:{const f={};return e.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}t.cloneDeepWith=r})(QU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QU;function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(ZU);var JU={},L$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(L$);var eV={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M$;function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(eV);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x$,n=L$,r=eV,s=Ow;function i(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=s.toPath(o):l=[o],l.length===0)return!1;let u=a;for(let c=0;c<l.length;c++){const f=l[c];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=i})(JU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R$(),n=w$,r=ZU,s=_w,i=JU;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(u){const c=s.get(u,o);return c===void 0?i.has(u,o):l===void 0?c===void 0:e.isMatch(c,l)}}t.matchesProperty=a})(YU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I$,n=GU,r=HU,s=YU;function i(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=i})(WU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BU,n=I$,r=jU,s=WU;function i(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),s.iteratee(o)):[]}t.uniqBy=i})(zU);var rfe=zU.uniqBy;const jP=po(rfe);function sfe(t,e,n){return e===!0?jP(t,n):typeof e=="function"?jP(t,e):t}var tV={exports:{}},nV={},rV={exports:{}},sV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=k;function ife(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var afe=typeof Object.is=="function"?Object.is:ife,ofe=ip.useState,lfe=ip.useEffect,ufe=ip.useLayoutEffect,cfe=ip.useDebugValue;function ffe(t,e){var n=e(),r=ofe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return ufe(function(){s.value=n,s.getSnapshot=e,$T(s)&&i({inst:s})},[t,n,e]),lfe(function(){return $T(s)&&i({inst:s}),t(function(){$T(s)&&i({inst:s})})},[t]),cfe(n),n}function $T(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!afe(t,n)}catch{return!0}}function dfe(t,e){return e()}var hfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dfe:ffe;sV.useSyncExternalStore=ip.useSyncExternalStore!==void 0?ip.useSyncExternalStore:hfe;rV.exports=sV;var pfe=rV.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=k,mfe=pfe;function gfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yfe=typeof Object.is=="function"?Object.is:gfe,vfe=mfe.useSyncExternalStore,bfe=Kw.useRef,xfe=Kw.useEffect,wfe=Kw.useMemo,Sfe=Kw.useDebugValue;nV.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=bfe(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=wfe(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),s!==void 0&&a.hasValue){var p=a.value;if(s(p,h))return f=p}return f=h}if(p=f,yfe(c,h))return p;var m=r(h);return s!==void 0&&s(p,m)?(c=h,p):(c=h,f=m)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,s]);var o=vfe(t,i[0],i[1]);return xfe(function(){a.hasValue=!0,a.value=o},[o]),Sfe(o),o};tV.exports=nV;var Tfe=tV.exports,z$=k.createContext(null),Cfe=t=>t,mr=()=>{var t=k.useContext(z$);return t?t.store.dispatch:Cfe},Pb=()=>{},Efe=()=>Pb,kfe=(t,e)=>t===e;function it(t){var e=k.useContext(z$);return Tfe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Efe,e?e.store.getState:Pb,e?e.store.getState:Pb,e?t:Pb,kfe)}function Nfe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Afe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function $fe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var UP=t=>Array.isArray(t)?t:[t];function Ife(t){const e=Array.isArray(t[0])?t[0]:t;return $fe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _fe(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var Ofe=class{constructor(t){this.value=t}deref(){return this.value}},Dfe=typeof WeakRef<"u"?WeakRef:Ofe,Rfe=0,VP=1;function $v(){return{s:Rfe,v:void 0,o:null,p:null}}function iV(t,e={}){let n=$v();const{resultEqualityCheck:r}=e;let s,i=0;function a(){var f;let o=n;const{length:l}=arguments;for(let d=0,h=l;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=o.o;m===null&&(o.o=m=new WeakMap);const g=m.get(p);g===void 0?(o=$v(),m.set(p,o)):o=g}else{let m=o.p;m===null&&(o.p=m=new Map);const g=m.get(p);g===void 0?(o=$v(),m.set(p,o)):o=g}}const u=o;let c;if(o.s===VP)c=o.v;else if(c=t.apply(null,arguments),i++,r){const d=((f=s==null?void 0:s.deref)==null?void 0:f.call(s))??s;d!=null&&r(d,c)&&(c=d,i!==0&&i--),s=typeof c=="object"&&c!==null||typeof c=="function"?new Dfe(c):c}return u.s=VP,u.v=c,c}return a.clearCache=()=>{n=$v(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function Pfe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,a=0,o,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),Nfe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:f,memoizeOptions:d=[],argsMemoize:h=iV,argsMemoizeOptions:p=[]}=c,m=UP(d),g=UP(p),y=Ife(s),v=f(function(){return i++,u.apply(null,arguments)},...m),b=h(function(){a++;const w=_fe(y,arguments);return o=v.apply(null,w),o},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var de=Pfe(iV),Mfe=Object.assign((t,e=de)=>{Afe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>Mfe}),aV={},oV={},lV={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const a=e(r),o=e(s);if(a===o&&a===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?o-a:a-o}return 0};t.compareValues=n})(lV);var uV={},B$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(B$);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B$,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||a!=null&&Object.hasOwn(a,i)}t.isKey=s})(uV);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lV,n=uV,r=Ow;function s(i,a,o,l){if(i==null)return[];o=l?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(h=>String(h));const u=(h,p)=>{let m=h;for(let g=0;g<p.length&&m!=null;++g)m=m[p[g]];return m},c=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=a.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||n.isKey(h)?h:{key:h,path:r.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>c(p,h))})).slice().sort((h,p)=>{for(let m=0;m<f.length;m++){const g=e.compareValues(h.criteria[m],p.criteria[m],o[m]);if(g!==0)return g}return 0}).map(h=>h.original)}t.orderBy=s})(oV);var cV={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],i=Math.floor(r),a=(o,l)=>{for(let u=0;u<o.length;u++){const c=o[u];Array.isArray(c)&&l<i?a(c,l+1):s.push(c)}};return a(n,0),s}t.flatten=e})(cV);var j$={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L$,n=qw,r=_$,s=D$;function i(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.eq(l[o],a):!1}t.isIterateeCall=i})(j$);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oV,n=cV,r=j$;function s(i,...a){const o=a.length;return o>1&&r.isIterateeCall(i,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(i,n.flatten(a),["asc"])}t.sortBy=s})(aV);var Ffe=aV.sortBy;const Xw=po(Ffe);var fV=t=>t.legend.settings,Lfe=t=>t.legend.size,zfe=t=>t.legend.payload;de([zfe,fV],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Xw(r,n):r});var Iv=1;function Bfe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=k.useState({height:0,left:0,top:0,width:0}),r=k.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-e.height)>Iv||Math.abs(a.left-e.left)>Iv||Math.abs(a.top-e.top)>Iv||Math.abs(a.width-e.width)>Iv)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ms(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var jfe=typeof Symbol=="function"&&Symbol.observable||"@@observable",WP=jfe,IT=()=>Math.random().toString(36).substring(7).split("").join("."),Ufe={INIT:`@@redux/INIT${IT()}`,REPLACE:`@@redux/REPLACE${IT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${IT()}`},M2=Ufe;function U$(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function dV(t,e,n){if(typeof t!="function")throw new Error(ms(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ms(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ms(1));return n(dV)(t,e)}let r=t,s=e,i=new Map,a=i,o=0,l=!1;function u(){a===i&&(a=new Map,i.forEach((g,y)=>{a.set(y,g)}))}function c(){if(l)throw new Error(ms(3));return s}function f(g){if(typeof g!="function")throw new Error(ms(4));if(l)throw new Error(ms(5));let y=!0;u();const v=o++;return a.set(v,g),function(){if(y){if(l)throw new Error(ms(6));y=!1,u(),a.delete(v),i=null}}}function d(g){if(!U$(g))throw new Error(ms(7));if(typeof g.type>"u")throw new Error(ms(8));if(typeof g.type!="string")throw new Error(ms(17));if(l)throw new Error(ms(9));try{l=!0,s=r(s,g)}finally{l=!1}return(i=a).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(ms(10));r=g,d({type:M2.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ms(11));function v(){const x=y;x.next&&x.next(c())}return v(),{unsubscribe:g(v)}},[WP](){return this}}}return d({type:M2.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[WP]:p}}function Vfe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:M2.INIT})>"u")throw new Error(ms(12));if(typeof n(void 0,{type:M2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ms(13))})}function hV(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{Vfe(n)}catch(i){s=i}return function(a={},o){if(s)throw s;let l=!1;const u={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=a[f],p=d(h,o);if(typeof p>"u")throw o&&o.type,new Error(ms(14));u[f]=p,l=l||p!==h}return l=l||r.length!==Object.keys(a).length,l?u:a}}function F2(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Wfe(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(ms(15))};const a={getState:s.getState,dispatch:(l,...u)=>i(l,...u)},o=t.map(l=>l(a));return i=F2(...o)(s.dispatch),{...s,dispatch:i}}}function pV(t){return U$(t)&&"type"in t&&typeof t.type=="string"}var mV=Symbol.for("immer-nothing"),GP=Symbol.for("immer-draftable"),ea=Symbol.for("immer-state");function to(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ap=Object.getPrototypeOf;function Zf(t){return!!t&&!!t[ea]}function Gl(t){var e;return t?gV(t)||Array.isArray(t)||!!t[GP]||!!((e=t.constructor)!=null&&e[GP])||n1(t)||Zw(t):!1}var Gfe=Object.prototype.constructor.toString();function gV(t){if(!t||typeof t!="object")return!1;const e=ap(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Gfe}function L2(t,e){Yw(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Yw(t){const e=t[ea];return e?e.type_:Array.isArray(t)?1:n1(t)?2:Zw(t)?3:0}function nk(t,e){return Yw(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function yV(t,e,n){const r=Yw(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Hfe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function n1(t){return t instanceof Map}function Zw(t){return t instanceof Set}function lf(t){return t.copy_||t.base_}function rk(t,e){if(n1(t))return new Map(t);if(Zw(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=gV(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ea];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(ap(t),r)}else{const r=ap(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function V$(t,e=!1){return Qw(t)||Zf(t)||!Gl(t)||(Yw(t)>1&&Object.defineProperties(t,{set:{value:_v},add:{value:_v},clear:{value:_v},delete:{value:_v}}),Object.freeze(t),e&&Object.values(t).forEach(n=>V$(n,!0))),t}function _v(){to(2)}function Qw(t){return Object.isFrozen(t)}var qfe={};function Qf(t){const e=qfe[t];return e||to(0,t),e}var ay;function vV(){return ay}function Kfe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HP(t,e){e&&(Qf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function sk(t){ik(t),t.drafts_.forEach(Xfe),t.drafts_=null}function ik(t){t===ay&&(ay=t.parent_)}function qP(t){return ay=Kfe(ay,t)}function Xfe(t){const e=t[ea];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function KP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ea].modified_&&(sk(e),to(4)),Gl(t)&&(t=z2(e,t),e.parent_||B2(e,t)),e.patches_&&Qf("Patches").generateReplacementPatches_(n[ea].base_,t,e.patches_,e.inversePatches_)):t=z2(e,n,[]),sk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==mV?t:void 0}function z2(t,e,n){if(Qw(e))return e;const r=e[ea];if(!r)return L2(e,(s,i)=>XP(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return B2(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),L2(i,(o,l)=>XP(t,r,s,o,l,n,a)),B2(t,s,!1),n&&t.patches_&&Qf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function XP(t,e,n,r,s,i,a){if(Zf(s)){const o=i&&e&&e.type_!==3&&!nk(e.assigned_,r)?i.concat(r):void 0,l=z2(t,s,o);if(yV(n,r,l),Zf(l))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(Gl(s)&&!Qw(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;z2(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(n1(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&B2(t,s)}}function B2(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&V$(e,n)}function Yfe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:vV(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=W$;n&&(s=[r],i=oy);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}var W$={get(t,e){if(e===ea)return t;const n=lf(t);if(!nk(n,e))return Zfe(t,n,e);const r=n[e];return t.finalized_||!Gl(r)?r:r===_T(t.base_,e)?(OT(t),t.copy_[e]=ok(r,t)):r},has(t,e){return e in lf(t)},ownKeys(t){return Reflect.ownKeys(lf(t))},set(t,e,n){const r=bV(lf(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=_T(lf(t),e),i=s==null?void 0:s[ea];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Hfe(n,s)&&(n!==void 0||nk(t.base_,e)))return!0;OT(t),ak(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _T(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,OT(t),ak(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=lf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){to(11)},getPrototypeOf(t){return ap(t.base_)},setPrototypeOf(){to(12)}},oy={};L2(W$,(t,e)=>{oy[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});oy.deleteProperty=function(t,e){return oy.set.call(this,t,e,void 0)};oy.set=function(t,e,n){return W$.set.call(this,t[0],e,n,t[0])};function _T(t,e){const n=t[ea];return(n?lf(n):t)[e]}function Zfe(t,e,n){var s;const r=bV(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function bV(t,e){if(!(e in t))return;let n=ap(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ap(n)}}function ak(t){t.modified_||(t.modified_=!0,t.parent_&&ak(t.parent_))}function OT(t){t.copy_||(t.copy_=rk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Qfe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(l=i,...u){return a.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&to(6),r!==void 0&&typeof r!="function"&&to(7);let s;if(Gl(e)){const i=qP(this),a=ok(e,void 0);let o=!0;try{s=n(a),o=!1}finally{o?sk(i):ik(i)}return HP(i,r),KP(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===mV&&(s=void 0),this.autoFreeze_&&V$(s,!0),r){const i=[],a=[];Qf("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else to(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,s;return[this.produce(e,n,(a,o)=>{r=a,s=o}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Gl(t)||to(8),Zf(t)&&(t=Ml(t));const e=qP(this),n=ok(t,void 0);return n[ea].isManual_=!0,ik(e),n}finishDraft(t,e){const n=t&&t[ea];(!n||!n.isManual_)&&to(9);const{scope_:r}=n;return HP(r,e),KP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=Qf("Patches").applyPatches_;return Zf(t)?r(t,e):this.produce(t,s=>r(s,e))}};function ok(t,e){const n=n1(t)?Qf("MapSet").proxyMap_(t,e):Zw(t)?Qf("MapSet").proxySet_(t,e):Yfe(t,e);return(e?e.scope_:vV()).drafts_.push(n),n}function Ml(t){return Zf(t)||to(10,t),xV(t)}function xV(t){if(!Gl(t)||Qw(t))return t;const e=t[ea];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=rk(t,e.scope_.immer_.useStrictShallowCopy_)}else n=rk(t,!0);return L2(n,(r,s)=>{yV(n,r,xV(s))}),e&&(e.finalized_=!1),n}var Jfe=new Qfe,wV=Jfe.produce;function SV(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var ede=SV(),tde=SV,nde=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?F2:F2.apply(null,arguments)};function La(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(Zi(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>pV(r)&&r.type===t,n}var TV=class cg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cg.prototype)}static get[Symbol.species](){return cg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cg(...e[0].concat(this)):new cg(...e.concat(this))}};function YP(t){return Gl(t)?wV(t,()=>{}):t}function Ov(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function rde(t){return typeof t=="boolean"}var sde=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new TV;return n&&(rde(n)?a.push(ede):a.push(tde(n.extraArgument))),a},ide="RTK_autoBatch",ZP=t=>e=>{setTimeout(e,t)},ade=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ZP(10):t.type==="callback"?t.queueNotification:ZP(t.timeout),u=()=>{a=!1,i&&(i=!1,o.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>s&&c(),d=r.subscribe(f);return o.add(c),()=>{d(),o.delete(c)}},dispatch(c){var f;try{return s=!((f=c==null?void 0:c.meta)!=null&&f[ide]),i=!s,i&&(a||(a=!0,l(u))),r.dispatch(c)}finally{s=!0}}})},ode=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new TV(t);return r&&s.push(ade(typeof r=="object"?r:void 0)),s};function lde(t){const e=sde(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(U$(n))o=hV(n);else throw new Error(Zi(1));let l;typeof r=="function"?l=r(e):l=e();let u=F2;s&&(u=nde({trace:!1,...typeof s=="object"&&s}));const c=Wfe(...l),f=ode(c);let d=typeof a=="function"?a(f):f();const h=u(...d);return dV(o,i,h)}function CV(t){const e={},n=[];let r;const s={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Zi(28));if(o in e)throw new Error(Zi(29));return e[o]=a,s},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function ude(t){return typeof t=="function"}function cde(t,e){let[n,r,s]=CV(e),i;if(ude(t))i=()=>YP(t());else{const o=YP(t);i=()=>o}function a(o=i(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[s]),u.reduce((c,f)=>{if(f)if(Zf(c)){const h=f(c,l);return h===void 0?c:h}else{if(Gl(c))return wV(c,d=>f(d,l));{const d=f(c,l);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},o)}return a.getInitialState=i,a}var fde="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dde=(t=21)=>{let e="",n=t;for(;n--;)e+=fde[Math.random()*64|0];return e},hde=Symbol.for("rtk-slice-createasyncthunk");function pde(t,e){return`${t}/${e}`}function mde({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[hde];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(Zi(11));const o=(typeof s.reducers=="function"?s.reducers(yde()):s.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const C=typeof x=="string"?x:x.type;if(!C)throw new Error(Zi(12));if(C in u.sliceCaseReducersByType)throw new Error(Zi(13));return u.sliceCaseReducersByType[C]=w,c},addMatcher(x,w){return u.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return u.actionCreators[x]=w,c},exposeCaseReducer(x,w){return u.sliceCaseReducersByName[x]=w,c}};l.forEach(x=>{const w=o[x],C={reducerName:x,type:pde(i,x),createNotation:typeof s.reducers=="function"};bde(w)?wde(C,w,c,e):vde(C,w,c)});function f(){const[x={},w=[],C=void 0]=typeof s.extraReducers=="function"?CV(s.extraReducers):[s.extraReducers],E={...x,...u.sliceCaseReducersByType};return cde(s.initialState,A=>{for(let O in E)A.addCase(O,E[O]);for(let O of u.sliceMatchers)A.addMatcher(O.matcher,O.reducer);for(let O of w)A.addMatcher(O.matcher,O.reducer);C&&A.addDefaultCase(C)})}const d=x=>x,h=new Map,p=new WeakMap;let m;function g(x,w){return m||(m=f()),m(x,w)}function y(){return m||(m=f()),m.getInitialState()}function v(x,w=!1){function C(A){let O=A[x];return typeof O>"u"&&w&&(O=Ov(p,C,y)),O}function E(A=d){const O=Ov(h,w,()=>new WeakMap);return Ov(O,A,()=>{const R={};for(const[F,z]of Object.entries(s.selectors??{}))R[F]=gde(z,A,()=>Ov(p,A,y),w);return R})}return{reducerPath:x,getSelectors:E,get selectors(){return E(C)},selectSlice:C}}const b={name:i,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...v(a),injectInto(x,{reducerPath:w,...C}={}){const E=w??a;return x.inject({reducerPath:E,reducer:g},C),{...b,...v(E,!0)}}};return b}}function gde(t,e,n,r){function s(i,...a){let o=e(i);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return s.unwrapped=t,s}var sa=mde();function yde(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function vde({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!xde(r))throw new Error(Zi(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?La(t,a):La(t))}function bde(t){return t._reducerDefinitionType==="asyncThunk"}function xde(t){return t._reducerDefinitionType==="reducerWithPrepare"}function wde({type:t,reducerName:e},n,r,s){if(!s)throw new Error(Zi(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:l,settled:u,options:c}=n,f=s(t,i,c);r.exposeAction(e,f),a&&r.addCase(f.fulfilled,a),o&&r.addCase(f.pending,o),l&&r.addCase(f.rejected,l),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(e,{fulfilled:a||Dv,pending:o||Dv,rejected:l||Dv,settled:u||Dv})}function Dv(){}var Sde="task",EV="listener",kV="completed",G$="cancelled",Tde=`task-${G$}`,Cde=`task-${kV}`,lk=`${EV}-${G$}`,Ede=`${EV}-${kV}`,Jw=class{constructor(t){I4(this,"name","TaskAbortError");I4(this,"message");this.code=t,this.message=`${Sde} ${G$} (reason: ${t})`}},H$=(t,e)=>{if(typeof t!="function")throw new TypeError(Zi(32))},j2=()=>{},NV=(t,e=j2)=>(t.catch(e),t),AV=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Lf=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},zf=t=>{if(t.aborted){const{reason:e}=t;throw new Jw(e)}};function $V(t,e){let n=j2;return new Promise((r,s)=>{const i=()=>s(new Jw(t.reason));if(t.aborted){i();return}n=AV(t,i),e.finally(()=>n()).then(r,s)}).finally(()=>{n=j2})}var kde=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Jw?"cancelled":"rejected",error:n}}finally{e==null||e()}},U2=t=>e=>NV($V(t,e).then(n=>(zf(t),n))),IV=t=>{const e=U2(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Oh}=Object,QP={},e3="listenerMiddleware",Nde=(t,e)=>{const n=r=>AV(t,()=>Lf(r,t.reason));return(r,s)=>{H$(r);const i=new AbortController;n(i);const a=kde(async()=>{zf(t),zf(i.signal);const o=await r({pause:U2(i.signal),delay:IV(i.signal),signal:i.signal});return zf(i.signal),o},()=>Lf(i,Cde));return s!=null&&s.autoJoin&&e.push(a.catch(j2)),{result:U2(t)(a),cancel(){Lf(i,Tde)}}}},Ade=(t,e)=>{const n=async(r,s)=>{zf(e);let i=()=>{};const o=[new Promise((l,u)=>{let c=t({predicate:r,effect:(f,d)=>{d.unsubscribe(),l([f,d.getState(),d.getOriginalState()])}});i=()=>{c(),u()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await $V(e,Promise.race(o));return zf(e),l}finally{i()}};return(r,s)=>NV(n(r,s))},_V=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=La(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(Zi(21));return H$(i),{predicate:s,type:e,effect:i}},OV=Oh(t=>{const{type:e,predicate:n,effect:r}=_V(t);return{id:dde(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Zi(22))}}},{withTypes:()=>OV}),JP=(t,e)=>{const{type:n,effect:r,predicate:s}=_V(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},uk=t=>{t.pending.forEach(e=>{Lf(e,lk)})},$de=t=>()=>{t.forEach(uk),t.clear()},eM=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},DV=Oh(La(`${e3}/add`),{withTypes:()=>DV}),Ide=La(`${e3}/removeAll`),RV=Oh(La(`${e3}/remove`),{withTypes:()=>RV}),_de=(...t)=>{console.error(`${e3}/error`,...t)},r1=(t={})=>{const e=new Map,{extra:n,onError:r=_de}=t;H$(r);const s=c=>(c.unsubscribe=()=>e.delete(c.id),e.set(c.id,c),f=>{c.unsubscribe(),f!=null&&f.cancelActive&&uk(c)}),i=c=>{const f=JP(e,c)??OV(c);return s(f)};Oh(i,{withTypes:()=>i});const a=c=>{const f=JP(e,c);return f&&(f.unsubscribe(),c.cancelActive&&uk(f)),!!f};Oh(a,{withTypes:()=>a});const o=async(c,f,d,h)=>{const p=new AbortController,m=Ade(i,p.signal),g=[];try{c.pending.add(p),await Promise.resolve(c.effect(f,Oh({},d,{getOriginalState:h,condition:(y,v)=>m(y,v).then(Boolean),take:m,delay:IV(p.signal),pause:U2(p.signal),extra:n,signal:p.signal,fork:Nde(p.signal,g),unsubscribe:c.unsubscribe,subscribe:()=>{e.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((y,v,b)=>{y!==p&&(Lf(y,lk),b.delete(y))})},cancel:()=>{Lf(p,lk),c.pending.delete(p)},throwIfCancelled:()=>{zf(p.signal)}})))}catch(y){y instanceof Jw||eM(r,y,{raisedBy:"effect"})}finally{await Promise.all(g),Lf(p,Ede),c.pending.delete(p)}},l=$de(e);return{middleware:c=>f=>d=>{if(!pV(d))return f(d);if(DV.match(d))return i(d.payload);if(Ide.match(d)){l();return}if(RV.match(d))return a(d.payload);let h=c.getState();const p=()=>{if(h===QP)throw new Error(Zi(23));return h};let m;try{if(m=f(d),e.size>0){const g=c.getState(),y=Array.from(e.values());for(const v of y){let b=!1;try{b=v.predicate(d,g,h)}catch(x){b=!1,eM(r,x,{raisedBy:"predicate"})}b&&o(v,d,c,p)}}}finally{h=QP}return m},startListening:i,stopListening:a,clearListeners:l}};function Zi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ode={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},PV=sa({name:"chartLayout",initialState:Ode,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,s,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Dde,setLayout:Rde,setChartSize:Pde,setScale:Mde}=PV.actions,Fde=PV.reducer;function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(r){Lde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lde(t,e,n){return(e=zde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zde(t){var e=Bde(t,"string");return typeof e=="symbol"?e:e+""}function Bde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V2=Math.PI/180,jde=t=>t*180/Math.PI,Cr=(t,e,n,r)=>({x:t+Math.cos(-V2*r)*n,y:e+Math.sin(-V2*r)*n}),MV=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Ude=(t,e)=>{var{x:n,y:r}=t,{x:s,y:i}=e;return Math.sqrt((n-s)**2+(r-i)**2)},Vde=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:i}=e,a=Ude({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var o=(n-s)/a,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:a,angle:jde(l),angleInRadian:l}},Wde=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:e-i*360,endAngle:n-i*360}},Gde=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(s,i);return t+a*360},Hde=(t,e)=>{var{x:n,y:r}=t,{radius:s,angle:i}=Vde({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(s<a||s>o||s===0)return null;var{startAngle:l,endAngle:u}=Wde(e),c=i,f;if(l<=u){for(;c>u;)c-=360;for(;c<l;)c+=360;f=c>=l&&c<=u}else{for(;c>l;)c-=360;for(;c<u;)c+=360;f=c>=u&&c<=l}return f?nM(nM({},e),{},{radius:s,angle:Gde(c,e)}):null};function FV(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function rM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(n),!0).forEach(function(r){qde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qde(t,e,n){return(e=Kde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kde(t){var e=Xde(t,"string");return typeof e=="symbol"?e:e+""}function Xde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function En(t,e,n){return Wn(t)||Wn(e)?n:Jo(e)?Yf(t,e,n):typeof e=="function"?e(t):n}var Yde=(t,e,n,r,s)=>{var i,a=-1,o=(i=e==null?void 0:e.length)!==null&&i!==void 0?i:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?n[l-1].coordinate:n[o-1].coordinate,c=n[l].coordinate,f=l>=o-1?n[0].coordinate:n[l+1].coordinate,d=void 0;if(rs(c-u)!==rs(f-c)){var h=[];if(rs(f-c)===rs(s[1]-s[0])){d=f;var p=c+s[1]-s[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{d=u;var m=f+s[1]-s[0];h[0]=Math.min(c,(m+c)/2),h[1]=Math.max(c,(m+c)/2)}var g=[Math.min(c,(d+c)/2),Math.max(c,(d+c)/2)];if(t>g[0]&&t<=g[1]||t>=h[0]&&t<=h[1]){({index:a}=n[l]);break}}else{var y=Math.min(u,f),v=Math.max(u,f);if(t>(y+c)/2&&t<=(v+c)/2){({index:a}=n[l]);break}}}else if(e){for(var b=0;b<o;b++)if(b===0&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b>0&&b<o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2&&t<=(e[b].coordinate+e[b+1].coordinate)/2||b===o-1&&t>(e[b].coordinate+e[b-1].coordinate)/2){({index:a}=e[b]);break}}return a},Zde=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:i,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&i!=="center"&&ct(t[i]))return ba(ba({},t),{},{[i]:t[i]+(r||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&a!=="middle"&&ct(t[a]))return ba(ba({},t),{},{[a]:t[a]+(s||0)})}return t},$c=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",LV=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var s,i,a=t.map(o=>(o.coordinate===e&&(s=!0),o.coordinate===n&&(i=!0),o.coordinate));return s||a.push(e),i||a.push(n),a},zV=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:i,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:f,niceTicks:d,axisType:h}=t;if(!a)return null;var p=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=s==="category"&&a.bandwidth?a.bandwidth()/p:0;if(m=h==="angleAxis"&&i&&i.length>=2?rs(i[0]-i[1])*2*m:m,f||d){var g=(f||d||[]).map((y,v)=>{var b=r?r.indexOf(y):y;return{coordinate:a(b)+m,value:y,offset:m,index:v}});return g.filter(y=>!Ji(y.coordinate))}return l&&u?u.map((y,v)=>({coordinate:a(y)+m,value:y,index:v,offset:m})):a.ticks&&c!=null?a.ticks(c).map((y,v)=>({coordinate:a(y)+m,value:y,offset:m,index:v})):a.domain().map((y,v)=>({coordinate:a(y)+m,value:r?r[y]:y,index:v,offset:m}))},sM=1e-4,Qde=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),s=Math.min(r[0],r[1])-sM,i=Math.max(r[0],r[1])+sM,a=t(e[0]),o=t(e[n-1]);(a<s||a>i||o<s||o>i)&&t.domain([e[0],e[n-1]])}},Jde=(t,e)=>{if(!e||e.length!==2||!ct(e[0])||!ct(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),s=[t[0],t[1]];return(!ct(t[0])||t[0]<n)&&(s[0]=n),(!ct(t[1])||t[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s},ehe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0,a=0;a<e;++a){var o=Ji(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1]):(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1])}},the=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0;i<e;++i){var a=Ji(t[i][n][1])?t[i][n][0]:t[i][n][1];a>=0?(t[i][n][0]=s,t[i][n][1]=s+a,s=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},nhe={sign:ehe,expand:Vce,none:sp,silhouette:Wce,wiggle:Gce,positive:the},rhe=(t,e,n)=>{var r=nhe[n],s=Uce().keys(e).value((i,a)=>+En(i,a,0)).order(ek).offset(r);return s(t)};function she(t){return t==null?void 0:String(t)}function iM(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:i,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Wn(s[e.dataKey])){var o=gU(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=En(s,Wn(a)?e.dataKey:a);return Wn(l)?null:e.scale(l)}var aM=t=>{var{axis:e,ticks:n,offset:r,bandSize:s,entry:i,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var o=En(i,e.dataKey,e.scale.domain()[a]);return Wn(o)?null:e.scale(o)-s/2+r},ihe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]},ahe=t=>{var e=t.flat(2).filter(ct);return[Math.min(...e),Math.max(...e)]},ohe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],lhe=(t,e,n)=>{if(t!=null)return ohe(Object.keys(t).reduce((r,s)=>{var i=t[s],{stackedData:a}=i,o=a.reduce((l,u)=>{var c=FV(u,e,n),f=ahe(c);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},oM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ly=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=Xw(e,c=>c.coordinate),i=1/0,a=1,o=s.length;a<o;a++){var l=s[a],u=s[a-1];i=Math.min((l.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function uM(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:i}=t;return ba(ba({},e),{},{dataKey:n,payload:r,value:s,name:i})}function zp(t,e){if(t)return String(t);if(typeof e=="string")return e}function uhe(t,e,n,r,s){if(n==="horizontal"||n==="vertical"){var i=t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height;return i?{x:t,y:e}:null}return r?Hde({x:t,y:e},r):null}var che=(t,e,n,r)=>{var s=e.find(u=>u&&u.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:s.coordinate};if(t==="centric"){var i=s.coordinate,{radius:a}=r;return ba(ba(ba({},r),Cr(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var o=s.coordinate,{angle:l}=r;return ba(ba(ba({},r),Cr(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},fhe=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,nu=t=>t.layout.width,ru=t=>t.layout.height,dhe=t=>t.layout.scale,BV=t=>t.layout.margin,t3=de(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),n3=de(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),jV="data-recharts-item-index",UV="data-recharts-item-data-key",s1=60;function cM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cM(Object(n),!0).forEach(function(r){hhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hhe(t,e,n){return(e=phe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function phe(t){var e=mhe(t,"string");return typeof e=="symbol"?e:e+""}function mhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ghe=t=>t.brush.height;function yhe(t){var e=n3(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:s1;return n+s}return n},0)}function vhe(t){var e=n3(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:s1;return n+s}return n},0)}function bhe(t){var e=t3(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function xhe(t){var e=t3(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ur=de([nu,ru,BV,ghe,yhe,vhe,bhe,xhe,fV,Lfe],(t,e,n,r,s,i,a,o,l,u)=>{var c={left:(n.left||0)+s,right:(n.right||0)+i},f={top:(n.top||0)+a,bottom:(n.bottom||0)+o},d=Rv(Rv({},f),c),h=d.bottom;d.bottom+=r,d=Zde(d,l,u);var p=t-d.left-d.right,m=e-d.top-d.bottom;return Rv(Rv({brushBottom:h},d),{},{width:Math.max(p,0),height:Math.max(m,0)})}),whe=de(Ur,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),q$=de(nu,ru,(t,e)=>({x:0,y:0,width:t,height:e})),She=k.createContext(null),Ni=()=>k.useContext(She)!=null,r3=t=>t.brush,s3=de([r3,Ur,BV],(t,e,n)=>({height:t.height,x:ct(t.x)?t.x:e.left,y:ct(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:ct(t.width)?t.width:e.width})),K$=()=>{var t,e=Ni(),n=it(whe),r=it(s3),s=(t=it(r3))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},The={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},VV=()=>{var t;return(t=it(Ur))!==null&&t!==void 0?t:The},WV=()=>it(nu),GV=()=>it(ru),Xt=t=>t.layout.layoutType,i3=()=>it(Xt),Che={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},HV=sa({name:"legend",initialState:Che,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Ml(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:QQe,setLegendSettings:JQe,addLegendPayload:qV,removeLegendPayload:KV}=HV.actions,Ehe=HV.reducer;function ck(){return ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ck.apply(null,arguments)}function fM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function DT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fM(Object(n),!0).forEach(function(r){khe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function khe(t,e,n){return(e=Nhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nhe(t){var e=Ahe(t,"string");return typeof e=="symbol"?e:e+""}function Ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $he(t){return Array.isArray(t)&&Jo(t[0])&&Jo(t[1])?t.join(" ~ "):t}var Ihe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:s={},payload:i,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:u,label:c,labelFormatter:f,accessibilityLayer:d=!1}=t,h=()=>{if(i&&i.length){var w={padding:0,margin:0},C=(o?Xw(i,o):i).map((E,A)=>{if(E.type==="none")return null;var O=E.formatter||a||$he,{value:R,name:F}=E,z=R,j=F;if(O){var H=O(R,F,E,A,i);if(Array.isArray(H))[z,j]=H;else if(H!=null)z=H;else return null}var J=DT({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},r);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:J},Jo(j)?k.createElement("span",{className:"recharts-tooltip-item-name"},j):null,Jo(j)?k.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,k.createElement("span",{className:"recharts-tooltip-item-value"},z),k.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:w},C)}return null},p=DT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=DT({margin:0},s),g=!Wn(c),y=g?c:"",v=Ft("recharts-default-tooltip",l),b=Ft("recharts-tooltip-label",u);g&&f&&i!==void 0&&i!==null&&(y=f(c,i));var x=d?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",ck({className:v,style:p},x),k.createElement("p",{className:b,style:m},k.isValidElement(y)?y:"".concat(y)),h())},zm="recharts-tooltip-wrapper",_he={visibility:"hidden"};function Ohe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ft(zm,{["".concat(zm,"-right")]:ct(n)&&e&&ct(e.x)&&n>=e.x,["".concat(zm,"-left")]:ct(n)&&e&&ct(e.x)&&n<e.x,["".concat(zm,"-bottom")]:ct(r)&&e&&ct(e.y)&&r>=e.y,["".concat(zm,"-top")]:ct(r)&&e&&ct(e.y)&&r<e.y})}function dM(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=t;if(i&&ct(i[r]))return i[r];var c=n[r]-o-(s>0?s:0),f=n[r]+s;if(e[r])return a[r]?c:f;var d=l[r];if(d==null)return 0;if(a[r]){var h=c,p=d;return h<p?Math.max(f,d):Math.max(c,d)}if(u==null)return 0;var m=f+o,g=d+u;return m>g?Math.max(c,d):Math.max(f,d)}function Dhe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Rhe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:s,reverseDirection:i,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,u,c,f;return a.height>0&&a.width>0&&n?(c=dM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=dM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=Dhe({translateX:c,translateY:f,useTranslate3d:o})):u=_he,{cssProperties:u,cssClasses:Ohe({translateX:c,translateY:f,coordinate:n})}}function hM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hM(Object(n),!0).forEach(function(r){fk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fk(t,e,n){return(e=Phe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Phe(t){var e=Mhe(t,"string");return typeof e=="symbol"?e:e+""}function Mhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Fhe extends k.PureComponent{constructor(){super(...arguments),fk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:a,hasPayload:o,isAnimationActive:l,offset:u,position:c,reverseDirection:f,useTranslate3d:d,viewBox:h,wrapperStyle:p,lastBoundingBox:m,innerRef:g,hasPortalFromProps:y}=this.props,{cssClasses:v,cssProperties:b}=Rhe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:u,position:c,reverseDirection:f,tooltipBox:{height:m.height,width:m.width},useTranslate3d:d,viewBox:h}),x=y?{}:Pv(Pv({transition:l&&e?"transform ".concat(r,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=Pv(Pv({},x),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:w,ref:g},i)}}var Lhe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ic={devToolsEnabled:!1,isSsr:Lhe()},XV=()=>it(t=>t.rootProps.accessibilityLayer);function ta(t){return Number.isFinite(t)}function op(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function dk(){return dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dk.apply(null,arguments)}function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){zhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zhe(t,e,n){return(e=Bhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bhe(t){var e=jhe(t,"string");return typeof e=="symbol"?e:e+""}function jhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gM={curveBasisClosed:_ce,curveBasisOpen:Oce,curveBasis:Ice,curveBumpX:gce,curveBumpY:yce,curveLinearClosed:Dce,curveLinear:Gw,curveMonotoneX:Rce,curveMonotoneY:Pce,curveNatural:Mce,curveStep:Fce,curveStepAfter:zce,curveStepBefore:Lce},Mv=t=>ta(t.x)&&ta(t.y),Bm=t=>t.x,jm=t=>t.y,Uhe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(t1(t));return(n==="curveMonotone"||n==="curveBump")&&e?gM["".concat(n).concat(e==="vertical"?"Y":"X")]:gM[n]||Gw},Vhe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:s,connectNulls:i=!1}=t,a=Uhe(e,s),o=i?n.filter(Mv):n,l;if(Array.isArray(r)){var u=i?r.filter(f=>Mv(f)):r,c=o.map((f,d)=>mM(mM({},f),{},{base:u[d]}));return s==="vertical"?l=Av().y(jm).x1(Bm).x0(f=>f.base.x):l=Av().x(Bm).y1(jm).y0(f=>f.base.y),l.defined(Mv).curve(a),l(c)}return s==="vertical"&&ct(r)?l=Av().y(jm).x1(Bm).x0(r):ct(r)?l=Av().x(Bm).y1(jm).y0(r):l=kU().x(Bm).y(jm),l.defined(Mv).curve(a),l(o)},X$=t=>{var{className:e,points:n,path:r,pathRef:s}=t;if((!n||!n.length)&&!r)return null;var i=n&&n.length?Vhe(t):r;return k.createElement("path",dk({},ol(t),E$(t),{className:Ft("recharts-curve",e),d:i===null?void 0:i,ref:s}))},Whe=["x","y","top","left","width","height","className"];function hk(){return hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hk.apply(null,arguments)}function yM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ghe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yM(Object(n),!0).forEach(function(r){Hhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hhe(t,e,n){return(e=qhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qhe(t){var e=Khe(t,"string");return typeof e=="symbol"?e:e+""}function Khe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xhe(t,e){if(t==null)return{};var n,r,s=Yhe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Yhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zhe=(t,e,n,r,s,i)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),Qhe=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:i=0,height:a=0,className:o}=t,l=Xhe(t,Whe),u=Ghe({x:e,y:n,top:r,left:s,width:i,height:a},l);return!ct(e)||!ct(n)||!ct(i)||!ct(a)||!ct(r)||!ct(s)?null:k.createElement("path",hk({},Qn(u,!0),{className:Ft("recharts-cross",o),d:Zhe(e,n,i,a,r,s)}))};function Jhe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function vM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function epe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vM(Object(n),!0).forEach(function(r){tpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tpe(t,e,n){return(e=npe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function npe(t){var e=rpe(t,"string");return typeof e=="symbol"?e:e+""}function rpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ts(t,e){var n=epe({},t),r=e,s=Object.keys(e),i=s.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return i}function spe(){}function bM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bM(Object(n),!0).forEach(function(r){ipe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ipe(t,e,n){return(e=ape(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ape(t){var e=ope(t,"string");return typeof e=="symbol"?e:e+""}function ope(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lpe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),YV=(t,e,n)=>t.map(r=>"".concat(lpe(r)," ").concat(e,"ms ").concat(n)).join(","),upe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),uy=(t,e)=>Object.keys(e).reduce((n,r)=>xM(xM({},n),{},{[r]:t(r,e[r])}),{});function wM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wM(Object(n),!0).forEach(function(r){cpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cpe(t,e,n){return(e=fpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fpe(t){var e=dpe(t,"string");return typeof e=="symbol"?e:e+""}function dpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W2=(t,e,n)=>t+(e-t)*n,pk=t=>{var{from:e,to:n}=t;return e!==n},ZV=(t,e,n)=>{var r=uy((s,i)=>{if(pk(i)){var[a,o]=t(i.from,i.to,i.velocity);return ys(ys({},i),{},{from:a,velocity:o})}return i},e);return n<1?uy((s,i)=>pk(i)?ys(ys({},i),{},{velocity:W2(i.velocity,r[s].velocity,n),from:W2(i.from,r[s].from,n)}):i,e):ZV(t,r,n-1)};function hpe(t,e,n,r,s,i){var a,o=r.reduce((d,h)=>ys(ys({},d),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),l=()=>uy((d,h)=>h.from,o),u=()=>!Object.values(o).filter(pk).length,c=null,f=d=>{a||(a=d);var h=d-a,p=h/n.dt;o=ZV(n,o,p),s(ys(ys(ys({},t),e),l())),a=d,u()||(c=i.setTimeout(f))};return()=>(c=i.setTimeout(f),()=>{c()})}function ppe(t,e,n,r,s,i,a){var o=null,l=s.reduce((f,d)=>ys(ys({},f),{},{[d]:[t[d],e[d]]}),{}),u,c=f=>{u||(u=f);var d=(f-u)/r,h=uy((m,g)=>W2(...g,n(d)),l);if(i(ys(ys(ys({},t),e),h)),d<1)o=a.setTimeout(c);else{var p=uy((m,g)=>W2(...g,n(1)),l);i(ys(ys(ys({},t),e),p))}};return()=>(o=a.setTimeout(c),()=>{o()})}const mpe=(t,e,n,r,s,i)=>{var a=upe(t,e);return n.isStepper===!0?hpe(t,e,n,a,s,i):ppe(t,e,n,r,a,s,i)};var G2=1e-4,QV=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],JV=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),SM=(t,e)=>n=>{var r=QV(t,e);return JV(r,n)},gpe=(t,e)=>n=>{var r=QV(t,e),s=[...r.map((i,a)=>i*a).slice(1),0];return JV(s,n)},TM=function(){for(var e,n,r,s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,r,n,s]=[0,0,1,1];break;case"ease":[e,r,n,s]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,s]=[.42,0,1,1];break;case"ease-out":[e,r,n,s]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,s]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,n,s]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else a.length===4&&([e,r,n,s]=a);var u=SM(e,n),c=SM(r,s),f=gpe(e,n),d=p=>p>1?1:p<0?0:p,h=p=>{for(var m=p>1?1:p,g=m,y=0;y<8;++y){var v=u(g)-m,b=f(g);if(Math.abs(v-m)<G2||b<G2)return c(g);g=d(g-v/b)}return c(g)};return h.isStepper=!1,h},ype=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,i=(a,o,l)=>{var u=-(a-o)*n,c=l*r,f=l+(u-c)*s/1e3,d=l*s/1e3+a;return Math.abs(d-o)<G2&&Math.abs(f)<G2?[o,0]:[d,f]};return i.isStepper=!0,i.dt=s,i},vpe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TM(t);case"spring":return ype();default:if(t.split("(")[0]==="cubic-bezier")return TM(t)}return typeof t=="function"?t:null};function bpe(t){var e,n=()=>null,r=!1,s=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...u]=o;if(typeof l=="number"){s=t.setTimeout(i.bind(null,u),l);return}i(l),s=t.setTimeout(i.bind(null,u));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,s&&(s(),s=null),i(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class xpe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function wpe(){return bpe(new xpe)}var Spe=k.createContext(wpe);function Tpe(t,e){var n=k.useContext(Spe);return k.useMemo(()=>e??n(t),[t,e,n])}var Cpe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},CM={t:0},RT={t:1};function i1(t){var e=Ts(t,Cpe),{isActive:n,canBegin:r,duration:s,easing:i,begin:a,onAnimationEnd:o,onAnimationStart:l,children:u}=e,c=Tpe(e.animationId,e.animationManager),[f,d]=k.useState(n?CM:RT),h=k.useRef(null);return k.useEffect(()=>{n||d(RT)},[n]),k.useEffect(()=>{if(!n||!r)return spe;var p=mpe(CM,RT,vpe(i),s,d,c.getTimeoutController()),m=()=>{h.current=p()};return c.start([l,a,m,s,o]),()=>{c.stop(),h.current&&h.current(),o()}},[n,r,s,i,a,l,o,c]),u(f.t)}function a1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=k.useRef(iy(e)),r=k.useRef(t);return r.current!==t&&(n.current=iy(e),r.current=t),n.current}function EM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EM(Object(n),!0).forEach(function(r){Epe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Epe(t,e,n){return(e=kpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kpe(t){var e=Npe(t,"string");return typeof e=="symbol"?e:e+""}function Npe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H2(){return H2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H2.apply(null,arguments)}var NM=(t,e,n,r,s)=>{var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,u;if(i>0&&s instanceof Array){for(var c=[0,0,0,0],f=0,d=4;f<d;f++)c[f]=s[f]>i?i:s[f];u="M".concat(t,",").concat(e+a*c[0]),c[0]>0&&(u+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(t+o*c[0],",").concat(e)),u+="L ".concat(t+n-o*c[1],",").concat(e),c[1]>0&&(u+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*c[1])),u+="L ".concat(t+n,",").concat(e+r-a*c[2]),c[2]>0&&(u+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,`,
        `).concat(t+n-o*c[2],",").concat(e+r)),u+="L ".concat(t+o*c[3],",").concat(e+r),c[3]>0&&(u+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-a*c[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);u="M ".concat(t,",").concat(e+a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(t+o*h,",").concat(e,`
            L `).concat(t+n-o*h,",").concat(e,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*h,`
            L `).concat(t+n,",").concat(e+r-a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(t+n-o*h,",").concat(e+r,`
            L `).concat(t+o*h,",").concat(e+r,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(t,",").concat(e+r-a*h," Z")}else u="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return u},Ape={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eW=t=>{var e=Ts(t,Ape),n=k.useRef(null),[r,s]=k.useState(-1);k.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&s(H)}catch{}},[]);var{x:i,y:a,width:o,height:l,radius:u,className:c}=e,{animationEasing:f,animationDuration:d,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:m}=e,g=k.useRef(o),y=k.useRef(l),v=k.useRef(i),b=k.useRef(a),x=k.useMemo(()=>({x:i,y:a,width:o,height:l,radius:u}),[i,a,o,l,u]),w=a1(x,"rectangle-");if(i!==+i||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var C=Ft("recharts-rectangle",c);if(!m)return k.createElement("path",H2({},Qn(e,!0),{className:C,d:NM(i,a,o,l,u)}));var E=g.current,A=y.current,O=v.current,R=b.current,F="0px ".concat(r===-1?1:r,"px"),z="".concat(r,"px 0px"),j=YV(["strokeDasharray"],d,typeof f=="string"?f:void 0);return k.createElement(i1,{animationId:w,key:w,canBegin:r>0,duration:d,easing:f,isActive:m,begin:h},H=>{var J=nr(E,o,H),U=nr(A,l,H),Y=nr(O,i,H),Q=nr(R,a,H);n.current&&(g.current=J,y.current=U,v.current=Y,b.current=Q);var se;return p?H>0?se={transition:j,strokeDasharray:z}:se={strokeDasharray:F}:se={strokeDasharray:z},k.createElement("path",H2({},Qn(e,!0),{className:C,d:NM(Y,Q,J,U,u),ref:n,style:kM(kM({},se),e.style)}))})};function tW(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:i}=t,a=Cr(e,n,r,s),o=Cr(e,n,r,i);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function mk(){return mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mk.apply(null,arguments)}var $pe=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Fv=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:i,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,u=o*(a?1:-1)+r,c=Math.asin(o/u)/V2,f=l?s:s+i*c,d=Cr(e,n,u,f),h=Cr(e,n,r,f),p=l?s-i*c:s,m=Cr(e,n,u*Math.cos(c*V2),p);return{center:d,circleTangency:h,lineTangency:m,theta:c}},nW=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a}=t,o=$pe(i,a),l=i+o,u=Cr(e,n,s,i),c=Cr(e,n,s,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>l),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(r>0){var d=Cr(e,n,r,i),h=Cr(e,n,r,l);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=l),`,
            `).concat(d.x,",").concat(d.y," Z")}else f+="L ".concat(e,",").concat(n," Z");return f},Ipe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:u}=t,c=rs(u-l),{circleTangency:f,lineTangency:d,theta:h}=Fv({cx:e,cy:n,radius:s,angle:l,sign:c,cornerRadius:i,cornerIsExternal:o}),{circleTangency:p,lineTangency:m,theta:g}=Fv({cx:e,cy:n,radius:s,angle:u,sign:-c,cornerRadius:i,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-h-g;if(y<0)return a?"M ".concat(d.x,",").concat(d.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):nW({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:l,endAngle:u});var v="M ".concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
  `);if(r>0){var{circleTangency:b,lineTangency:x,theta:w}=Fv({cx:e,cy:n,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:C,lineTangency:E,theta:A}=Fv({cx:e,cy:n,radius:r,angle:u,sign:-c,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),O=o?Math.abs(l-u):Math.abs(l-u)-w-A;if(O<0&&i===0)return"".concat(v,"L").concat(e,",").concat(n,"Z");v+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(O>180),",").concat(+(c>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(x.x,",").concat(x.y,"Z")}else v+="L".concat(e,",").concat(n,"Z");return v},_pe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rW=t=>{var e=Ts(t,_pe),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c,className:f}=e;if(i<s||u===c)return null;var d=Ft("recharts-sector",f),h=i-s,p=Rs(a,h,0,!0),m;return p>0&&Math.abs(u-c)<360?m=Ipe({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c}):m=nW({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:c}),k.createElement("path",mk({},Qn(e,!0),{className:d,d:m}))};function Ope(t,e,n){var r,s,i,a;if(t==="horizontal")r=e.x,i=r,s=n.top,a=n.top+n.height;else if(t==="vertical")s=e.y,a=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:c,angle:f}=e,d=Cr(o,l,u,f),h=Cr(o,l,c,f);r=d.x,s=d.y,i=h.x,a=h.y}else return tW(e);return[{x:r,y:s},{x:i,y:a}]}var sW={},iW={},aW={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B$;function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(aW);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aW;function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(iW);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j$,n=iW;function r(s,i,a){a&&typeof a!="number"&&e.isIterateeCall(s,i,a)&&(i=a=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),a=a===void 0?s<i?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((i-s)/(a||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=s,s+=a;return l}t.range=r})(sW);var Dpe=sW.range;const oW=po(Dpe);function Qu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Y$(t){let e,n,r;t.length!==2?(e=Qu,n=(o,l)=>Qu(t(o),l),r=(o,l)=>t(o)-l):(e=t===Qu||t===Rpe?t:Ppe,n=t,r=t);function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=s(o,l,u,c-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:s,center:a,right:i}}function Ppe(){return 0}function lW(t){return t===null?NaN:+t}function*Mpe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Fpe=Y$(Qu),o1=Fpe.right;Y$(lW).center;class AM extends Map{constructor(e,n=Bpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get($M(this,e))}has(e){return super.has($M(this,e))}set(e,n){return super.set(Lpe(this,e),n)}delete(e){return super.delete(zpe(this,e))}}function $M({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Lpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function zpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Bpe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function jpe(t=Qu){if(t===Qu)return uW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function uW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Upe=Math.sqrt(50),Vpe=Math.sqrt(10),Wpe=Math.sqrt(2);function q2(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=Upe?10:i>=Vpe?5:i>=Wpe?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,s)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?q2(t,e,n*2):[o,l,u]}function gk(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,a]=r?q2(e,t,n):q2(t,e,n);if(!(i>=s))return[];const o=i-s+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(i-u)/-a;else for(let u=0;u<o;++u)l[u]=(i-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(s+u)/-a;else for(let u=0;u<o;++u)l[u]=(s+u)*a;return l}function yk(t,e,n){return e=+e,t=+t,n=+n,q2(t,e,n)[2]}function vk(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?yk(e,t,n):yk(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function IM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _M(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function cW(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?uW:jpe(s);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+d)),p=Math.min(r,Math.floor(e+(l-u)*f/l+d));cW(t,e,h,p,s)}const i=t[e];let a=n,o=r;for(Um(t,n,e),s(t[r],i)>0&&Um(t,n,r);a<o;){for(Um(t,a,o),++a,--o;s(t[a],i)<0;)++a;for(;s(t[o],i)>0;)--o}s(t[n],i)===0?Um(t,n,o):(++o,Um(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Um(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Gpe(t,e,n){if(t=Float64Array.from(Mpe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _M(t);if(e>=1)return IM(t);var r,s=(r-1)*e,i=Math.floor(s),a=IM(cW(t,i).subarray(0,i+1)),o=_M(t.subarray(i+1));return a+(o-a)*(s-i)}}function Hpe(t,e,n=lW){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),a=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return a+(o-a)*(s-i)}}function qpe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function su(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const bk=Symbol("implicit");function Z$(){var t=new AM,e=[],n=[],r=bk;function s(i){let a=t.get(i);if(a===void 0){if(r!==bk)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new AM;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Z$(e,n).unknown(r)},Wa.apply(s,arguments),s}function Q$(){var t=Z$().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,a,o=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var d=e().length,h=s<r,p=h?s:r,m=h?r:s;i=(m-p)/Math.max(1,d-l+u*2),o&&(i=Math.floor(i)),p+=(m-p-i*(d-l))*c,a=i*(1-l),o&&(p=Math.round(p),a=Math.round(a));var g=qpe(d).map(function(y){return p+i*y});return n(h?g.reverse():g)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,s]=d,r=+r,s=+s,f()):[r,s]},t.rangeRound=function(d){return[r,s]=d,r=+r,s=+s,o=!0,f()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(d){return arguments.length?(o=!!d,f()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.copy=function(){return Q$(e(),[r,s]).round(o).paddingInner(l).paddingOuter(u).align(c)},Wa.apply(f(),arguments)}function fW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fW(e())},t}function Kpe(){return fW(Q$.apply(null,arguments).paddingInner(1))}function J$(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dW(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function l1(){}var cy=.7,K2=1/cy,Dh="\\s*([+-]?\\d+)\\s*",fy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xpe=/^#([0-9a-f]{3,8})$/,Ype=new RegExp(`^rgb\\(${Dh},${Dh},${Dh}\\)$`),Zpe=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),Qpe=new RegExp(`^rgba\\(${Dh},${Dh},${Dh},${fy}\\)$`),Jpe=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${fy}\\)$`),eme=new RegExp(`^hsl\\(${fy},${Ho},${Ho}\\)$`),tme=new RegExp(`^hsla\\(${fy},${Ho},${Ho},${fy}\\)$`),OM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J$(l1,dy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:DM,formatHex:DM,formatHex8:nme,formatHsl:rme,formatRgb:RM,toString:RM});function DM(){return this.rgb().formatHex()}function nme(){return this.rgb().formatHex8()}function rme(){return hW(this).formatHsl()}function RM(){return this.rgb().formatRgb()}function dy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xpe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?PM(e):n===3?new mi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ype.exec(t))?new mi(e[1],e[2],e[3],1):(e=Zpe.exec(t))?new mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qpe.exec(t))?Lv(e[1],e[2],e[3],e[4]):(e=Jpe.exec(t))?Lv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=eme.exec(t))?LM(e[1],e[2]/100,e[3]/100,1):(e=tme.exec(t))?LM(e[1],e[2]/100,e[3]/100,e[4]):OM.hasOwnProperty(t)?PM(OM[t]):t==="transparent"?new mi(NaN,NaN,NaN,0):null}function PM(t){return new mi(t>>16&255,t>>8&255,t&255,1)}function Lv(t,e,n,r){return r<=0&&(t=e=n=NaN),new mi(t,e,n,r)}function sme(t){return t instanceof l1||(t=dy(t)),t?(t=t.rgb(),new mi(t.r,t.g,t.b,t.opacity)):new mi}function xk(t,e,n,r){return arguments.length===1?sme(t):new mi(t,e,n,r??1)}function mi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}J$(mi,xk,dW(l1,{brighter(t){return t=t==null?K2:Math.pow(K2,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cy:Math.pow(cy,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mi(Bf(this.r),Bf(this.g),Bf(this.b),X2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MM,formatHex:MM,formatHex8:ime,formatRgb:FM,toString:FM}));function MM(){return`#${wf(this.r)}${wf(this.g)}${wf(this.b)}`}function ime(){return`#${wf(this.r)}${wf(this.g)}${wf(this.b)}${wf((isNaN(this.opacity)?1:this.opacity)*255)}`}function FM(){const t=X2(this.opacity);return`${t===1?"rgb(":"rgba("}${Bf(this.r)}, ${Bf(this.g)}, ${Bf(this.b)}${t===1?")":`, ${t})`}`}function X2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Bf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wf(t){return t=Bf(t),(t<16?"0":"")+t.toString(16)}function LM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new no(t,e,n,r)}function hW(t){if(t instanceof no)return new no(t.h,t.s,t.l,t.opacity);if(t instanceof l1||(t=dy(t)),!t)return new no;if(t instanceof no)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,o=i-s,l=(i+s)/2;return o?(e===i?a=(n-r)/o+(n<r)*6:n===i?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?i+s:2-i-s,a*=60):o=l>0&&l<1?0:a,new no(a,o,l,t.opacity)}function ame(t,e,n,r){return arguments.length===1?hW(t):new no(t,e,n,r??1)}function no(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}J$(no,ame,dW(l1,{brighter(t){return t=t==null?K2:Math.pow(K2,t),new no(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cy:Math.pow(cy,t),new no(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new mi(PT(t>=240?t-240:t+120,s,r),PT(t,s,r),PT(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new no(zM(this.h),zv(this.s),zv(this.l),X2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=X2(this.opacity);return`${t===1?"hsl(":"hsla("}${zM(this.h)}, ${zv(this.s)*100}%, ${zv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zM(t){return t=(t||0)%360,t<0?t+360:t}function zv(t){return Math.max(0,Math.min(1,t||0))}function PT(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const eI=t=>()=>t;function ome(t,e){return function(n){return t+n*e}}function lme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ume(t){return(t=+t)==1?pW:function(e,n){return n-e?lme(e,n,t):eI(isNaN(e)?n:e)}}function pW(t,e){var n=e-t;return n?ome(t,n):eI(isNaN(t)?e:t)}const BM=function t(e){var n=ume(e);function r(s,i){var a=n((s=xk(s)).r,(i=xk(i)).r),o=n(s.g,i.g),l=n(s.b,i.b),u=pW(s.opacity,i.opacity);return function(c){return s.r=a(c),s.g=o(c),s.b=l(c),s.opacity=u(c),s+""}}return r.gamma=t,r}(1);function cme(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function fme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)s[a]=Bp(t[a],e[a]);for(;a<n;++a)i[a]=e[a];return function(o){for(a=0;a<r;++a)i[a]=s[a](o);return i}}function hme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Y2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pme(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Bp(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var wk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MT=new RegExp(wk.source,"g");function mme(t){return function(){return t}}function gme(t){return function(e){return t(e)+""}}function yme(t,e){var n=wk.lastIndex=MT.lastIndex=0,r,s,i,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=wk.exec(t))&&(s=MT.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,l.push({i:a,x:Y2(r,s)})),n=MT.lastIndex;return n<e.length&&(i=e.slice(n),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?gme(l[0].x):mme(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function Bp(t,e){var n=typeof e,r;return e==null||n==="boolean"?eI(e):(n==="number"?Y2:n==="string"?(r=dy(e))?(e=r,BM):yme:e instanceof dy?BM:e instanceof Date?hme:fme(e)?cme:Array.isArray(e)?dme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pme:Y2)(t,e)}function tI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function vme(t,e){e===void 0&&(e=t,t=Bp);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[o](a-o)}}function bme(t){return function(){return t}}function Z2(t){return+t}var jM=[0,1];function Xs(t){return t}function Sk(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bme(isNaN(e)?NaN:.5)}function xme(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function wme(t,e,n){var r=t[0],s=t[1],i=e[0],a=e[1];return s<r?(r=Sk(s,r),i=n(a,i)):(r=Sk(r,s),i=n(i,a)),function(o){return i(r(o))}}function Sme(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=Sk(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(o){var l=o1(t,o,1,r)-1;return i[l](s[l](o))}}function u1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function a3(){var t=jM,e=jM,n=Bp,r,s,i,a=Xs,o,l,u;function c(){var d=Math.min(t.length,e.length);return a!==Xs&&(a=xme(t[0],t[d-1])),o=d>2?Sme:wme,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?i:(l||(l=o(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(s((u||(u=o(e,t.map(r),Y2)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,Z2),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=tI,c()},f.clamp=function(d){return arguments.length?(a=d?!0:Xs,c()):a!==Xs},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,h){return r=d,s=h,c()}}function nI(){return a3()(Xs,Xs)}function Tme(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Q2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function lp(t){return t=Q2(Math.abs(t)),t?t[1]:NaN}function Cme(t,e){return function(n,r){for(var s=n.length,i=[],a=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(n.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(e)}}function Eme(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hy(t){if(!(e=kme.exec(t)))throw new Error("invalid format: "+t);var e;return new rI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hy.prototype=rI.prototype;function rI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}rI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Nme(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var mW;function Ame(t,e){var n=Q2(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(mW=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Q2(t,Math.max(0,e+i-1))[0]}function UM(t,e){var n=Q2(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const VM={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Tme,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>UM(t*100,e),r:UM,s:Ame,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function WM(t){return t}var GM=Array.prototype.map,HM=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $me(t){var e=t.grouping===void 0||t.thousands===void 0?WM:Cme(GM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?WM:Eme(GM.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=hy(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):VM[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=m==="$"?r:/[%p]/.test(w)?a:"",A=VM[w],O=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(F){var z=C,j=E,H,J,U;if(w==="c")j=A(F)+j,F="";else{F=+F;var Y=F<0||1/F<0;if(F=isNaN(F)?l:A(Math.abs(F),b),x&&(F=Nme(F)),Y&&+F==0&&p!=="+"&&(Y=!1),z=(Y?p==="("?p:o:p==="-"||p==="("?"":p)+z,j=(w==="s"?HM[8+mW/3]:"")+j+(Y&&p==="("?")":""),O){for(H=-1,J=F.length;++H<J;)if(U=F.charCodeAt(H),48>U||U>57){j=(U===46?s+F.slice(H+1):F.slice(H))+j,F=F.slice(0,H);break}}}v&&!g&&(F=e(F,1/0));var Q=z.length+F.length+j.length,se=Q<y?new Array(y-Q+1).join(d):"";switch(v&&g&&(F=e(se+F,se.length?y-j.length:1/0),se=""),h){case"<":F=z+F+j+se;break;case"=":F=z+se+F+j;break;case"^":F=se.slice(0,Q=se.length>>1)+z+F+j+se.slice(Q);break;default:F=se+z+F+j;break}return i(F)}return R.toString=function(){return f+""},R}function c(f,d){var h=u((f=hy(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(lp(d)/3)))*3,m=Math.pow(10,-p),g=HM[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var Bv,sI,gW;Ime({thousands:",",grouping:[3],currency:["$",""]});function Ime(t){return Bv=$me(t),sI=Bv.format,gW=Bv.formatPrefix,Bv}function _me(t){return Math.max(0,-lp(Math.abs(t)))}function Ome(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lp(e)/3)))*3-lp(Math.abs(t)))}function Dme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,lp(e)-lp(t))+1}function yW(t,e,n,r){var s=vk(t,e,n),i;switch(r=hy(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Ome(s,a))&&(r.precision=i),gW(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Dme(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=_me(s))&&(r.precision=i-(r.type==="%")*2);break}}return sI(r)}function _c(t){var e=t.domain;return t.ticks=function(n){var r=e();return gk(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return yW(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,a=r[s],o=r[i],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=s,s=i,i=u);c-- >0;){if(u=yk(a,o,n),u===l)return r[s]=a,r[i]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function vW(){var t=nI();return t.copy=function(){return u1(t,vW())},Wa.apply(t,arguments),_c(t)}function bW(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Z2),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return bW(t).unknown(e)},t=arguments.length?Array.from(t,Z2):[0,1],_c(n)}function xW(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],a;return i<s&&(a=n,n=r,r=a,a=s,s=i,i=a),t[n]=e.floor(s),t[r]=e.ceil(i),t}function qM(t){return Math.log(t)}function KM(t){return Math.exp(t)}function Rme(t){return-Math.log(-t)}function Pme(t){return-Math.exp(-t)}function Mme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fme(t){return t===10?Mme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Lme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function XM(t){return(e,n)=>-t(-e,n)}function iI(t){const e=t(qM,KM),n=e.domain;let r=10,s,i;function a(){return s=Lme(r),i=Fme(r),n()[0]<0?(s=XM(s),i=XM(i),t(Rme,Pme)):t(qM,KM),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=s(u),h=s(c),p,m;const g=o==null?10:+o;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/i(-d):p*i(d),!(m<u)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/i(-d):p*i(d),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=gk(u,c,g))}else y=gk(d,h,Math.min(h-d,g)).map(i);return f?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=hy(l)).precision==null&&(l.trim=!0),l=sI(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return c=>{let f=c/i(Math.round(s(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(xW(n(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),e}function wW(){const t=iI(a3()).domain([1,10]);return t.copy=()=>u1(t,wW()).base(t.base()),Wa.apply(t,arguments),t}function YM(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ZM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function aI(t){var e=1,n=t(YM(e),ZM(e));return n.constant=function(r){return arguments.length?t(YM(e=+r),ZM(e)):e},_c(n)}function SW(){var t=aI(a3());return t.copy=function(){return u1(t,SW()).constant(t.constant())},Wa.apply(t,arguments)}function QM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Bme(t){return t<0?-t*t:t*t}function oI(t){var e=t(Xs,Xs),n=1;function r(){return n===1?t(Xs,Xs):n===.5?t(zme,Bme):t(QM(n),QM(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},_c(e)}function lI(){var t=oI(a3());return t.copy=function(){return u1(t,lI()).exponent(t.exponent())},Wa.apply(t,arguments),t}function jme(){return lI.apply(null,arguments).exponent(.5)}function JM(t){return Math.sign(t)*t*t}function Ume(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function TW(){var t=nI(),e=[0,1],n=!1,r;function s(i){var a=Ume(t(i));return isNaN(a)?r:n?Math.round(a):a}return s.invert=function(i){return t.invert(JM(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,Z2)).map(JM)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return TW(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Wa.apply(s,arguments),_c(s)}function CW(){var t=[],e=[],n=[],r;function s(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Hpe(t,a/o);return i}function i(a){return a==null||isNaN(a=+a)?r:e[o1(n,a)]}return i.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Qu),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return CW().domain(t).range(e).unknown(r)},Wa.apply(i,arguments)}function EW(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function a(l){return l!=null&&l<=l?s[o1(r,l,0,n)]:i}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,o()):s.slice()},a.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(i=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return EW().domain([t,e]).range(s).unknown(i)},Wa.apply(_c(a),arguments)}function kW(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[o1(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return kW().domain(t).range(e).unknown(n)},Wa.apply(s,arguments)}const FT=new Date,LT=new Date;function Vr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),o=s.ceil(i);return i-a<o-i?a:o},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,o)=>{const l=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<a)||!(o>0))return l;let u;do l.push(u=new Date(+i)),e(i,o),t(i);while(u<i&&i<a);return l},s.filter=i=>Vr(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!i(a););else for(;--o>=0;)for(;e(a,1),!i(a););}),n&&(s.count=(i,a)=>(FT.setTime(+i),LT.setTime(+a),t(FT),t(LT),Math.floor(n(FT,LT))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?a=>r(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const J2=Vr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);J2.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):J2);J2.range;const Il=1e3,ka=Il*60,_l=ka*60,Hl=_l*24,uI=Hl*7,eF=Hl*30,zT=Hl*365,Sf=Vr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Il)},(t,e)=>(e-t)/Il,t=>t.getUTCSeconds());Sf.range;const cI=Vr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Il)},(t,e)=>{t.setTime(+t+e*ka)},(t,e)=>(e-t)/ka,t=>t.getMinutes());cI.range;const fI=Vr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ka)},(t,e)=>(e-t)/ka,t=>t.getUTCMinutes());fI.range;const dI=Vr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Il-t.getMinutes()*ka)},(t,e)=>{t.setTime(+t+e*_l)},(t,e)=>(e-t)/_l,t=>t.getHours());dI.range;const hI=Vr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*_l)},(t,e)=>(e-t)/_l,t=>t.getUTCHours());hI.range;const c1=Vr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ka)/Hl,t=>t.getDate()-1);c1.range;const o3=Vr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hl,t=>t.getUTCDate()-1);o3.range;const NW=Vr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hl,t=>Math.floor(t/Hl));NW.range;function Td(t){return Vr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ka)/uI)}const l3=Td(0),ex=Td(1),Vme=Td(2),Wme=Td(3),up=Td(4),Gme=Td(5),Hme=Td(6);l3.range;ex.range;Vme.range;Wme.range;up.range;Gme.range;Hme.range;function Cd(t){return Vr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/uI)}const u3=Cd(0),tx=Cd(1),qme=Cd(2),Kme=Cd(3),cp=Cd(4),Xme=Cd(5),Yme=Cd(6);u3.range;tx.range;qme.range;Kme.range;cp.range;Xme.range;Yme.range;const pI=Vr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());pI.range;const mI=Vr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());mI.range;const ql=Vr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ql.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ql.range;const Kl=Vr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Kl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Kl.range;function AW(t,e,n,r,s,i){const a=[[Sf,1,Il],[Sf,5,5*Il],[Sf,15,15*Il],[Sf,30,30*Il],[i,1,ka],[i,5,5*ka],[i,15,15*ka],[i,30,30*ka],[s,1,_l],[s,3,3*_l],[s,6,6*_l],[s,12,12*_l],[r,1,Hl],[r,2,2*Hl],[n,1,uI],[e,1,eF],[e,3,3*eF],[t,1,zT]];function o(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=Y$(([,,g])=>g).right(a,d);if(h===a.length)return t.every(vk(u/zT,c/zT,f));if(h===0)return J2.every(Math.max(vk(u,c,f),1));const[p,m]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(m)}return[o,l]}const[Zme,Qme]=AW(Kl,mI,u3,NW,hI,fI),[Jme,ege]=AW(ql,pI,l3,c1,dI,cI);function BT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function tge(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,u=Wm(s),c=Gm(s),f=Wm(i),d=Gm(i),h=Wm(a),p=Gm(a),m=Wm(o),g=Gm(o),y=Wm(l),v=Gm(l),b={a:Y,A:Q,b:se,B:he,c:null,d:aF,e:aF,f:Cge,g:Rge,G:Mge,H:wge,I:Sge,j:Tge,L:$W,m:Ege,M:kge,p:be,q:ue,Q:uF,s:cF,S:Nge,u:Age,U:$ge,V:Ige,w:_ge,W:Oge,x:null,X:null,y:Dge,Y:Pge,Z:Fge,"%":lF},x={a:Ne,A:_e,b:Ee,B:Me,c:null,d:oF,e:oF,f:jge,g:Zge,G:Jge,H:Lge,I:zge,j:Bge,L:_W,m:Uge,M:Vge,p:He,q:Ze,Q:uF,s:cF,S:Wge,u:Gge,U:Hge,V:qge,w:Kge,W:Xge,x:null,X:null,y:Yge,Y:Qge,Z:eye,"%":lF},w={a:R,A:F,b:z,B:j,c:H,d:sF,e:sF,f:yge,g:rF,G:nF,H:iF,I:iF,j:hge,L:gge,m:dge,M:pge,p:O,q:fge,Q:bge,s:xge,S:mge,u:age,U:oge,V:lge,w:ige,W:uge,x:J,X:U,y:rF,Y:nF,Z:cge,"%":vge};b.x=C(n,b),b.X=C(r,b),b.c=C(e,b),x.x=C(n,x),x.X=C(r,x),x.c=C(e,x);function C(ye,Re){return function(Oe){var me=[],ft=-1,st=0,ot=ye.length,lt,Ct,St;for(Oe instanceof Date||(Oe=new Date(+Oe));++ft<ot;)ye.charCodeAt(ft)===37&&(me.push(ye.slice(st,ft)),(Ct=tF[lt=ye.charAt(++ft)])!=null?lt=ye.charAt(++ft):Ct=lt==="e"?" ":"0",(St=Re[lt])&&(lt=St(Oe,Ct)),me.push(lt),st=ft+1);return me.push(ye.slice(st,ft)),me.join("")}}function E(ye,Re){return function(Oe){var me=Vm(1900,void 0,1),ft=A(me,ye,Oe+="",0),st,ot;if(ft!=Oe.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Re&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(st=jT(Vm(me.y,0,1)),ot=st.getUTCDay(),st=ot>4||ot===0?tx.ceil(st):tx(st),st=o3.offset(st,(me.V-1)*7),me.y=st.getUTCFullYear(),me.m=st.getUTCMonth(),me.d=st.getUTCDate()+(me.w+6)%7):(st=BT(Vm(me.y,0,1)),ot=st.getDay(),st=ot>4||ot===0?ex.ceil(st):ex(st),st=c1.offset(st,(me.V-1)*7),me.y=st.getFullYear(),me.m=st.getMonth(),me.d=st.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),ot="Z"in me?jT(Vm(me.y,0,1)).getUTCDay():BT(Vm(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(ot+5)%7:me.w+me.U*7-(ot+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,jT(me)):BT(me)}}function A(ye,Re,Oe,me){for(var ft=0,st=Re.length,ot=Oe.length,lt,Ct;ft<st;){if(me>=ot)return-1;if(lt=Re.charCodeAt(ft++),lt===37){if(lt=Re.charAt(ft++),Ct=w[lt in tF?Re.charAt(ft++):lt],!Ct||(me=Ct(ye,Oe,me))<0)return-1}else if(lt!=Oe.charCodeAt(me++))return-1}return me}function O(ye,Re,Oe){var me=u.exec(Re.slice(Oe));return me?(ye.p=c.get(me[0].toLowerCase()),Oe+me[0].length):-1}function R(ye,Re,Oe){var me=h.exec(Re.slice(Oe));return me?(ye.w=p.get(me[0].toLowerCase()),Oe+me[0].length):-1}function F(ye,Re,Oe){var me=f.exec(Re.slice(Oe));return me?(ye.w=d.get(me[0].toLowerCase()),Oe+me[0].length):-1}function z(ye,Re,Oe){var me=y.exec(Re.slice(Oe));return me?(ye.m=v.get(me[0].toLowerCase()),Oe+me[0].length):-1}function j(ye,Re,Oe){var me=m.exec(Re.slice(Oe));return me?(ye.m=g.get(me[0].toLowerCase()),Oe+me[0].length):-1}function H(ye,Re,Oe){return A(ye,e,Re,Oe)}function J(ye,Re,Oe){return A(ye,n,Re,Oe)}function U(ye,Re,Oe){return A(ye,r,Re,Oe)}function Y(ye){return a[ye.getDay()]}function Q(ye){return i[ye.getDay()]}function se(ye){return l[ye.getMonth()]}function he(ye){return o[ye.getMonth()]}function be(ye){return s[+(ye.getHours()>=12)]}function ue(ye){return 1+~~(ye.getMonth()/3)}function Ne(ye){return a[ye.getUTCDay()]}function _e(ye){return i[ye.getUTCDay()]}function Ee(ye){return l[ye.getUTCMonth()]}function Me(ye){return o[ye.getUTCMonth()]}function He(ye){return s[+(ye.getUTCHours()>=12)]}function Ze(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Re=C(ye+="",b);return Re.toString=function(){return ye},Re},parse:function(ye){var Re=E(ye+="",!1);return Re.toString=function(){return ye},Re},utcFormat:function(ye){var Re=C(ye+="",x);return Re.toString=function(){return ye},Re},utcParse:function(ye){var Re=E(ye+="",!0);return Re.toString=function(){return ye},Re}}}var tF={"-":"",_:" ",0:"0"},os=/^\s*\d+/,nge=/^%/,rge=/[\\^$*+?|[\]().{}]/g;function Yt(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function sge(t){return t.replace(rge,"\\$&")}function Wm(t){return new RegExp("^(?:"+t.map(sge).join("|")+")","i")}function Gm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ige(t,e,n){var r=os.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function age(t,e,n){var r=os.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function oge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function uge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function nF(t,e,n){var r=os.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function rF(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function cge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fge(t,e,n){var r=os.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function dge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sF(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function hge(t,e,n){var r=os.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function iF(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function mge(t,e,n){var r=os.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gge(t,e,n){var r=os.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yge(t,e,n){var r=os.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vge(t,e,n){var r=nge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bge(t,e,n){var r=os.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xge(t,e,n){var r=os.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function aF(t,e){return Yt(t.getDate(),e,2)}function wge(t,e){return Yt(t.getHours(),e,2)}function Sge(t,e){return Yt(t.getHours()%12||12,e,2)}function Tge(t,e){return Yt(1+c1.count(ql(t),t),e,3)}function $W(t,e){return Yt(t.getMilliseconds(),e,3)}function Cge(t,e){return $W(t,e)+"000"}function Ege(t,e){return Yt(t.getMonth()+1,e,2)}function kge(t,e){return Yt(t.getMinutes(),e,2)}function Nge(t,e){return Yt(t.getSeconds(),e,2)}function Age(t){var e=t.getDay();return e===0?7:e}function $ge(t,e){return Yt(l3.count(ql(t)-1,t),e,2)}function IW(t){var e=t.getDay();return e>=4||e===0?up(t):up.ceil(t)}function Ige(t,e){return t=IW(t),Yt(up.count(ql(t),t)+(ql(t).getDay()===4),e,2)}function _ge(t){return t.getDay()}function Oge(t,e){return Yt(ex.count(ql(t)-1,t),e,2)}function Dge(t,e){return Yt(t.getFullYear()%100,e,2)}function Rge(t,e){return t=IW(t),Yt(t.getFullYear()%100,e,2)}function Pge(t,e){return Yt(t.getFullYear()%1e4,e,4)}function Mge(t,e){var n=t.getDay();return t=n>=4||n===0?up(t):up.ceil(t),Yt(t.getFullYear()%1e4,e,4)}function Fge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yt(e/60|0,"0",2)+Yt(e%60,"0",2)}function oF(t,e){return Yt(t.getUTCDate(),e,2)}function Lge(t,e){return Yt(t.getUTCHours(),e,2)}function zge(t,e){return Yt(t.getUTCHours()%12||12,e,2)}function Bge(t,e){return Yt(1+o3.count(Kl(t),t),e,3)}function _W(t,e){return Yt(t.getUTCMilliseconds(),e,3)}function jge(t,e){return _W(t,e)+"000"}function Uge(t,e){return Yt(t.getUTCMonth()+1,e,2)}function Vge(t,e){return Yt(t.getUTCMinutes(),e,2)}function Wge(t,e){return Yt(t.getUTCSeconds(),e,2)}function Gge(t){var e=t.getUTCDay();return e===0?7:e}function Hge(t,e){return Yt(u3.count(Kl(t)-1,t),e,2)}function OW(t){var e=t.getUTCDay();return e>=4||e===0?cp(t):cp.ceil(t)}function qge(t,e){return t=OW(t),Yt(cp.count(Kl(t),t)+(Kl(t).getUTCDay()===4),e,2)}function Kge(t){return t.getUTCDay()}function Xge(t,e){return Yt(tx.count(Kl(t)-1,t),e,2)}function Yge(t,e){return Yt(t.getUTCFullYear()%100,e,2)}function Zge(t,e){return t=OW(t),Yt(t.getUTCFullYear()%100,e,2)}function Qge(t,e){return Yt(t.getUTCFullYear()%1e4,e,4)}function Jge(t,e){var n=t.getUTCDay();return t=n>=4||n===0?cp(t):cp.ceil(t),Yt(t.getUTCFullYear()%1e4,e,4)}function eye(){return"+0000"}function lF(){return"%"}function uF(t){return+t}function cF(t){return Math.floor(+t/1e3)}var Xd,DW,RW;tye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tye(t){return Xd=tge(t),DW=Xd.format,Xd.parse,RW=Xd.utcFormat,Xd.utcParse,Xd}function nye(t){return new Date(t)}function rye(t){return t instanceof Date?+t:+new Date(+t)}function gI(t,e,n,r,s,i,a,o,l,u){var c=nI(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(C){return(l(C)<C?h:o(C)<C?p:a(C)<C?m:i(C)<C?g:r(C)<C?s(C)<C?y:v:n(C)<C?b:x)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,rye)):d().map(nye)},c.ticks=function(C){var E=d();return t(E[0],E[E.length-1],C??10)},c.tickFormat=function(C,E){return E==null?w:u(E)},c.nice=function(C){var E=d();return(!C||typeof C.range!="function")&&(C=e(E[0],E[E.length-1],C??10)),C?d(xW(E,C)):c},c.copy=function(){return u1(c,gI(t,e,n,r,s,i,a,o,l,u))},c}function sye(){return Wa.apply(gI(Jme,ege,ql,pI,l3,c1,dI,cI,Sf,DW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iye(){return Wa.apply(gI(Zme,Qme,Kl,mI,u3,o3,hI,fI,Sf,RW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function c3(){var t=0,e=1,n,r,s,i,a=Xs,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(s===0?.5:(f=(i(f)-n)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,a=f(h,p),u):[a(0),a(1)]}}return u.range=c(Bp),u.rangeRound=c(tI),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return i=f,n=f(t),r=f(e),s=n===r?0:1/(r-n),u}}function Oc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function PW(){var t=_c(c3()(Xs));return t.copy=function(){return Oc(t,PW())},su.apply(t,arguments)}function MW(){var t=iI(c3()).domain([1,10]);return t.copy=function(){return Oc(t,MW()).base(t.base())},su.apply(t,arguments)}function FW(){var t=aI(c3());return t.copy=function(){return Oc(t,FW()).constant(t.constant())},su.apply(t,arguments)}function yI(){var t=oI(c3());return t.copy=function(){return Oc(t,yI()).exponent(t.exponent())},su.apply(t,arguments)}function aye(){return yI.apply(null,arguments).exponent(.5)}function LW(){var t=[],e=Xs;function n(r){if(r!=null&&!isNaN(r=+r))return e((o1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Qu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>Gpe(t,i/r))},n.copy=function(){return LW(e).domain(t)},su.apply(n,arguments)}function f3(){var t=0,e=.5,n=1,r=1,s,i,a,o,l,u=Xs,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-i)*(r*m<r*i?o:l),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,s=c(t=+t),i=c(e=+e),a=c(n=+n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=vme(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Bp),h.rangeRound=p(tI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,s=m(t),i=m(e),a=m(n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,h}}function zW(){var t=_c(f3()(Xs));return t.copy=function(){return Oc(t,zW())},su.apply(t,arguments)}function BW(){var t=iI(f3()).domain([.1,1,10]);return t.copy=function(){return Oc(t,BW()).base(t.base())},su.apply(t,arguments)}function jW(){var t=aI(f3());return t.copy=function(){return Oc(t,jW()).constant(t.constant())},su.apply(t,arguments)}function vI(){var t=oI(f3());return t.copy=function(){return Oc(t,vI()).exponent(t.exponent())},su.apply(t,arguments)}function oye(){return vI.apply(null,arguments).exponent(.5)}const fg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Q$,scaleDiverging:zW,scaleDivergingLog:BW,scaleDivergingPow:vI,scaleDivergingSqrt:oye,scaleDivergingSymlog:jW,scaleIdentity:bW,scaleImplicit:bk,scaleLinear:vW,scaleLog:wW,scaleOrdinal:Z$,scalePoint:Kpe,scalePow:lI,scaleQuantile:CW,scaleQuantize:EW,scaleRadial:TW,scaleSequential:PW,scaleSequentialLog:MW,scaleSequentialPow:yI,scaleSequentialQuantile:LW,scaleSequentialSqrt:aye,scaleSequentialSymlog:FW,scaleSqrt:jme,scaleSymlog:SW,scaleThreshold:kW,scaleTime:sye,scaleUtc:iye,tickFormat:yW},Symbol.toStringTag,{value:"Module"}));var Dc=t=>t.chartData,bI=de([Dc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),d3=(t,e,n,r)=>r?bI(t):Dc(t);function fp(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(ta(e)&&ta(n))return!0}return!1}function fF(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function lye(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,i;if(ta(n))s=n;else if(typeof n=="function")return;if(ta(r))i=r;else if(typeof r=="function")return;var a=[s,i];if(fp(a))return a}}function uye(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(fp(r))return fF(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,a,o;if(s==="auto")e!=null&&(a=Math.min(...e));else if(ct(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[0]))}catch{}else if(typeof s=="string"&&oM.test(s)){var l=oM.exec(s);if(l==null||e==null)a=void 0;else{var u=+l[1];a=e[0]-u}}else a=e==null?void 0:e[0];if(i==="auto")e!=null&&(o=Math.max(...e));else if(ct(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[1]))}catch{}else if(typeof i=="string"&&lM.test(i)){var c=lM.exec(i);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[1]+f}}else o=e==null?void 0:e[1];var d=[a,o];if(fp(d))return e==null?d:fF(d,e,n)}}}var jp=1e9,cye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wI,Un=!0,za="[DecimalError] ",jf=za+"Invalid argument: ",xI=za+"Exponent out of range: ",Up=Math.floor,uf=Math.pow,fye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wi,Yr=1e7,_n=7,UW=9007199254740991,nx=Up(UW/_n),Qe={};Qe.absoluteValue=Qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Qe.comparedTo=Qe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Qe.decimalPlaces=Qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*_n;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Qe.dividedBy=Qe.div=function(t){return Fl(this,new this.constructor(t))};Qe.dividedToIntegerBy=Qe.idiv=function(t){var e=this,n=e.constructor;return vn(Fl(e,new n(t),0,1),n.precision)};Qe.equals=Qe.eq=function(t){return!this.cmp(t)};Qe.exponent=function(){return $r(this)};Qe.greaterThan=Qe.gt=function(t){return this.cmp(t)>0};Qe.greaterThanOrEqualTo=Qe.gte=function(t){return this.cmp(t)>=0};Qe.isInteger=Qe.isint=function(){return this.e>this.d.length-2};Qe.isNegative=Qe.isneg=function(){return this.s<0};Qe.isPositive=Qe.ispos=function(){return this.s>0};Qe.isZero=function(){return this.s===0};Qe.lessThan=Qe.lt=function(t){return this.cmp(t)<0};Qe.lessThanOrEqualTo=Qe.lte=function(t){return this.cmp(t)<1};Qe.logarithm=Qe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Wi))throw Error(za+"NaN");if(n.s<1)throw Error(za+(n.s?"NaN":"-Infinity"));return n.eq(Wi)?new r(0):(Un=!1,e=Fl(py(n,i),py(t,i),i),Un=!0,vn(e,s))};Qe.minus=Qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?GW(e,t):VW(e,(t.s=-t.s,t))};Qe.modulo=Qe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(za+"NaN");return n.s?(Un=!1,e=Fl(n,t,0,1).times(t),Un=!0,n.minus(e)):vn(new r(n),s)};Qe.naturalExponential=Qe.exp=function(){return WW(this)};Qe.naturalLogarithm=Qe.ln=function(){return py(this)};Qe.negated=Qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Qe.plus=Qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?VW(e,t):GW(e,(t.s=-t.s,t))};Qe.precision=Qe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jf+t);if(e=$r(s)+1,r=s.d.length-1,n=r*_n+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Qe.squareRoot=Qe.sqrt=function(){var t,e,n,r,s,i,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(za+"NaN")}for(t=$r(o),Un=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=Bo(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Up((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=a=n+3;;)if(i=r,r=i.plus(Fl(o,i,a+2)).times(.5),Bo(i.d).slice(0,a)===(e=Bo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(vn(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(e!="9999")break;a+=4}return Un=!0,vn(r,n)};Qe.times=Qe.mul=function(t){var e,n,r,s,i,a,o,l,u,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,l=d.length,u=h.length,l<u&&(i=d,d=h,h=i,a=l,l=u,u=a),i=[],a=l+u,r=a;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,s=l+r;s>r;)o=i[s]+h[r]*d[s-r-1]+e,i[s--]=o%Yr|0,e=o/Yr|0;i[s]=(i[s]+e)%Yr|0}for(;!i[--a];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Un?vn(t,f.precision):t};Qe.toDecimalPlaces=Qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(el(t,0,jp),e===void 0?e=r.rounding:el(e,0,8),vn(n,t+$r(n)+1,e))};Qe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Jf(r,!0):(el(t,0,jp),e===void 0?e=s.rounding:el(e,0,8),r=vn(new s(r),t+1,e),n=Jf(r,!0,t+1)),n};Qe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?Jf(s):(el(t,0,jp),e===void 0?e=i.rounding:el(e,0,8),r=vn(new i(s),t+$r(s)+1,e),n=Jf(r.abs(),!1,t+$r(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Qe.toInteger=Qe.toint=function(){var t=this,e=t.constructor;return vn(new e(t),$r(t)+1,e.rounding)};Qe.toNumber=function(){return+this};Qe.toPower=Qe.pow=function(t){var e,n,r,s,i,a,o=this,l=o.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Wi);if(o=new l(o),!o.s){if(t.s<1)throw Error(za+"Infinity");return o}if(o.eq(Wi))return o;if(r=l.precision,t.eq(Wi))return vn(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,i=o.s,a){if((n=c<0?-c:c)<=UW){for(s=new l(Wi),e=Math.ceil(r/_n+4),Un=!1;n%2&&(s=s.times(o),hF(s.d,e)),n=Up(n/2),n!==0;)o=o.times(o),hF(o.d,e);return Un=!0,t.s<0?new l(Wi).div(s):vn(s,r)}}else if(i<0)throw Error(za+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Un=!1,s=t.times(py(o,r+u)),Un=!0,s=WW(s),s.s=i,s};Qe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=$r(s),r=Jf(s,n<=i.toExpNeg||n>=i.toExpPos)):(el(t,1,jp),e===void 0?e=i.rounding:el(e,0,8),s=vn(new i(s),t,e),n=$r(s),r=Jf(s,t<=n||n<=i.toExpNeg,t)),r};Qe.toSignificantDigits=Qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(el(t,1,jp),e===void 0?e=r.rounding:el(e,0,8)),vn(new r(n),t,e)};Qe.toString=Qe.valueOf=Qe.val=Qe.toJSON=Qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=$r(t),n=t.constructor;return Jf(t,e<=n.toExpNeg||e>=n.toExpPos)};function VW(t,e){var n,r,s,i,a,o,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Un?vn(e,f):e;if(l=t.d,u=e.d,a=t.e,s=e.e,l=l.slice(),i=a-s,i){for(i<0?(r=l,i=-i,o=u.length):(r=u,s=a,o=l.length),a=Math.ceil(f/_n),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=l.length,i=u.length,o-i<0&&(i=o,r=u,u=l,l=r),n=0;i;)n=(l[--i]=l[i]+u[i]+n)/Yr|0,l[i]%=Yr;for(n&&(l.unshift(n),++s),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=s,Un?vn(e,f):e}function el(t,e,n){if(t!==~~t||t<e||t>n)throw Error(jf+t)}function Bo(t){var e,n,r,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)r=t[e]+"",n=_n-r.length,n&&(i+=Eu(n)),i+=r;a=t[e],r=a+"",n=_n-r.length,n&&(i+=Eu(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var Fl=function(){function t(r,s){var i,a=0,o=r.length;for(r=r.slice();o--;)i=r[o]*s+a,r[o]=i%Yr|0,a=i/Yr|0;return a&&r.unshift(a),r}function e(r,s,i,a){var o,l;if(i!=a)l=i>a?1:-1;else for(o=l=0;o<i;o++)if(r[o]!=s[o]){l=r[o]>s[o]?1:-1;break}return l}function n(r,s,i){for(var a=0;i--;)r[i]-=a,a=r[i]<s[i]?1:0,r[i]=a*Yr+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,a){var o,l,u,c,f,d,h,p,m,g,y,v,b,x,w,C,E,A,O=r.constructor,R=r.s==s.s?1:-1,F=r.d,z=s.d;if(!r.s)return new O(r);if(!s.s)throw Error(za+"Division by zero");for(l=r.e-s.e,E=z.length,w=F.length,h=new O(R),p=h.d=[],u=0;z[u]==(F[u]||0);)++u;if(z[u]>(F[u]||0)&&--l,i==null?v=i=O.precision:a?v=i+($r(r)-$r(s))+1:v=i,v<0)return new O(0);if(v=v/_n+2|0,u=0,E==1)for(c=0,z=z[0],v++;(u<w||c)&&v--;u++)b=c*Yr+(F[u]||0),p[u]=b/z|0,c=b%z|0;else{for(c=Yr/(z[0]+1)|0,c>1&&(z=t(z,c),F=t(F,c),E=z.length,w=F.length),x=E,m=F.slice(0,E),g=m.length;g<E;)m[g++]=0;A=z.slice(),A.unshift(0),C=z[0],z[1]>=Yr/2&&++C;do c=0,o=e(z,m,E,g),o<0?(y=m[0],E!=g&&(y=y*Yr+(m[1]||0)),c=y/C|0,c>1?(c>=Yr&&(c=Yr-1),f=t(z,c),d=f.length,g=m.length,o=e(f,m,d,g),o==1&&(c--,n(f,E<d?A:z,d))):(c==0&&(o=c=1),f=z.slice()),d=f.length,d<g&&f.unshift(0),n(m,f,g),o==-1&&(g=m.length,o=e(z,m,E,g),o<1&&(c++,n(m,E<g?A:z,g))),g=m.length):o===0&&(c++,m=[0]),p[u++]=c,o&&m[0]?m[g++]=F[x]||0:(m=[F[x]],g=1);while((x++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,vn(h,a?i+$r(h)+1:i)}}();function WW(t,e){var n,r,s,i,a,o,l=0,u=0,c=t.constructor,f=c.precision;if($r(t)>16)throw Error(xI+$r(t));if(!t.s)return new c(Wi);for(Un=!1,o=f,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(uf(2,u))/Math.LN10*2+5|0,o+=r,n=s=i=new c(Wi),c.precision=o;;){if(s=vn(s.times(t),o),n=n.times(++l),a=i.plus(Fl(s,n,o)),Bo(a.d).slice(0,o)===Bo(i.d).slice(0,o)){for(;u--;)i=vn(i.times(i),o);return c.precision=f,e==null?(Un=!0,vn(i,f)):i}i=a}}function $r(t){for(var e=t.e*_n,n=t.d[0];n>=10;n/=10)e++;return e}function UT(t,e,n){if(e>t.LN10.sd())throw Un=!0,n&&(t.precision=n),Error(za+"LN10 precision limit exceeded");return vn(new t(t.LN10),e)}function Eu(t){for(var e="";t--;)e+="0";return e}function py(t,e){var n,r,s,i,a,o,l,u,c,f=1,d=10,h=t,p=h.d,m=h.constructor,g=m.precision;if(h.s<1)throw Error(za+(h.s?"NaN":"-Infinity"));if(h.eq(Wi))return new m(0);if(e==null?(Un=!1,u=g):u=e,h.eq(10))return e==null&&(Un=!0),UT(m,u);if(u+=d,m.precision=u,n=Bo(p),r=n.charAt(0),i=$r(h),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Bo(h.d),r=n.charAt(0),f++;i=$r(h),r>1?(h=new m("0."+n),i++):h=new m(r+"."+n.slice(1))}else return l=UT(m,u+2,g).times(i+""),h=py(new m(r+"."+n.slice(1)),u-d).plus(l),m.precision=g,e==null?(Un=!0,vn(h,g)):h;for(o=a=h=Fl(h.minus(Wi),h.plus(Wi),u),c=vn(h.times(h),u),s=3;;){if(a=vn(a.times(c),u),l=o.plus(Fl(a,new m(s),u)),Bo(l.d).slice(0,u)===Bo(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(UT(m,u+2,g).times(i+""))),o=Fl(o,new m(f),u),m.precision=g,e==null?(Un=!0,vn(o,g)):o;o=l,s+=2}}function dF(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Up(n/_n),t.d=[],r=(n+1)%_n,n<0&&(r+=_n),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=_n;r<s;)t.d.push(+e.slice(r,r+=_n));e=e.slice(r),r=_n-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Un&&(t.e>nx||t.e<-nx))throw Error(xI+n)}else t.s=0,t.e=0,t.d=[0];return t}function vn(t,e,n){var r,s,i,a,o,l,u,c,f=t.d;for(a=1,i=f[0];i>=10;i/=10)a++;if(r=e-a,r<0)r+=_n,s=e,u=f[c=0];else{if(c=Math.ceil((r+1)/_n),i=f.length,c>=i)return t;for(u=i=f[c],a=1;i>=10;i/=10)a++;r%=_n,s=r-_n+a}if(n!==void 0&&(i=uf(10,a-s-1),o=u/i%10|0,l=e<0||f[c+1]!==void 0||u%i,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?s>0?u/uf(10,a-s):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(i=$r(t),f.length=1,e=e-i-1,f[0]=uf(10,(_n-e%_n)%_n),t.e=Up(-e/_n)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,i=1,c--):(f.length=c+1,i=uf(10,_n-r),f[c]=s>0?(u/uf(10,a-s)%uf(10,s)|0)*i:0),l)for(;;)if(c==0){(f[0]+=i)==Yr&&(f[0]=1,++t.e);break}else{if(f[c]+=i,f[c]!=Yr)break;f[c--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(Un&&(t.e>nx||t.e<-nx))throw Error(xI+$r(t));return t}function GW(t,e){var n,r,s,i,a,o,l,u,c,f,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),Un?vn(e,h):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),a=u-r,a){for(c=a<0,c?(n=l,a=-a,o=f.length):(n=f,r=u,o=l.length),s=Math.max(Math.ceil(h/_n),o)+2,a>s&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for(s=l.length,o=f.length,c=s<o,c&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){c=l[s]<f[s];break}a=0}for(c&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>a;){if(l[--s]<f[s]){for(i=s;i&&l[--i]===0;)l[i]=Yr-1;--l[i],l[s]+=Yr}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Un?vn(e,h):e):new d(0)}function Jf(t,e,n){var r,s=$r(t),i=Bo(t.d),a=i.length;return e?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Eu(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Eu(-s-1)+i,n&&(r=n-a)>0&&(i+=Eu(r))):s>=a?(i+=Eu(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+Eu(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=Eu(r))),t.s<0?"-"+i:i}function hF(t,e){if(t.length>e)return t.length=e,!0}function HW(t){var e,n,r;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(jf+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return dF(a,i.toString())}else if(typeof i!="string")throw Error(jf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,fye.test(i))dF(a,i);else throw Error(jf+i)}if(s.prototype=Qe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=HW,s.config=s.set=dye,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function dye(t){if(!t||typeof t!="object")throw Error(za+"Object expected");var e,n,r,s=["precision",1,jp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Up(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(jf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(jf+n+": "+r);return this}var wI=HW(cye);Wi=new wI(1);const an=wI;var hye=t=>t,qW={},KW=t=>t===qW,pF=t=>function e(){return arguments.length===0||arguments.length===1&&KW(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},XW=(t,e)=>t===1?e:pF(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var i=r.filter(a=>a!==qW).length;return i>=t?e(...r):XW(t-i,pF(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var u=r.map(c=>KW(c)?o.shift():c);return e(...u,...o)}))}),h3=t=>XW(t.length,t),Tk=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},pye=h3((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),mye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return hye;var s=n.reverse(),i=s[0],a=s.slice(1);return function(){return a.reduce((o,l)=>l(o),i(...arguments))}},Ck=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),YW=t=>{var e=null,n=null;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e&&s.every((a,o)=>{var l;return a===((l=e)===null||l===void 0?void 0:l[o])})||(e=s,n=t(...s)),n}};function ZW(t){var e;return t===0?e=1:e=Math.floor(new an(t).abs().log(10).toNumber())+1,e}function QW(t,e,n){for(var r=new an(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}h3((t,e,n)=>{var r=+t,s=+e;return r+n*(s-r)});h3((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});h3((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var JW=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},eG=(t,e,n)=>{if(t.lte(0))return new an(0);var r=ZW(t.toNumber()),s=new an(10).pow(r),i=t.div(s),a=r!==1?.05:.1,o=new an(Math.ceil(i.div(a).toNumber())).add(n).mul(a),l=o.mul(s);return e?new an(l.toNumber()):new an(Math.ceil(l.toNumber()))},gye=(t,e,n)=>{var r=new an(1),s=new an(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new an(10).pow(ZW(t)-1),s=new an(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new an(Math.floor(t)))}else t===0?s=new an(Math.floor((e-1)/2)):n||(s=new an(Math.floor(t)));var a=Math.floor((e-1)/2),o=mye(pye(l=>s.add(new an(l-a).mul(r)).toNumber()),Tk);return o(0,e)},tG=function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new an(0),tickMin:new an(0),tickMax:new an(0)};var a=eG(new an(n).sub(e).div(r-1),s,i),o;e<=0&&n>=0?o=new an(0):(o=new an(e).add(n).div(2),o=o.sub(new an(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),u=Math.ceil(new an(n).sub(o).div(a).toNumber()),c=l+u+1;return c>r?tG(e,n,r,s,i+1):(c<r&&(u=n>0?u+(r-c):u,l=n>0?l:l+(r-c)),{step:a,tickMin:o.sub(new an(l).mul(a)),tickMax:o.add(new an(u).mul(a))})};function yye(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(r,2),[a,o]=JW([e,n]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...Tk(0,r-1).map(()=>1/0)]:[...Tk(0,r-1).map(()=>-1/0),o];return e>n?Ck(l):l}if(a===o)return gye(a,r,s);var{step:u,tickMin:c,tickMax:f}=tG(a,o,i,s,0),d=QW(c,f.add(new an(.1).mul(u)),u);return e>n?Ck(d):d}function vye(t,e){var[n,r]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,a]=JW([n,r]);if(i===-1/0||a===1/0)return[n,r];if(i===a)return[i];var o=Math.max(e,2),l=eG(new an(a).sub(i).div(o-1),s,0),u=[...QW(new an(i),new an(a),l),a];return s===!1&&(u=u.map(c=>Math.round(c))),n>r?Ck(u):u}var bye=YW(yye),xye=YW(vye),nG=t=>t.rootProps.maxBarSize,wye=t=>t.rootProps.barGap,rG=t=>t.rootProps.barCategoryGap,Sye=t=>t.rootProps.barSize,f1=t=>t.rootProps.stackOffset,SI=t=>t.options.chartName,TI=t=>t.rootProps.syncId,sG=t=>t.rootProps.syncMethod,CI=t=>t.options.eventEmitter,Sl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ji={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},p3=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Tye={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sl.angleAxisId,includeHidden:!1,name:void 0,reversed:Sl.reversed,scale:Sl.scale,tick:Sl.tick,tickCount:void 0,ticks:void 0,type:Sl.type,unit:void 0},Cye={allowDataOverflow:ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ji.scale,tick:ji.tick,tickCount:ji.tickCount,ticks:void 0,type:ji.type,unit:void 0},Eye={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Sl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sl.scale,tick:Sl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kye={allowDataOverflow:ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ji.scale,tick:ji.tick,tickCount:ji.tickCount,ticks:void 0,type:"category",unit:void 0},EI=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Eye:Tye,kI=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?kye:Cye,m3=t=>t.polarOptions,NI=de([nu,ru,Ur],MV),iG=de([m3,NI],(t,e)=>{if(t!=null)return Rs(t.innerRadius,e,0)}),aG=de([m3,NI],(t,e)=>{if(t!=null)return Rs(t.outerRadius,e,e*.8)}),Nye=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},oG=de([m3],Nye);de([EI,oG],p3);var lG=de([NI,iG,aG],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});de([kI,lG],p3);var uG=de([Xt,m3,iG,aG,nu,ru],(t,e,n,r,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:u}=e;return{cx:Rs(a,s,s/2),cy:Rs(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:u,clockWise:!1}}}),Gn=(t,e)=>e,d1=(t,e,n)=>n;function AI(t){return t==null?void 0:t.id}var Wr=t=>{var e=Xt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Vp=t=>t.tooltip.settings.axisId,ls=t=>{var e=Wr(t),n=Vp(t);return h1(t,e,n)},cG=de([ls],t=>t==null?void 0:t.dataKey);function fG(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:s,dataKey:i}=n,a=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:r;if(!(u==null||u.length===0)){var c=AI(o);u.forEach((f,d)=>{var h=i==null||s?d:String(En(f,i,null)),p=En(f,o.dataKey,0),m;a.has(h)?m=a.get(h):m={},Object.assign(m,{[c]:p}),a.set(h,m)})}}),Array.from(a.values())}function g3(t){return t.stackId!=null&&t.dataKey!=null}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){Aye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aye(t,e,n){return(e=$ye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ye(t){var e=Iye(t,"string");return typeof e=="symbol"?e:e+""}function Iye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ek=[0,"auto"],Fi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},dG=(t,e)=>t.cartesianAxis.xAxis[e],iu=(t,e)=>{var n=dG(t,e);return n??Fi},Li={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ek,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:s1},hG=(t,e)=>t.cartesianAxis.yAxis[e],au=(t,e)=>{var n=hG(t,e);return n??Li},_ye={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$I=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??_ye},gr=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);case"zAxis":return $I(t,n);case"angleAxis":return EI(t,n);case"radiusAxis":return kI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Oye=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},h1=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);case"angleAxis":return EI(t,n);case"radiusAxis":return kI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},pG=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function II(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var y3=t=>t.graphicalItems.cartesianItems,Dye=de([Gn,d1],II),_I=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),p1=de([y3,gr,Dye],_I),mG=de([p1],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(g3)),gG=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),yG=de([p1],gG),OI=t=>t.map(e=>e.data).filter(Boolean).flat(1),Rye=de([p1],OI),DI=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},RI=de([Rye,d3],DI),PI=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:En(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:En(s,r)}))):t.map(r=>({value:r})),v3=de([RI,gr,p1],PI);function vG(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Ed(t){return t.filter(e=>Jo(e)||e instanceof Date).map(Number).filter(e=>Ji(e)===!1)}function Pye(t,e,n){return!n||typeof e!="number"||Ji(e)?[]:n.length?Ed(n.flatMap(r=>{var s=En(t,r.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!ta(i)||!ta(a)))return[e-i,e+a]})):[]}var Mye=de([mG,d3,ls],fG),bG=(t,e,n)=>{var r={},s=e.reduce((i,a)=>(a.stackId==null||(i[a.stackId]==null&&(i[a.stackId]=[]),i[a.stackId].push(a)),i),r);return Object.fromEntries(Object.entries(s).map(i=>{var[a,o]=i,l=o.map(AI);return[a,{stackedData:rhe(t,l,n),graphicalItems:o}]}))},kk=de([Mye,mG,f1],bG),xG=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(n!=="zAxis"){var i=lhe(t,r,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Fye=de([kk,Dc,Gn],xG),wG=(t,e,n,r,s)=>n.length>0?t.flatMap(i=>n.flatMap(a=>{var o,l,u=(o=r[a.id])===null||o===void 0?void 0:o.filter(f=>vG(s,f)),c=En(i,(l=e.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:c,errorDomain:Pye(i,c,u)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:En(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),b3=t=>t.errorBars,SG=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>vG(n,r));de([yG,b3,Gn],SG);var Lye=de([RI,gr,yG,b3,Gn],wG);function zye(t){var{value:e}=t;if(Jo(e)||e instanceof Date)return e}var gF=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Ed(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bye=(t,e,n)=>{var r=t.map(zye).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&mU(r))?oW(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},MI=t=>{var e;if(t==null||!("domain"in t))return Ek;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Ed(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Ek},sx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),o=Math.max(...i);return[a,o]}},TG=t=>t.referenceElements.dots,Wp=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),jye=de([TG,Gn,d1],Wp),CG=t=>t.referenceElements.areas,Uye=de([CG,Gn,d1],Wp),EG=t=>t.referenceElements.lines,Vye=de([EG,Gn,d1],Wp),kG=(t,e)=>{var n=Ed(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Wye=de(jye,Gn,kG),NG=(t,e)=>{var n=Ed(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Gye=de([Uye,Gn],NG),AG=(t,e)=>{var n=Ed(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Hye=de(Vye,Gn,AG),qye=de(Wye,Hye,Gye,(t,e,n)=>sx(t,n,e)),$G=de([gr],MI),FI=(t,e,n,r,s,i,a)=>{var o=lye(e,t.allowDataOverflow);if(o!=null)return o;var l=i==="vertical"&&a==="xAxis"||i==="horizontal"&&a==="yAxis",u=l?sx(n,s,gF(r)):sx(s,gF(r));return uye(e,u,t.allowDataOverflow)},Kye=de([gr,$G,Fye,Lye,qye,Xt,Gn],FI),Xye=[0,1],LI=(t,e,n,r,s,i,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,u=$c(e,i);return u&&o==null?oW(0,n.length):l==="category"?Bye(r,t,u):s==="expand"?Xye:a}},zI=de([gr,Xt,RI,v3,f1,Gn,Kye],LI),IG=(t,e,n,r,s)=>{if(t!=null){var{scale:i,type:a}=t;if(i==="auto")return e==="radial"&&s==="radiusAxis"?"band":e==="radial"&&s==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(t1(i));return o in fg?o:"point"}}},Gp=de([gr,Xt,pG,SI,Gn],IG);function Yye(t){if(t!=null){if(t in fg)return fg[t]();var e="scale".concat(t1(t));if(e in fg)return fg[e]()}}function BI(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var s=Yye(e);if(s!=null){var i=s.domain(n).range(r);return Qde(i),i}}}var jI=(t,e,n)=>{var r=MI(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&fp(t))return bye(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&fp(t))return xye(t,e.tickCount,e.allowDecimals)}},UI=de([zI,h1,Gp],jI),VI=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&fp(e)&&Array.isArray(n)&&n.length>0){var s=e[0],i=n[0],a=e[1],o=n[n.length-1];return[Math.min(s,i),Math.max(a,o)]}return e},Zye=de([gr,zI,UI,Gn],VI),Qye=de(v3,gr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ed(t.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var s=r[r.length-1]-r[0];if(s===0)return 1/0;for(var i=0;i<r.length-1;i++){var a=r[i+1]-r[i];n=Math.min(n,a)}return n/s}}),_G=de(Qye,Xt,rG,Ur,(t,e,n,r)=>r,(t,e,n,r,s)=>{if(!ta(t))return 0;var i=e==="vertical"?r.height:r.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var a=Rs(n,t*i),o=t*i/2;return o-a-(o-a)/i*a}return 0}),Jye=(t,e)=>{var n=iu(t,e);return n==null||typeof n.padding!="string"?0:_G(t,"xAxis",e,n.padding)},e1e=(t,e)=>{var n=au(t,e);return n==null||typeof n.padding!="string"?0:_G(t,"yAxis",e,n.padding)},t1e=de(iu,Jye,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),n1e=de(au,e1e,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),r1e=de([Ur,t1e,s3,r3,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),s1e=de([Ur,Xt,n1e,s3,r3,(t,e,n)=>n],(t,e,n,r,s,i)=>{var{padding:a}=s;return i?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),m1=(t,e,n,r)=>{var s;switch(e){case"xAxis":return r1e(t,n,r);case"yAxis":return s1e(t,n,r);case"zAxis":return(s=$I(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return oG(t);case"radiusAxis":return lG(t,n);default:return}},OG=de([gr,m1],p3),Hp=de([gr,Gp,Zye,OG],BI);de([p1,b3,Gn],SG);function DG(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var x3=(t,e)=>e,w3=(t,e,n)=>n,i1e=de(t3,x3,w3,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(DG)),a1e=de(n3,x3,w3,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(DG)),RG=(t,e)=>({width:t.width,height:e.height}),o1e=(t,e)=>{var n=typeof e.width=="number"?e.width:s1;return{width:n,height:t.height}},PG=de(Ur,iu,RG),l1e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},u1e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},c1e=de(ru,Ur,i1e,x3,w3,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=RG(e,o);a==null&&(a=l1e(e,r,t));var u=r==="top"&&!s||r==="bottom"&&s;i[o.id]=a-Number(u)*l.height,a+=(u?-1:1)*l.height}),i}),f1e=de(nu,Ur,a1e,x3,w3,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=o1e(e,o);a==null&&(a=u1e(e,r,t));var u=r==="left"&&!s||r==="right"&&s;i[o.id]=a-Number(u)*l.width,a+=(u?-1:1)*l.width}),i}),d1e=(t,e)=>{var n=iu(t,e);if(n!=null)return c1e(t,n.orientation,n.mirror)},h1e=de([Ur,iu,d1e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n==null?void 0:n[r];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),p1e=(t,e)=>{var n=au(t,e);if(n!=null)return f1e(t,n.orientation,n.mirror)},m1e=de([Ur,au,p1e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n==null?void 0:n[r];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),MG=de(Ur,au,(t,e)=>{var n=typeof e.width=="number"?e.width:s1;return{width:n,height:t.height}}),yF=(t,e,n)=>{switch(e){case"xAxis":return PG(t,n).width;case"yAxis":return MG(t,n).height;default:return}},FG=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=n,o=$c(t,r),l=e.map(u=>u.value);if(a&&o&&i==="category"&&s&&mU(l))return l}},WI=de([Xt,v3,gr,Gn],FG),LG=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,a=$c(t,r);if(a&&(s==="number"||i!=="auto"))return e.map(o=>o.value)}},GI=de([Xt,v3,h1,Gn],LG),vF=de([Xt,Oye,Gp,Hp,WI,GI,m1,UI,Gn],(t,e,n,r,s,i,a,o,l)=>{if(e==null)return null;var u=$c(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:o,range:a,realScaleType:n,scale:r}}),g1e=(t,e,n,r,s,i,a,o,l)=>{if(!(e==null||r==null)){var u=$c(t,l),{type:c,ticks:f,tickCount:d}=e,h=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/h:0;p=l==="angleAxis"&&i!=null&&i.length>=2?rs(i[0]-i[1])*2*p:p;var m=f||s;if(m){var g=m.map((y,v)=>{var b=a?a.indexOf(y):y;return{index:v,coordinate:r(b)+p,value:y,offset:p}});return g.filter(y=>!Ji(y.coordinate))}return u&&o?o.map((y,v)=>({coordinate:r(y)+p,value:y,index:v,offset:p})):r.ticks?r.ticks(d).map(y=>({coordinate:r(y)+p,value:y,offset:p})):r.domain().map((y,v)=>({coordinate:r(y)+p,value:a?a[y]:y,index:v,offset:p}))}},zG=de([Xt,h1,Gp,Hp,UI,m1,WI,GI,Gn],g1e),y1e=(t,e,n,r,s,i,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=$c(t,a),{tickCount:l}=e,u=0;return u=a==="angleAxis"&&(r==null?void 0:r.length)>=2?rs(r[0]-r[1])*2*u:u,o&&i?i.map((c,f)=>({coordinate:n(c)+u,value:c,index:f,offset:u})):n.ticks?n.ticks(l).map(c=>({coordinate:n(c)+u,value:c,offset:u})):n.domain().map((c,f)=>({coordinate:n(c)+u,value:s?s[c]:c,index:f,offset:u}))}},lc=de([Xt,h1,Hp,m1,WI,GI,Gn],y1e),uc=de(gr,Hp,(t,e)=>{if(!(t==null||e==null))return rx(rx({},t),{},{scale:e})}),v1e=de([gr,Gp,zI,OG],BI);de((t,e,n)=>$I(t,n),v1e,(t,e)=>{if(!(t==null||e==null))return rx(rx({},t),{},{scale:e})});var b1e=de([Xt,t3,n3],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),BG=t=>t.options.defaultTooltipEventType,jG=t=>t.options.validateTooltipEventTypes;function UG(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function HI(t,e){var n=BG(t),r=jG(t);return UG(e,n,r)}function x1e(t){return it(e=>HI(e,t))}var VG=(t,e)=>{var n,r=Number(e);if(!(Ji(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},w1e=t=>t.tooltip.settings,Du={active:!1,index:null,dataKey:void 0,coordinate:void 0},S1e={itemInteraction:{click:Du,hover:Du},axisInteraction:{click:Du,hover:Du},keyboardInteraction:Du,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},WG=sa({name:"tooltip",initialState:S1e,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Ml(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:T1e,removeTooltipEntrySettings:C1e,setTooltipSettingsState:E1e,setActiveMouseOverItemIndex:GG,mouseLeaveItem:k1e,mouseLeaveChart:HG,setActiveClickItemIndex:N1e,setMouseOverAxisIndex:qG,setMouseClickAxisIndex:A1e,setSyncInteraction:Nk,setKeyboardInteraction:Ak}=WG.actions,$1e=WG.reducer;function bF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bF(Object(n),!0).forEach(function(r){I1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I1e(t,e,n){return(e=_1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _1e(t){var e=O1e(t,"string");return typeof e=="symbol"?e:e+""}function O1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D1e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function R1e(t){return t.index!=null}var KG=(t,e,n,r)=>{if(e==null)return Du;var s=D1e(t,e,n);if(s==null)return Du;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(R1e(s)){if(i)return jv(jv({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return jv(jv({},Du),{},{coordinate:s.coordinate})},qI=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!ta(r))return n;var s=0,i=1/0;return e.length>0&&(i=e.length-1),String(Math.max(s,Math.min(r,i)))},XG=(t,e,n,r,s,i,a,o)=>{if(!(i==null||o==null)){var l=a[0],u=l==null?void 0:o(l.positions,i);if(u!=null)return u;var c=s==null?void 0:s[Number(i)];if(c)switch(n){case"horizontal":return{x:c.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:c.coordinate}}}},YG=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;return n==="hover"?s=t.itemInteraction.hover.dataKey:s=t.itemInteraction.click.dataKey,s==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var a;return((a=i.settings)===null||a===void 0?void 0:a.dataKey)===s})},g1=t=>t.options.tooltipPayloadSearcher,qp=t=>t.tooltip;function xF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xF(Object(n),!0).forEach(function(r){P1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P1e(t,e,n){return(e=M1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M1e(t){var e=F1e(t,"string");return typeof e=="symbol"?e:e+""}function F1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L1e(t,e){return t??e}var ZG=(t,e,n,r,s,i,a)=>{if(!(e==null||i==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:c}=n,f=[];return t.reduce((d,h)=>{var p,{dataDefinedOnItem:m,settings:g}=h,y=L1e(m,o),v=Array.isArray(y)?FV(y,u,c):y,b=(p=g==null?void 0:g.dataKey)!==null&&p!==void 0?p:r,x=g==null?void 0:g.nameKey,w;if(r&&Array.isArray(v)&&!Array.isArray(v[0])&&a==="axis"?w=gU(v,r,s):w=i(v,e,l,x),Array.isArray(w))w.forEach(E=>{var A=wF(wF({},g),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});d.push(uM({tooltipEntrySettings:A,dataKey:E.dataKey,payload:E.payload,value:En(E.payload,E.dataKey),name:E.name}))});else{var C;d.push(uM({tooltipEntrySettings:g,dataKey:b,payload:w,value:En(w,b),name:(C=En(w,x))!==null&&C!==void 0?C:g==null?void 0:g.name}))}return d},f)}},KI=de([ls,Xt,pG,SI,Wr],IG),z1e=de([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),B1e=de([Wr,Vp],II),y1=de([z1e,ls,B1e],_I),j1e=de([y1],t=>t.filter(g3)),U1e=de([y1],OI),Kp=de([U1e,Dc],DI),V1e=de([j1e,Dc,ls],fG),XI=de([Kp,ls,y1],PI),W1e=de([ls],MI),G1e=de([y1],t=>t.filter(g3)),H1e=de([V1e,G1e,f1],bG),q1e=de([H1e,Dc,Wr],xG),K1e=de([y1],gG),X1e=de([Kp,ls,K1e,b3,Wr],wG),Y1e=de([TG,Wr,Vp],Wp),Z1e=de([Y1e,Wr],kG),Q1e=de([CG,Wr,Vp],Wp),J1e=de([Q1e,Wr],NG),e0e=de([EG,Wr,Vp],Wp),t0e=de([e0e,Wr],AG),n0e=de([Z1e,t0e,J1e],sx),r0e=de([ls,W1e,q1e,X1e,n0e,Xt,Wr],FI),QG=de([ls,Xt,Kp,XI,f1,Wr,r0e],LI),s0e=de([QG,ls,KI],jI),i0e=de([ls,QG,s0e,Wr],VI),JG=t=>{var e=Wr(t),n=Vp(t),r=!1;return m1(t,e,n,r)},eH=de([ls,JG],p3),tH=de([ls,KI,i0e,eH],BI),a0e=de([Xt,XI,ls,Wr],FG),o0e=de([Xt,XI,ls,Wr],LG),l0e=(t,e,n,r,s,i,a,o)=>{if(e){var{type:l}=e,u=$c(t,o);if(r){var c=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/c:0;return f=o==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?rs(s[0]-s[1])*2*f:f,u&&a?a.map((d,h)=>({coordinate:r(d)+f,value:d,index:h,offset:f})):r.domain().map((d,h)=>({coordinate:r(d)+f,value:i?i[d]:d,index:h,offset:f}))}}},ou=de([Xt,ls,KI,tH,JG,a0e,o0e,Wr],l0e),YI=de([BG,jG,w1e],(t,e,n)=>UG(n.shared,t,e)),nH=t=>t.tooltip.settings.trigger,ZI=t=>t.tooltip.settings.defaultIndex,S3=de([qp,YI,nH,ZI],KG),cc=de([S3,Kp],qI),rH=de([ou,cc],VG),sH=de([S3],t=>{if(t)return t.dataKey}),iH=de([qp,YI,nH,ZI],YG),u0e=de([nu,ru,Xt,Ur,ou,ZI,iH,g1],XG),c0e=de([S3,u0e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),f0e=de([S3],t=>t.active),d0e=de([iH,cc,Dc,cG,rH,g1,YI],ZG),h0e=de([d0e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function SF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SF(Object(n),!0).forEach(function(r){p0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p0e(t,e,n){return(e=m0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m0e(t){var e=g0e(t,"string");return typeof e=="symbol"?e:e+""}function g0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y0e=()=>it(ls),v0e=()=>{var t=y0e(),e=it(ou),n=it(tH);return ly(TF(TF({},t),{},{scale:n}),e)},b0e=()=>it(SI),QI=(t,e)=>e,aH=(t,e,n)=>n,JI=(t,e,n,r)=>r,x0e=de(ou,t=>Xw(t,e=>e.coordinate)),e_=de([qp,QI,aH,JI],KG),oH=de([e_,Kp],qI),w0e=(t,e,n)=>{if(e!=null){var r=qp(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},lH=de([qp,QI,aH,JI],YG),ix=de([nu,ru,Xt,Ur,ou,JI,lH,g1],XG),S0e=de([e_,ix],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),uH=de(ou,oH,VG),T0e=de([lH,oH,Dc,cG,uH,g1,QI],ZG),C0e=de([e_],t=>({isActive:t.active,activeIndex:t.index})),E0e=(t,e,n,r,s,i,a,o)=>{if(!(!t||!e||!r||!s||!i)){var l=uhe(t.chartX,t.chartY,e,n,o);if(l){var u=fhe(l,e),c=Yde(u,a,i,r,s),f=che(e,i,c,l);return{activeIndex:String(c),activeCoordinate:f}}}};function $k(){return $k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$k.apply(null,arguments)}function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(r){k0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k0e(t,e,n){return(e=N0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N0e(t){var e=A0e(t,"string");return typeof e=="symbol"?e:e+""}function A0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $0e(t){var{coordinate:e,payload:n,index:r,offset:s,tooltipAxisBandSize:i,layout:a,cursor:o,tooltipEventType:l,chartName:u}=t,c=e,f=n,d=r;if(!o||!c||u!=="ScatterChart"&&l!=="axis")return null;var h,p;if(u==="ScatterChart")h=c,p=Qhe;else if(u==="BarChart")h=Jhe(a,c,s,i),p=eW;else if(a==="radial"){var{cx:m,cy:g,radius:y,startAngle:v,endAngle:b}=tW(c);h={cx:m,cy:g,startAngle:v,endAngle:b,innerRadius:y,outerRadius:y},p=rW}else h={points:Ope(a,c,s)},p=X$;var x=typeof o=="object"&&"className"in o?o.className:void 0,w=Uv(Uv(Uv(Uv({stroke:"#ccc",pointerEvents:"none"},s),h),Qn(o,!1)),{},{payload:f,payloadIndex:d,className:Ft("recharts-tooltip-cursor",x)});return k.isValidElement(o)?k.cloneElement(o,w):k.createElement(p,w)}function I0e(t){var e=v0e(),n=VV(),r=i3(),s=b0e();return k.createElement($0e,$k({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var cH=k.createContext(null),_0e=()=>k.useContext(cH),fH={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,f||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},o.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,d,h,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,d),!0;case 5:return g.fn.call(g.context,c,f,d,h),!0;case 6:return g.fn.call(g.context,c,f,d,h,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var x=g.length,w;for(b=0;b<x;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,f);break;case 4:g[b].fn.call(g[b].context,c,f,d);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[b].fn.apply(g[b].context,v)}}return!0},o.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,d){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&a(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||d&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(fH);var O0e=fH.exports;const D0e=po(O0e);var my=new D0e,Ik="recharts.syncEvent.tooltip",EF="recharts.syncEvent.brush";function t_(t,e){if(e){var n=Number.parseInt(e,10);if(!Ji(n))return t==null?void 0:t[n]}}var R0e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},dH=sa({name:"options",initialState:R0e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),P0e=dH.reducer,{createEventEmitter:M0e}=dH.actions;function F0e(t){return t.tooltip.syncInteraction}var L0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},hH=sa({name:"chartData",initialState:L0e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:kF,setDataStartEndIndexes:z0e,setComputedData:eJe}=hH.actions,B0e=hH.reducer,j0e=["x","y"];function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){U0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U0e(t,e,n){return(e=V0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V0e(t){var e=W0e(t,"string");return typeof e=="symbol"?e:e+""}function W0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G0e(t,e){if(t==null)return{};var n,r,s=H0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function H0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pH=()=>{};function q0e(){var t=it(TI),e=it(CI),n=mr(),r=it(sG),s=it(ou),i=i3(),a=K$(),o=it(l=>l.rootProps.className);k.useEffect(()=>{if(t==null)return pH;var l=(u,c,f)=>{if(e!==f&&t===u){if(r==="index"){var d;if(a&&c!==null&&c!==void 0&&(d=c.payload)!==null&&d!==void 0&&d.coordinate){var h=c.payload.coordinate,{x:p,y:m}=h,g=G0e(h,j0e),y=Qc(Qc(Qc({},g),typeof p=="number"&&{x:Math.max(a.x,Math.min(p,a.x+a.width))}),typeof m=="number"&&{y:Math.max(a.y,Math.min(m,a.y+a.height))}),v=Qc(Qc({},c),{},{payload:Qc(Qc({},c.payload),{},{coordinate:y})});n(v)}else n(c);return}if(s!=null){var b;if(typeof r=="function"){var x={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},w=r(s,x);b=s[w]}else r==="value"&&(b=s.find(j=>String(j.value)===c.payload.label));var{coordinate:C}=c.payload;if(b==null||c.payload.active===!1||C==null||a==null){n(Nk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:E,y:A}=C,O=Math.min(E,a.x+a.width),R=Math.min(A,a.y+a.height),F={x:i==="horizontal"?b.coordinate:O,y:i==="horizontal"?R:b.coordinate},z=Nk({active:c.payload.active,coordinate:F,dataKey:c.payload.dataKey,index:String(b.index),label:c.payload.label});n(z)}}};return my.on(Ik,l),()=>{my.off(Ik,l)}},[o,n,e,t,r,s,i,a])}function K0e(){var t=it(TI),e=it(CI),n=mr();k.useEffect(()=>{if(t==null)return pH;var r=(s,i,a)=>{e!==a&&t===s&&n(z0e(i))};return my.on(EF,r),()=>{my.off(EF,r)}},[n,e,t])}function X0e(){var t=mr();k.useEffect(()=>{t(M0e())},[t]),q0e(),K0e()}function Y0e(t,e,n,r,s,i){var a=it(d=>w0e(d,t,e)),o=it(CI),l=it(TI),u=it(sG),c=it(F0e),f=c==null?void 0:c.active;k.useEffect(()=>{if(!f&&l!=null&&o!=null){var d=Nk({active:i,coordinate:n,dataKey:a,index:s,label:typeof r=="number"?String(r):r});my.emit(Ik,l,d,o)}},[f,n,a,s,r,o,l,u,i])}function AF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $F(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AF(Object(n),!0).forEach(function(r){Z0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z0e(t,e,n){return(e=Q0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q0e(t){var e=J0e(t,"string");return typeof e=="symbol"?e:e+""}function J0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eve(t){return t.dataKey}function tve(t,e){return k.isValidElement(t)?k.cloneElement(t,e):typeof t=="function"?k.createElement(t,e):k.createElement(Ihe,e)}var IF=[],nve={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ic.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function VT(t){var e=Ts(t,nve),{active:n,allowEscapeViewBox:r,animationDuration:s,animationEasing:i,content:a,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:c,position:f,reverseDirection:d,useTranslate3d:h,wrapperStyle:p,cursor:m,shared:g,trigger:y,defaultIndex:v,portal:b,axisId:x}=e,w=mr(),C=typeof v=="number"?String(v):v;k.useEffect(()=>{w(E1e({shared:g,trigger:y,axisId:x,active:n,defaultIndex:C}))},[w,g,y,x,n,C]);var E=K$(),A=XV(),O=x1e(g),{activeIndex:R,isActive:F}=it(Ee=>C0e(Ee,O,y,C)),z=it(Ee=>T0e(Ee,O,y,C)),j=it(Ee=>uH(Ee,O,y,C)),H=it(Ee=>S0e(Ee,O,y,C)),J=z,U=_0e(),Y=n??F,[Q,se]=Bfe([J,Y]),he=O==="axis"?j:void 0;Y0e(O,y,H,he,R,Y);var be=b??U;if(be==null)return null;var ue=J??IF;Y||(ue=IF),o&&ue.length&&(ue=sfe(J.filter(Ee=>Ee.value!=null&&(Ee.hide!==!0||e.includeHidden)),c,eve));var Ne=ue.length>0,_e=k.createElement(Fhe,{allowEscapeViewBox:r,animationDuration:s,animationEasing:i,isAnimationActive:l,active:Y,coordinate:H,hasPayload:Ne,offset:u,position:f,reverseDirection:d,useTranslate3d:h,viewBox:E,wrapperStyle:p,lastBoundingBox:Q,innerRef:se,hasPortalFromProps:!!b},tve(a,$F($F({},e),{},{payload:ue,label:he,active:Y,coordinate:H,accessibilityLayer:A})));return k.createElement(k.Fragment,null,K7.createPortal(_e,be),Y&&k.createElement(I0e,{cursor:m,tooltipEventType:O,coordinate:H,payload:J,index:R}))}var mH={},gH={},yH={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:i}={}){let a,o=null;const l=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),c=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},f=()=>{u&&c(),m()};let d=null;const h=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,f()},r)},p=()=>{d!==null&&(clearTimeout(d),d=null)},m=()=>{p(),a=void 0,o=null},g=()=>{c()},y=function(...v){if(s!=null&&s.aborted)return;a=this,o=v;const b=d==null;h(),l&&b&&c()};return y.schedule=h,y.cancel=m,y.flush=g,s==null||s.addEventListener("abort",m,{once:!0}),y}t.debounce=e})(yH);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yH;function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:o=!0,maxWait:l}=i,u=Array(2);a&&(u[0]="leading"),o&&(u[1]="trailing");let c,f=null;const d=e.debounce(function(...m){c=r.apply(this,m),f=null},s,{edges:u}),h=function(...m){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(c=r.apply(this,m),f=Date.now(),d.cancel(),d.schedule(),c):(d.apply(this,m),c)},p=()=>(d.flush(),c);return h.cancel=d.cancel,h.flush=p,h}t.debounce=n})(gH);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gH;function n(r,s=0,i={}){const{leading:a=!0,trailing:o=!0}=i;return e.debounce(r,s,{leading:a,maxWait:s,trailing:o})}t.throttle=n})(mH);var rve=mH.throttle;const sve=po(rve);var Fg=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function _F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(n),!0).forEach(function(r){ive(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ive(t,e,n){return(e=ave(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ave(t){var e=ove(t,"string");return typeof e=="symbol"?e:e+""}function ove(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GT=k.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:a=0,minHeight:o,maxHeight:l,children:u,debounce:c=0,id:f,className:d,onResize:h,style:p={}}=t,m=k.useRef(null),g=k.useRef();g.current=h,k.useImperativeHandle(e,()=>m.current);var[y,v]=k.useState({containerWidth:r.width,containerHeight:r.height}),b=k.useCallback((w,C)=>{v(E=>{var A=Math.round(w),O=Math.round(C);return E.containerWidth===A&&E.containerHeight===O?E:{containerWidth:A,containerHeight:O}})},[]);k.useEffect(()=>{var w=O=>{var R,{width:F,height:z}=O[0].contentRect;b(F,z),(R=g.current)===null||R===void 0||R.call(g,F,z)};c>0&&(w=sve(w,c,{trailing:!0,leading:!1}));var C=new ResizeObserver(w),{width:E,height:A}=m.current.getBoundingClientRect();return b(E,A),C.observe(m.current),()=>{C.disconnect()}},[b,c]);var x=k.useMemo(()=>{var{containerWidth:w,containerHeight:C}=y;if(w<0||C<0)return null;Fg(xf(s)||xf(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Fg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var E=xf(s)?w:s,A=xf(i)?C:i;return n&&n>0&&(E?A=E/n:A&&(E=A*n),l&&A>l&&(A=l)),Fg(E>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,A,s,i,a,o,n),k.Children.map(u,O=>k.cloneElement(O,{width:E,height:A,style:WT({width:E,height:A},O.props.style)}))},[n,u,i,l,o,a,y,s]);return k.createElement("div",{id:f?"".concat(f):void 0,className:Ft("recharts-responsive-container",d),style:WT(WT({},p),{},{width:s,height:i,minWidth:a,minHeight:o,maxHeight:l}),ref:m},k.createElement("div",{style:{width:0,height:0,overflow:"visible"}},x))}),v1=t=>null;v1.displayName="Cell";function lve(t,e,n){return(e=uve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uve(t){var e=cve(t,"string");return typeof e=="symbol"?e:e+""}function cve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fve{constructor(e){lve(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(r){hve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hve(t,e,n){return(e=pve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pve(t){var e=mve(t,"string");return typeof e=="symbol"?e:e+""}function mve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gve={cacheSize:2e3,enableCache:!0},vH=dve({},gve),DF=new fve(vH.cacheSize),yve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RF="recharts_measurement_span";function vve(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(o)}var PF=(t,e)=>{try{var n=document.getElementById(RF);n||(n=document.createElement("span"),n.setAttribute("id",RF),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,yve,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Lg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ic.isSsr)return{width:0,height:0};if(!vH.enableCache)return PF(e,n);var r=vve(e,n),s=DF.get(r);if(s)return s;var i=PF(e,n);return DF.set(r,i),i},MF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wve=Object.keys(bH),Sh="NaN";function Sve(t,e){return t*bH[e]}class fi{static parse(e){var n,[,r,s]=(n=xve.exec(e))!==null&&n!==void 0?n:[];return new fi(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ji(e)&&(this.unit=""),n!==""&&!bve.test(n)&&(this.num=NaN,this.unit=""),wve.includes(n)&&(this.num=Sve(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new fi(NaN,""):new fi(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new fi(NaN,""):new fi(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new fi(NaN,""):new fi(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new fi(NaN,""):new fi(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ji(this.num)}}function xH(t){if(t.includes(Sh))return Sh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,i]=(n=MF.exec(e))!==null&&n!==void 0?n:[],a=fi.parse(r??""),o=fi.parse(i??""),l=s==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return Sh;e=e.replace(MF,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,c,f,d]=(u=FF.exec(e))!==null&&u!==void 0?u:[],h=fi.parse(c??""),p=fi.parse(d??""),m=f==="+"?h.add(p):h.subtract(p);if(m.isNaN())return Sh;e=e.replace(FF,m.toString())}return e}var LF=/\(([^()]*)\)/;function Tve(t){for(var e=t,n;(n=LF.exec(e))!=null;){var[,r]=n;e=e.replace(LF,xH(r))}return e}function Cve(t){var e=t.replace(/\s+/g,"");return e=Tve(e),e=xH(e),e}function Eve(t){try{return Cve(t)}catch{return Sh}}function HT(t){var e=Eve(t.slice(5,-1));return e===Sh?"":e}var kve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Nve=["dx","dy","angle","className","breakAll"];function _k(){return _k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_k.apply(null,arguments)}function zF(t,e){if(t==null)return{};var n,r,s=Ave(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ave(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wH=/[ \f\n\r\t\v\u2028\u2029]+/,SH=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Wn(e)||(n?s=e.toString().split(""):s=e.toString().split(wH));var i=s.map(o=>({word:o,width:Lg(o,r).width})),a=n?0:Lg(" ",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},$ve=(t,e,n,r,s)=>{var{maxLines:i,children:a,style:o,breakAll:l}=t,u=ct(i),c=a,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((z,j)=>{var{word:H,width:J}=j,U=z[z.length-1];if(U&&(r==null||s||U.width+J+n<Number(r)))U.words.push(H),U.width+=J+n;else{var Y={words:[H],width:J};z.push(Y)}return z},[])},d=f(e),h=R=>R.reduce((F,z)=>F.width>z.width?F:z);if(!u||s)return d;var p=d.length>i||h(d).width>Number(r);if(!p)return d;for(var m="…",g=R=>{var F=c.slice(0,R),z=SH({breakAll:l,style:o,children:F+m}).wordsWithComputedWidth,j=f(z),H=j.length>i||h(j).width>Number(r);return[H,j]},y=0,v=c.length-1,b=0,x;y<=v&&b<=c.length-1;){var w=Math.floor((y+v)/2),C=w-1,[E,A]=g(C),[O]=g(w);if(!E&&!O&&(y=w+1),E&&O&&(v=w-1),!E&&O){x=A;break}b++}return x||d},BF=t=>{var e=Wn(t)?[]:t.toString().split(wH);return[{words:e}]},Ive=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:a}=t;if((e||n)&&!Ic.isSsr){var o,l,u=SH({breakAll:i,children:r,style:s});if(u){var{wordsWithComputedWidth:c,spaceWidth:f}=u;o=c,l=f}else return BF(r);return $ve({breakAll:i,children:r,maxLines:a,style:s},o,l,e,n)}return BF(r)},jF="#808080",T3=k.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=jF}=t,c=zF(t,kve),f=k.useMemo(()=>Ive({breakAll:c.breakAll,children:c.children,maxLines:c.maxLines,scaleToFit:a,style:c.style,width:c.width}),[c.breakAll,c.children,c.maxLines,a,c.style,c.width]),{dx:d,dy:h,angle:p,className:m,breakAll:g}=c,y=zF(c,Nve);if(!Jo(n)||!Jo(r)||f.length===0)return null;var v=n+(ct(d)?d:0),b=r+(ct(h)?h:0),x;switch(l){case"start":x=HT("calc(".concat(i,")"));break;case"middle":x=HT("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:x=HT("calc(".concat(f.length-1," * -").concat(s,")"));break}var w=[];if(a){var C=f[0].width,{width:E}=c;w.push("scale(".concat(ct(E)?E/C:1,")"))}return p&&w.push("rotate(".concat(p,", ").concat(v,", ").concat(b,")")),w.length&&(y.transform=w.join(" ")),k.createElement("text",_k({},Qn(y,!0),{ref:e,x:v,y:b,className:Ft("recharts-text",m),textAnchor:o,fill:u.includes("url")?jF:u}),f.map((A,O)=>{var R=A.words.join(g?"":" ");return k.createElement("tspan",{x:v,dy:O===0?x:s,key:"".concat(R,"-").concat(O)},R)}))});T3.displayName="Text";var _ve=["labelRef"];function Ove(t,e){if(t==null)return{};var n,r,s=Dve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Dve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function UF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(n),!0).forEach(function(r){Rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rve(t,e,n){return(e=Pve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pve(t){var e=Mve(t,"string");return typeof e=="symbol"?e:e+""}function Mve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tl(){return Tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tl.apply(null,arguments)}var TH=k.createContext(null),Fve=t=>{var{x:e,y:n,width:r,height:s,children:i}=t,a=k.useMemo(()=>({x:e,y:n,width:r,height:s}),[e,n,r,s]);return k.createElement(TH.Provider,{value:a},i)},CH=()=>{var t=k.useContext(TH),e=K$();return t||e},Lve=k.createContext(null),zve=()=>{var t=k.useContext(Lve),e=it(uG);return t||e},Bve=t=>{var{value:e,formatter:n}=t,r=Wn(t.children)?e:t.children;return typeof n=="function"?n(r):r},n_=t=>t!=null&&typeof t=="function",jve=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Uve=(t,e,n,r,s)=>{var{offset:i,className:a}=t,{cx:o,cy:l,innerRadius:u,outerRadius:c,startAngle:f,endAngle:d,clockWise:h}=s,p=(u+c)/2,m=jve(f,d),g=m>=0?1:-1,y,v;switch(e){case"insideStart":y=f+g*i,v=h;break;case"insideEnd":y=d-g*i,v=!h;break;case"end":y=d+g*i,v=h;break;default:throw new Error("Unsupported position ".concat(e))}v=m<=0?v:!v;var b=Cr(o,l,p,y),x=Cr(o,l,p,y+(v?1:-1)*359),w="M".concat(b.x,",").concat(b.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(v?0:1,`,
    `).concat(x.x,",").concat(x.y),C=Wn(t.id)?iy("recharts-radial-line-"):t.id;return k.createElement("text",Tl({},r,{dominantBaseline:"central",className:Ft("recharts-radial-bar-label",a)}),k.createElement("defs",null,k.createElement("path",{id:C,d:w})),k.createElement("textPath",{xlinkHref:"#".concat(C)},n))},Vve=(t,e,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:o,endAngle:l}=t,u=(o+l)/2;if(n==="outside"){var{x:c,y:f}=Cr(r,s,a+e,u);return{x:c,y:f,textAnchor:c>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var d=(i+a)/2,{x:h,y:p}=Cr(r,s,d,u);return{x:h,y:p,textAnchor:"middle",verticalAnchor:"middle"}},EH=t=>"cx"in t&&ct(t.cx),Wve=(t,e)=>{var{parentViewBox:n,offset:r,position:s}=t,i;n!=null&&!EH(n)&&(i=n);var{x:a,y:o,width:l,height:u}=e,c=u>=0?1:-1,f=c*r,d=c>0?"end":"start",h=c>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",y=p>0?"start":"end";if(s==="top"){var v={x:a+l/2,y:o-c*r,textAnchor:"middle",verticalAnchor:d};return cr(cr({},v),i?{height:Math.max(o-i.y,0),width:l}:{})}if(s==="bottom"){var b={x:a+l/2,y:o+u+f,textAnchor:"middle",verticalAnchor:h};return cr(cr({},b),i?{height:Math.max(i.y+i.height-(o+u),0),width:l}:{})}if(s==="left"){var x={x:a-m,y:o+u/2,textAnchor:g,verticalAnchor:"middle"};return cr(cr({},x),i?{width:Math.max(x.x-i.x,0),height:u}:{})}if(s==="right"){var w={x:a+l+m,y:o+u/2,textAnchor:y,verticalAnchor:"middle"};return cr(cr({},w),i?{width:Math.max(i.x+i.width-w.x,0),height:u}:{})}var C=i?{width:l,height:u}:{};return s==="insideLeft"?cr({x:a+m,y:o+u/2,textAnchor:y,verticalAnchor:"middle"},C):s==="insideRight"?cr({x:a+l-m,y:o+u/2,textAnchor:g,verticalAnchor:"middle"},C):s==="insideTop"?cr({x:a+l/2,y:o+f,textAnchor:"middle",verticalAnchor:h},C):s==="insideBottom"?cr({x:a+l/2,y:o+u-f,textAnchor:"middle",verticalAnchor:d},C):s==="insideTopLeft"?cr({x:a+m,y:o+f,textAnchor:y,verticalAnchor:h},C):s==="insideTopRight"?cr({x:a+l-m,y:o+f,textAnchor:g,verticalAnchor:h},C):s==="insideBottomLeft"?cr({x:a+m,y:o+u-f,textAnchor:y,verticalAnchor:d},C):s==="insideBottomRight"?cr({x:a+l-m,y:o+u-f,textAnchor:g,verticalAnchor:d},C):s&&typeof s=="object"&&(ct(s.x)||xf(s.x))&&(ct(s.y)||xf(s.y))?cr({x:a+Rs(s.x,l),y:o+Rs(s.y,u),textAnchor:"end",verticalAnchor:"end"},C):cr({x:a+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Gve={offset:5};function ku(t){var e=Ts(t,Gve),{viewBox:n,position:r,value:s,children:i,content:a,className:o="",textBreakAll:l,labelRef:u}=e,c=zve(),f=CH(),d=r==="center"?f:c??f,h=n||d;if(!h||Wn(s)&&Wn(i)&&!k.isValidElement(a)&&typeof a!="function")return null;var p=cr(cr({},e),{},{viewBox:h});if(k.isValidElement(a)){var{labelRef:m}=p,g=Ove(p,_ve);return k.cloneElement(a,g)}var y;if(typeof a=="function"){if(y=k.createElement(a,p),k.isValidElement(y))return y}else y=Bve(e);var v=EH(h),b=Qn(e,!0);if(v&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Uve(e,r,y,b,h);var x=v?Vve(h,e.offset,e.position):Wve(e,h);return k.createElement(T3,Tl({ref:u,className:Ft("recharts-label",o)},b,x,{breakAll:l}),y)}ku.displayName="Label";var Hve=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?k.createElement(ku,Tl({key:"label-implicit"},r)):Jo(t)?k.createElement(ku,Tl({key:"label-implicit",value:t},r)):k.isValidElement(t)?t.type===ku?k.cloneElement(t,cr({key:"label-implicit"},r)):k.createElement(ku,Tl({key:"label-implicit",content:t},r)):n_(t)?k.createElement(ku,Tl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?k.createElement(ku,Tl({},t,{key:"label-implicit"},r)):null};function qve(t){var{label:e}=t,n=CH();return Hve(e,n)||null}var kH={},NH={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(NH);var AH={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(AH);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NH,n=AH,r=qw;function s(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=s})(kH);var Kve=kH.last;const Xve=po(Kve);var Yve=["valueAccessor"],Zve=["dataKey","clockWise","id","textBreakAll"];function ax(){return ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ax.apply(null,arguments)}function VF(t,e){if(t==null)return{};var n,r,s=Qve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Qve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jve=t=>Array.isArray(t.value)?Xve(t.value):t.value,$H=k.createContext(void 0),IH=$H.Provider,_H=k.createContext(void 0),ebe=_H.Provider;function tbe(){return k.useContext($H)}function nbe(){return k.useContext(_H)}function Mb(t){var{valueAccessor:e=Jve}=t,n=VF(t,Yve),{dataKey:r,clockWise:s,id:i,textBreakAll:a}=n,o=VF(n,Zve),l=tbe(),u=nbe(),c=l||u;return!c||!c.length?null:k.createElement(ws,{className:"recharts-label-list"},c.map((f,d)=>{var h,p=Wn(r)?e(f,d):En(f&&f.payload,r),m=Wn(i)?{}:{id:"".concat(i,"-").concat(d)};return k.createElement(ku,ax({},Qn(f,!0),o,m,{fill:(h=n.fill)!==null&&h!==void 0?h:f.fill,parentViewBox:f.parentViewBox,value:p,textBreakAll:a,viewBox:f.viewBox,key:"label-".concat(d),index:d}))}))}Mb.displayName="LabelList";function r_(t){var{label:e}=t;return e?e===!0?k.createElement(Mb,{key:"labelList-implicit"}):k.isValidElement(e)||n_(e)?k.createElement(Mb,{key:"labelList-implicit",content:e}):typeof e=="object"?k.createElement(Mb,ax({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Ok(){return Ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ok.apply(null,arguments)}var OH=t=>{var{cx:e,cy:n,r,className:s}=t,i=Ft("recharts-dot",s);return e===+e&&n===+n&&r===+r?k.createElement("circle",Ok({},ol(t),E$(t),{className:i,cx:e,cy:n,r})):null},DH=t=>t.graphicalItems.polarItems,rbe=de([Gn,d1],II),s_=de([DH,gr,rbe],_I),sbe=de([s_],OI),i_=de([sbe,bI],DI),ibe=de([i_,gr,s_],PI),abe=de([i_,gr,s_],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var i,a=En(r,(i=e.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:En(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]}))),WF=()=>{},obe=de([gr,$G,WF,abe,WF,Xt,Gn],FI),RH=de([gr,Xt,i_,ibe,f1,Gn,obe],LI),lbe=de([RH,gr,Gp],jI);de([gr,RH,lbe,Gn],VI);var ube={radiusAxis:{},angleAxis:{}},PH=sa({name:"polarAxis",initialState:ube,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:tJe,removeRadiusAxis:nJe,addAngleAxis:rJe,removeAngleAxis:sJe}=PH.actions,cbe=PH.reducer;function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){fbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fbe(t,e,n){return(e=dbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dbe(t){var e=hbe(t,"string");return typeof e=="symbol"?e:e+""}function hbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pbe=(t,e)=>e,a_=de([DH,pbe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),mbe=[],o_=(t,e,n)=>(n==null?void 0:n.length)===0?mbe:n,MH=de([bI,a_,o_],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var s;if((e==null?void 0:e.data)!=null&&e.data.length>0?s=e.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(i=>HF(HF({},e.presentationProps),i.props))),s!=null)return s}}),gbe=de([MH,a_,o_],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,s)=>{var i,a=En(r,e.nameKey,e.name),o;return n!=null&&(i=n[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:zp(a,e.dataKey),color:o,payload:r,type:e.legendType}})}),ybe=de([MH,a_,o_,Ur],(t,e,n,r)=>{if(!(e==null||t==null))return d2e({offset:r,pieSettings:e,displayedData:t,cells:n})}),FH={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var s;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&s.writable)?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(FH);var vbe=FH.isPlainObject;const bbe=po(vbe);function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function KF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){xbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xbe(t,e,n){return(e=wbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wbe(t){var e=Sbe(t,"string");return typeof e=="symbol"?e:e+""}function Sbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ox(){return ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ox.apply(null,arguments)}var XF=(t,e,n,r,s)=>{var i=n-r,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-i/2,",").concat(e+s),a+="L ".concat(t+n-i/2-r,",").concat(e+s),a+="L ".concat(t,",").concat(e," Z"),a},Tbe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Cbe=t=>{var e=Ts(t,Tbe),{x:n,y:r,upperWidth:s,lowerWidth:i,height:a,className:o}=e,{animationEasing:l,animationDuration:u,animationBegin:c,isUpdateAnimationActive:f}=e,d=k.useRef(),[h,p]=k.useState(-1),m=k.useRef(s),g=k.useRef(i),y=k.useRef(a),v=k.useRef(n),b=k.useRef(r),x=a1(t,"trapezoid-");if(k.useEffect(()=>{if(d.current&&d.current.getTotalLength)try{var H=d.current.getTotalLength();H&&p(H)}catch{}},[]),n!==+n||r!==+r||s!==+s||i!==+i||a!==+a||s===0&&i===0||a===0)return null;var w=Ft("recharts-trapezoid",o);if(!f)return k.createElement("g",null,k.createElement("path",ox({},Qn(e,!0),{className:w,d:XF(n,r,s,i,a)})));var C=m.current,E=g.current,A=y.current,O=v.current,R=b.current,F="0px ".concat(h===-1?1:h,"px"),z="".concat(h,"px 0px"),j=YV(["strokeDasharray"],u,l);return k.createElement(i1,{animationId:x,key:x,canBegin:h>0,duration:u,easing:l,isActive:f,begin:c},H=>{var J=nr(C,s,H),U=nr(E,i,H),Y=nr(A,a,H),Q=nr(O,n,H),se=nr(R,r,H);d.current&&(m.current=J,g.current=U,y.current=Y,v.current=Q,b.current=se);var he=H>0?{transition:j,strokeDasharray:z}:{strokeDasharray:F};return k.createElement("path",ox({},Qn(e,!0),{className:w,d:XF(Q,se,J,U,Y),ref:d,style:KF(KF({},he),e.style)}))})},Ebe=["option","shapeType","propTransformer","activeClassName","isActive"];function kbe(t,e){if(t==null)return{};var n,r,s=Nbe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Nbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(r){Abe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Abe(t,e,n){return(e=$be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $be(t){var e=Ibe(t,"string");return typeof e=="symbol"?e:e+""}function Ibe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _be(t,e){return lx(lx({},e),t)}function Obe(t,e){return t==="symbols"}function ZF(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return k.createElement(eW,n);case"trapezoid":return k.createElement(Cbe,n);case"sector":return k.createElement(rW,n);case"symbols":if(Obe(e))return k.createElement(LU,n);break;default:return null}}function Dbe(t){return k.isValidElement(t)?t.props:t}function LH(t){var{option:e,shapeType:n,propTransformer:r=_be,activeClassName:s="recharts-active-shape",isActive:i}=t,a=kbe(t,Ebe),o;if(k.isValidElement(e))o=k.cloneElement(e,lx(lx({},a),Dbe(e)));else if(typeof e=="function")o=e(a);else if(bbe(e)&&typeof e!="boolean"){var l=r(e,a);o=k.createElement(ZF,{shapeType:n,elementProps:l})}else{var u=a;o=k.createElement(ZF,{shapeType:n,elementProps:u})}return i?k.createElement(ws,{className:s},o):o}var l_=(t,e)=>{var n=mr();return(r,s)=>i=>{t==null||t(r,s,i),n(GG({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},u_=t=>{var e=mr();return(n,r)=>s=>{t==null||t(n,r,s),e(k1e())}},c_=(t,e)=>{var n=mr();return(r,s)=>i=>{t==null||t(r,s,i),n(N1e({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function f_(t){var{fn:e,args:n}=t,r=mr(),s=Ni();return k.useEffect(()=>{if(!s){var i=e(n);return r(T1e(i)),()=>{r(C1e(i))}}},[e,n,r,s]),null}var zH=()=>{};function BH(t){var{legendPayload:e}=t,n=mr(),r=Ni();return k.useEffect(()=>r?zH:(n(qV(e)),()=>{n(KV(e))}),[n,r,e]),null}function Rbe(t){var{legendPayload:e}=t,n=mr(),r=it(Xt);return k.useEffect(()=>r!=="centric"&&r!=="radial"?zH:(n(qV(e)),()=>{n(KV(e))}),[n,r,e]),null}var qT,Pbe=()=>{var[t]=k.useState(()=>iy("uid-"));return t},Mbe=(qT=j7.useId)!==null&&qT!==void 0?qT:Pbe;function Fbe(t,e){var n=Mbe();return e||(t?"".concat(t,"-").concat(n):n)}var Lbe=k.createContext(void 0),d_=t=>{var{id:e,type:n,children:r}=t,s=Fbe("recharts-".concat(n),e);return k.createElement(Lbe.Provider,{value:s},r(s))},zbe={cartesianItems:[],polarItems:[]},jH=sa({name:"graphicalItems",initialState:zbe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,s=Ml(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},removeCartesianGraphicalItem(t,e){var n=Ml(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Ml(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Bbe,replaceCartesianGraphicalItem:jbe,removeCartesianGraphicalItem:Ube,addPolarGraphicalItem:Vbe,removePolarGraphicalItem:Wbe}=jH.actions,Gbe=jH.reducer;function UH(t){var e=mr(),n=k.useRef(null);return k.useEffect(()=>{n.current===null?e(Bbe(t)):n.current!==t&&e(jbe({prev:n.current,next:t})),n.current=t},[e,t]),k.useEffect(()=>()=>{n.current&&(e(Ube(n.current)),n.current=null)},[e]),null}function Hbe(t){var e=mr();return k.useEffect(()=>(e(Vbe(t)),()=>{e(Wbe(t))}),[e,t]),null}var qbe=["onMouseEnter","onClick","onMouseLeave"],Kbe=["id"],Xbe=["id"];function h_(t,e){if(t==null)return{};var n,r,s=Ybe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ybe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(r){Zbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zbe(t,e,n){return(e=Qbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qbe(t){var e=Jbe(t,"string");return typeof e=="symbol"?e:e+""}function Jbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(null,arguments)}function e2e(t){var e=k.useMemo(()=>k$(t.children,v1),[t.children]),n=it(r=>gbe(r,t.id,e));return n==null?null:k.createElement(Rbe,{legendPayload:n})}function t2e(t){var{dataKey:e,nameKey:n,sectors:r,stroke:s,strokeWidth:i,fill:a,name:o,hide:l,tooltipType:u}=t;return{dataDefinedOnItem:r.map(c=>c.tooltipPayload),positions:r.map(c=>c.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:a,dataKey:e,nameKey:n,name:zp(o,e),hide:l,type:u,color:a,unit:""}}}var n2e=(t,e)=>t>e?"start":t<e?"end":"middle",r2e=(t,e,n)=>Rs(typeof e=="function"?e(t):e,n,n*.8),s2e=(t,e,n)=>{var{top:r,left:s,width:i,height:a}=e,o=MV(i,a),l=s+Rs(t.cx,i,i/2),u=r+Rs(t.cy,a,a/2),c=Rs(t.innerRadius,o,0),f=r2e(n,t.outerRadius,o),d=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:u,innerRadius:c,outerRadius:f,maxRadius:d}},i2e=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function a2e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var o2e=(t,e)=>{if(k.isValidElement(t))return k.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Ft("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return k.createElement(X$,fc({},e,{type:"linear",className:n}))},l2e=(t,e,n)=>{if(k.isValidElement(t))return k.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),k.isValidElement(r)))return r;var s=Ft("recharts-pie-label-text",a2e(t));return k.createElement(T3,fc({},e,{alignmentBaseline:"middle",className:s}),r)};function u2e(t){var{sectors:e,props:n,showLabels:r}=t,{label:s,labelLine:i,dataKey:a}=n;if(!r||!s||!e)return null;var o=ol(n),l=Qn(s,!1),u=Qn(i,!1),c=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,f=e.map((d,h)=>{var p=(d.startAngle+d.endAngle)/2,m=Cr(d.cx,d.cy,d.outerRadius+c,p),g=zn(zn(zn(zn({},o),d),{},{stroke:"none"},l),{},{index:h,textAnchor:n2e(m.x,d.cx)},m),y=zn(zn(zn(zn({},o),d),{},{fill:"none",stroke:d.fill},u),{},{index:h,points:[Cr(d.cx,d.cy,d.outerRadius,p),m],key:"line"});return k.createElement(ws,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(h)},i&&o2e(i,y),l2e(s,g,En(d,a)))});return k.createElement(ws,{className:"recharts-pie-labels"},f)}function c2e(t){var{sectors:e,props:n,showLabels:r}=t,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?k.createElement(r_,{label:s}):k.createElement(u2e,{sectors:e,props:n,showLabels:r})}function f2e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:s}=t,i=it(cc),{onMouseEnter:a,onClick:o,onMouseLeave:l}=s,u=h_(s,qbe),c=l_(a,s.dataKey),f=u_(l),d=c_(o,s.dataKey);return e==null||e.length===0?null:k.createElement(k.Fragment,null,e.map((h,p)=>{if((h==null?void 0:h.startAngle)===0&&(h==null?void 0:h.endAngle)===0&&e.length!==1)return null;var m=n&&String(p)===i,g=i?r:null,y=m?n:g,v=zn(zn({},h),{},{stroke:h.stroke,tabIndex:-1,[jV]:p,[UV]:s.dataKey});return k.createElement(ws,fc({tabIndex:-1,className:"recharts-pie-sector"},Vw(u,h,p),{onMouseEnter:c(h,p),onMouseLeave:f(h,p),onClick:d(h,p),key:"sector-".concat(h==null?void 0:h.startAngle,"-").concat(h==null?void 0:h.endAngle,"-").concat(h.midAngle,"-").concat(p)}),k.createElement(LH,fc({option:y,isActive:m,shapeType:"sector"},v)))}))}function d2e(t){var e,{pieSettings:n,displayedData:r,cells:s,offset:i}=t,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:u,nameKey:c,tooltipType:f}=n,d=Math.abs(n.minAngle),h=i2e(o,l),p=Math.abs(h),m=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,g=r.filter(C=>En(C,u,0)!==0).length,y=(p>=360?g:g-1)*m,v=p-g*d-y,b=r.reduce((C,E)=>{var A=En(E,u,0);return C+(ct(A)?A:0)},0),x;if(b>0){var w;x=r.map((C,E)=>{var A=En(C,u,0),O=En(C,c,E),R=s2e(n,i,C),F=(ct(A)?A:0)/b,z,j=zn(zn({},C),s&&s[E]&&s[E].props);E?z=w.endAngle+rs(h)*m*(A!==0?1:0):z=o;var H=z+rs(h)*((A!==0?d:0)+F*v),J=(z+H)/2,U=(R.innerRadius+R.outerRadius)/2,Y=[{name:O,value:A,payload:j,dataKey:u,type:f}],Q=Cr(R.cx,R.cy,U,J);return w=zn(zn(zn(zn({},n.presentationProps),{},{percent:F,cornerRadius:a,name:O,tooltipPayload:Y,midAngle:J,middleRadius:U,tooltipPosition:Q},j),R),{},{value:A,startAngle:z,endAngle:H,payload:j,paddingAngle:rs(h)*m}),w})}return x}function h2e(t){var{showLabels:e,sectors:n,children:r}=t,s=k.useMemo(()=>!e||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,e]);return k.createElement(ebe,{value:e?s:void 0},r)}function p2e(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:s,animationBegin:i,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:c,onAnimationEnd:f}=e,d=a1(e,"recharts-pie-"),h=n.current,[p,m]=k.useState(!1),g=k.useCallback(()=>{typeof f=="function"&&f(),m(!1)},[f]),y=k.useCallback(()=>{typeof c=="function"&&c(),m(!0)},[c]);return k.createElement(h2e,{showLabels:!p,sectors:r},k.createElement(i1,{animationId:d,begin:i,duration:a,isActive:s,easing:o,onAnimationStart:y,onAnimationEnd:g,key:d},v=>{var b=[],x=r&&r[0],w=x==null?void 0:x.startAngle;return r==null||r.forEach((C,E)=>{var A=h&&h[E],O=E>0?Yf(C,"paddingAngle",0):0;if(A){var R=nr(A.endAngle-A.startAngle,C.endAngle-C.startAngle,v),F=zn(zn({},C),{},{startAngle:w+O,endAngle:w+R+O});b.push(F),w=F.endAngle}else{var{endAngle:z,startAngle:j}=C,H=nr(0,z-j,v),J=zn(zn({},C),{},{startAngle:w+O,endAngle:w+H+O});b.push(J),w=J.endAngle}}),n.current=b,k.createElement(ws,null,k.createElement(f2e,{sectors:b,activeShape:l,inactiveShape:u,allOtherPieProps:e}))}),k.createElement(c2e,{showLabels:!p,sectors:r,props:e}),e.children)}var m2e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ic.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function g2e(t){var{id:e}=t,n=h_(t,Kbe),{hide:r,className:s,rootTabIndex:i}=t,a=k.useMemo(()=>k$(t.children,v1),[t.children]),o=it(c=>ybe(c,e,a)),l=k.useRef(null),u=Ft("recharts-pie",s);return r||o==null?(l.current=null,k.createElement(ws,{tabIndex:i,className:u})):k.createElement(k.Fragment,null,k.createElement(f_,{fn:t2e,args:zn(zn({},t),{},{sectors:o})}),k.createElement(ws,{tabIndex:i,className:u},k.createElement(p2e,{props:zn(zn({},n),{},{sectors:o}),previousSectorsRef:l})))}function VH(t){var e=Ts(t,m2e),{id:n}=e,r=h_(e,Xbe),s=ol(r);return k.createElement(d_,{id:n,type:"pie"},i=>k.createElement(k.Fragment,null,k.createElement(Hbe,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s,maxRadius:e.maxRadius}),k.createElement(e2e,fc({},r,{id:i})),k.createElement(g2e,fc({},r,{id:i}))))}VH.displayName="Pie";function JF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(n),!0).forEach(function(r){y2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y2e(t,e,n){return(e=v2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v2e(t){var e=b2e(t,"string");return typeof e=="symbol"?e:e+""}function b2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x2e={xAxis:{},yAxis:{},zAxis:{}},WH=sa({name:"cartesianAxis",initialState:x2e,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=e8(e8({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:w2e,removeXAxis:S2e,addYAxis:T2e,removeYAxis:C2e,addZAxis:iJe,removeZAxis:aJe,updateYAxisWidth:E2e}=WH.actions,k2e=WH.reducer,N2e=de([Ur],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),A2e=de([N2e,nu,ru],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),p_=()=>it(A2e),$2e=()=>it(h0e);function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function n8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(r){I2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I2e(t,e,n){return(e=_2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _2e(t){var e=O2e(t,"string");return typeof e=="symbol"?e:e+""}function O2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D2e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:i}=t;if(s===!1||e.x==null||e.y==null)return null;var a=n8(n8({index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Qn(s,!1)),E$(s)),o;return k.isValidElement(s)?o=k.cloneElement(s,a):typeof s=="function"?o=s(a):o=k.createElement(OH,a),k.createElement(ws,{className:"recharts-active-dot"},o)};function R2e(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s}=t,i=it(cc),a=$2e();if(e==null||a==null)return null;var o=e.find(l=>a.includes(l.payload));return Wn(o)?null:D2e({point:o,childIndex:Number(i),mainColor:n,dataKey:s,activeDot:r})}var P2e="Invariant failed";function M2e(t,e){throw new Error(P2e)}var F2e=["x","y"];function Dk(){return Dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dk.apply(null,arguments)}function r8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(n),!0).forEach(function(r){L2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L2e(t,e,n){return(e=z2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z2e(t){var e=B2e(t,"string");return typeof e=="symbol"?e:e+""}function B2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j2e(t,e){if(t==null)return{};var n,r,s=U2e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function U2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function V2e(t,e){var{x:n,y:r}=t,s=j2e(t,F2e),i="".concat(n),a=parseInt(i,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||s.height),c=parseInt(u,10),f="".concat(e.width||s.width),d=parseInt(f,10);return Hm(Hm(Hm(Hm(Hm({},e),s),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:d,name:e.name,radius:e.radius})}function m_(t){return k.createElement(LH,Dk({shapeType:"rectangle",propTransformer:V2e,activeClassName:"recharts-active-bar"},t))}var W2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,s)=>{if(ct(e))return e;var i=ct(r)||Wn(r);return i?e(r,s):(i||M2e(),n)}},G2e={},GH=sa({name:"errorBars",initialState:G2e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:s}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?s:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:oJe,replaceErrorBar:lJe,removeErrorBar:uJe}=GH.actions,H2e=GH.reducer,q2e=["children"];function K2e(t,e){if(t==null)return{};var n,r,s=X2e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function X2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Y2e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Z2e=k.createContext(Y2e);function HH(t){var{children:e}=t,n=K2e(t,q2e);return k.createElement(Z2e.Provider,{value:n},e)}function g_(t,e){var n,r,s=it(u=>iu(u,t)),i=it(u=>au(u,e)),a=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Fi.allowDataOverflow,o=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Li.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function qH(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=p_(),{needClipX:i,needClipY:a,needClip:o}=g_(e,n);if(!o)return null;var{x:l,y:u,width:c,height:f}=s;return k.createElement("clipPath",{id:"clipPath-".concat(r)},k.createElement("rect",{x:i?l:l-c/2,y:a?u:u-f/2,width:i?c:c*2,height:a?f:f*2}))}var Q2e=["onMouseEnter","onMouseLeave","onClick"],J2e=["value","background","tooltipPosition"],exe=["id"],txe=["onMouseEnter","onClick","onMouseLeave"];function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(null,arguments)}function s8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s8(Object(n),!0).forEach(function(r){nxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nxe(t,e,n){return(e=rxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rxe(t){var e=sxe(t,"string");return typeof e=="symbol"?e:e+""}function sxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ux(t,e){if(t==null)return{};var n,r,s=ixe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ixe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var axe=t=>{var{dataKey:e,name:n,fill:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:zp(n,e),payload:t}]};function oxe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:s,name:i,hide:a,unit:o}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:zp(i,e),hide:a,type:t.tooltipType,color:t.fill,unit:o}}}function lxe(t){var e=it(cc),{data:n,dataKey:r,background:s,allOtherBarProps:i}=t,{onMouseEnter:a,onMouseLeave:o,onClick:l}=i,u=ux(i,Q2e),c=l_(a,r),f=u_(o),d=c_(l,r);if(!s||n==null)return null;var h=Qn(s,!1);return k.createElement(k.Fragment,null,n.map((p,m)=>{var{value:g,background:y,tooltipPosition:v}=p,b=ux(p,J2e);if(!y)return null;var x=c(p,m),w=f(p,m),C=d(p,m),E=Vs(Vs(Vs(Vs(Vs({option:s,isActive:String(m)===e},b),{},{fill:"#eee"},y),h),Vw(u,p,m)),{},{onMouseEnter:x,onMouseLeave:w,onClick:C,dataKey:r,index:m,className:"recharts-bar-background-rectangle"});return k.createElement(m_,dc({key:"background-bar-".concat(E.index)},E))}))}function uxe(t){var{showLabels:e,children:n,rects:r}=t,s=r==null?void 0:r.map(i=>{var a={x:i.x,y:i.y,width:i.width,height:i.height};return Vs(Vs({},a),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:a,fill:i.fill})});return k.createElement(IH,{value:e?s:void 0},n)}function cxe(t){var{shape:e,activeBar:n,baseProps:r,entry:s,index:i,dataKey:a}=t,o=it(cc),l=it(sH),u=n&&String(i)===o&&(l==null||a===l),c=u?n:e;return k.createElement(m_,dc({},r,s,{isActive:u,option:c,index:i,dataKey:a}))}function fxe(t){var{shape:e,baseProps:n,entry:r,index:s,dataKey:i}=t;return k.createElement(m_,dc({},n,r,{isActive:!1,option:e,index:s,dataKey:i}))}function dxe(t){var{data:e,props:n}=t,r=ol(n),{id:s}=r,i=ux(r,exe),{shape:a,dataKey:o,activeBar:l}=n,{onMouseEnter:u,onClick:c,onMouseLeave:f}=n,d=ux(n,txe),h=l_(u,o),p=u_(f),m=c_(c,o);return e?k.createElement(k.Fragment,null,e.map((g,y)=>k.createElement(ws,dc({className:"recharts-bar-rectangle"},Vw(d,g,y),{onMouseEnter:h(g,y),onMouseLeave:p(g,y),onClick:m(g,y),key:"rectangle-".concat(g==null?void 0:g.x,"-").concat(g==null?void 0:g.y,"-").concat(g==null?void 0:g.value,"-").concat(y)}),l?k.createElement(cxe,{shape:a,activeBar:l,baseProps:i,entry:g,index:y,dataKey:o}):k.createElement(fxe,{shape:a,baseProps:i,entry:g,index:y,dataKey:o})))):null}function hxe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:s,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:c}=e,f=n.current,d=a1(e,"recharts-bar-"),[h,p]=k.useState(!1),m=!h,g=k.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),y=k.useCallback(()=>{typeof c=="function"&&c(),p(!0)},[c]);return k.createElement(uxe,{showLabels:m,rects:r},k.createElement(i1,{animationId:d,begin:a,duration:o,isActive:i,easing:l,onAnimationEnd:g,onAnimationStart:y,key:d},v=>{var b=v===1?r:r==null?void 0:r.map((x,w)=>{var C=f&&f[w];if(C)return Vs(Vs({},x),{},{x:nr(C.x,x.x,v),y:nr(C.y,x.y,v),width:nr(C.width,x.width,v),height:nr(C.height,x.height,v)});if(s==="horizontal"){var E=nr(0,x.height,v);return Vs(Vs({},x),{},{y:x.y+x.height-E,height:E})}var A=nr(0,x.width,v);return Vs(Vs({},x),{},{width:A})});return v>0&&(n.current=b??null),b==null?null:k.createElement(ws,null,k.createElement(dxe,{props:e,data:b}))}),k.createElement(r_,{label:e.label}),e.children)}function pxe(t){var e=k.useRef(null);return k.createElement(hxe,{previousRectanglesRef:e,props:t})}var KH=0,mxe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:En(t,e)}};class gxe extends k.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:s,xAxisId:i,yAxisId:a,needClip:o,background:l,id:u}=this.props;if(e||n==null)return null;var c=Ft("recharts-bar",s),f=u;return k.createElement(ws,{className:c,id:u},o&&k.createElement("defs",null,k.createElement(qH,{clipPathId:f,xAxisId:i,yAxisId:a})),k.createElement(ws,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},k.createElement(lxe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),k.createElement(pxe,this.props)))}}var yxe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ic.isSsr,legendType:"rect",minPointSize:KH,xAxisId:0,yAxisId:0};function vxe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:c}=t,{needClip:f}=g_(e,n),d=i3(),h=Ni(),p=k$(t.children,v1),m=it(v=>Hxe(v,e,n,h,t.id,p));if(d!=="vertical"&&d!=="horizontal")return null;var g,y=m==null?void 0:m[0];return y==null||y.height==null||y.width==null?g=0:g=d==="vertical"?y.height/2:y.width/2,k.createElement(HH,{xAxisId:e,yAxisId:n,data:m,dataPointFormatter:mxe,errorBarOffset:g},k.createElement(gxe,dc({},t,{layout:d,needClip:f,data:m,xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:c})))}function bxe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:s,bandSize:i,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:c,displayedData:f,offset:d,cells:h,parentViewBox:p}=t,m=e==="horizontal"?o:a,g=c?m.scale.domain():null,y=ihe({numericAxis:m});return f.map((v,b)=>{var x,w,C,E,A,O;c?x=Jde(c[b],g):(x=En(v,n),Array.isArray(x)||(x=[y,x]));var R=W2e(r,KH)(x[1],b);if(e==="horizontal"){var F,[z,j]=[o.scale(x[0]),o.scale(x[1])];w=aM({axis:a,ticks:l,bandSize:i,offset:s.offset,entry:v,index:b}),C=(F=j??z)!==null&&F!==void 0?F:void 0,E=s.size;var H=z-j;if(A=Ji(H)?0:H,O={x:w,y:d.top,width:E,height:d.height},Math.abs(R)>0&&Math.abs(A)<Math.abs(R)){var J=rs(A||R)*(Math.abs(R)-Math.abs(A));C-=J,A+=J}}else{var[U,Y]=[a.scale(x[0]),a.scale(x[1])];if(w=U,C=aM({axis:o,ticks:u,bandSize:i,offset:s.offset,entry:v,index:b}),E=Y-U,A=s.size,O={x:d.left,y:C,width:d.width,height:A},Math.abs(R)>0&&Math.abs(E)<Math.abs(R)){var Q=rs(E||R)*(Math.abs(R)-Math.abs(E));E+=Q}}if(w==null||C==null||E==null||A==null)return null;var se=Vs(Vs({},v),{},{x:w,y:C,width:E,height:A,value:c?x:x[1],payload:v,background:O,tooltipPosition:{x:w+E/2,y:C+A/2},parentViewBox:p},h&&h[b]&&h[b].props);return se}).filter(Boolean)}function xxe(t){var e=Ts(t,yxe),n=Ni();return k.createElement(d_,{id:e.id,type:"bar"},r=>k.createElement(k.Fragment,null,k.createElement(BH,{legendPayload:axe(e)}),k.createElement(f_,{fn:oxe,args:e}),k.createElement(UH,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:she(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),k.createElement(vxe,dc({},e,{id:r}))))}var XH=k.memo(xxe);XH.displayName="Bar";function i8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i8(Object(n),!0).forEach(function(r){wxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wxe(t,e,n){return(e=Sxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sxe(t){var e=Txe(t,"string");return typeof e=="symbol"?e:e+""}function Txe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cxe=(t,e)=>e,Exe=(t,e,n)=>n,kxe=(t,e,n,r)=>r,Nxe=(t,e,n,r,s)=>s,b1=de([y3,Nxe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Axe=de([b1],t=>t==null?void 0:t.maxBarSize),$xe=(t,e,n,r,s,i)=>i,a8=(t,e,n)=>{var r=n??t;if(!Wn(r))return Rs(r,e,0)},Ixe=de([Xt,y3,Cxe,Exe,kxe],(t,e,n,r,s)=>e.filter(i=>t==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),_xe=(t,e,n,r)=>{var s=Xt(t);return s==="horizontal"?kk(t,"yAxis",n,r):kk(t,"xAxis",e,r)},Oxe=(t,e,n)=>{var r=Xt(t);return r==="horizontal"?yF(t,"xAxis",e):yF(t,"yAxis",n)},Dxe=(t,e,n)=>{var r={},s=t.filter(g3),i=t.filter(u=>u.stackId==null),a=s.reduce((u,c)=>(u[c.stackId]||(u[c.stackId]=[]),u[c.stackId].push(c),u),r),o=Object.entries(a).map(u=>{var[c,f]=u,d=f.map(p=>p.dataKey),h=a8(e,n,f[0].barSize);return{stackId:c,dataKeys:d,barSize:h}}),l=i.map(u=>{var c=[u.dataKey].filter(d=>d!=null),f=a8(e,n,u.barSize);return{stackId:void 0,dataKeys:c,barSize:f}});return[...o,...l]},Rxe=de([Ixe,Sye,Oxe],Dxe),Pxe=(t,e,n,r,s)=>{var i,a,o=b1(t,e,n,r,s);if(o!=null){var l=Xt(t),u=nG(t),{maxBarSize:c}=o,f=Wn(c)?u:c,d,h;return l==="horizontal"?(d=uc(t,"xAxis",e,r),h=lc(t,"xAxis",e,r)):(d=uc(t,"yAxis",n,r),h=lc(t,"yAxis",n,r)),(i=(a=ly(d,h,!0))!==null&&a!==void 0?a:f)!==null&&i!==void 0?i:0}},YH=(t,e,n,r)=>{var s=Xt(t),i,a;return s==="horizontal"?(i=uc(t,"xAxis",e,r),a=lc(t,"xAxis",e,r)):(i=uc(t,"yAxis",n,r),a=lc(t,"yAxis",n,r)),ly(i,a)};function Mxe(t,e,n,r,s){var i=r.length;if(!(i<1)){var a=Rs(t,n,0,!0),o,l=[];if(ta(r[0].barSize)){var u=!1,c=n/i,f=r.reduce((y,v)=>y+(v.barSize||0),0);f+=(i-1)*a,f>=n&&(f-=(i-1)*a,a=0),f>=n&&c>0&&(u=!0,c*=.9,f=i*c);var d=(n-f)/2>>0,h={offset:d-a,size:0};o=r.reduce((y,v)=>{var b,x={stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:h.offset+h.size+a,size:u?c:(b=v.barSize)!==null&&b!==void 0?b:0}},w=[...y,x];return h=w[w.length-1].position,w},l)}else{var p=Rs(e,n,0,!0);n-2*p-(i-1)*a<=0&&(a=0);var m=(n-2*p-(i-1)*a)/i;m>1&&(m>>=0);var g=ta(s)?Math.min(m,s):m;o=r.reduce((y,v,b)=>[...y,{stackId:v.stackId,dataKeys:v.dataKeys,position:{offset:p+(m+a)*b+(m-g)/2,size:g}}],l)}return o}}var Fxe=(t,e,n,r,s,i,a)=>{var o=Wn(a)?e:a,l=Mxe(n,r,s!==i?s:i,t,o);return s!==i&&l!=null&&(l=l.map(u=>Vv(Vv({},u),{},{position:Vv(Vv({},u.position),{},{offset:u.position.offset-s/2})}))),l},Lxe=de([Rxe,nG,wye,rG,Pxe,YH,Axe],Fxe),zxe=(t,e,n,r)=>uc(t,"xAxis",e,r),Bxe=(t,e,n,r)=>uc(t,"yAxis",n,r),jxe=(t,e,n,r)=>lc(t,"xAxis",e,r),Uxe=(t,e,n,r)=>lc(t,"yAxis",n,r),Vxe=de([Lxe,b1],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Wxe=(t,e)=>{var n=AI(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var s=t[r];if(s){var{stackedData:i}=s;if(i)return i.find(a=>a.key===n)}}}},Gxe=de([_xe,b1],Wxe),Hxe=de([Ur,q$,zxe,Bxe,jxe,Uxe,Vxe,Xt,d3,YH,Gxe,b1,$xe],(t,e,n,r,s,i,a,o,l,u,c,f,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=l;if(!(f==null||a==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||s==null||i==null||u==null)){var{data:g}=f,y;if(g!=null&&g.length>0?y=g:y=h==null?void 0:h.slice(p,m+1),y!=null)return bxe({layout:o,barSettings:f,pos:a,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,stackedData:c,displayedData:y,offset:t,cells:d})}}),ZH=t=>{var{chartData:e}=t,n=mr(),r=Ni();return k.useEffect(()=>r?()=>{}:(n(kF(e)),()=>{n(kF(void 0))}),[e,n,r]),null},o8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},QH=sa({name:"brush",initialState:o8,reducers:{setBrushSettings(t,e){return e.payload==null?o8:e.payload}}}),{setBrushSettings:cJe}=QH.actions,qxe=QH.reducer;function Kxe(t,e,n){return(e=Xxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xxe(t){var e=Yxe(t,"string");return typeof e=="symbol"?e:e+""}function Yxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class y_{static create(e){return new y_(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],s=n[n.length-1];return r<=s?e>=r&&e<=s:e>=s&&e<=r}}Kxe(y_,"EPS",1e-4);function Zxe(t){return(t%180+180)%180}var Qxe=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Zxe(s),a=i*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},Jxe={dots:[],areas:[],lines:[]},JH=sa({name:"referenceElements",initialState:Jxe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ml(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ml(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ml(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:fJe,removeDot:dJe,addArea:hJe,removeArea:pJe,addLine:mJe,removeLine:gJe}=JH.actions,ewe=JH.reducer,twe=k.createContext(void 0),nwe=t=>{var{children:e}=t,[n]=k.useState("".concat(iy("recharts"),"-clip")),r=p_();if(r==null)return null;var{x:s,y:i,width:a,height:o}=r;return k.createElement(twe.Provider,{value:n},k.createElement("defs",null,k.createElement("clipPath",{id:n},k.createElement("rect",{x:s,y:i,height:o,width:a}))),e)};function dp(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function eq(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function rwe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Qxe(r,n)}function swe(t,e,n){var r=n==="width",{x:s,y:i,width:a,height:o}=t;return e===1?{start:r?s:i,end:r?s+a:i+o}:{start:r?s+a:i+o,end:r?s:i}}function cx(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function iwe(t,e){return eq(t,e+1)}function awe(t,e,n,r,s){for(var i=(r||[]).slice(),{start:a,end:o}=e,l=0,u=1,c=a,f=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:eq(r,u)};var m=l,g,y=()=>(g===void 0&&(g=n(p,m)),g),v=p.coordinate,b=l===0||cx(t,v,y,c,o);b||(l=0,c=a,u+=1),b&&(c=v+t*(y()/2+s),l+=u)},d;u<=i.length;)if(d=f(),d)return d.v;return[]}function l8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l8(Object(n),!0).forEach(function(r){owe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function owe(t,e,n){return(e=lwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lwe(t){var e=uwe(t,"string");return typeof e=="symbol"?e:e+""}function uwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cwe(t,e,n,r,s){for(var i=(r||[]).slice(),a=i.length,{start:o}=e,{end:l}=e,u=function(d){var h=i[d],p,m=()=>(p===void 0&&(p=n(h,d)),p);if(d===a-1){var g=t*(h.coordinate+t*m()/2-l);i[d]=h=ks(ks({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else i[d]=h=ks(ks({},h),{},{tickCoord:h.coordinate});var y=cx(t,h.tickCoord,m,o,l);y&&(l=h.tickCoord-t*(m()/2+s),i[d]=ks(ks({},h),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return i}function fwe(t,e,n,r,s,i){var a=(r||[]).slice(),o=a.length,{start:l,end:u}=e;if(i){var c=r[o-1],f=n(c,o-1),d=t*(c.coordinate+t*f/2-u);a[o-1]=c=ks(ks({},c),{},{tickCoord:d>0?c.coordinate-d*t:c.coordinate});var h=cx(t,c.tickCoord,()=>f,l,u);h&&(u=c.tickCoord-t*(f/2+s),a[o-1]=ks(ks({},c),{},{isShow:!0}))}for(var p=i?o-1:o,m=function(v){var b=a[v],x,w=()=>(x===void 0&&(x=n(b,v)),x);if(v===0){var C=t*(b.coordinate-t*w()/2-l);a[v]=b=ks(ks({},b),{},{tickCoord:C<0?b.coordinate-C*t:b.coordinate})}else a[v]=b=ks(ks({},b),{},{tickCoord:b.coordinate});var E=cx(t,b.tickCoord,w,l,u);E&&(l=b.tickCoord+t*(w()/2+s),a[v]=ks(ks({},b),{},{isShow:!0}))},g=0;g<p;g++)m(g);return a}function v_(t,e,n){var{tick:r,ticks:s,viewBox:i,minTickGap:a,orientation:o,interval:l,tickFormatter:u,unit:c,angle:f}=t;if(!s||!s.length||!r)return[];if(ct(l)||Ic.isSsr){var d;return(d=iwe(s,ct(l)?l:0))!==null&&d!==void 0?d:[]}var h=[],p=o==="top"||o==="bottom"?"width":"height",m=c&&p==="width"?Lg(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=(b,x)=>{var w=typeof u=="function"?u(b.value,x):b.value;return p==="width"?rwe(Lg(w,{fontSize:e,letterSpacing:n}),m,f):Lg(w,{fontSize:e,letterSpacing:n})[p]},y=s.length>=2?rs(s[1].coordinate-s[0].coordinate):1,v=swe(i,y,p);return l==="equidistantPreserveStart"?awe(y,v,g,s,a):(l==="preserveStart"||l==="preserveStartEnd"?h=fwe(y,v,g,s,a,l==="preserveStartEnd"):h=cwe(y,v,g,s,a),h.filter(b=>b.isShow))}var dwe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=t,a=0;if(e){e.forEach(c=>{if(c){var f=c.getBoundingClientRect();f.width>a&&(a=f.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+i,u=a+l+o+(n?r:0);return Math.round(u)}return 0},hwe=["axisLine","width","height","className","hide","ticks"],pwe=["viewBox"],mwe=["viewBox"];function Rk(t,e){if(t==null)return{};var n,r,s=gwe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function gwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(null,arguments)}function u8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(n),!0).forEach(function(r){ywe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ywe(t,e,n){return(e=vwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vwe(t){var e=bwe(t,"string");return typeof e=="symbol"?e:e+""}function bwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b_={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function xwe(t){var{x:e,y:n,width:r,height:s,orientation:i,mirror:a,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var u=Pr(Pr(Pr({},l),Qn(o,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!a||i==="bottom"&&a);u=Pr(Pr({},u),{},{x1:e,y1:n+c*s,x2:e+r,y2:n+c*s})}else{var f=+(i==="left"&&!a||i==="right"&&a);u=Pr(Pr({},u),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+s})}return k.createElement("line",ed({},u,{className:Ft("recharts-cartesian-axis-line",Yf(o,"className"))}))}function wwe(t,e,n,r,s,i,a,o,l){var u,c,f,d,h,p,m=o?-1:1,g=t.tickSize||a,y=ct(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":u=c=t.coordinate,d=n+ +!o*s,f=d-m*g,p=f-m*l,h=y;break;case"left":f=d=t.coordinate,c=e+ +!o*r,u=c-m*g,h=u-m*l,p=y;break;case"right":f=d=t.coordinate,c=e+ +o*r,u=c+m*g,h=u+m*l,p=y;break;default:u=c=t.coordinate,d=n+ +o*s,f=d+m*g,p=f+m*l,h=y;break}return{line:{x1:u,y1:f,x2:c,y2:d},tick:{x:h,y:p}}}function Swe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Twe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Cwe(t){var{option:e,tickProps:n,value:r}=t,s,i=Ft(n.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(e))s=k.cloneElement(e,Pr(Pr({},n),{},{className:i}));else if(typeof e=="function")s=e(Pr(Pr({},n),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Ft(a,e==null?void 0:e.className)),s=k.createElement(T3,ed({},n,{className:a}),r)}return s}function Ewe(t){var{ticks:e=[],tick:n,tickLine:r,stroke:s,tickFormatter:i,unit:a,padding:o,tickTextProps:l,orientation:u,mirror:c,x:f,y:d,width:h,height:p,tickSize:m,tickMargin:g,fontSize:y,letterSpacing:v,getTicksConfig:b,events:x}=t,w=v_(Pr(Pr({},b),{},{ticks:e}),y,v),C=Swe(u,c),E=Twe(u,c),A=ol(b),O=Qn(n,!1),R=Pr(Pr({},A),{},{fill:"none"},Qn(r,!1)),F=w.map((z,j)=>{var{line:H,tick:J}=wwe(z,f,d,h,p,u,m,c,g),U=Pr(Pr(Pr(Pr({textAnchor:C,verticalAnchor:E},A),{},{stroke:"none",fill:s},O),J),{},{index:j,payload:z,visibleTicksCount:w.length,tickFormatter:i,padding:o},l);return k.createElement(ws,ed({className:"recharts-cartesian-axis-tick",key:"tick-".concat(z.value,"-").concat(z.coordinate,"-").concat(z.tickCoord)},Vw(x,z,j)),r&&k.createElement("line",ed({},R,H,{className:Ft("recharts-cartesian-axis-tick-line",Yf(r,"className"))})),n&&k.createElement(Cwe,{option:n,tickProps:U,value:"".concat(typeof i=="function"?i(z.value,j):z.value).concat(a||"")}))});return F.length>0?k.createElement("g",{className:"recharts-cartesian-axis-ticks"},F):null}var kwe=k.forwardRef((t,e)=>{var{axisLine:n,width:r,height:s,className:i,hide:a,ticks:o}=t,l=Rk(t,hwe),[u,c]=k.useState(""),[f,d]=k.useState(""),h=k.useRef([]);k.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var m;return dwe({ticks:h.current,label:(m=t.labelRef)===null||m===void 0?void 0:m.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=k.useCallback(m=>{if(m){var g=m.getElementsByClassName("recharts-cartesian-axis-tick-value");h.current=Array.from(g);var y=g[0];if(y){var v=window.getComputedStyle(y),b=v.fontSize,x=v.letterSpacing;(b!==u||x!==f)&&(c(b),d(x))}}},[u,f]);return a||r!=null&&r<=0||s!=null&&s<=0?null:k.createElement(ws,{className:Ft("recharts-cartesian-axis",i),ref:p},k.createElement(xwe,{x:t.x,y:t.y,width:r,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ol(t)}),k.createElement(Ewe,{ticks:o,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:t,events:l}),k.createElement(Fve,{x:t.x,y:t.y,width:t.width,height:t.height},k.createElement(qve,{label:t.label}),t.children))}),Nwe=k.memo(kwe,(t,e)=>{var{viewBox:n}=t,r=Rk(t,pwe),{viewBox:s}=e,i=Rk(e,mwe);return dp(n,s)&&dp(r,i)}),x_=k.forwardRef((t,e)=>{var n=Ts(t,b_);return k.createElement(Nwe,ed({},n,{ref:e}))});x_.displayName="CartesianAxis";var Awe=["x1","y1","x2","y2","key"],$we=["offset"],Iwe=["xAxisId","yAxisId"],_we=["xAxisId","yAxisId"];function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function As(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(r){Owe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Owe(t,e,n){return(e=Dwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dwe(t){var e=Rwe(t,"string");return typeof e=="symbol"?e:e+""}function Rwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tf.apply(null,arguments)}function fx(t,e){if(t==null)return{};var n,r,s=Pwe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Pwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mwe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:a,ry:o}=t;return k.createElement("rect",{x:r,y:s,ry:o,width:i,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function tq(t,e){var n;if(k.isValidElement(t))n=k.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:s,x2:i,y2:a,key:o}=e,l=fx(e,Awe),u=ol(l),{offset:c}=u,f=fx(u,$we);n=k.createElement("line",Tf({},f,{x1:r,y1:s,x2:i,y2:a,fill:"none",key:o}))}return n}function Fwe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=fx(t,Iwe),l=s.map((u,c)=>{var f=As(As({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(c),index:c});return tq(r,f)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Lwe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=fx(t,_we),l=s.map((u,c)=>{var f=As(As({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(c),index:c});return tq(r,f)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function zwe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:i,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,d)=>f-d);s!==u[0]&&u.unshift(0);var c=u.map((f,d)=>{var h=!u[d+1],p=h?s+a-f:u[d+1]-f;if(p<=0)return null;var m=d%e.length;return k.createElement("rect",{key:"react-".concat(d),y:f,x:r,height:p,width:i,stroke:"none",fill:e[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Bwe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,d)=>f-d);s!==u[0]&&u.unshift(0);var c=u.map((f,d)=>{var h=!u[d+1],p=h?s+a-f:u[d+1]-f;if(p<=0)return null;var m=d%n.length;return k.createElement("rect",{key:"react-".concat(d),x:f,y:i,width:p,height:o,stroke:"none",fill:n[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var jwe=(t,e)=>{var{xAxis:n,width:r,height:s,offset:i}=t;return LV(v_(As(As(As({},b_),n),{},{ticks:zV(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,e)},Uwe=(t,e)=>{var{yAxis:n,width:r,height:s,offset:i}=t;return LV(v_(As(As(As({},b_),n),{},{ticks:zV(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,e)},Vwe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Pk(t){var e=WV(),n=GV(),r=VV(),s=As(As({},Ts(t,Vwe)),{},{x:ct(t.x)?t.x:r.left,y:ct(t.y)?t.y:r.top,width:ct(t.width)?t.width:r.width,height:ct(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:a,x:o,y:l,width:u,height:c,syncWithTicks:f,horizontalValues:d,verticalValues:h}=s,p=Ni(),m=it(O=>vF(O,"xAxis",i,p)),g=it(O=>vF(O,"yAxis",a,p));if(!ct(u)||u<=0||!ct(c)||c<=0||!ct(o)||o!==+o||!ct(l)||l!==+l)return null;var y=s.verticalCoordinatesGenerator||jwe,v=s.horizontalCoordinatesGenerator||Uwe,{horizontalPoints:b,verticalPoints:x}=s;if((!b||!b.length)&&typeof v=="function"){var w=d&&d.length,C=v({yAxis:g?As(As({},g),{},{ticks:w?d:g.ticks}):void 0,width:e,height:n,offset:r},w?!0:f);Fg(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(b=C)}if((!x||!x.length)&&typeof y=="function"){var E=h&&h.length,A=y({xAxis:m?As(As({},m),{},{ticks:E?h:m.ticks}):void 0,width:e,height:n,offset:r},E?!0:f);Fg(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(x=A)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(Mwe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),k.createElement(zwe,Tf({},s,{horizontalPoints:b})),k.createElement(Bwe,Tf({},s,{verticalPoints:x})),k.createElement(Fwe,Tf({},s,{offset:r,horizontalPoints:b,xAxis:m,yAxis:g})),k.createElement(Lwe,Tf({},s,{offset:r,verticalPoints:x,xAxis:m,yAxis:g})))}Pk.displayName="CartesianGrid";var nq=(t,e,n,r)=>uc(t,"xAxis",e,r),rq=(t,e,n,r)=>lc(t,"xAxis",e,r),sq=(t,e,n,r)=>uc(t,"yAxis",n,r),iq=(t,e,n,r)=>lc(t,"yAxis",n,r),Wwe=de([Xt,nq,sq,rq,iq],(t,e,n,r,s)=>$c(t,"xAxis")?ly(e,r,!1):ly(n,s,!1)),Gwe=(t,e,n,r,s)=>s;function Hwe(t){return t.type==="line"}var qwe=de([y3,Gwe],(t,e)=>t.filter(Hwe).find(n=>n.id===e)),Kwe=de([Xt,nq,sq,rq,iq,qwe,Wwe,d3],(t,e,n,r,s,i,a,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:c}=o;if(!(i==null||e==null||n==null||r==null||s==null||r.length===0||s.length===0||a==null)){var{dataKey:f,data:d}=i,h;if(d!=null&&d.length>0?h=d:h=l==null?void 0:l.slice(u,c+1),h!=null)return g3e({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataKey:f,bandSize:a,displayedData:h})}}),Xwe=["id"],Ywe=["type","layout","connectNulls","needClip"],Zwe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function f8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f8(Object(n),!0).forEach(function(r){Qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qwe(t,e,n){return(e=Jwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jwe(t){var e=e3e(t,"string");return typeof e=="symbol"?e:e+""}function e3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w_(t,e){if(t==null)return{};var n,r,s=t3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function t3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(null,arguments)}var n3e=t=>{var{dataKey:e,name:n,stroke:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:zp(n,e),payload:t}]};function r3e(t){var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:o,unit:l}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:zp(a,e),hide:o,type:t.tooltipType,color:t.stroke,unit:l}}}var aq=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function s3e(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],s=0;s<e;++s)r=[...r,...n];return r}var i3e=(t,e,n)=>{var r=n.reduce((f,d)=>f+d);if(!r)return aq(e,t);for(var s=Math.floor(t/r),i=t%r,a=e-t,o=[],l=0,u=0;l<n.length;u+=n[l],++l)if(u+n[l]>i){o=[...n.slice(0,l),i-u];break}var c=o.length%2===0?[0,a]:[a];return[...s3e(n,s),...o,...c].map(f=>"".concat(f,"px")).join(", ")};function a3e(t,e){var n;if(k.isValidElement(t))n=k.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=Ft("recharts-line-dot",typeof t!="boolean"?t.className:"");n=k.createElement(OH,td({},e,{className:r}))}return n}function o3e(t,e){return t==null?!1:e?!0:t.length===1}function l3e(t){var{clipPathId:e,points:n,props:r}=t,{dot:s,dataKey:i,needClip:a}=r;if(!o3e(n,s))return null;var{id:o}=r,l=w_(r,Xwe),u=bU(s),c=ol(l),f=Qn(s,!0),d=n.map((p,m)=>{var g=Ui(Ui(Ui({key:"dot-".concat(m),r:3},c),f),{},{index:m,cx:p.x,cy:p.y,dataKey:i,value:p.value,payload:p.payload,points:n});return a3e(s,g)}),h={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(e,")"):void 0};return k.createElement(ws,td({className:"recharts-line-dots",key:"dots"},h),d)}function u3e(t){var{showLabels:e,children:n,points:r}=t,s=k.useMemo(()=>r==null?void 0:r.map(i=>{var a={x:i.x,y:i.y,width:0,height:0};return Ui(Ui({},a),{},{value:i.value,payload:i.payload,viewBox:a,parentViewBox:void 0,fill:void 0})}),[r]);return k.createElement(IH,{value:e?s:null},n)}function d8(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:s,props:i}=t,{type:a,layout:o,connectNulls:l,needClip:u}=i,c=w_(i,Ywe),f=Ui(Ui({},Qn(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:r,type:a,layout:o,connectNulls:l,strokeDasharray:s??i.strokeDasharray});return k.createElement(k.Fragment,null,(r==null?void 0:r.length)>1&&k.createElement(X$,td({},f,{pathRef:n})),k.createElement(l3e,{points:r,clipPathId:e,props:i}))}function c3e(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function f3e(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:s,longestAnimatedLengthRef:i}=t,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:c,animationEasing:f,animateNewValues:d,width:h,height:p,onAnimationEnd:m,onAnimationStart:g}=n,y=s.current,v=a1(n,"recharts-line-"),[b,x]=k.useState(!1),w=!b,C=k.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),E=k.useCallback(()=>{typeof g=="function"&&g(),x(!0)},[g]),A=c3e(r.current),O=i.current;return k.createElement(u3e,{points:a,showLabels:w},n.children,k.createElement(i1,{animationId:v,begin:u,duration:c,isActive:l,easing:f,onAnimationEnd:C,onAnimationStart:E,key:v},R=>{var F=nr(O,A+O,R),z=Math.min(F,A),j;if(l)if(o){var H="".concat(o).split(/[,\s]+/gim).map(Y=>parseFloat(Y));j=i3e(z,A,H)}else j=aq(A,z);else j=o==null?void 0:String(o);if(y){var J=y.length/a.length,U=R===1?a:a.map((Y,Q)=>{var se=Math.floor(Q*J);if(y[se]){var he=y[se];return Ui(Ui({},Y),{},{x:nr(he.x,Y.x,R),y:nr(he.y,Y.y,R)})}return d?Ui(Ui({},Y),{},{x:nr(h*2,Y.x,R),y:nr(p/2,Y.y,R)}):Ui(Ui({},Y),{},{x:Y.x,y:Y.y})});return s.current=U,k.createElement(d8,{props:n,points:U,clipPathId:e,pathRef:r,strokeDasharray:j})}return R>0&&A>0&&(s.current=a,i.current=z),k.createElement(d8,{props:n,points:a,clipPathId:e,pathRef:r,strokeDasharray:j})}),k.createElement(r_,{label:n.label}))}function d3e(t){var{clipPathId:e,props:n}=t,r=k.useRef(null),s=k.useRef(0),i=k.useRef(null);return k.createElement(f3e,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:s,pathRef:i})}var h3e=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:En(t.payload,e)});class p3e extends k.Component{render(){var e,{hide:n,dot:r,points:s,className:i,xAxisId:a,yAxisId:o,top:l,left:u,width:c,height:f,id:d,needClip:h}=this.props;if(n)return null;var p=Ft("recharts-line",i),m=d,{r:g=3,strokeWidth:y=2}=(e=Qn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},v=bU(r),b=g*2+y;return k.createElement(k.Fragment,null,k.createElement(ws,{className:p},h&&k.createElement("defs",null,k.createElement(qH,{clipPathId:m,xAxisId:a,yAxisId:o}),!v&&k.createElement("clipPath",{id:"clipPath-dots-".concat(m)},k.createElement("rect",{x:u-b/2,y:l-b/2,width:c+b,height:f+b}))),k.createElement(HH,{xAxisId:a,yAxisId:o,data:s,dataPointFormatter:h3e,errorBarOffset:0},k.createElement(d3e,{props:this.props,clipPathId:m}))),k.createElement(R2e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var oq={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ic.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function m3e(t){var e=Ts(t,oq),{activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:o,dot:l,hide:u,isAnimationActive:c,label:f,legendType:d,xAxisId:h,yAxisId:p,id:m}=e,g=w_(e,Zwe),{needClip:y}=g_(h,p),v=p_(),b=i3(),x=Ni(),w=it(R=>Kwe(R,h,p,x,m));if(b!=="horizontal"&&b!=="vertical"||w==null||v==null)return null;var{height:C,width:E,x:A,y:O}=v;return k.createElement(p3e,td({},g,{id:m,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,isAnimationActive:c,hide:u,label:f,legendType:d,xAxisId:h,yAxisId:p,points:w,layout:b,height:C,width:E,left:A,top:O,needClip:y}))}function g3e(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,dataKey:a,bandSize:o,displayedData:l}=t;return l.map((u,c)=>{var f=En(u,a);if(e==="horizontal"){var d=iM({axis:n,ticks:s,bandSize:o,entry:u,index:c}),h=Wn(f)?null:r.scale(f);return{x:d,y:h,value:f,payload:u}}var p=Wn(f)?null:n.scale(f),m=iM({axis:r,ticks:i,bandSize:o,entry:u,index:c});return p==null||m==null?null:{x:p,y:m,value:f,payload:u}}).filter(Boolean)}function y3e(t){var e=Ts(t,oq),n=Ni();return k.createElement(d_,{id:e.id,type:"line"},r=>k.createElement(k.Fragment,null,k.createElement(BH,{legendPayload:n3e(e)}),k.createElement(f_,{fn:r3e,args:e}),k.createElement(UH,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),k.createElement(m3e,td({},e,{id:r}))))}var lq=k.memo(y3e);lq.displayName="Line";var v3e=["dangerouslySetInnerHTML","ticks"],b3e=["id"],x3e=["domain"],w3e=["domain"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mk.apply(null,arguments)}function dx(t,e){if(t==null)return{};var n,r,s=S3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function S3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function T3e(t){var e=mr();return k.useEffect(()=>(e(w2e(t)),()=>{e(S2e(t))}),[t,e]),null}var C3e=t=>{var{xAxisId:e,className:n}=t,r=it(q$),s=Ni(),i="xAxis",a=it(g=>Hp(g,i,e,s)),o=it(g=>zG(g,i,e,s)),l=it(g=>PG(g,e)),u=it(g=>h1e(g,e)),c=it(g=>dG(g,e));if(l==null||u==null||c==null)return null;var{dangerouslySetInnerHTML:f,ticks:d}=t,h=dx(t,v3e),{id:p}=c,m=dx(c,b3e);return k.createElement(x_,Mk({},h,m,{scale:a,x:u.x,y:u.y,width:l.width,height:l.height,className:Ft("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o}))},E3e={allowDataOverflow:Fi.allowDataOverflow,allowDecimals:Fi.allowDecimals,allowDuplicatedCategory:Fi.allowDuplicatedCategory,height:Fi.height,hide:!1,mirror:Fi.mirror,orientation:Fi.orientation,padding:Fi.padding,reversed:Fi.reversed,scale:Fi.scale,tickCount:Fi.tickCount,type:Fi.type,xAxisId:0},k3e=t=>{var e,n,r,s,i,a=Ts(t,E3e);return k.createElement(k.Fragment,null,k.createElement(T3e,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.xAxisId,scale:a.scale,type:a.type,padding:a.padding,allowDataOverflow:a.allowDataOverflow,domain:a.domain,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,includeHidden:(n=a.includeHidden)!==null&&n!==void 0?n:!1,reversed:a.reversed,ticks:a.ticks,height:a.height,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(s=a.minTickGap)!==null&&s!==void 0?s:5,tick:(i=a.tick)!==null&&i!==void 0?i:!0,tickFormatter:a.tickFormatter}),k.createElement(C3e,a))},N3e=(t,e)=>{var{domain:n}=t,r=dx(t,x3e),{domain:s}=e,i=dx(e,w3e);return dp(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(s)&&s.length===2?n[0]===s[0]&&n[1]===s[1]:dp({domain:n},{domain:s}):!1},Fk=k.memo(k3e,N3e);Fk.displayName="XAxis";var A3e=["dangerouslySetInnerHTML","ticks"],$3e=["id"],I3e=["domain"],_3e=["domain"];function Lk(){return Lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lk.apply(null,arguments)}function hx(t,e){if(t==null)return{};var n,r,s=O3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function O3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D3e(t){var e=mr();return k.useEffect(()=>(e(T2e(t)),()=>{e(C2e(t))}),[t,e]),null}var R3e=t=>{var{yAxisId:e,className:n,width:r,label:s}=t,i=k.useRef(null),a=k.useRef(null),o=it(q$),l=Ni(),u=mr(),c="yAxis",f=it(w=>Hp(w,c,e,l)),d=it(w=>MG(w,e)),h=it(w=>m1e(w,e)),p=it(w=>zG(w,c,e,l)),m=it(w=>hG(w,e));if(k.useLayoutEffect(()=>{if(!(r!=="auto"||!d||n_(s)||k.isValidElement(s)||m==null)){var w=i.current;if(w){var C=w.getCalculatedWidth();Math.round(d.width)!==Math.round(C)&&u(E2e({id:e,width:C}))}}},[p,d,u,s,e,r,m]),d==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=t,v=hx(t,A3e),{id:b}=m,x=hx(m,$3e);return k.createElement(x_,Lk({},v,x,{ref:i,labelRef:a,scale:f,x:h.x,y:h.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:d.width,height:d.height,className:Ft("recharts-".concat(c," ").concat(c),n),viewBox:o,ticks:p}))},P3e={allowDataOverflow:Li.allowDataOverflow,allowDecimals:Li.allowDecimals,allowDuplicatedCategory:Li.allowDuplicatedCategory,hide:!1,mirror:Li.mirror,orientation:Li.orientation,padding:Li.padding,reversed:Li.reversed,scale:Li.scale,tickCount:Li.tickCount,type:Li.type,width:Li.width,yAxisId:0},M3e=t=>{var e,n,r,s,i,a=Ts(t,P3e);return k.createElement(k.Fragment,null,k.createElement(D3e,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.yAxisId,scale:a.scale,type:a.type,domain:a.domain,allowDataOverflow:a.allowDataOverflow,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,padding:a.padding,includeHidden:(n=a.includeHidden)!==null&&n!==void 0?n:!1,reversed:a.reversed,ticks:a.ticks,width:a.width,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(s=a.minTickGap)!==null&&s!==void 0?s:5,tick:(i=a.tick)!==null&&i!==void 0?i:!0,tickFormatter:a.tickFormatter}),k.createElement(R3e,a))},F3e=(t,e)=>{var{domain:n}=t,r=hx(t,I3e),{domain:s}=e,i=hx(e,_3e);return dp(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(s)&&s.length===2?n[0]===s[0]&&n[1]===s[1]:dp({domain:n},{domain:s}):!1},zk=k.memo(M3e,F3e);zk.displayName="YAxis";var L3e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1=k;function z3e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var B3e=typeof Object.is=="function"?Object.is:z3e,j3e=x1.useSyncExternalStore,U3e=x1.useRef,V3e=x1.useEffect,W3e=x1.useMemo,G3e=x1.useDebugValue;L3e.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=U3e(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=W3e(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),s!==void 0&&a.hasValue){var p=a.value;if(s(p,h))return f=p}return f=h}if(p=f,B3e(c,h))return p;var m=r(h);return s!==void 0&&s(p,m)?(c=h,p):(c=h,f=m)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,s]);var o=j3e(t,i[0],i[1]);return V3e(function(){a.hasValue=!0,a.value=o},[o]),G3e(o),o};function H3e(t){t()}function q3e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){H3e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var h8={notify(){},get:()=>[]};function K3e(t,e){let n,r=h8,s=0,i=!1;function a(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function o(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return i}function c(){s++,n||(n=t.subscribe(l),r=q3e())}function f(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=h8)}function d(){i||(i=!0,c())}function h(){i&&(i=!1,f())}const p={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var X3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y3e=X3e(),Z3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Q3e=Z3e(),J3e=()=>Y3e||Q3e?k.useLayoutEffect:k.useEffect,eSe=J3e(),KT=Symbol.for("react-redux-context"),XT=typeof globalThis<"u"?globalThis:{};function tSe(){if(!k.createContext)return{};const t=XT[KT]??(XT[KT]=new Map);let e=t.get(k.createContext);return e||(e=k.createContext(null),t.set(k.createContext,e)),e}var nSe=tSe();function rSe(t){const{children:e,context:n,serverState:r,store:s}=t,i=k.useMemo(()=>{const l=K3e(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),a=k.useMemo(()=>s.getState(),[s]);eSe(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const o=n||nSe;return k.createElement(o.Provider,{value:i},e)}var sSe=rSe,iSe=(t,e)=>e,S_=de([iSe,Xt,uG,Wr,eH,ou,x0e,Ur],E0e),T_=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},uq=La("mouseClick"),cq=r1();cq.startListening({actionCreator:uq,effect:(t,e)=>{var n=t.payload,r=S_(e.getState(),T_(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(A1e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Bk=La("mouseMove"),fq=r1();fq.startListening({actionCreator:Bk,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=HI(r,r.tooltip.settings.shared),i=S_(r,T_(n));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?e.dispatch(qG({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(HG()))}});var p8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},dq=sa({name:"rootProps",initialState:p8,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:p8.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),aSe=dq.reducer,{updateOptions:oSe}=dq.actions,hq=sa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:lSe}=hq.actions,uSe=hq.reducer,pq=La("keyDown"),mq=La("focus"),C_=r1();C_.startListening({actionCreator:pq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=Number(qI(s,Kp(n))),o=ou(n);if(i==="Enter"){var l=ix(n,"axis","hover",String(s.index));e.dispatch(Ak({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var u=b1e(n),c=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,d=a+f*c;if(!(o==null||d>=o.length||d<0)){var h=ix(n,"axis","hover",String(d));e.dispatch(Ak({active:!0,activeIndex:d.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});C_.startListening({actionCreator:mq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",a=ix(n,"axis","hover",String(i));e.dispatch(Ak({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:a}))}}}});var da=La("externalEvent"),gq=r1();gq.startListening({actionCreator:da,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:c0e(n),activeDataKey:sH(n),activeIndex:cc(n),activeLabel:rH(n),activeTooltipIndex:cc(n),isTooltipActive:f0e(n)};t.payload.handler(r,t.payload.reactEvent)}}});var cSe=de([qp],t=>t.tooltipItemPayloads),fSe=de([cSe,g1,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var s=t.find(o=>o.settings.dataKey===r);if(s!=null){var{positions:i}=s;if(i!=null){var a=e(i,n);return a}}}),yq=La("touchMove"),vq=r1();vq.startListening({actionCreator:yq,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=HI(r,r.tooltip.settings.shared);if(s==="axis"){var i=S_(r,T_({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(qG({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var a,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(jV),c=(a=l.getAttribute(UV))!==null&&a!==void 0?a:void 0,f=fSe(e.getState(),u,c);e.dispatch(GG({activeDataKey:c,activeIndex:u,activeCoordinate:f}))}}});var dSe=hV({brush:qxe,cartesianAxis:k2e,chartData:B0e,errorBars:H2e,graphicalItems:Gbe,layout:Fde,legend:Ehe,options:P0e,polarAxis:cbe,polarOptions:uSe,referenceElements:ewe,rootProps:aSe,tooltip:$1e}),hSe=function(e){return lde({reducer:dSe,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([cq.middleware,fq.middleware,C_.middleware,gq.middleware,vq.middleware]),devTools:Ic.devToolsEnabled})};function bq(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=Ni(),i=k.useRef(null);if(s)return n;i.current==null&&(i.current=hSe(e));var a=z$;return k.createElement(sSe,{context:a,store:i.current},n)}function xq(t){var{layout:e,width:n,height:r,margin:s}=t,i=mr(),a=Ni();return k.useEffect(()=>{a||(i(Rde(e)),i(Pde({width:n,height:r})),i(Dde(s)))},[i,a,e,n,r,s]),null}function wq(t){var e=mr();return k.useEffect(()=>{e(oSe(t))},[e,t]),null}var pSe=["children"];function mSe(t,e){if(t==null)return{};var n,r,s=gSe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function gSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(null,arguments)}var ySe={width:"100%",height:"100%"},vSe=k.forwardRef((t,e)=>{var n=WV(),r=GV(),s=XV();if(!op(n)||!op(r))return null;var{children:i,otherAttributes:a,title:o,desc:l}=t,u,c;return typeof a.tabIndex=="number"?u=a.tabIndex:u=s?0:void 0,typeof a.role=="string"?c=a.role:c=s?"application":void 0,k.createElement(xU,px({},a,{title:o,desc:l,role:c,tabIndex:u,width:n,height:r,style:ySe,ref:e}),i)}),bSe=t=>{var{children:e}=t,n=it(s3);if(!n)return null;var{width:r,height:s,y:i,x:a}=n;return k.createElement(xU,{width:r,height:s,x:a,y:i},e)},m8=k.forwardRef((t,e)=>{var{children:n}=t,r=mSe(t,pSe),s=Ni();return s?k.createElement(bSe,null,n):k.createElement(vSe,px({ref:e},r),n)});function xSe(){var t=mr(),[e,n]=k.useState(null),r=it(dhe);return k.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;ta(i)&&i!==r&&t(Mde(i))}},[e,t,r]),n}function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(r){SSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SSe(t,e,n){return(e=TSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TSe(t){var e=CSe(t,"string");return typeof e=="symbol"?e:e+""}function CSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ESe=k.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:c,onMouseMove:f,onMouseUp:d,onTouchEnd:h,onTouchMove:p,onTouchStart:m,style:g,width:y}=t,v=mr(),[b,x]=k.useState(null),[w,C]=k.useState(null);X0e();var E=xSe(),A=k.useCallback(ue=>{E(ue),typeof e=="function"&&e(ue),x(ue),C(ue)},[E,e,x,C]),O=k.useCallback(ue=>{v(uq(ue)),v(da({handler:i,reactEvent:ue}))},[v,i]),R=k.useCallback(ue=>{v(Bk(ue)),v(da({handler:u,reactEvent:ue}))},[v,u]),F=k.useCallback(ue=>{v(HG()),v(da({handler:c,reactEvent:ue}))},[v,c]),z=k.useCallback(ue=>{v(Bk(ue)),v(da({handler:f,reactEvent:ue}))},[v,f]),j=k.useCallback(()=>{v(mq())},[v]),H=k.useCallback(ue=>{v(pq(ue.key))},[v]),J=k.useCallback(ue=>{v(da({handler:a,reactEvent:ue}))},[v,a]),U=k.useCallback(ue=>{v(da({handler:o,reactEvent:ue}))},[v,o]),Y=k.useCallback(ue=>{v(da({handler:l,reactEvent:ue}))},[v,l]),Q=k.useCallback(ue=>{v(da({handler:d,reactEvent:ue}))},[v,d]),se=k.useCallback(ue=>{v(da({handler:m,reactEvent:ue}))},[v,m]),he=k.useCallback(ue=>{v(yq(ue)),v(da({handler:p,reactEvent:ue}))},[v,p]),be=k.useCallback(ue=>{v(da({handler:h,reactEvent:ue}))},[v,h]);return k.createElement(cH.Provider,{value:b},k.createElement(dce.Provider,{value:w},k.createElement("div",{className:Ft("recharts-wrapper",r),style:wSe({position:"relative",cursor:"default",width:y,height:s},g),onClick:O,onContextMenu:J,onDoubleClick:U,onFocus:j,onKeyDown:H,onMouseDown:Y,onMouseEnter:R,onMouseLeave:F,onMouseMove:z,onMouseUp:Q,onTouchEnd:be,onTouchMove:he,onTouchStart:se,ref:A},n)))}),kSe=["children","className","width","height","style","compact","title","desc"];function NSe(t,e){if(t==null)return{};var n,r,s=ASe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ASe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Sq=k.forwardRef((t,e)=>{var{children:n,className:r,width:s,height:i,style:a,compact:o,title:l,desc:u}=t,c=NSe(t,kSe),f=ol(c);return o?k.createElement(m8,{otherAttributes:f,title:l,desc:u},n):k.createElement(ESe,{className:r,style:a,width:s,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},k.createElement(m8,{otherAttributes:f,title:l,desc:u,ref:e},k.createElement(nwe,null,n)))}),$Se=["width","height"];function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jk.apply(null,arguments)}function ISe(t,e){if(t==null)return{};var n,r,s=_Se(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function _Se(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var OSe={top:5,right:5,bottom:5,left:5},DSe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:OSe,reverseStackOrder:!1,syncMethod:"index"},Tq=k.forwardRef(function(e,n){var r,s=Ts(e.categoricalChartProps,DSe),{width:i,height:a}=s,o=ISe(s,$Se);if(!op(i)||!op(a))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:d}=e,h={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(bq,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:l},k.createElement(ZH,{chartData:d.data}),k.createElement(xq,{width:i,height:a,layout:s.layout,margin:s.margin}),k.createElement(wq,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),k.createElement(Sq,jk({},o,{width:i,height:a,ref:n})))}),RSe=["axis"],PSe=k.forwardRef((t,e)=>k.createElement(Tq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RSe,tooltipPayloadSearcher:t_,categoricalChartProps:t,ref:e})),MSe=["axis","item"],FSe=k.forwardRef((t,e)=>k.createElement(Tq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MSe,tooltipPayloadSearcher:t_,categoricalChartProps:t,ref:e}));function LSe(t){var e=mr();return k.useEffect(()=>{e(lSe(t))},[e,t]),null}var zSe=["width","height","layout"];function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uk.apply(null,arguments)}function BSe(t,e){if(t==null)return{};var n,r,s=jSe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function jSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var USe={top:5,right:5,bottom:5,left:5},VSe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:USe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},WSe=k.forwardRef(function(e,n){var r,s=Ts(e.categoricalChartProps,VSe),{width:i,height:a,layout:o}=s,l=BSe(s,zSe);if(!op(i)||!op(a))return null;var{chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:d}=e,h={chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:d,eventEmitter:void 0};return k.createElement(bq,{preloadedState:{options:h},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:u},k.createElement(ZH,{chartData:s.data}),k.createElement(xq,{width:i,height:a,layout:o,margin:s.margin}),k.createElement(wq,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),k.createElement(LSe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),k.createElement(Sq,Uk({width:i,height:a},l,{ref:n})))}),GSe=["item"],HSe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},qSe=k.forwardRef((t,e)=>{var n=Ts(t,HSe);return k.createElement(WSe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:GSe,tooltipPayloadSearcher:t_,categoricalChartProps:n,ref:e})});const KSe=we.div`
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin: 2rem 0;
`,XSe=we.h3`
  color: #333;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,YSe=we.p`
  color: #666;
  margin-bottom: 1.5rem;
  line-height: 1.5;
`,ZSe=we.button.withConfig({shouldForwardProp:t=>!["isAssessing"].includes(t)})`
  background: ${t=>t.isAssessing?"#95a5a6":"linear-gradient(135deg, #e74c3c, #c0392b)"};
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: ${t=>t.isAssessing?"not-allowed":"pointer"};
  width: 100%;
  transition: all 0.3s ease;
  margin-bottom: 1rem;

  &:hover {
    transform: ${t=>t.isAssessing?"none":"translateY(-2px)"};
    box-shadow: ${t=>t.isAssessing?"none":"0 4px 8px rgba(231, 76, 60, 0.3)"};
  }
`,QSe=we.div.withConfig({shouldForwardProp:t=>!["riskLevel"].includes(t)})`
  background: ${t=>{switch(t.riskLevel){case"high":return"#ffe6e6";case"medium":return"#fff8e1";case"low":return"#e8f5e8";default:return"#f8f9fa"}}};
  border: 2px solid ${t=>{switch(t.riskLevel){case"high":return"#e74c3c";case"medium":return"#f39c12";case"low":return"#27ae60";default:return"#ddd"}}};
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1rem 0;
`,JSe=we.div.withConfig({shouldForwardProp:t=>!["level"].includes(t)})`
  font-size: 1.2rem;
  font-weight: 700;
  color: ${t=>{switch(t.level){case"high":return"#e74c3c";case"medium":return"#f39c12";case"low":return"#27ae60";default:return"#333"}}};
  margin-bottom: 0.5rem;
  text-transform: uppercase;
`,e4e=we.p`
  color: #333;
  margin-bottom: 1rem;
  line-height: 1.5;
`,t4e=we.div`
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin: 1rem 0;
`,Wv=we.div`
  display: flex;
  justify-content: space-between;
  margin: 0.25rem 0;
  font-size: 0.9rem;
  color: #666;
`,n4e=we.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
`,r4e=we.div`
  background: white;
  border-radius: 12px;
  padding: 2rem;
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
`,s4e=we.h2`
  color: #e74c3c;
  margin-bottom: 1rem;
  text-align: center;
`,y8=we.button`
  background: #e74c3c;
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  margin: 0.5rem 0;
  transition: all 0.3s ease;

  &:hover {
    background: #c0392b;
  }
`,i4e=we.a`
  display: block;
  color: #3498db;
  text-decoration: none;
  padding: 0.5rem 0;
  border-bottom: 1px solid #eee;

  &:hover {
    color: #2980b9;
    text-decoration: underline;
  }

  &:last-child {
    border-bottom: none;
  }
`,a4e=we.button`
  background: #95a5a6;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 1rem;
  width: 100%;
`,o4e=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(null),[s,i]=k.useState(!1),a=async()=>{e(!0);try{const f=(await Ea.post("/crisis/assess")).data;r(f),f.riskLevel==="high"&&(i(!0),await Ea.post("/crisis/alert",{riskLevel:f.riskLevel,triggerData:{automatic:!0,assessment:f}})),Bt.success("Risk assessment completed")}catch(c){console.error("Error during assessment:",c),Bt.error("Failed to complete risk assessment")}finally{e(!1)}},o=c=>{switch(c){case"high":return"Your recent activity shows concerning patterns that indicate you may be experiencing significant distress. Please consider reaching out for immediate support.";case"medium":return"Your recent activity shows some concerning patterns. It might be helpful to talk to someone or consider additional support resources.";case"low":return"Your recent activity indicates you are managing well. Keep up the good work with your mental health practices.";default:return""}},l=[{name:"National Suicide Prevention Lifeline",number:"988",description:"24/7 Crisis Support"},{name:"Crisis Text Line",number:"Text HOME to 741741",description:"Free 24/7 Support"},{name:"Emergency Services",number:"911",description:"Immediate Emergency"}],u=[{name:"National Alliance on Mental Illness",url:"https://nami.org",description:"Mental health information and support"},{name:"Mental Health America",url:"https://mhanational.org",description:"Mental health resources and screening tools"},{name:"Crisis Text Line",url:"https://crisistextline.org",description:"Free crisis support via text"},{name:"SAMHSA National Helpline",url:"https://samhsa.gov",description:"Treatment referral and information service"}];return B.jsxs(B.Fragment,{children:[B.jsxs(KSe,{children:[B.jsx(XSe,{children:"🛡️ Crisis Risk Assessment"}),B.jsx(YSe,{children:"This tool analyzes your recent mood entries, emotions, and conversations to assess your current mental health status. If you're in immediate danger, please call 911 or your local emergency services right away."}),B.jsx(ZSe,{onClick:a,disabled:t,isAssessing:t,children:t?"Analyzing Your Data...":"Assess My Current Risk Level"}),n&&B.jsxs(QSe,{riskLevel:n.riskLevel,children:[B.jsxs(JSe,{level:n.riskLevel,children:["Risk Level: ",n.riskLevel]}),B.jsx(e4e,{children:o(n.riskLevel)}),B.jsxs(t4e,{children:[B.jsx("h4",{children:"Data Analyzed:"}),B.jsxs(Wv,{children:[B.jsx("span",{children:"Mood Entries:"}),B.jsx("span",{children:n.dataAnalyzed.moodEntries})]}),B.jsxs(Wv,{children:[B.jsx("span",{children:"Emotion Detections:"}),B.jsx("span",{children:n.dataAnalyzed.emotions})]}),B.jsxs(Wv,{children:[B.jsx("span",{children:"Conversations:"}),B.jsx("span",{children:n.dataAnalyzed.conversations})]}),B.jsxs(Wv,{children:[B.jsx("span",{children:"Assessment Time:"}),B.jsx("span",{children:new Date(n.timestamp).toLocaleString()})]})]}),n.riskLevel!=="low"&&B.jsx(y8,{onClick:()=>i(!0),children:"🚨 View Emergency Resources"})]})]}),s&&B.jsx(n4e,{onClick:()=>i(!1),children:B.jsxs(r4e,{onClick:c=>c.stopPropagation(),children:[B.jsx(s4e,{children:"🚨 Emergency Support Resources"}),B.jsx("h3",{children:"Immediate Help:"}),l.map((c,f)=>B.jsxs(y8,{onClick:()=>window.open(`tel:${c.number.replace(/\D/g,"")}`),children:["📞 ",c.name,": ",c.number,B.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"normal"},children:c.description})]},f)),B.jsx("h3",{style:{marginTop:"2rem"},children:"Additional Resources:"}),u.map((c,f)=>B.jsxs(i4e,{href:c.url,target:"_blank",rel:"noopener noreferrer",children:["🔗 ",c.name,B.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:c.description})]},f)),B.jsx(a4e,{onClick:()=>i(!1),children:"Close"})]})})]})},l4e=we.div`
  min-height: 100vh;
  width: 100%;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 1rem;
  
  @media (min-width: 768px) {
    padding: 2rem;
  }
`,v8=we.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
  
  @media (min-width: 768px) {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 3rem;
  }
`,b8=we.h1`
  color: #333;
  font-size: clamp(1.8rem, 4vw, 2.5rem);
  margin: 0;
`,x8=we.div`
  color: #666;
  font-size: clamp(1rem, 2vw, 1.1rem);
`,u4e=we.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  
  @media (min-width: 768px) {
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
`,c4e=we.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  width: 100%;
  max-width: 1400px;
  margin: 2rem auto;
  
  @media (min-width: 768px) {
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
  
  @media (min-width: 1200px) {
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  }
`,qm=we.div`
  background: white;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease;
  width: 100%;
  
  @media (min-width: 768px) {
    padding: 1.5rem;
  }

  &:hover {
    transform: translateY(-2px);
  }
`,Km=we.h3`
  color: #333;
  margin-bottom: 1rem;
  font-size: clamp(1rem, 2vw, 1.2rem);
`,Gv=we.div`
  font-size: clamp(1.5rem, 4vw, 2rem);
  font-weight: bold;
  color: #3498db;
  margin-bottom: 0.5rem;
`,Hv=we.div`
  color: #666;
  font-size: clamp(0.8rem, 1.5vw, 0.9rem);
`,YT=we.div`
  width: 100%;
  height: 250px;
  margin-top: 1rem;
  
  @media (min-width: 768px) {
    height: 300px;
  }
`,Xm=we.div`
  background: white;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s;
  text-align: center;
  width: 100%;
  
  @media (min-width: 768px) {
    padding: 2rem;
  }

  &:hover {
    transform: translateY(-5px);
  }
`,Ym=we.div`
  font-size: clamp(2rem, 5vw, 3rem);
  margin-bottom: 1rem;
`,Zm=we.h3`
  color: #333;
  margin-bottom: 1rem;
`,Qm=we.p`
  color: #666;
  margin-bottom: 1.5rem;
  line-height: 1.5;
`,Jm=we(hw)`
  display: inline-block;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  text-decoration: none;
  font-weight: 600;
  transition: transform 0.2s;

  &:hover {
    transform: translateY(-2px);
  }
`,f4e=we.nav`
  display: flex;
  gap: 1rem;
  align-items: center;
`,qv=we(hw)`
  color: #667eea;
  text-decoration: none;
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: background 0.3s;

  &:hover {
    background: rgba(102, 126, 234, 0.1);
  }
`,d4e=()=>{const{user:t}=wd(),[e,n]=k.useState(null),[r,s]=k.useState(!1);k.useEffect(()=>{i()},[]);const i=async()=>{s(!0);try{const o=await Ea.get("/analytics?days=30");n(o.data)}catch(o){console.error("Error fetching analytics:",o),n({summary:{totalMoodEntries:0,totalEmotions:0,totalConversations:0,averageMoodScore:0,averageSentimentScore:0,mostFrequentEmotion:"none"},moodTrends:[],emotionDistribution:[],sentimentTrends:[]})}finally{s(!1)}},a=["#3498db","#e74c3c","#f39c12","#2ecc71","#9b59b6","#1abc9c","#34495e"];return B.jsxs(l4e,{children:[B.jsxs(v8,{children:[B.jsxs("div",{children:[B.jsx(b8,{children:"MindGuard AI Dashboard"}),B.jsxs(x8,{children:["Welcome back, ",t==null?void 0:t.name,"!"]})]}),B.jsxs(f4e,{children:[B.jsx(qv,{to:"/profile",children:"Profile"}),B.jsx(qv,{to:"/chat",children:"Chat"}),B.jsx(qv,{to:"/emotion-detection",children:"Emotion Detection"}),B.jsx(qv,{to:"/mood-journal",children:"Mood Journal"})]})]}),B.jsxs(u4e,{children:[B.jsxs(Xm,{children:[B.jsx(Ym,{children:"🤖"}),B.jsx(Zm,{children:"AI Chatbot"}),B.jsx(Qm,{children:"Talk to our AI-powered mental health assistant. Get support, guidance, and cognitive behavioral therapy techniques tailored to your needs."}),B.jsx(Jm,{to:"/chat",children:"Start Chatting"})]}),B.jsxs(Xm,{children:[B.jsx(Ym,{children:"😊"}),B.jsx(Zm,{children:"Emotion Detection"}),B.jsx(Qm,{children:"Use real-time emotion detection to track your emotional state. Our AI analyzes your facial expressions to provide insights into your mood."}),B.jsx(Jm,{to:"/emotion-detection",children:"Start Detection"})]}),B.jsxs(Xm,{children:[B.jsx(Ym,{children:"📝"}),B.jsx(Zm,{children:"Mood Journal"}),B.jsx(Qm,{children:"Track your daily mood and emotional well-being with our interactive mood journal. Add notes and see your mood patterns over time."}),B.jsx(Jm,{to:"/mood-journal",children:"Start Journaling"})]}),B.jsxs(Xm,{children:[B.jsx(Ym,{children:"📊"}),B.jsx(Zm,{children:"Wellness Analytics"}),B.jsx(Qm,{children:"View your emotional wellness trends, conversation insights, and progress over time with interactive charts and analytics."}),B.jsx(Jm,{to:"#analytics",onClick:o=>{var l;o.preventDefault(),(l=document.getElementById("analytics"))==null||l.scrollIntoView({behavior:"smooth"})},children:"View Analytics"})]}),B.jsxs(Xm,{children:[B.jsx(Ym,{children:"👤"}),B.jsx(Zm,{children:"Profile Settings"}),B.jsx(Qm,{children:"Manage your account settings, emergency contacts, and personalize your MindGuard AI experience to better suit your needs."}),B.jsx(Jm,{to:"/profile",children:"View Profile"})]})]}),B.jsx(o4e,{}),B.jsxs("div",{id:"analytics",children:[B.jsxs(v8,{children:[B.jsx(b8,{children:"Your Wellness Analytics"}),B.jsx(x8,{children:"Last 30 days overview"})]}),r?B.jsx(qm,{children:B.jsx(Km,{children:"Loading analytics..."})}):e?B.jsx(B.Fragment,{children:B.jsxs(c4e,{children:[B.jsxs(qm,{children:[B.jsx(Km,{children:"Overall Summary"}),B.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[B.jsxs("div",{children:[B.jsx(Gv,{children:e.summary.totalMoodEntries}),B.jsx(Hv,{children:"Mood Entries"})]}),B.jsxs("div",{children:[B.jsx(Gv,{children:e.summary.totalEmotions}),B.jsx(Hv,{children:"Emotions Tracked"})]}),B.jsxs("div",{children:[B.jsx(Gv,{children:e.summary.averageMoodScore}),B.jsx(Hv,{children:"Avg Mood Score"})]}),B.jsxs("div",{children:[B.jsx(Gv,{children:e.summary.totalConversations}),B.jsx(Hv,{children:"Conversations"})]})]})]}),B.jsxs(qm,{children:[B.jsx(Km,{children:"Mood Trends"}),B.jsx(YT,{children:e.moodTrends.length>0?B.jsx(GT,{width:"100%",height:"100%",children:B.jsxs(PSe,{data:e.moodTrends,children:[B.jsx(Pk,{strokeDasharray:"3 3"}),B.jsx(Fk,{dataKey:"date"}),B.jsx(zk,{domain:[1,10]}),B.jsx(VT,{}),B.jsx(lq,{type:"monotone",dataKey:"averageMood",stroke:"#3498db",strokeWidth:2,dot:{fill:"#3498db"}})]})}):B.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No mood data available. Start tracking your mood to see trends!"})})]}),B.jsxs(qm,{children:[B.jsx(Km,{children:"Emotion Distribution"}),B.jsx(YT,{children:e.emotionDistribution.length>0?B.jsx(GT,{width:"100%",height:"100%",children:B.jsxs(qSe,{children:[B.jsx(VH,{data:e.emotionDistribution,dataKey:"count",nameKey:"emotion",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",children:e.emotionDistribution.map((o,l)=>B.jsx(v1,{fill:a[l%a.length]},`cell-${l}`))}),B.jsx(VT,{})]})}):B.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No emotion data available. Use emotion detection to see your emotion patterns!"})})]}),B.jsxs(qm,{children:[B.jsx(Km,{children:"Sentiment Trends"}),B.jsx(YT,{children:e.sentimentTrends.length>0?B.jsx(GT,{width:"100%",height:"100%",children:B.jsxs(FSe,{data:e.sentimentTrends,children:[B.jsx(Pk,{strokeDasharray:"3 3"}),B.jsx(Fk,{dataKey:"date"}),B.jsx(zk,{domain:[-1,1]}),B.jsx(VT,{}),B.jsx(XH,{dataKey:"averageSentiment",fill:"#2ecc71"})]})}):B.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No conversation data available. Chat with the AI to see sentiment analysis!"})})]})]})}):null]})]})},h4e=we.div`
  min-height: 100vh;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 2rem;
`,p4e=we.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
`,m4e=we.h1`
  color: #333;
  font-size: 2.5rem;
  margin: 0;
`,g4e=we.button`
  background: #e74c3c;
  color: white;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 0.5rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;

  &:hover {
    background: #c0392b;
  }
`,y4e=we.div`
  background: white;
  padding: 2rem;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  margin: 0 auto;
`,v4e=we.div`
  margin-bottom: 2rem;
`,Yd=we.div`
  display: flex;
  margin-bottom: 1rem;
  
  strong {
    min-width: 120px;
    color: #555;
  }
`,b4e=we.div`
  margin-top: 2rem;
`,x4e=we.div`
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  border-left: 4px solid #667eea;
`,w4e=()=>{const{user:t,logout:e}=wd();return t?B.jsxs(h4e,{children:[B.jsxs(p4e,{children:[B.jsx(m4e,{children:"Profile"}),B.jsx(g4e,{onClick:e,children:"Logout"})]}),B.jsxs(y4e,{children:[B.jsxs(v4e,{children:[B.jsx("h2",{children:"User Information"}),B.jsxs(Yd,{children:[B.jsx("strong",{children:"Name:"}),B.jsx("span",{children:t.name})]}),B.jsxs(Yd,{children:[B.jsx("strong",{children:"Email:"}),B.jsx("span",{children:t.email})]}),B.jsxs(Yd,{children:[B.jsx("strong",{children:"Member Since:"}),B.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]})]}),t.emergencyContacts&&t.emergencyContacts.length>0&&B.jsxs(b4e,{children:[B.jsx("h3",{children:"Emergency Contacts"}),t.emergencyContacts.map((n,r)=>B.jsxs(x4e,{children:[B.jsxs(Yd,{children:[B.jsx("strong",{children:"Name:"}),B.jsx("span",{children:n.name})]}),B.jsxs(Yd,{children:[B.jsx("strong",{children:"Phone:"}),B.jsx("span",{children:n.phone})]}),B.jsxs(Yd,{children:[B.jsx("strong",{children:"Relationship:"}),B.jsx("span",{children:n.relationship})]})]},r))]})]})]}):B.jsx("div",{children:"Loading..."})},tl=Object.create(null);tl.open="0";tl.close="1";tl.ping="2";tl.pong="3";tl.message="4";tl.upgrade="5";tl.noop="6";const Fb=Object.create(null);Object.keys(tl).forEach(t=>{Fb[tl[t]]=t});const Vk={type:"error",data:"parser error"},Cq=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Eq=typeof ArrayBuffer=="function",kq=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,E_=({type:t,data:e},n,r)=>Cq&&e instanceof Blob?n?r(e):w8(e,r):Eq&&(e instanceof ArrayBuffer||kq(e))?n?r(e):w8(new Blob([e]),r):r(tl[t]+(e||"")),w8=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function S8(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ZT;function S4e(t,e){if(Cq&&t.data instanceof Blob)return t.data.arrayBuffer().then(S8).then(e);if(Eq&&(t.data instanceof ArrayBuffer||kq(t.data)))return e(S8(t.data));E_(t,!1,n=>{ZT||(ZT=new TextEncoder),e(ZT.encode(n))})}const T8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<T8.length;t++)dg[T8.charCodeAt(t)]=t;const T4e=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),c=new Uint8Array(u);for(r=0;r<n;r+=4)i=dg[t.charCodeAt(r)],a=dg[t.charCodeAt(r+1)],o=dg[t.charCodeAt(r+2)],l=dg[t.charCodeAt(r+3)],c[s++]=i<<2|a>>4,c[s++]=(a&15)<<4|o>>2,c[s++]=(o&3)<<6|l&63;return u},C4e=typeof ArrayBuffer=="function",k_=(t,e)=>{if(typeof t!="string")return{type:"message",data:Nq(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:E4e(t.substring(1),e)}:Fb[n]?t.length>1?{type:Fb[n],data:t.substring(1)}:{type:Fb[n]}:Vk},E4e=(t,e)=>{if(C4e){const n=T4e(t);return Nq(n,e)}else return{base64:!0,data:t}},Nq=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Aq="",k4e=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{E_(i,!1,o=>{r[a]=o,++s===n&&e(r.join(Aq))})})},N4e=(t,e)=>{const n=t.split(Aq),r=[];for(let s=0;s<n.length;s++){const i=k_(n[s],e);if(r.push(i),i.type==="error")break}return r};function A4e(){return new TransformStream({transform(t,e){S4e(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let QT;function Kv(t){return t.reduce((e,n)=>e+n.length,0)}function Xv(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function $4e(t,e){QT||(QT=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,o){for(n.push(a);;){if(r===0){if(Kv(n)<1)break;const l=Xv(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Kv(n)<2)break;const l=Xv(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Kv(n)<8)break;const l=Xv(n,8),u=new DataView(l.buffer,l.byteOffset,l.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){o.enqueue(Vk);break}s=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Kv(n)<s)break;const l=Xv(n,s);o.enqueue(k_(i?l:QT.decode(l),e)),r=0}if(s===0||s>t){o.enqueue(Vk);break}}}})}const $q=4;function Er(t){if(t)return I4e(t)}function I4e(t){for(var e in Er.prototype)t[e]=Er.prototype[e];return t}Er.prototype.on=Er.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Er.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Er.prototype.off=Er.prototype.removeListener=Er.prototype.removeAllListeners=Er.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Er.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Er.prototype.emitReserved=Er.prototype.emit;Er.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Er.prototype.hasListeners=function(t){return!!this.listeners(t).length};const C3=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),xa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),_4e="arraybuffer";function Iq(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const O4e=xa.setTimeout,D4e=xa.clearTimeout;function E3(t,e){e.useNativeTimers?(t.setTimeoutFn=O4e.bind(xa),t.clearTimeoutFn=D4e.bind(xa)):(t.setTimeoutFn=xa.setTimeout.bind(xa),t.clearTimeoutFn=xa.clearTimeout.bind(xa))}const R4e=1.33;function P4e(t){return typeof t=="string"?M4e(t):Math.ceil((t.byteLength||t.size)*R4e)}function M4e(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function _q(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function F4e(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function L4e(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class z4e extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class N_ extends Er{constructor(e){super(),this.writable=!1,E3(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new z4e(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=k_(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=F4e(e);return n.length?"?"+n:""}}class B4e extends N_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};N4e(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,k4e(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=_q()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Oq=!1;try{Oq=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const j4e=Oq;function U4e(){}class V4e extends B4e{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class qo extends Er{constructor(e,n,r){super(),this.createRequest=e,E3(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Iq(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=qo.requestsCount++,qo.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=U4e,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qo.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qo.requestsCount=0;qo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",C8);else if(typeof addEventListener=="function"){const t="onpagehide"in xa?"pagehide":"unload";addEventListener(t,C8,!1)}}function C8(){for(let t in qo.requests)qo.requests.hasOwnProperty(t)&&qo.requests[t].abort()}const W4e=function(){const t=Dq({xdomain:!1});return t&&t.responseType!==null}();class G4e extends V4e{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=W4e&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new qo(Dq,this.uri(),e)}}function Dq(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||j4e))return new XMLHttpRequest}catch{}if(!e)try{return new xa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Rq=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class H4e extends N_{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Rq?{}:Iq(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;E_(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&C3(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=_q()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const JT=xa.WebSocket||xa.MozWebSocket;class q4e extends H4e{createSocket(e,n,r){return Rq?new JT(e,n,r):n?new JT(e,n):new JT(e)}doWrite(e,n){this.ws.send(n)}}class K4e extends N_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=$4e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=A4e();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:o,value:l})=>{o||(this.onPacket(l),i())}).catch(o=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&C3(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const X4e={websocket:q4e,webtransport:K4e,polling:G4e},Y4e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Z4e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Wk(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Y4e.exec(t||""),i={},a=14;for(;a--;)i[Z4e[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Q4e(i,i.path),i.queryKey=J4e(i,i.query),i}function Q4e(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function J4e(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Gk=typeof addEventListener=="function"&&typeof removeEventListener=="function",Lb=[];Gk&&addEventListener("offline",()=>{Lb.forEach(t=>t())},!1);class Ju extends Er{constructor(e,n){if(super(),this.binaryType=_4e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Wk(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Wk(n.host).host);E3(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=L4e(this.opts.query)),Gk&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Lb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=$q,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ju.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ju.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=P4e(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,C3(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Ju.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gk&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Lb.indexOf(this._offlineEventListener);r!==-1&&Lb.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ju.protocol=$q;class eTe extends Ju{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Ju.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ju.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function i(){r||(r=!0,c(),n.close(),n=null)}const a=f=>{const d=new Error("probe error: "+f);d.transport=n.name,i(),this.emitReserved("upgradeError",d)};function o(){a("transport closed")}function l(){a("socket closed")}function u(f){n&&f.name!==n.name&&i()}const c=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",o),this.off("close",l),this.off("upgrading",u)};n.once("open",s),n.once("error",a),n.once("close",o),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let tTe=class extends eTe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>X4e[s]).filter(s=>!!s)),super(e,r)}};function nTe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Wk(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const rTe=typeof ArrayBuffer=="function",sTe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Pq=Object.prototype.toString,iTe=typeof Blob=="function"||typeof Blob<"u"&&Pq.call(Blob)==="[object BlobConstructor]",aTe=typeof File=="function"||typeof File<"u"&&Pq.call(File)==="[object FileConstructor]";function A_(t){return rTe&&(t instanceof ArrayBuffer||sTe(t))||iTe&&t instanceof Blob||aTe&&t instanceof File}function zb(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(zb(t[n]))return!0;return!1}if(A_(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return zb(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&zb(t[n]))return!0;return!1}function oTe(t){const e=[],n=t.data,r=t;return r.data=Hk(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Hk(t,e){if(!t)return t;if(A_(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Hk(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Hk(t[r],e));return n}return t}function lTe(t,e){return t.data=qk(t.data,e),delete t.attachments,t}function qk(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=qk(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=qk(t[n],e));return t}const uTe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cTe=5;var Gt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Gt||(Gt={}));class fTe{constructor(e){this.replacer=e}encode(e){return(e.type===Gt.EVENT||e.type===Gt.ACK)&&zb(e)?this.encodeAsBinary({type:e.type===Gt.EVENT?Gt.BINARY_EVENT:Gt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Gt.BINARY_EVENT||e.type===Gt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=oTe(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function E8(t){return Object.prototype.toString.call(t)==="[object Object]"}class $_ extends Er{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Gt.BINARY_EVENT;r||n.type===Gt.BINARY_ACK?(n.type=r?Gt.EVENT:Gt.ACK,this.reconstructor=new dTe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(A_(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Gt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Gt.BINARY_EVENT||r.type===Gt.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if($_.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Gt.CONNECT:return E8(n);case Gt.DISCONNECT:return n===void 0;case Gt.CONNECT_ERROR:return typeof n=="string"||E8(n);case Gt.EVENT:case Gt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&uTe.indexOf(n[0])===-1);case Gt.ACK:case Gt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dTe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=lTe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hTe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$_,Encoder:fTe,get PacketType(){return Gt},protocol:cTe},Symbol.toStringTag,{value:"Module"}));function Ya(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const pTe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Mq extends Er{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ya(e,"open",this.onopen.bind(this)),Ya(e,"packet",this.onpacket.bind(this)),Ya(e,"error",this.onerror.bind(this)),Ya(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(pTe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:Gt.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),a.id=c}const o=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},s),a=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,o)=>a?s(a):r(o);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Gt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Gt.EVENT:case Gt.BINARY_EVENT:this.onevent(e);break;case Gt.ACK:case Gt.BINARY_ACK:this.onack(e);break;case Gt.DISCONNECT:this.ondisconnect();break;case Gt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Gt.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Xp(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Xp.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Xp.prototype.reset=function(){this.attempts=0};Xp.prototype.setMin=function(t){this.ms=t};Xp.prototype.setMax=function(t){this.max=t};Xp.prototype.setJitter=function(t){this.jitter=t};class Kk extends Er{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,E3(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Xp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||hTe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new tTe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Ya(n,"open",function(){r.onopen(),e&&e()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=Ya(n,"error",i);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ya(e,"ping",this.onping.bind(this)),Ya(e,"data",this.ondata.bind(this)),Ya(e,"error",this.onerror.bind(this)),Ya(e,"close",this.onclose.bind(this)),Ya(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){C3(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Mq(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const eg={};function zg(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=nTe(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=eg[s]&&i in eg[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new Kk(r,e):(eg[s]||(eg[s]=new Kk(r,e)),l=eg[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(zg,{Manager:Kk,Socket:Mq,io:zg,connect:zg});const mTe=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!1),[s,i]=k.useState(!1),a=k.useRef(null),{user:o,isAuthenticated:l}=wd();return k.useEffect(()=>{if(!l||!o)return;const f=zg("http://localhost:5000/chat",{autoConnect:!0});return a.current=f,f.on("connect",()=>{console.log("Connected to chat namespace"),r(!0),f.emit("join",o.id)}),f.on("disconnect",()=>{console.log("Disconnected from chat namespace"),r(!1)}),f.on("response",d=>{console.log("Received response:",d),e(h=>[...h,{...d,id:`user-${d.id}`,message:d.message,response:d.message,isUser:!0}]),setTimeout(()=>{e(h=>[...h,{...d,id:`bot-${d.id}`,message:d.response,response:d.response,isUser:!1}]),i(!1)},1e3)}),f.on("typing",d=>{d.userId!==o.id&&i(d.isTyping)}),f.on("error",d=>{console.error("Chat error:",d)}),()=>{f.disconnect()}},[l,o]),{messages:t,sendMessage:c=>{!a.current||!o||!c.trim()||(console.log("Sending message:",c),i(!0),a.current.emit("message",{message:c.trim(),userId:o.id}))},isConnected:n,isTyping:s}},Xk=t=>t>.5?"😊":t>.1?"🙂":t<-.5?"😢":t<-.1?"😟":"😐",gTe=we.div`
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
`,yTe=we.div`
  background: white;
  padding: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  
  @media (min-width: 768px) {
    padding: 1rem 2rem;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
`,vTe=we.h1`
  color: #333;
  margin: 0;
  font-size: clamp(1.2rem, 3vw, 1.5rem);
`,bTe=we.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: ${t=>t.connected?"#27ae60":"#e74c3c"};
  font-weight: 600;
  font-size: clamp(0.8rem, 2vw, 1rem);
`,xTe=we.div`
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: ${t=>t.connected?"#27ae60":"#e74c3c"};
`,wTe=we.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
  padding: 0.5rem;
  
  @media (min-width: 768px) {
    padding: 1rem;
  }
`,STe=we.div`
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,TTe=we.div`
  max-width: 70%;
  padding: 1rem 1.5rem;
  border-radius: 1.5rem;
  background: ${t=>t.isUser?"#667eea":"white"};
  color: ${t=>t.isUser?"white":"#333"};
  align-self: ${t=>t.isUser?"flex-end":"flex-start"};
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  position: relative;
  line-height: 1.5;

  ${t=>t.isUser?`
    border-bottom-right-radius: 0.5rem;
  `:`
    border-bottom-left-radius: 0.5rem;
  `}
`,CTe=we.div`
  font-size: 0.75rem;
  opacity: 0.7;
  margin-top: 0.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
`,ETe=we.span`
  font-size: 1rem;
`,kTe=we.div`
  padding: 1rem 1.5rem;
  background: white;
  border-radius: 1.5rem;
  border-bottom-left-radius: 0.5rem;
  max-width: 70%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  font-style: italic;
  color: #666;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,NTe=we.div`
  display: flex;
  gap: 2px;
  
  span {
    width: 6px;
    height: 6px;
    background: #666;
    border-radius: 50%;
    animation: typing 1.4s infinite;
    
    &:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    &:nth-child(3) {
      animation-delay: 0.4s;
    }
  }

  @keyframes typing {
    0%, 60%, 100% {
      transform: translateY(0);
      opacity: 0.4;
    }
    30% {
      transform: translateY(-10px);
      opacity: 1;
    }
  }
`,ATe=we.div`
  padding: 1rem;
  background: white;
  border-radius: 1rem 1rem 0 0;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
`,$Te=we.form`
  display: flex;
  gap: 1rem;
  align-items: flex-end;
`,ITe=we.textarea`
  flex: 1;
  padding: 1rem;
  border: 1px solid #ddd;
  border-radius: 1rem;
  resize: none;
  font-size: 1rem;
  font-family: inherit;
  max-height: 120px;
  min-height: 50px;
  
  &:focus {
    outline: none;
    border-color: #667eea;
  }
`,_Te=we.button`
  background: #667eea;
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  white-space: nowrap;

  &:hover {
    background: #5a67d8;
    transform: translateY(-2px);
  }

  &:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
  }
`,OTe=we.div`
  text-align: center;
  padding: 2rem;
  color: #666;
  
  h3 {
    color: #333;
    margin-bottom: 1rem;
  }
  
  p {
    line-height: 1.6;
    max-width: 500px;
    margin: 0 auto;
  }
`,DTe=()=>{const[t,e]=k.useState(""),{messages:n,sendMessage:r,isConnected:s,isTyping:i}=mTe(),a=k.useRef(null),o=()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{o()},[n,i]);const l=c=>{c.preventDefault(),t.trim()&&s&&(r(t),e(""))},u=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),l(c))};return B.jsxs(gTe,{children:[B.jsxs(yTe,{children:[B.jsx(vTe,{children:"MindGuard AI Chat"}),B.jsxs(bTe,{connected:s,children:[B.jsx(xTe,{connected:s}),s?"Connected":"Connecting..."]})]}),B.jsxs(wTe,{children:[B.jsxs(STe,{children:[n.length===0&&B.jsxs(OTe,{children:[B.jsx("h3",{children:"Welcome to MindGuard AI"}),B.jsx("p",{children:"I'm here to provide mental health support using cognitive behavioral therapy techniques. Feel free to share what's on your mind, and I'll do my best to help you work through your thoughts and feelings."})]}),n.map(c=>B.jsxs(TTe,{isUser:c.isUser,children:[c.isUser?c.message:c.response,B.jsxs(CTe,{children:[B.jsx("span",{children:new Date(c.timestamp).toLocaleTimeString()}),c.sentimentScore!==void 0&&c.isUser&&B.jsx(ETe,{children:Xk(c.sentimentScore)})]})]},c.id)),i&&B.jsxs(kTe,{children:["MindGuard AI is typing",B.jsxs(NTe,{children:[B.jsx("span",{}),B.jsx("span",{}),B.jsx("span",{})]})]}),B.jsx("div",{ref:a})]}),B.jsx(ATe,{children:B.jsxs($Te,{onSubmit:l,children:[B.jsx(ITe,{value:t,onChange:c=>e(c.target.value),onKeyPress:u,placeholder:"Type your message here...",disabled:!s}),B.jsx(_Te,{type:"submit",disabled:!t.trim()||!s,children:"Send"})]})})]})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RTe=1e-7,PTe=1e-4;class Fq{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class I_{refCount(e){return si("refCount")}incRef(e){return si("incRef")}timerAvailable(){return!0}time(e){return si("time")}read(e){return si("read")}readSync(e){return si("readSync")}readToGPU(e,n){return si("readToGPU")}numDataIds(){return si("numDataIds")}disposeData(e,n){return si("disposeData")}write(e,n,r){return si("write")}move(e,n,r,s,i){return si("move")}createTensorFromGPUData(e,n,r){return si("createTensorFromGPUData")}memory(){return si("memory")}floatPrecision(){return si("floatPrecision")}epsilon(){return this.floatPrecision()===32?RTe:PTe}dispose(){return si("dispose")}}function si(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,sh(t,e,n)}function nd(t,e,n){return Math.max(t,Math.min(e,n))}function __(t){return t%2===0?t:t+1}function sh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function FTe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function P(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Ai(t,e,n=""){P(jt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Yp(t){P(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function pe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function LTe(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function jt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function hp(t){return t%1===0}function Yk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Rh(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function k8(t,e=s=>0,n,r){return new Promise((s,i)=>{let a=0;const o=()=>{if(t()){s();return}a++;const l=e(a);if(n!=null&&a>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function Lq(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Ot(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),P(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),P(t.every(r=>hp(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Rc(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Ot(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[a]==null||i[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function is(t,e){return rr(t,e)}function rr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function zTe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function BTe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function zq(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function mx(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function jTe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function w1(t){return typeof t=="string"||t instanceof String}function UTe(t){return typeof t=="boolean"}function Zk(t){return typeof t=="number"}function Zp(t){return Array.isArray(t)?Zp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Zk(t)?"float32":w1(t)?"string":UTe(t)?"bool":"float32"}function Qk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Jk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function at(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Bq(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let a=0;a<i;a++)s[a]=n[t+a]}else{const i=e[0],a=e.slice(1),o=a.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)s[l]=Bq(t+l*o,a,n,r)}return s}function Da(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return Bq(0,t,e,n)}function VTe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function O_(t,e){const n=Ss(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Ss(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function jq(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Da(t,new Float32Array(n));if(e==="int32")return Da(t,new Int32Array(n));if(e==="bool")return Da(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ia(t){t.forEach(e=>{P(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ko(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Qp(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function rd(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N8="tfjsflags";class WTe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=GTe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(rd(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);N8 in e&&e[N8].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=qTe(s,i)})}}function GTe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(HTe(e,r[0],r[1]),r.join("="))),e}function HTe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function qTe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function le(){return Uq}let Uq=null;function KTe(t){Uq=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eC;function Vq(){if(eC==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");eC=t}return eC}function XTe(){const t=Vq();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function D_(t,e){const n=XTe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const k3="Abs",S1="Acos",T1="Acosh",Jp="Add",N3="AddN",R_="All",P_="Any",A3="ArgMax",$3="ArgMin",C1="Asin",E1="Asinh",k1="Atan",N1="Atanh",A1="Atan2",I3="AvgPool",M_="AvgPoolGrad",_3="AvgPool3D",F_="AvgPool3DGrad",O3="BatchMatMul",D3="BatchToSpaceND",L_="Bincount",R3="BitwiseAnd",YTe="BroadcastTo",z_="BroadcastArgs",$1="Cast",I1="Ceil",_1="ClipByValue",B_="Complex",P3="ComplexAbs",M3="Concat",F3="Conv2D",j_="Conv2DBackpropFilter",L3="Conv2DBackpropInput",z3="Conv3D",U_="Conv3DBackpropFilterV2",V_="Conv3DBackpropInputV2",O1="Cos",D1="Cosh",W_="Cumprod",B3="Cumsum",G_="CropAndResize",H_="DenseBincount",q_="DepthToSpace",j3="DepthwiseConv2dNative",K_="DepthwiseConv2dNativeBackpropFilter",X_="DepthwiseConv2dNativeBackpropInput",Y_="Diag",U3="Dilation2D",eN="Dilation2DBackpropInput",tN="Dilation2DBackpropFilter",ZTe="Draw",R1="RealDiv",Z_="Einsum",P1="Elu",Q_="EluGrad",M1="Erf",V3="Equal",F1="Exp",W3="ExpandDims",L1="Expm1",J_="FFT",eO="Fill",tO="FlipLeftRight",z1="Floor",B1="FloorDiv",G3="FusedBatchNorm",H3="GatherV2",nO="GatherNd",q3="Greater",j1="GreaterEqual",U1="Identity",rO="IFFT",sO="Imag",V1="IsFinite",W1="IsInf",G1="IsNan",K3="LeakyRelu",X3="Less",Y3="LessEqual",iO="LinSpace",H1="Log",q1="Log1p",Z3="LogicalAnd",Q3="LogicalNot",J3="LogicalOr",QTe="LogSoftmax",eS="LRN",aO="LRNGrad",tS="Max",K1="Maximum",nS="MaxPool",oO="MaxPoolGrad",rS="MaxPool3D",lO="MaxPool3DGrad",uO="MaxPoolWithArgmax",sS="Mean",iS="Min",X1="Minimum",aS="MirrorPad",Y1="Mod",cO="Multinomial",Z1="Multiply",oS="Neg",lS="NotEqual",fO="NonMaxSuppressionV3",dO="NonMaxSuppressionV4",hO="NonMaxSuppressionV5",uS="OnesLike",cS="OneHot",fS="Pack",dS="PadV2",Q1="Pow",hS="Prelu",pS="Prod",pO="RaggedGather",mO="RaggedRange",gO="RaggedTensorToTensor",yO="Range",vO="Real",J1="Reciprocal",e0="Relu",mS="Reshape",gS="ResizeNearestNeighbor",bO="ResizeNearestNeighborGrad",yS="ResizeBilinear",xO="ResizeBilinearGrad",t0="Relu6",vS="Reverse",n0="Round",r0="Rsqrt",wO="ScatterNd",SO="TensorScatterUpdate",TO="SearchSorted",bS="Select",s0="Selu",xS="Slice",i0="Sin",a0="Sinh",o0="Sign",l0="Sigmoid",u0="Softplus",c0="Sqrt",wS="Sum",SS="SpaceToBatchND",TS="SplitV",CS="Softmax",CO="SparseFillEmptyRows",EO="SparseReshape",kO="SparseSegmentMean",NO="SparseSegmentSum",AO="SparseToDense",f0="SquaredDifference",$O="Square",ES="StaticRegexReplace",IO="StridedSlice",_O="StringNGrams",OO="StringSplit",DO="StringToHashBucketFast",d0="Sub",h0="Tan",p0="Tanh",m0="Tile",RO="TopK",PO="Transform",Ph="Transpose",MO="Unique",kS="Unpack",NS="UnsortedSegmentSum",AS="ZerosLike",g0="Step",nN="FromPixels",FO="RotateWithOffset",gx="_FusedMatMul",yx="FusedConv2D",vx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gi(...t){le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(...t)}function JTe(...t){le().getBool("IS_TEST")||le().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bx=D_("kernelRegistry",()=>new Map),rN=D_("gradRegistry",()=>new Map);function sN(t,e){const n=Gq(t,e);return bx.get(n)}function A8(t){return rN.get(t)}function $8(t){const e=bx.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,a]=s,[o]=i.split("_");o===t&&n.push(a)}return n}function Wq(t){const{kernelName:e,backendName:n}=t,r=Gq(e,n);bx.has(r)&&Gi(`The kernel '${e}' for backend '${n}' is already registered`),bx.set(r,t)}function eCe(t){const{kernelName:e}=t;rN.has(e)&&le().getBool("DEBUG")&&Gi(`Overriding the gradient for '${e}'`),rN.set(e,t)}function Gq(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hq(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var qq=Nn,Na=null;try{Na=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Nn.prototype.__isLong__;Object.defineProperty(Nn.prototype,"__isLong__",{value:!0});function $i(t){return(t&&t.__isLong__)===!0}Nn.isLong=$i;var I8={},_8={};function kd(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=_8[t],r)?r:(n=An(t,(t|0)<0?-1:0,!0),s&&(_8[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=I8[t],r)?r:(n=An(t,t<0?-1:0,!1),s&&(I8[t]=n),n))}Nn.fromInt=kd;function Aa(t,e){if(isNaN(t))return e?Cf:$a;if(e){if(t<0)return Cf;if(t>=Kq)return Zq}else{if(t<=-D8)return gi;if(t+1>=D8)return Yq}return t<0?Aa(-t,e).neg():An(t%pp|0,t/pp|0,e)}Nn.fromNumber=Aa;function An(t,e,n){return new Nn(t,e,n)}Nn.fromBits=An;var xx=Math.pow;function LO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return $a;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return LO(t.substring(1),e,n).neg();for(var s=Aa(xx(n,8)),i=$a,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),l=parseInt(t.substring(a,a+o),n);if(o<8){var u=Aa(xx(n,o));i=i.mul(u).add(Aa(l))}else i=i.mul(s),i=i.add(Aa(l))}return i.unsigned=e,i}Nn.fromString=LO;function vo(t,e){return typeof t=="number"?Aa(t,e):typeof t=="string"?LO(t,e):An(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Nn.fromValue=vo;var O8=65536,tCe=1<<24,pp=O8*O8,Kq=pp*pp,D8=Kq/2,R8=kd(tCe),$a=kd(0);Nn.ZERO=$a;var Cf=kd(0,!0);Nn.UZERO=Cf;var Th=kd(1);Nn.ONE=Th;var Xq=kd(1,!0);Nn.UONE=Xq;var iN=kd(-1);Nn.NEG_ONE=iN;var Yq=An(-1,2147483647,!1);Nn.MAX_VALUE=Yq;var Zq=An(-1,-1,!0);Nn.MAX_UNSIGNED_VALUE=Zq;var gi=An(0,-2147483648,!1);Nn.MIN_VALUE=gi;var Ve=Nn.prototype;Ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ve.toNumber=function(){return this.unsigned?(this.high>>>0)*pp+(this.low>>>0):this.high*pp+(this.low>>>0)};Ve.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(gi)){var n=Aa(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Aa(xx(e,6),this.unsigned),a=this,o="";;){var l=a.div(i),u=a.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(a=l,a.isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}};Ve.getHighBits=function(){return this.high};Ve.getHighBitsUnsigned=function(){return this.high>>>0};Ve.getLowBits=function(){return this.low};Ve.getLowBitsUnsigned=function(){return this.low>>>0};Ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Ve.isZero=function(){return this.high===0&&this.low===0};Ve.eqz=Ve.isZero;Ve.isNegative=function(){return!this.unsigned&&this.high<0};Ve.isPositive=function(){return this.unsigned||this.high>=0};Ve.isOdd=function(){return(this.low&1)===1};Ve.isEven=function(){return(this.low&1)===0};Ve.equals=function(e){return $i(e)||(e=vo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Ve.eq=Ve.equals;Ve.notEquals=function(e){return!this.eq(e)};Ve.neq=Ve.notEquals;Ve.ne=Ve.notEquals;Ve.lessThan=function(e){return this.comp(e)<0};Ve.lt=Ve.lessThan;Ve.lessThanOrEqual=function(e){return this.comp(e)<=0};Ve.lte=Ve.lessThanOrEqual;Ve.le=Ve.lessThanOrEqual;Ve.greaterThan=function(e){return this.comp(e)>0};Ve.gt=Ve.greaterThan;Ve.greaterThanOrEqual=function(e){return this.comp(e)>=0};Ve.gte=Ve.greaterThanOrEqual;Ve.ge=Ve.greaterThanOrEqual;Ve.compare=function(e){if($i(e)||(e=vo(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Ve.comp=Ve.compare;Ve.negate=function(){return!this.unsigned&&this.eq(gi)?gi:this.not().add(Th)};Ve.neg=Ve.negate;Ve.add=function(e){$i(e)||(e=vo(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,o=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,f=0,d=0,h=0;return h+=i+u,d+=h>>>16,h&=65535,d+=s+l,f+=d>>>16,d&=65535,f+=r+o,c+=f>>>16,f&=65535,c+=n+a,c&=65535,An(d<<16|h,c<<16|f,this.unsigned)};Ve.subtract=function(e){return $i(e)||(e=vo(e)),this.add(e.neg())};Ve.sub=Ve.subtract;Ve.multiply=function(e){if(this.isZero())return $a;if($i(e)||(e=vo(e)),Na){var n=Na.mul(this.low,this.high,e.low,e.high);return An(n,Na.get_high(),this.unsigned)}if(e.isZero())return $a;if(this.eq(gi))return e.isOdd()?gi:$a;if(e.eq(gi))return this.isOdd()?gi:$a;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(R8)&&e.lt(R8))return Aa(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,d=0,h=0,p=0;return p+=a*c,h+=p>>>16,p&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=a*u,d+=h>>>16,h&=65535,d+=s*c,f+=d>>>16,d&=65535,d+=i*u,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=r*c+s*u+i*l+a*o,f&=65535,An(h<<16|p,f<<16|d,this.unsigned)};Ve.mul=Ve.multiply;Ve.divide=function(e){if($i(e)||(e=vo(e)),e.isZero())throw Error("division by zero");if(Na){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Na.div_u:Na.div_s)(this.low,this.high,e.low,e.high);return An(n,Na.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Cf:$a;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Cf;if(e.gt(this.shru(1)))return Xq;i=Cf}else{if(this.eq(gi)){if(e.eq(Th)||e.eq(iN))return gi;if(e.eq(gi))return Th;var a=this.shr(1);return r=a.div(e).shl(1),r.eq($a)?e.isNegative()?Th:iN:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(gi))return this.unsigned?Cf:$a;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=$a}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),l=o<=48?1:xx(2,o-48),u=Aa(r),c=u.mul(e);c.isNegative()||c.gt(s);)r-=l,u=Aa(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Th),i=i.add(u),s=s.sub(c)}return i};Ve.div=Ve.divide;Ve.modulo=function(e){if($i(e)||(e=vo(e)),Na){var n=(this.unsigned?Na.rem_u:Na.rem_s)(this.low,this.high,e.low,e.high);return An(n,Na.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Ve.mod=Ve.modulo;Ve.rem=Ve.modulo;Ve.not=function(){return An(~this.low,~this.high,this.unsigned)};Ve.and=function(e){return $i(e)||(e=vo(e)),An(this.low&e.low,this.high&e.high,this.unsigned)};Ve.or=function(e){return $i(e)||(e=vo(e)),An(this.low|e.low,this.high|e.high,this.unsigned)};Ve.xor=function(e){return $i(e)||(e=vo(e)),An(this.low^e.low,this.high^e.high,this.unsigned)};Ve.shiftLeft=function(e){return $i(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?An(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):An(0,this.low<<e-32,this.unsigned)};Ve.shl=Ve.shiftLeft;Ve.shiftRight=function(e){return $i(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?An(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):An(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Ve.shr=Ve.shiftRight;Ve.shiftRightUnsigned=function(e){if($i(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return An(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?An(n,0,this.unsigned):An(n>>>e-32,0,this.unsigned)};Ve.shru=Ve.shiftRightUnsigned;Ve.shr_u=Ve.shiftRightUnsigned;Ve.toSigned=function(){return this.unsigned?An(this.low,this.high,!1):this};Ve.toUnsigned=function(){return this.unsigned?this:An(this.low,this.high,!0)};Ve.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Ve.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Ve.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Nn.fromBytes=function(e,n,r){return r?Nn.fromBytesLE(e,n):Nn.fromBytesBE(e,n)};Nn.fromBytesLE=function(e,n){return new Nn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Nn.fromBytesBE=function(e,n){return new Nn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Qq=po(qq),nCe=_7({__proto__:null,default:Qq},[qq]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ff=Qq||nCe;function $S(t){return ff.fromString(t,!0,16)}const Jq=$S("c3a5c85c97cb3127"),cf=$S("b492b66fbe98f273"),$s=$S("9ae16a3b2f90404f");function aN(t){return t.xor(t.shru(47))}function eK(t,e,n){const r=t.slice(e,e+n);return ff.fromBytes(Array.from(r),!0,!0)}function gn(t,e){return eK(t,e,8)}function P8(t,e){return eK(t,e,4)}function Fr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function ec(t,e,n=$S("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function rCe(t,e,n,r,s,i){s=s.add(t),i=Fr(i.add(s).add(r),21);const a=s;return s=s.add(e),s=s.add(n),i=i.add(Fr(s,44)),[s.add(r),i.add(a)]}function Yv(t,e,n,r){return rCe(gn(t,e),gn(t,e+8),gn(t,e+16),gn(t,e+24),n,r)}function sCe(t,e=t.length){if(e>=8){const n=$s.add(e*2),r=gn(t,0).add($s),s=gn(t,e-8),i=Fr(s,37).mul(n).add(r),a=Fr(r,25).add(s).mul(n);return ec(i,a,n)}if(e>=4){const n=$s.add(e*2),r=P8(t,0);return ec(r.shl(3).add(e),P8(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),a=e+(s<<2);return aN($s.mul(i).xor(Jq.mul(a))).mul($s)}return $s}function iCe(t,e=t.length){const n=$s.add(e*2),r=gn(t,0).mul(cf),s=gn(t,8),i=gn(t,e-8).mul(n),a=gn(t,e-16).mul($s);return ec(Fr(r.add(s),43).add(Fr(i,30)).add(a),r.add(Fr(s.add($s),18)).add(i),n)}function aCe(t,e=t.length){const n=$s.add(e*2),r=gn(t,0).mul($s),s=gn(t,8),i=gn(t,e-8).mul(n),a=gn(t,e-16).mul($s),o=Fr(r.add(s),43).add(Fr(i,30)).add(a),l=ec(o,r.add(Fr(s.add($s),18)).add(i),n),u=gn(t,16).mul(n),c=gn(t,24),f=o.add(gn(t,e-32)).mul(n),d=l.add(gn(t,e-24)).mul(n);return ec(Fr(u.add(c),43).add(Fr(f,30)).add(d),u.add(Fr(c.add(r),18)).add(f),n)}function oCe(t,e=t.length){const n=ff.fromNumber(81,!0);if(e<=32)return e<=16?sCe(t,e):iCe(t,e);if(e<=64)return aCe(t,e);let r=n,s=n.mul(cf).add(113),i=aN(s.mul($s).add(113)).mul($s),a=[ff.UZERO,ff.UZERO],o=[ff.UZERO,ff.UZERO];r=r.mul($s).add(gn(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Fr(r.add(s).add(a[0]).add(gn(t,l+8)),37).mul(cf),s=Fr(s.add(a[1]).add(gn(t,l+48)),42).mul(cf),r=r.xor(o[1]),s=s.add(a[0]).add(gn(t,l+40)),i=Fr(i.add(o[0]),33).mul(cf),a=Yv(t,l,a[1].mul(cf),r.add(o[0])),o=Yv(t,l+32,i.add(o[1]),s.add(gn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const f=cf.add(i.and(255).shl(1));return l=c,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=Fr(r.add(s).add(a[0]).add(gn(t,l+8)),37).mul(f),s=Fr(s.add(a[1]).add(gn(t,l+48)),42).mul(f),r=r.xor(o[1].mul(9)),s=s.add(a[0].mul(9).add(gn(t,l+40))),i=Fr(i.add(o[0]),33).mul(f),a=Yv(t,l,a[1].mul(f),r.add(o[0])),o=Yv(t,l+32,i.add(o[1]),s.add(gn(t,l+16))),[i,r]=[r,i],ec(ec(a[0],o[0],f).add(aN(s).mul(Jq)).add(i),ec(a[1],o[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t,e){return e==="string"?tc(t):Nd([t],e)}function lCe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Nd(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=sd(t)),le().getBool("DEBUG")&&zTe(t,e),lCe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Us(){return le().platform.now()}function tc(t,e="utf-8"){return e=e||"utf-8",le().platform.encode(t,e)}function hc(t,e="utf-8"){return e=e||"utf-8",le().platform.decode(t,e)}function Ba(t){return le().platform.isTypedArray!=null?le().platform.isTypedArray(t):Hq(t)}function sd(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||rd(t)||t==null||Ba(t)&&n)e.push(t);else if(Array.isArray(t)||Ba(t))for(let r=0;r<t.length;++r)sd(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)sd(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uCe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new fCe)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let a;const o=Us();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();a=Promise.resolve({kernelMs:Us()-o})}if(le().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(f=>{cCe(f,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),s,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],i,l[2])})})}}function cCe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class fCe{logKernelProfile(e,n,r,s,i,a){const o=typeof s=="number"?Rh(`${s}ms`,9):s.error,l=Rh(e,25),u=n.rank,c=n.size,f=Rh(n.shape.toString(),14);let d="";for(const h in i){const p=i[h];if(p!=null){const m=p.shape||n.shape,g=m.length;d+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${o}	%c${u}D ${f}	%c${c}	%c${d}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const d=c[f];let h=!1;for(let p=0;p<e.length;p++)if(r[d.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,s[u.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(i[u.outputs[f].id]){for(const d in c)i[c[d].id]=!0,a[u.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&a[u.id]){const c={};for(const d in u.inputs){const h=u.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,o.push(f)}}return o}function hCe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],a=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?a.push(u):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(a);for(const l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const u=n(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!jt(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M8=20,tg=3,tC=7;function pCe(t,e,n,r){const s=at(e),i=mCe(t,e,n,s),a=e.length,o=Bb(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function mCe(t,e,n,r){const s=pe(e),i=r[r.length-1],a=new Array(i).fill(0),o=e.length,l=n==="complex64"?pg(t):t;if(o>1)for(let u=0;u<s/i;u++){const c=u*i;for(let f=0;f<i;f++)a[f]=Math.max(a[f],hg(l[c+f],0,n).length)}return a}function hg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(tC))} + ${parseFloat(t[1].toFixed(tC))}j`:w1(t)?r=`'${t}'`:n==="bool"?r=tK(t):r=parseFloat(t.toFixed(tC)).toString(),Rh(r,e)}function tK(t){return t===0?"false":"true"}function Bb(t,e,n,r,s,i=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=pg(t);return[hg(m[0],0,n)]}return n==="bool"?[tK(t[0])]:[t[0].toString()]}if(l===1){if(o>M8){const g=tg*a;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((o-tg)*a,o*a));return n==="complex64"&&(y=pg(y),v=pg(v)),["["+y.map((b,x)=>hg(b,s[x],n)).join(", ")+", ..., "+v.map((b,x)=>hg(b,s[o-tg+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?pg(t):Array.from(t)).map((g,y)=>hg(g,s[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*a,d=[];if(o>M8){for(let m=0;m<tg;m++){const g=m*f,y=g+f;d.push(...Bb(t.slice(g,y),u,n,c,s,!1))}d.push("...");for(let m=o-tg;m<o;m++){const g=m*f,y=g+f;d.push(...Bb(t.slice(g,y),u,n,c,s,m===o-1))}}else for(let m=0;m<o;m++){const g=m*f,y=g+f;d.push(...Bb(t.slice(g,y),u,n,c,s,m===o-1))}const h=l===2?",":"";d[0]="["+(o>0?d[0]+h:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":p),d}function pg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ir{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=pe(e),r!=null){const s=r.length;P(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||rr(n,this.size),this.strides=at(e)}set(e,...n){n.length===0&&(n=[0]),P(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Za().makeTensor(this.values,this.shape,this.dtype)}}let Za=null,ih=null;function gCe(t){Za=t}function yCe(t){ih=t}class Jt{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=pe(e),this.strides=at(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return ih.buffer(this.shape,this.dtype,e)}bufferSync(){return ih.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Da(this.shape,e,this.dtype==="complex64")}arraySync(){return Da(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Za().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>hc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Za().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Za().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>hc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Za().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Za().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ih.print(this,e)}clone(){return this.throwIfDisposed(),ih.clone(this)}toString(e=!1){const n=this.dataSync();return pCe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ih.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Za().makeVariable(this,e,n,r)}}Object.defineProperty(Jt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function xe(){return D_("Tensor",()=>Jt)}xe();class wx extends Jt{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!jt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Za().disposeTensor(this),this.dataId=e.dataId,Za().incRef(this,null)}dispose(){Za().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(wx,Symbol.hasInstance,{value:t=>t instanceof Jt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var F8;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(F8||(F8={}));var oN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(oN||(oN={}));var lN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(lN||(lN={}));var uN;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(uN||(uN={}));var cN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(cN||(cN={}));const vCe={float32:uN,int32:oN,bool:lN,complex64:cN};function Si(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return vCe[t][e]}function zO(t){return Si(t,"int32")}function nK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function rK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Si(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function bCe(t,e){P(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function sK(t){const e=[];return iK(t,e,new Set),e}function iK(t,e,n){if(t==null)return;if(t instanceof Jt){e.push(t);return}if(!xCe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),iK(i,e,n))}}function xCe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nC(t){return t.kernelName!=null}class L8{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class mp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new L8}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Gi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new uCe(this.backendInstance),!0}setupRegisteredKernels(){$8(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){$8(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof I_)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Gi(`Initialization of backend ${e} failed`),Gi(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Gi(`Initialization of backend ${e} failed`),Gi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return mp.nextTensorId++}nextVariableId(){return mp.nextVariableId++}clone(e){const n=ee.runKernel(U1,{x:e}),r={x:e},s=a=>({x:()=>{const o="float32",l={x:a},u={dtype:o};return ee.runKernel($1,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(sN(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-n-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const u=nC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(nC(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=sN(p,this.backendName);P(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),o=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{s&&(r=g.map(y=>this.keep(this.clone(y))))};o=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:f}=e,d=nC(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(u,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),s&&this.addTapeNode(u,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=A8(e);if(s!=null){const i=s.inputsToSave||[],a=s.outputsToSave||[];let o;s.saveAllInputs?(P(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(u=>n[u])):o=i.map(u=>n[u]);const l=r.filter((u,c)=>a[c]);return o.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&w1(e[0])&&(i=e.map(l=>tc(l)));const a=s.write(i,n,r),o=new Jt(n,r,a,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(a),u=jTe(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,a=new Jt(s,i,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new wx(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*mx(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof wx||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*mx(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=A8(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=u=>(u=u.map((c,f)=>{if(c==null){const d=r[f],h=Ss(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),s(u.length>1?u:u[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=sK(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(P(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));P(i instanceof Jt,()=>"The result y returned by f() must be a tensor.");const a=dCe(this.state.activeTape,n,i);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??wCe(i.shape),hCe(o,a,u=>this.tidy(u),SCe);const l=n.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return P(Qk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{P(n.every(o=>o instanceof Jt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((o,l)=>{s[l]=o});const i=(o,l)=>(r=e(...n,l),P(r.value instanceof Jt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),P(Qk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const u=r.gradFunc(o,l),c=Array.isArray(u)?u:[u];P(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),P(c.every(d=>d instanceof Jt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Us(),r=await this.backend.time(e);return r.wallMs=Us()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new L8;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}mp.nextTensorId=0;mp.nextVariableId=0;function wCe(t){const e=O_(pe(t),"float32");return ee.makeTensor(e,t,"float32")}function aK(){const t=Vq();if(t._tfengine==null){const e=new WTe(t);t._tfengine=new mp(e)}return KTe(t._tfengine.ENV),gCe(()=>t._tfengine),t._tfengine}const ee=aK();function SCe(t,e){const n={a:t,b:e};return ee.runKernel(Jp,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(){return typeof navigator<"u"&&navigator!=null}function oK(t){if(t||TCe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function lK(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zs=le();Zs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Zs.registerFlag("IS_BROWSER",()=>lK());Zs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Zs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Zs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Zs.registerFlag("PROD",()=>!1);Zs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Zs.getBool("DEBUG"));Zs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Zs.registerFlag("IS_TEST",()=>!1);Zs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Zs.getBool("DEBUG"));Zs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Zs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Zs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(t,e){let n=t;if(Ba(t))return e==="string"?[]:[t.length];if(nK(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(rK(t))return[t.buffer.size/(e==null?4:mx(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ba(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&le().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&uK(t,r,[]),r}function uK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ba(t)){P(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}P(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),P(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)uK(t[s],r,n.concat(s))}function z8(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function M(t,e,n,r="numeric"){if(t instanceof xe())return z8(r,t.dtype,e,n),t;let s=Zp(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),z8(r,s,e,n),t==null||!Ba(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Mc(t,s);!Ba(t)&&!Array.isArray(t)&&(t=[t]);const o=s!=="string"?Nd(t,s):sd(t,[],!0);return ee.makeTensor(o,i,s)}function Sx(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,a)=>M(i,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cK="__op";function X(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+cK;const s=(...i)=>{ee.startScope(n);try{const a=r(...i);return rd(a)&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(a),a}catch(a){throw ee.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(t,e){const n=M(t,"real","complex"),r=M(e,"imag","complex");Ai(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return ee.runKernel(B_,s)}const pc=X({complex_:CCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fc(t,e,n,r){if(r==null)r=Zp(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(rK(t)||nK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ee.backend.createTensorFromGPUData(t,e||n,r)}if(!Ba(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ia(e);const s=pe(e),i=pe(n);P(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==pe(e.slice(a)):!0;P(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ba(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Nd(t,r):sd(t,[],!0),ee.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function io(t,e,n){const r=Mc(t,n);return Fc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const id={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class bo{static join(e){return new bo(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Ba(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),a=new Uint8Array(i);let o=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=e+o-u.start,d=o,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,f,p-f);if(a.set(m,d),o+=m.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=ECe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function ECe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Io(){return ee}function B8(){return ee.memory()}function ie(t,e){return ee.tidy(t,e)}function mt(t){sK(t).forEach(n=>n.dispose())}function zr(t){return ee.keep(t)}function kCe(){return ee.ready()}function NCe(){return ee.backendName}function fK(t,e,n=1){return ee.registerBackend(t,e,n)}function dK(){return ee.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mc=4;async function fN(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<s.length;++a){const o=s[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const d=await l.bytes(),h=d.reduce((g,y)=>g+y.length,0)+mc*d.length,p=new Uint8Array(h);let m=0;for(let g=0;g<d.length;g++){const y=d[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=mc,p.set(y,m),m+=y.length}f(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:ICe(i),specs:n}}function hK(t,e){const n=new bo(t),r={};let s=0;for(const i of e){const a=ACe(i,(o,l)=>n.slice(s+o,s+l));r[i.name]=pK(i,n.slice(s,s+a)),s+=a}return r}function ACe(t,e){const n=pe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=id[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=mc+new Uint32Array(e(s,s+mc))[0];return s}else r=id[t.dtype];return n*r}async function $Ce(t,e){const n=pe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=id[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=mc+new Uint32Array(await e(s,s+mc))[0];return s}else r=id[t.dtype];return n*r}function pK(t,e){const n=t.name,r=t.dtype,s=t.shape,i=pe(s);let a,o=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=id[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];a[f]=d*l.scale+l.min}}else if(l.dtype==="float16")a=MCe()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];a[f]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*u}else if(r==="string"){const l=pe(t.shape);a=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(o,o+mc))[0];o+=mc;const f=new Uint8Array(e.slice(o,o+c));a.push(f),o+=c}}else{const l=id[r];if(r==="float32")a=new Float32Array(e);else if(r==="int32")a=new Int32Array(e);else if(r==="bool")a=new Uint8Array(e);else if(r==="complex64"){a=new Float32Array(e);const u=new Float32Array(a.length/2),c=new Float32Array(a.length/2);for(let p=0;p<u.length;p++)u[p]=a[p*2],c[p]=a[p*2+1];const f=io(u,s,"float32"),d=io(c,s,"float32"),h=pc(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*l}return io(a,s,r)}async function j8(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function mK(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const a=await $Ce(i,async(u,c)=>(s=await j8(r,s,c),s.slice(u,c)));s=await j8(r,s,a);const o=s.slice(0,a);s=s.slice(a);const l=pK(i,o);if(n[i.name]=l,NCe()==="webgpu"){const u=dK();"uploadToGPU"in u&&pe(l.shape)>=le().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function ICe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const BO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function U8(t){return BO?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function _Ce(t){if(BO)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function OCe(t){if(BO){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function gK(t){return bo.join(t)}function V8(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function yK(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function vK(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function jO(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),vK(t,n,r)}function y0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:U8(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:U8(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new bo(t.weightData).byteLength}}function dN(t){const e=[];for(const n of t)e.push(...n.weights);return e}function DCe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function RCe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function PCe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function MCe(){const t=DCe(),e=RCe(),n=PCe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let a=0;a<r.length;a++){const o=r[a],l=t[n[o>>10]+(o&1023)]+e[o>>10];i[a]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ln{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ln.instance==null&&(Ln.instance=new Ln),Ln.instance}static registerSaveRouter(e){Ln.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ln.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ln.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ln.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Ln.getInstance().loadRouters:Ln.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&s.push(o)}),s}}const FCe=t=>Ln.registerSaveRouter(t),LCe=t=>Ln.registerLoadRouter(t),bK=t=>Ln.getSaveHandlers(t),zCe=(t,e)=>Ln.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hN="tensorflowjs",pN=1,Ef="models_store",zu="model_info_store";function xK(){if(!le().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function mN(t){const e=t.result;e.createObjectStore(Ef,{keyPath:"modelPath"}),e.createObjectStore(zu,{keyPath:"modelPath"})}class ad{constructor(e){if(this.indexedDB=xK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(hN,pN);i.onupgradeneeded=()=>mN(i),i.onsuccess=()=>{const a=i.result;if(n==null){const o=a.transaction(Ef,"readonly"),u=o.objectStore(Ef).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(a.close(),s(u.error)),o.oncomplete=()=>a.close()}else{n.weightData=bo.join(n.weightData);const o=y0(n),l=a.transaction(zu,"readwrite");let u=l.objectStore(zu),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return s(d)}let f;c.onsuccess=()=>{f=a.transaction(Ef,"readwrite");const d=f.objectStore(Ef);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(p){return s(p)}h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=p=>{u=l.objectStore(zu);const m=u.delete(this.modelPath);m.onsuccess=()=>(a.close(),s(h.error)),m.onerror=g=>(a.close(),s(h.error))}},c.onerror=d=>(a.close(),s(c.error)),l.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}ad.URL_SCHEME="indexeddb://";const wK=t=>le().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ad.URL_SCHEME)?BCe(t.slice(ad.URL_SCHEME.length)):null;Ln.registerSaveRouter(wK);Ln.registerLoadRouter(wK);function BCe(t){return new ad(t)}function jCe(t){return t.startsWith(ad.URL_SCHEME)?t.slice(ad.URL_SCHEME.length):t}class UCe{constructor(){this.indexedDB=xK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(hN,pN);r.onupgradeneeded=()=>mN(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(zu,"readonly"),o=i.objectStore(zu).getAll();o.onsuccess=()=>{const l={};for(const u of o.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),n(o.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=jCe(e),new Promise((n,r)=>{const s=this.indexedDB.open(hN,pN);s.onupgradeneeded=()=>mN(s),s.onsuccess=()=>{const i=s.result,a=i.transaction(zu,"readwrite"),o=a.objectStore(zu),l=o.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),f=()=>{u=i.transaction(Ef,"readwrite");const h=u.objectStore(Ef).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=d=>(f(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),a.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cl="/",ah="tensorflowjs_models",SK="info",VCe="model_topology",WCe="weight_specs",GCe="weight_data",HCe="model_metadata";function TK(t){return{info:[ah,t,SK].join(Cl),topology:[ah,t,VCe].join(Cl),weightSpecs:[ah,t,WCe].join(Cl),weightData:[ah,t,GCe].join(Cl),modelMetadata:[ah,t,HCe].join(Cl)}}function CK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function qCe(t){const e=t.split(Cl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Cl)}function KCe(t){return t.startsWith(od.URL_SCHEME)?t.slice(od.URL_SCHEME.length):t}class od{constructor(e){if(!le().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=TK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=y0(e),i=bo.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,_Ce(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw CK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=OCe(a),n}}od.URL_SCHEME="localstorage://";const EK=t=>le().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(od.URL_SCHEME)?XCe(t.slice(od.URL_SCHEME.length)):null;Ln.registerSaveRouter(EK);Ln.registerLoadRouter(EK);function XCe(t){return new od(t)}class YCe{constructor(){P(le().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),P(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=ah+Cl,r=Cl+SK;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const a=qCe(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=KCe(e);const n=TK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return CK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mh="://";class Ns{constructor(){this.managers={}}static getInstance(){return Ns.instance==null&&(Ns.instance=new Ns),Ns.instance}static registerManager(e,n){P(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Mh)&&(e=e.slice(0,e.indexOf(Mh))),P(e.length>0,()=>"scheme must not be an empty string.");const r=Ns.getInstance();P(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ns.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ns.getInstance().managers)}}function jb(t){if(t.indexOf(Mh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ns.getSchemes().join(",")}`);return{scheme:t.split(Mh)[0],path:t.split(Mh)[1]}}async function kK(t,e,n=!1){P(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Ln.getLoadHandlers(t);P(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),P(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Ln.getSaveHandlers(e);P(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),P(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=i[0],o=jb(t).scheme,l=jb(t).path,u=o===jb(t).scheme,c=await s.load();n&&u&&await Ns.getManager(o).removeModel(l);const f=await a.save(c);return n&&!u&&await Ns.getManager(o).removeModel(l),f.modelArtifactsInfo}async function ZCe(){const t=Ns.getSchemes(),e={};for(const n of t){const r=await Ns.getManager(n).listModels();for(const s in r){const i=n+Mh+s;e[i]=r[s]}}return e}async function QCe(t){const e=jb(t);return Ns.getManager(e.scheme).removeModel(e.path)}async function JCe(t,e){return kK(t,e,!1)}async function eEe(t,e){return kK(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tEe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!le().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Hq(e)}}if(le().get("IS_BROWSER")){le().setPlatform("browser",new tEe);try{Ns.registerManager(od.URL_SCHEME,new YCe)}catch{}try{Ns.registerManager(ad.URL_SCHEME,new UCe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nEe={importFetch:()=>require("node-fetch")};let rC;class rEe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return le().global.fetch!=null?le().global.fetch(e,n):(rC==null&&(rC=nEe.importFetch()),rC(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}le().get("IS_NODE")&&!le().get("IS_BROWSER")&&le().setPlatform("node",new rEe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nt(t,e="float32",n){return e=e||"float32",ia(t),new Ir(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t,e){const n=M(t,"x","cast");if(!BTe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return ee.runKernel($1,r,s)}const Be=X({cast_:sEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t){const n={x:M(t,"x","clone","string_or_numeric")};return ee.runKernel(U1,n)}const Ll=X({clone_:iEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NK(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */aK();const aEe={buffer:Nt,cast:Be,clone:Ll,print:NK};yCe(aEe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e){let n=M(t,"a","add"),r=M(e,"b","add");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(Jp,s)}const ke=X({add_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t,e){let n=M(t,"a","floorDiv"),r=M(e,"b","floorDiv");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(B1,s)}const UO=X({floorDiv_:lEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t,e){let n=M(t,"a","div"),r=M(e,"b","div");if([n,r]=Jn(n,r),n.dtype==="int32"&&r.dtype==="int32")return UO(n,r);const s={a:n,b:r},i={};return ee.runKernel(R1,s,i)}const Ke=X({div_:uEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e){let n=M(t,"a","mul"),r=M(e,"b","mul");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(Z1,s)}const Z=X({mul_:cEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t){const e=M(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ee.runKernel(P3,n)}else{const n={x:e};return ee.runKernel(k3,n)}}const xr=X({abs_:fEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t){const n={x:M(t,"x","acos")};return ee.runKernel(S1,n)}const AK=X({acos_:dEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const n={x:M(t,"x","acosh")};return ee.runKernel(T1,n)}const $K=X({acosh_:hEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){P(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),P(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>M(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!jt(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ee.runKernel(N3,r)}const mEe=X({addN_:pEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t,e=null,n=!1){const s={x:M(t,"x","all","bool")},i={axis:e,keepDims:n};return ee.runKernel(R_,s,i)}const VO=X({all_:gEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t,e=null,n=!1){const s={x:M(t,"x","any","bool")},i={axis:e,keepDims:n};return ee.runKernel(P_,s,i)}const Tx=X({any_:yEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t,e=0){const r={x:M(t,"x","argMax")},s={axis:e};return ee.runKernel(A3,r,s)}const gp=X({argMax_:vEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e=0){const r={x:M(t,"x","argMin")},s={axis:e};return ee.runKernel($3,r,s)}const IK=X({argMin_:bEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t){const n={x:M(t,"x","asin")};return ee.runKernel(C1,n)}const _K=X({asin_:xEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const n={x:M(t,"x","asinh")};return ee.runKernel(E1,n)}const OK=X({asinh_:wEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t){const n={x:M(t,"x","atan")};return ee.runKernel(k1,n)}const DK=X({atan_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(t,e){let n=M(t,"a","atan2"),r=M(e,"b","atan2");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(A1,s)}const RK=X({atan2_:TEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const n={x:M(t,"x","atanh")};return ee.runKernel(N1,n)}const PK=X({atanh_:CEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(t,e,n,r,s="NHWC",i){const a=t[3],o=[...e,a],l=uu(s);return Gr(t,o,n,i,r,null,null,l)}function Ga(t,e,n,r,s,i,a="channelsLast"){const[o,l]=gy(e);let u;if(a==="channelsLast")u=[o,l,t[3],t[3]];else if(a==="channelsFirst")u=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Gr(t,u,n,r,s,i,!1,a)}function lu(t,e,n,r,s,i,a="NDHWC"){const[o,l,u]=gN(e);let c,f;if(a==="NDHWC")f="channelsLast",c=[o,l,u,t[4],t[4]];else if(a==="NCDHW")f="channelsFirst",c=[o,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Lc(t,c,n,r,s,!1,f,i)}function Gr(t,e,n,r,s,i,a=!1,o="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f]=t;else if(o==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,p]=e,[m,g]=gy(n),[y,v]=gy(r),b=Fh(d,y),x=Fh(h,v),{padInfo:w,outHeight:C,outWidth:E}=NEe(s,u,c,m,g,b,x,i,o),A=a?p*f:p;let O;return o==="channelsFirst"?O=[l,A,C,E]:o==="channelsLast"&&(O=[l,C,E,A]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:f,outHeight:C,outWidth:E,outChannels:A,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:O,filterShape:e}}function Lc(t,e,n,r,s,i=!1,a="channelsLast",o){let[l,u,c,f,d]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f,d]=t;else if(a==="channelsFirst")[l,d,u,c,f]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,p,m,,g]=e,[y,v,b]=gN(n),[x,w,C]=gN(r),E=Fh(h,x),A=Fh(p,w),O=Fh(m,C),{padInfo:R,outDepth:F,outHeight:z,outWidth:j}=AEe(s,u,c,f,y,v,b,E,A,O,o),H=i?g*d:g;let J;return a==="channelsFirst"?J=[l,H,F,z,j]:a==="channelsLast"&&(J=[l,F,z,j,H]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:f,inChannels:d,outDepth:F,outHeight:z,outWidth:j,outChannels:H,padInfo:R,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:A,effectiveFilterWidth:O,dilationDepth:x,dilationHeight:w,dilationWidth:C,inShape:t,outShape:J,filterShape:e}}function EEe(t,e,n,r,s){r==null&&(r=WO(t,e,n));const i=t[0],a=t[1],o=yy((i-e+2*r)/n+1,s),l=yy((a-e+2*r)/n+1,s);return[o,l]}function kEe(t,e,n,r,s,i){s==null&&(s=WO(t,e[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*s>=e[o]&&(a[o]=yy((t[o]-e[o]+2*s)/r[o]+1,i));return a}function WO(t,e,n,r=1){const s=Fh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function gy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function gN(t){return typeof t=="number"?[t,t,t]:t}function Fh(t,e){return e<=1?t:t+(t-1)*(e-1)}function NEe(t,e,n,r,s,i,a,o,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=EEe([e,n],i,r,t,o);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/s);const d=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(f-1)*s+a-n),p=Math.floor(d/2),m=d-p,g=Math.floor(h/2),y=h-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),f=Math.ceil((n-a+1)/s);else if(typeof t=="object"){const d=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:d,bottom:h,left:p,right:m,type:d===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=yy((e-i+d+h)/r+1,o),f=yy((n-a+p+m)/s+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function AEe(t,e,n,r,s,i,a,o,l,u,c){let f,d,h,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=kEe([e,n,r,1],[o,l,u],1,[s,i,a],t,c);d=g[0],h=g[1],p=g[2]}else if(t==="same"){d=Math.ceil(e/s),h=Math.ceil(n/i),p=Math.ceil(r/a);const m=(d-1)*s+o-e,g=(h-1)*i+l-n,y=(p-1)*a+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,C=Math.floor(y/2),E=y-C;f={top:x,bottom:w,left:C,right:E,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function yy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function gc(t){const[e,n,r]=gy(t);return e===1&&n===1&&r===1}function us(t,e){return gc(t)||gc(e)}function ld(t){return gy(t).every(e=>e>0)}function uu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Fs(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")P(hp(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{P(hp(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t,e){const r={x:M(t,"x","reshape","string_or_numeric")},s={shape:e};return ee.runKernel(mS,r,s)}const ne=X({reshape_:$Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t,e,n,r,s){const i=M(t,"x","avgPool","float32"),a=1;P(us(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Fs("avgPool",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let f=ee.runKernel(I3,u,c);return f=Be(f,i.dtype),l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const IS=X({avgPool_:IEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t,e,n,r,s,i="NDHWC"){const a=M(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),P(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),P(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Fs("avgPool3d",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let f=ee.runKernel(_3,u,c);return f=Be(f,o.dtype),l?ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const MK=X({avgPool3d_:_Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t,e=0){P(t.length>=1,()=>"Pass at least one tensor to concat");const n=Sx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Ll(n[0]);const r=n,s={axis:e};return ee.runKernel(M3,r,s)}const Zn=X({concat_:OEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t,e,n=!1,r=!1){let s=M(t,"a","matMul"),i=M(e,"b","matMul");[s,i]=Jn(s,i);const a={a:s,b:i},o={transposeA:n,transposeB:r};return ee.runKernel(O3,a,o)}const Pt=X({matMul_:DEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(t){const n={x:M(t,"x","sigmoid","float32")};return ee.runKernel(l0,n)}const ao=X({sigmoid_:REe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t,e,n){const r=M(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return ee.runKernel(xS,s,i)}const ht=X({slice_:PEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t){const n={x:M(t,"x","tanh","float32")};return ee.runKernel(p0,n)}const ud=X({tanh_:MEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(t,e,n,r,s,i){const a=M(t,"forgetBias","basicLSTMCell"),o=M(e,"lstmKernel","basicLSTMCell"),l=M(n,"lstmBias","basicLSTMCell"),u=M(r,"data","basicLSTMCell"),c=M(s,"c","basicLSTMCell"),f=M(i,"h","basicLSTMCell"),d=Zn([u,f],1),h=Pt(d,o),p=ke(h,l),m=p.shape[0],g=p.shape[1]/4,y=[m,g],v=ht(p,[0,0],y),b=ht(p,[0,g],y),x=ht(p,[0,g*2],y),w=ht(p,[0,g*3],y),C=ke(Z(ao(v),ud(b)),Z(c,ao(ke(a,x)))),E=Z(ud(C),ao(w));return[C,E]}const LEe=X({basicLSTMCell_:FEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t,e,n){const r=M(t,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);P(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),P(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),P(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},a={blockShape:e,crops:n};return ee.runKernel(D3,i,a)}const _S=X({batchToSpaceND_:zEe});function BEe(t){let e;return t.rank===0||t.rank===1?e=ne(t,[1,1,1,t.size]):t.rank===2?e=ne(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t,e,n,r,s,i){i==null&&(i=.001);const a=M(t,"x","batchNorm"),o=M(e,"mean","batchNorm"),l=M(n,"variance","batchNorm");let u;s!=null&&(u=M(s,"scale","batchNorm"));let c;r!=null&&(c=M(r,"offset","batchNorm")),P(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:BEe(a),scale:u,offset:c,mean:o,variance:l},h={varianceEpsilon:i},p=ee.runKernel(G3,d,h);return ne(p,a.shape)}const b0=X({batchNorm_:jEe});function UEe(t,e,n,r,s,i){const a=M(t,"x","batchNorm"),o=M(e,"mean","batchNorm"),l=M(n,"variance","batchNorm");let u;s!=null&&(u=M(s,"scale","batchNorm"));let c;return r!=null&&(c=M(r,"offset","batchNorm")),P(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),P(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),P(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),b0(a,o,l,c,u,i)}const FK=X({batchNorm2d_:UEe});function VEe(t,e,n,r,s,i){const a=M(t,"x","batchNorm"),o=M(e,"mean","batchNorm"),l=M(n,"variance","batchNorm");let u;s!=null&&(u=M(s,"scale","batchNorm"));let c;return r!=null&&(c=M(r,"offset","batchNorm")),P(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),P(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),P(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),b0(a,o,l,c,u,i)}const LK=X({batchNorm3d_:VEe});function WEe(t,e,n,r,s,i){const a=M(t,"x","batchNorm"),o=M(e,"mean","batchNorm"),l=M(n,"variance","batchNorm");let u;s!=null&&(u=M(s,"scale","batchNorm"));let c;return r!=null&&(c=M(r,"offset","batchNorm")),P(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),P(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),P(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),b0(a,o,l,c,u,i)}const zK=X({batchNorm4d_:WEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t,e,n){const r=M(t,"x","bincount"),s=M(e,"weights","bincount");P(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},a={size:n};return ee.runKernel(L_,i,a)}const BK=X({bincount_:GEe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t,e){const n=M(t,"x","bitwiseAnd"),r=M(e,"y","bitwiseAnd");if(!jt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return ee.runKernel(R3,s)}const qEe=X({bitwiseAnd_:HEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t,e){const n=M(t,"s0","broadcastArgs","int32"),r=M(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return ee.runKernel(z_,s)}const XEe=X({broadcastArgs_:KEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t,e){let n=M(t,"broadcastTo","x");const r=n.shape;if(ia(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=ne(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Ll(n);const o={x:n},l={reps:i};return ee.runKernel(m0,o,l)}const Lh=X({broadcastTo_:YEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(t){const n={x:M(t,"x","ceil","float32")};return ee.runKernel(I1,n)}const jK=X({ceil_:ZEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function em(t,e,n){ia(t),n=n||Zp(e);const r={shape:t,value:e,dtype:n};return ee.runKernel(eO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t,e,n){const r=M(t,"x","clipByValue");if(P(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return em(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return ee.runKernel(_1,s,i)}const Qs=X({clipByValue_:QEe});function JEe(t){return Zn(t,0)}const UK=X({concat1d_:JEe});function eke(t,e){return Zn(t,e)}const VK=X({concat2d_:eke});function tke(t,e){return Zn(t,e)}const WK=X({concat3d_:tke});function nke(t,e){return Zn(t,e)}const GK=X({concat4d_:nke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t,e,n,r,s="NHWC",i=[1,1],a){const o=M(t,"x","conv2d","float32"),l=M(e,"filter","conv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Fs("conv2d",r,a);const f=s==="NHWC"?u.shape[3]:u.shape[1];P(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),P(us(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),P(ld(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),P(ld(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},p=ee.runKernel(F3,d,h);return c?ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const yc=X({conv2d_:rke});function ske(t,e,n,r,s="NWC",i=1,a){const o=M(t,"x","conv1d"),l=M(e,"filter","conv1d");let u=o,c=!1;o.rank===2&&(c=!0,u=ne(o,[1,o.shape[0],o.shape[1]])),P(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),P(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Fs("conv1d",r,a),P(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),P(us(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),P(ld(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),P(ld(n),()=>"Error in conv1D: Stride should be larger than 0."),P(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const f=ne(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=ne(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=yc(d,f,[1,n],r,"NHWC",[1,i],a);return c?ne(g,[g.shape[2],g.shape[3]]):ne(g,[g.shape[0],g.shape[2],g.shape[3]])}const GO=X({conv1d_:ske});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t,e,n,r,s,i="NHWC",a){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,u=!1;e.rank===3&&(u=!0,l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),P(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),P(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),P(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?o[3]:o[1],f=i==="NHWC"?l.shape[3]:l.shape[1];P(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),P(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Fs("conv2dDerInput",s,a);const d={dy:l,filter:n},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,inputShape:o},p=ee.runKernel(L3,d,h);return u?ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const HO=X({conv2DBackpropInput_:ike});function ake(t,e,n,r,s,i){const a=M(t,"x","conv2dTranspose"),o=M(e,"filter","conv2dTranspose");return HO(n,a,o,r,s,"NHWC",i)}const qO=X({conv2dTranspose_:ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t,e,n,r,s="NDHWC",i=[1,1,1]){const a=M(t,"x","conv3d"),o=M(e,"filter","conv3d");let l=a,u=!1;a.rank===4&&(u=!0,l=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),P(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),P(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),P(us(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),P(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),P(ld(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),P(ld(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:o},f={strides:n,pad:r,dataFormat:s,dilations:i},d=ee.runKernel(z3,c,f);return u?ne(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const HK=X({conv3d_:oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t,e,n,r,s){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,a=e,o=!1;e.rank===4&&(o=!0,a=ne(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=a.shape[4];P(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),P(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),P(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),P(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),P(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:a,filter:n},f={pad:s,strides:r,inputShape:i},d=ee.runKernel(V_,c,f);return o?ne(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const qK=X({conv3DBackpropInput_:lke});function uke(t,e,n,r,s){const i=M(t,"x","conv3dTranspose"),a=M(e,"filter","conv3dTranspose");return qK(n,i,a,r,s)}const KK=X({conv3dTranspose_:uke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const n={x:M(t,"x","cos","float32")};return ee.runKernel(O1,n)}const OS=X({cos_:cke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(t){const n={x:M(t,"x","cosh","float32")};return ee.runKernel(D1,n)}const KO=X({cosh_:fke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(t,e=0,n=!1,r=!1){const i={x:M(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return ee.runKernel(W_,i,a)}const Cx=X({cumprod_:dke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t,e=0,n=!1,r=!1){const i={x:M(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return ee.runKernel(B3,i,a)}const XO=X({cumsum_:hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t,e,n,r=!1){const s=M(t,"x","denseBincount"),i=M(e,"weights","denseBincount");P(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),P(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const a={x:s,weights:i},o={size:n,binaryOutput:r};return ee.runKernel(H_,a,o)}const yN=X({denseBincount_:pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(t,e,n="NHWC"){const r=M(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];P(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),P(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),P(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),P(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return ee.runKernel(q_,o,l)}const XK=X({depthToSpace_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e,n,r,s="NHWC",i=[1,1],a){const o=M(t,"x","depthwiseConv2d","float32"),l=M(e,"filter","depthwiseConv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=s==="NHWC"?u.shape[3]:u.shape[1];P(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Fs("depthwiseConv2d",r,a);const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},p=ee.runKernel(j3,d,h);return c?ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const x0=X({depthwiseConv2d_:gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t){const n={x:M(t,"x","diag")};return ee.runKernel(Y_,n)}const vke=X({diag_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bke(t,e,n,r,s=[1,1],i="NHWC"){const a=M(t,"x","dilation2d"),o=M(e,"filter","dilation2d");P(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),P(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),P(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=a,u=!1;a.rank===3&&(l=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),P(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const c={x:l,filter:o},f={strides:n,pad:r,dilations:s},d=ee.runKernel(U3,c,f);return u?ne(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const YK=X({dilation2d_:bke});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yp(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,a=t[i]||1;(e[e.length-1-s]||1)>1&&a===1&&r.unshift(i)}return r}function Dr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,a=e[i];(s==null||s===1&&a>1)&&n.unshift(i)}return n}function wt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let a=e[e.length-s-1];if(a==null&&(a=1),i===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=i;else if(i!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t,e){let n=M(t,"a","equal","string_or_numeric"),r=M(e,"b","equal","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(V3,s)}const uo=X({equal_:xke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t,e,n){const r=M(e,"a","where"),s=M(n,"b","where"),i=M(t,"condition","where","bool"),a=wt(wt(i.shape,r.shape),s.shape),o=Lh(i,a),l=Lh(r,a),u=Lh(s,a),c={condition:o,t:l,e:u};return ee.runKernel(bS,c)}const xs=X({where_:wke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(t){const n={x:M(t,"x","zerosLike")};return ee.runKernel(AS,n)}const Vt=X({zerosLike_:Ske});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t,e){let n=M(t,"a","div"),r=M(e,"b","div");[n,r]=Jn(n,r);const s=Ke(n,r),i=Vt(s),a=uo(r,i);return xs(a,i,s)}const ZK=X({divNoNan_:Tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t,e){const n=M(t,"t1","dot"),r=M(e,"t2","dot");P((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(P(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const a=ne(n,[1,-1]),o=ne(r,[-1,1]),l=Pt(a,o);return ne(l,[])}else if(n.rank===1&&r.rank===2){const a=ne(n,[1,-1]),o=ne(r,[r.shape[0],r.shape[1]]),l=Pt(a,o);return ne(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=ne(r,[-1,1]),o=Pt(n,a);return ne(o,[o.size])}else{const a=ne(r,[r.shape[0],r.shape[1]]);return Pt(n,a)}}const QK=X({dot_:Cke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(t,...e){const n=e.map((s,i)=>M(s,`tensors${i}`,"einsum")),r={equation:t};return ee.runKernel(Z_,n,r)}const oh=X({einsum_:Eke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(t){const n={x:M(t,"x","elu","float32")};return ee.runKernel(P1,n)}const w0=X({elu_:kke});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t,e){const n=M(t,"x","ensureShape","string_or_numeric");if(!LTe(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Ake=X({ensureShape_:Nke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ke(t){let e=M(t,"x","erf");P(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Be(e,"float32"));const n={x:e};return ee.runKernel(M1,n)}const YO=X({erf_:$ke});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function JK(t,e,n){const r=t.length+e.length,s=[];let i=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?s.push(t[i++]):s.push(e[a++]);return s}function Hr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function ir(t,e){const n=e.map(r=>1);return JK(t,n,e)}function cs(t,e,n){P(ZO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Hn(t,e){if(ZO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function zc(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ar(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t,e=null,n=!1){const s={x:M(t,"x","max")},i={reductionIndices:e,keepDims:n};return ee.runKernel(tS,s,i)}const Ra=X({max_:Ike});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t,e=null,n=!1){const s={x:M(t,"x","min")},i={axis:e,keepDims:n};return ee.runKernel(iS,s,i)}const vy=X({min_:_ke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(t,e){let n=M(t,"base","pow"),r=M(e,"exp","pow");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(Q1,s)}const Xl=X({pow_:Oke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ut(t,e){if((Ba(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ba(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fc(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t){const n={x:M(t,"x","sqrt","float32")};return ee.runKernel(c0,n)}const as=X({sqrt_:Dke});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const e=M(t,"x","square"),n={};return ee.runKernel("Square",{x:e},n)}const dn=X({square_:Rke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(t,e=null,n=!1){let r=M(t,"x","sum");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return ee.runKernel(wS,s,i)}const Je=X({sum_:Pke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t,e="euclidean",n=null,r=!1){t=M(t,"x","norm");const s=eX(t,e,n);let i=s.shape;if(r){const a=Ot(n,t.shape);i=ir(s.shape,a)}return ne(s,i)}function eX(t,e,n=null){if(t.rank===0)return xr(t);if(t.rank!==1&&n===null)return eX(ne(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Je(xr(t),n);if(e===1/0)return Ra(xr(t),n);if(e===-1/0)return vy(xr(t),n);if(e==="euclidean"||e===2)return as(Je(Xl(xr(t),ut(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Ra(Je(xr(t),n[0]),n[1]-1);if(e===1/0)return Ra(Je(xr(t),n[1]),n[0]);if(e===-1/0)return vy(Je(xr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return as(Je(dn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const S0=X({norm_:Mke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t,e=null,n=!1){return S0(t,"euclidean",e,n)}const tX=X({euclideanNorm_:Fke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t){const n={x:M(t,"x","exp")};return ee.runKernel(F1,n)}const Ps=X({exp_:Lke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zke(t,e=0){const n=M(t,"x","expandDims","string_or_numeric");P(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return ee.runKernel(W3,r,s)}const Sr=X({expandDims_:zke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t){const n={x:M(t,"x","expm1")};return ee.runKernel(L1,n)}const nX=X({expm1_:Bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t,e){const n=M(t,"x","tile","string_or_numeric");P(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return ee.runKernel(m0,r,s)}const Ia=X({tile_:jke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t,e,n,r="float32"){e==null&&(e=t);const s=Nt([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)s.set(1,o,o);const a=ne(s.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return Ia(Sr(a,0),[n[0],1,1]);if(n.length===2)return Ia(Sr(Sr(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ia(Sr(Sr(Sr(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const QO=X({eye_:Uke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const n={x:M(t,"x","floor","float32")};return ee.runKernel(z1,n)}const T0=X({floor_:Vke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t,e,n=0,r=0){const s=M(t,"x","gather"),i=M(e,"indices","gather","int32"),a={x:s,indices:i},o={axis:n,batchDims:r};return ee.runKernel(H3,a,o)}const C0=X({gather_:Wke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t,e){let n=M(t,"a","greater","string_or_numeric"),r=M(e,"b","greater","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(q3,s)}const Ii=X({greater_:Gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t,e){let n=M(t,"a","greaterEqual","string_or_numeric"),r=M(e,"b","greaterEqual","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(j1,s)}const Bc=X({greaterEqual_:Hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t){const n={input:M(t,"input","imag")};return ee.runKernel(sO,n)}const DS=X({imag_:qke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(t){const n={x:M(t,"x","isFinite")};return ee.runKernel(V1,n)}const rX=X({isFinite_:Kke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t){const n={x:M(t,"x","isInf")};return ee.runKernel(W1,n)}const sX=X({isInf_:Xke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(t){const n={x:M(t,"x","isNaN")};return ee.runKernel(G1,n)}const iX=X({isNaN_:Yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t,e=.2){const r={x:M(t,"x","leakyRelu")},s={alpha:e};return ee.runKernel(K3,r,s)}const RS=X({leakyRelu_:Zke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qke(t,e){let n=M(t,"a","less","string_or_numeric"),r=M(e,"b","less","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(X3,s)}const by=X({less_:Qke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t,e){let n=M(t,"a","lessEqual","string_or_numeric"),r=M(e,"b","lessEqual","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Y3,s)}const Ad=X({lessEqual_:Jke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return ee.runKernel(iO,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e=5,n=1,r=1,s=.5){const i=M(t,"x","localResponseNormalization");P(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),P(hp(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,o=!1;i.rank===3&&(o=!0,a=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:a},u={depthRadius:e,bias:n,alpha:r,beta:s},c=ee.runKernel(eS,l,u);return o?ne(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const aX=X({localResponseNormalization_:tNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t){const n={x:M(t,"x","log","float32")};return ee.runKernel(H1,n)}const na=X({log_:nNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t){const n={x:M(t,"x","log1p")};return ee.runKernel(q1,n)}const PS=X({log1p_:rNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e){P(Qk(t),()=>"The f passed in variableGrads(f) must be a function"),P(e==null||Array.isArray(e)&&e.every(u=>u instanceof wx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in ee.registeredVariables)e.push(ee.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),P(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:a,grads:o}=ee.gradients(t,e,null,i);P(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),P(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:a,grads:l}}function Yl(t){return ee.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const n={x:M(t,"x","neg")};return ee.runKernel(oS,n)}const $n=X({neg_:iNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t){const n={x:M(t,"x","softplus")};return ee.runKernel(u0,n)}const tm=X({softplus_:aNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(t){const e=M(t,"x","logSigmoid");return Yl(r=>({value:$n(tm($n(r))),gradFunc:a=>Z(a,ao($n(r)))}))(e)}const oX=X({logSigmoid_:oNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e){let n=M(t,"a","sub"),r=M(e,"b","sub");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(d0,s)}const Xe=X({sub_:lNe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e=-1){const n=M(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Yl((s,i)=>{const o=Ra(s,e,!0),l=Xe(s,o),u=Xe(Be(l,"float32"),na(Je(Ps(l),e,!0)));return i([u]),{value:u,gradFunc:(f,d)=>{const[h]=d,p=!0,m=Ps(h);return Xe(f,Z(Je(f,e,p),m))}}})(n)}const JO=X({logSoftmax_:uNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e=null,n=!1){const r=M(t,"x","logSumExp"),s=Ot(e,r.shape),i=Ra(r,s,!0),a=Xe(r,i),o=Ps(a),l=Je(o,s),u=na(l),c=ke(ne(i,u.shape),u);if(n){const f=ir(c.shape,s);return ne(c,f)}return c}const MS=X({logSumExp_:cNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t,e){const n=M(t,"a","logicalAnd","bool"),r=M(e,"b","logicalAnd","bool");wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Z3,s)}const nl=X({logicalAnd_:fNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(t){const n={x:M(t,"x","logicalNot","bool")};return ee.runKernel(Q3,n)}const FS=X({logicalNot_:dNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t,e){const n=M(t,"a","logicalOr","bool"),r=M(e,"b","logicalOr","bool");wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(J3,s)}const eD=X({logicalOr_:hNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e){const n=M(t,"a","logicalXor","bool"),r=M(e,"b","logicalXor","bool");return wt(n.shape,r.shape),nl(eD(t,e),FS(nl(t,e)))}const lX=X({logicalXor_:pNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zv=2147483648;function mNe(t,e,n="left"){const r=M(t,"sortedSequence","searchSorted"),s=M(e,"values","searchSorted"),i=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],o=ne(r,[-1,i]),l=ne(s,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(pe(l.shape)>=Zv)throw new Error(`values tensor size must less than ${Zv}`);if(o.shape[1]>=Zv)throw new Error(`trailing dim_size must less than ${Zv} for int32 output type, was ${o.shape[1]}`);const u={sortedSequence:o,values:l},c={side:n};return ee.runKernel(TO,u,c)}const tD=X({searchSorted_:mNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t,e){return tD(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe(t,e,n,r,s){const i=M(t,"x","maxPool"),a=1;let o=i,l=!1;i.rank===3&&(l=!0,o=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),P(us(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Fs("maxPool",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},f=ee.runKernel(nS,u,c);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const LS=X({maxPool_:yNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t,e=[1,1,1],n,r,s,i="NDHWC"){const a=M(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),P(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Fs("maxPool3d",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},f=ee.runKernel(rS,u,c);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const uX=X({maxPool3d_:vNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t,e,n,r,s=!1){const a={x:M(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=ee.runKernel(uO,a,o);return{result:l[0],indexes:l[1]}}const xNe=X({maxPoolWithArgmax_:bNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t,e){let n=M(t,"a","maximum"),r=M(e,"b","maximum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(K1,s)}const cu=X({maximum_:wNe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t,e=null,n=!1){const s={x:M(t,"x","mean")},i={axis:e,keepDims:n};return ee.runKernel(sS,s,i)}const Yn=X({mean_:SNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t,e="float32"){if(ia(t),e==="complex64"){const r=Tr(t,"float32"),s=Tr(t,"float32");return pc(r,s)}const n=Ss(pe(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yi(t,e="float32"){if(ia(t),e==="complex64"){const r=yi(t,"float32"),s=Tr(t,"float32");return pc(r,s)}const n=O_(pe(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=M(t,"x","meshgrid",t instanceof Jt?t.dtype:"float32");if(e===void 0)return[r];let s=M(e,"y","meshgrid",e instanceof Jt?e.dtype:"float32");const i=pe(r.shape),a=pe(s.shape);return n==="xy"?(r=ne(r,[1,-1]),s=ne(s,[-1,1]),[Pt(yi([a,1],r.dtype),r),Pt(s,yi([1,i],s.dtype))]):(r=ne(r,[-1,1]),s=ne(s,[1,-1]),[Pt(r,yi([1,a],r.dtype)),Pt(yi([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(t,e){let n=M(t,"a","minimum"),r=M(e,"b","minimum");[n,r]=Jn(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(X1,s)}const cd=X({minimum_:CNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ENe(t,e,n){P(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=M(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");P(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)P(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),P(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},a={x:r};return ee.runKernel(aS,a,i)}const cX=X({mirrorPad_:ENe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t,e){let n=M(t,"a","mod"),r=M(e,"b","mod");[n,r]=Jn(n,r);const s={a:n,b:r};return ee.runKernel(Y1,s)}const fX=X({mod_:kNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t,e=null,n=!1){t=M(t,"x","moments");const r=Ot(e,t.shape),s=Yn(t,r,n);let i=s.shape;n||(i=ir(s.shape,r));const a=dn(Xe(Be(t,"float32"),ne(s,i))),o=Yn(a,r,n);return{mean:s,variance:o}}const zS=X({moments_:NNe});function ANe(t,e,n,r){const s=M(e,"data","multiRNNCell"),i=Sx(n,"c","multiRNNCell"),a=Sx(r,"h","multiRNNCell");let o=s;const l=[];for(let f=0;f<t.length;f++){const d=t[f](o,i[f],a[f]);l.push(d[0]),l.push(d[1]),o=d[1]}const u=[],c=[];for(let f=0;f<l.length;f+=2)u.push(l[f]),c.push(l[f+1]);return[u,c]}const $Ne=X({multiRNNCell_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(t,e,n,r=!1){const s=M(t,"logits","multinomial"),i=s.size,a=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?ne(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},c=ee.runKernel(cO,l,u);return a===1?ne(c,[c.size]):c}const _Ne=X({multinomial_:INe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(t,e){let n=M(t,"a","notEqual","string_or_numeric"),r=M(e,"b","notEqual","string_or_numeric");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(lS,s)}const vp=X({notEqual_:ONe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:M(t,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:n,offValue:r};return ee.runKernel(cS,a,o)}const nD=X({oneHot_:DNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const n={x:M(t,"x","onesLike")};return ee.runKernel(uS,n)}const ra=X({onesLike_:RNe});function PNe(t,e){const n=M(t,"v1","outerProduct"),r=M(e,"v2","outerProduct");P(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=ne(n,[-1,1]),i=ne(r,[1,-1]);return Pt(s,i)}const MNe=X({outerProduct_:PNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t,e,n=0){const r=M(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return ee.runKernel(dS,i,s)}const jc=X({pad_:FNe});function LNe(t,e,n=0){return P(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),jc(t,[e],n)}const zNe=X({pad1d_:LNe});function BNe(t,e,n=0){return P(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),jc(t,e,n)}const jNe=X({pad2d_:BNe});function UNe(t,e,n=0){return P(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),jc(t,e,n)}const VNe=X({pad3d_:UNe});function WNe(t,e,n=0){return P(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),jc(t,e,n)}const GNe=X({pad4d_:WNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(t,e,n){const r=M(t,"x","spaceToBatchND");P(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),P(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),P(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return ee.runKernel(SS,s,i)}const BS=X({spaceToBatchND_:HNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t,e,n,r,s,i,a){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=M(t,"x","maxPool");let l=o,u=!1;o.rank===3&&(u=!0,l=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(us(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const c=Ga(l.shape,e,i,s,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=XNe([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[p,m]=KNe([c.inHeight,c.inWidth],f,d),g=h?r:"valid",y=h?l:BS(l,f,p),b=(n==="avg"?()=>IS(y,e,i,g,a):()=>LS(y,e,i,g,a))(),x=h?b:_S(b,f,m);return u?ne(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function KNe(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),i=t.concat(r,s),a=e.map((c,f)=>(c-i[f]%c)%c),o=s.map((c,f)=>c+a[f]),l=e.map((c,f)=>[r[f],o[f]]),u=e.map((c,f)=>[0,a[f]]);return[l,u]}function XNe(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),i=r.map((a,o)=>a-s[o]);return r.map((a,o)=>[s[o],i[o]])}const dX=X({pool_:qNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t,e){const n=M(t,"x","prelu"),r=M(e,"alpha","prelu"),s={x:n,alpha:r};return ee.runKernel(hS,s)}const jS=X({prelu_:YNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t,e=null,n=!1){let r=M(t,"x","prod");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return ee.runKernel(pS,s,i)}const hX=X({prod_:ZNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t,e,n,r){const s=t.map((c,f)=>M(c,`tensors${f}`,"raggedGather","int32")),i=M(e,"paramsDenseValues","raggedGather"),a=M(n,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:i,indices:a},l={outputRaggedRank:r},u=ee.runKernel(pO,o,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const JNe=X({raggedGather_:QNe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(t,e,n){const r=M(t,"starts","raggedRange"),s=M(e,"limits","raggedRange",r.dtype),i=M(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:i},o=ee.runKernel(mO,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const tAe=X({raggedRange_:eAe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t,e,n,r,s){const i=M(t,"shape","raggedTensorToTensor","int32"),a=M(e,"values","raggedTensorToTensor"),o=M(n,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((f,d)=>M(f,`tensors${d}`,"raggedTensorToTensor","int32")),u={shape:i,values:a,defaultValue:o,rowPartitionTensors:l},c={rowPartitionTypes:s};return ee.runKernel(gO,u,c)}const rAe=X({raggedTensorToTensor_:nAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t,e,n){ia(t);const r=pe(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return ee.makeTensor(s,t,n)}const iAe=X({rand_:sAe});var rD={exports:{}};rD.exports;(function(t){(function(e,n,r){function s(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new s(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:this.alea=a})(Uo,t)})(rD);var aAe=rD.exports,sD={exports:{}};sD.exports;(function(t){(function(e,n,r){function s(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new s(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(Uo,t)})(sD);var oAe=sD.exports,iD={exports:{}};iD.exports;(function(t){(function(e,n,r){function s(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new s(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(Uo,t)})(iD);var lAe=iD.exports,aD={exports:{}};aD.exports;(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new s(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(Uo,t)})(aD);var uAe=aD.exports,oD={exports:{}};oD.exports;(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,p;return l.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,l.i=d,p+(c^c>>>16)|0};function u(c,f){var d,h,p,m,g,y=[],v=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,v=Math.max(v,f.length)),p=0,m=-32;m<v;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=h+g,p=d==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],d=y[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[p]=h^d;c.w=g,c.X=y,c.i=p}u(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new s(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(Uo,t)})(oD);var cAe=oD.exports,lD={exports:{}};lD.exports;(function(t){(function(e,n,r){function s(o){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,p=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new s(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(Uo,t)})(lD);var fAe=lD.exports,pX={exports:{}};const dAe={},hAe=Object.freeze(Object.defineProperty({__proto__:null,default:dAe},Symbol.toStringTag,{value:"Module"})),pAe=ite(hAe);(function(t){(function(e,n,r){var s=256,i=6,a=52,o="random",l=r.pow(s,i),u=r.pow(2,a),c=u*2,f=s-1,d;function h(x,w,C){var E=[];w=w==!0?{entropy:!0}:w||{};var A=y(g(w.entropy?[x,b(n)]:x??v(),3),E),O=new p(E),R=function(){for(var F=O.g(i),z=l,j=0;F<u;)F=(F+j)*s,z*=s,j=O.g(1);for(;F>=c;)F/=2,z/=2,j>>>=1;return(F+j)/z};return R.int32=function(){return O.g(4)|0},R.quick=function(){return O.g(4)/4294967296},R.double=R,y(b(O.S),n),(w.pass||C||function(F,z,j,H){return H&&(H.S&&m(H,O),F.state=function(){return m(O,{})}),j?(r[o]=F,z):F})(R,A,"global"in w?w.global:this==r,w.state)}function p(x){var w,C=x.length,E=this,A=0,O=E.i=E.j=0,R=E.S=[];for(C||(x=[C++]);A<s;)R[A]=A++;for(A=0;A<s;A++)R[A]=R[O=f&O+x[A%C]+(w=R[A])],R[O]=w;(E.g=function(F){for(var z,j=0,H=E.i,J=E.j,U=E.S;F--;)z=U[H=f&H+1],j=j*s+U[f&(U[H]=U[J=f&J+z])+(U[J]=z)];return E.i=H,E.j=J,j})(s)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var C=[],E=typeof x,A;if(w&&E=="object")for(A in x)try{C.push(g(x[A],w-1))}catch{}return C.length?C:E=="string"?x:x+"\0"}function y(x,w){for(var C=x+"",E,A=0;A<C.length;)w[f&A]=f&(E^=w[f&A]*19)+C.charCodeAt(A++);return b(w)}function v(){try{var x;return d&&(x=d.randomBytes)?x=x(s):(x=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(x)),b(x)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,b(n)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(r.random(),n),t.exports){t.exports=h;try{d=pAe}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:Uo,[],Math)})(pX);var mAe=pX.exports,gAe=aAe,yAe=oAe,vAe=lAe,bAe=uAe,xAe=cAe,wAe=fAe,$d=mAe;$d.alea=gAe;$d.xor128=yAe;$d.xorwow=vAe;$d.xorshift7=bAe;$d.xor4096=xAe;$d.tychei=wAe;var US=$d;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uD{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=US.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,a;do s=2*this.random()-1,i=2*this.random()-1,a=s*s+i*i;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class SAe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=US.alea(i.toString()),this.randn=new uD(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class TAe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=US.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t,e,n=1,r="float32",s){if(ia(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new SAe(e,n,r,s),a=Nt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const EAe=X({randomGamma_:CAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t,e=0,n=1,r,s){if(ia(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new uD(e,n,r,!1,s),a=Nt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const cD=X({randomNormal_:kAe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return cD(t,0,1,e,n)}const AAe=X({randomStandardNormal_:NAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t,e=0,n=1,r="float32",s){ia(t);const i=Nt(t,r),a=new TAe(e,n,null,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const Id=X({randomUniform_:$Ae});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t,e,n,r){return Id(t,e,n,"int32",r)}const _Ae=X({randomUniformInt_:IAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return ee.runKernel(yO,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAe(t){const n={input:M(t,"input","real")};return ee.runKernel(vO,n)}const xy=X({real_:OAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const n={x:M(t,"x","reciprocal")};return ee.runKernel(J1,n)}const mX=X({reciprocal_:DAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t){const n={x:M(t,"x","relu")};return ee.runKernel(e0,n)}const ll=X({relu_:RAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){const n={x:M(t,"x","relu6")};return ee.runKernel(t0,n)}const fD=X({relu6_:PAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t,e){const r={x:M(t,"x","reverse")},s={dims:e};return ee.runKernel(vS,r,s)}const ja=X({reverse_:MAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t){const e=M(t,"x","reverse");return P(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),ja(e,0)}const LAe=X({reverse1d_:FAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t,e){const n=M(t,"x","reverse");return P(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ja(n,e)}const BAe=X({reverse2d_:zAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAe(t,e){const n=M(t,"x","reverse");return P(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ja(n,e)}const UAe=X({reverse3d_:jAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t,e){const n=M(t,"x","reverse");return P(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ja(n,e)}const WAe=X({reverse4d_:VAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GAe(t){const n={x:M(t,"x","round")};return ee.runKernel(n0,n)}const dD=X({round_:GAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HAe(t){const n={x:M(t,"x","rsqrt","float32")};return ee.runKernel(r0,n)}const hD=X({rsqrt_:HAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(t){const n={x:M(t,"x","selu")};return ee.runKernel(s0,n)}const pD=X({selu_:qAe});function KAe(t,e,n,r,s,i=[1,1],a="NHWC"){const o=M(t,"x","separableConv2d"),l=M(e,"depthwiseFilter","separableConv2d"),u=M(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),P(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),P(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),P(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],h=l.shape[3];P(u.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`);const p=x0(c,l,r,s,a,i),g=yc(p,u,1,"valid",a);return f?ne(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const mD=X({separableConv2d_:KAe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function XAe(t,e){const n=M(t,"x","setdiff1d"),r=M(e,"y","setdiff1d");P(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),P(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),P(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),a=new Set(i);let o=0;for(let c=0;c<s.length;c++)a.has(s[c])||o++;const l=new Ir([o],n.dtype),u=new Ir([o],"int32");for(let c=0,f=0;c<s.length;c++)a.has(s[c])||(l.values[f]=s[c],u.values[f]=c,f++);return[l.toTensor(),u.toTensor()]}const YAe=XAe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t){const n={x:M(t,"x","sign")};return ee.runKernel(o0,n)}const gX=X({sign_:ZAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAe(t){const n={x:M(t,"x","sin","float32")};return ee.runKernel(i0,n)}const gD=X({sin_:QAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(t){const n={x:M(t,"x","sinh")};return ee.runKernel(a0,n)}const yD=X({sinh_:JAe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t,e,n){const r=M(t,"x","slice1d");return P(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ht(r,[e],[n])}const VS=X({slice1d_:e$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$e(t,e,n){const r=M(t,"x","slice2d");return P(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ht(r,e,n)}const vD=X({slice2d_:t$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t,e,n){const r=M(t,"x","slice3d");return P(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ht(r,e,n)}const WS=X({slice3d_:n$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$e(t,e,n){const r=M(t,"x","slice4d");return P(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ht(r,e,n)}const wy=X({slice4d_:r$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t,e=-1){const n=M(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return ee.runKernel(CS,r,s)}const GS=X({softmax_:s$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(J_,e)}const HS=X({fft_:i$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(rO,e)}const Sy=X({ifft_:a$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=ne(t,[n,e]);r=Sy(s)}else{const s=[n,2*(e-1)],i=ne(xy(t),[n,e]),a=ne(DS(t),[n,e]),o=ja(ht(i,[0,1],[n,e-2]),1),l=Z(ja(ht(a,[0,1],[n,e-2]),1),ut(-1)),u=Zn([i,o],1),c=Zn([a,l],1),f=ne(pc(u,c),[s[0],s[1]]);r=Sy(f)}if(r=xy(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=ne(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const bD=X({irfft_:o$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t,e,n=0){const s={x:M(t,"x","split")},i={numOrSizeSplits:e,axis:n};return ee.runKernel(TS,s,i)}const xi=X({split_:l$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e){P(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,s=ht(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=Zn([t,Tr(p)],t.shape.length-1),n=e}else s=t;const i=Vt(s),a=ne(pc(s,i),[r,n]),o=HS(a),l=Math.floor(n/2)+1,u=xy(o),c=DS(o),f=xi(u,[l,n-l],u.shape.length-1),d=xi(c,[l,n-l],c.shape.length-1),h=s.shape.slice();return h[s.shape.length-1]=l,ne(pc(f[0],d[0]),h)}const qS=X({rfft_:u$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t,e){let n=M(t,"a","squaredDifference"),r=M(e,"b","squaredDifference");[n,r]=Jn(n,r),wt(n.shape,r.shape);const s={a:n,b:r},i={};return ee.runKernel(f0,s,i)}const xD=X({squaredDifference_:c$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t,e){const n=M(t,"x","squeeze","string_or_numeric");return ne(n,Rc(n.shape,e).newShape)}const Xn=X({squeeze_:f$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$e(t,e=0){const n=Sx(t,"tensors","stack","string_or_numeric");P(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&P(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return ee.runKernel(fS,r,s)}const Ti=X({stack_:d$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t,e=0){const r={x:M(t,"x","step")},s={alpha:e};return ee.runKernel(g0,r,s)}const nm=X({step_:h$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t,e,n,r,s=0,i=0,a=0,o=0,l=0){const c={x:M(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return ee.runKernel(IO,c,f)}const yX=X({stridedSlice_:p$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$e(t){const n={x:M(t,"x","tan","float32")};return ee.runKernel(h0,n)}const vX=X({tan_:m$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dr(t,e){Yp(t);const n=Mc(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fc(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(t,e,n){if(Yp(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Mc(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(t,e,n){if(Yp(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Mc(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$e(t,e,n){if(Yp(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Mc(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$e(t,e,n){if(Yp(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Mc(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$e(t,e,n){if(Yp(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Mc(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Fc(t,e,r,n)}function xX(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==t[a+r])throw new Error(i+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${t[a+s]})`)}function wD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}xX(n,e,t)}function _d(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let a=1;for(let f=s;f<i;++f)a*=n[f];const o=s<1?1:s,l=pe(e.shape)/o,u=[...at(n.slice(0,s)),1],c=pe(n);return{sliceRank:s,numUpdates:l,sliceSize:a,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(t,e,n){const r=M(t,"tensor","tensorScatterupdate"),s=M(e,"indices","tensorScatterupdate","int32"),i=M(n,"updates","tensorScatterupdate");if(wD(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const a={tensor:r,indices:s,updates:i},o={};return ee.runKernel(SO,a,o)}const x$e=X({tensorScatterUpdate_:b$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e(t,e=1,n=!0){const r=M(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},a={k:e,sorted:n},[o,l]=ee.runKernel(RO,i,a);return{values:o,indices:l}}const wX=X({topk_:w$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$e(t,e=0,n=1,r,s){if(ia(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new uD(e,n,r,!0,s),a=Nt(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const SD=X({truncatedNormal_:S$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t,e=0){const n=M(t,"x","unique","string_or_numeric");P(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,a]=ee.runKernel(MO,r,s);return{values:i,indices:a}}const SX=X({unique_:T$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$e(t,e,n){const r=M(t,"x","unsortedSegmentSum"),s=M(e,"segmentIds","unsortedSegmentSum","int32");P(hp(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},a={numSegments:n};return ee.runKernel(NS,i,a)}const TD=X({unsortedSegmentSum_:C$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$e(t,e=0){const n=M(t,"x","unstack","string_or_numeric");P(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return ee.runKernel(kS,r,s)}const Ua=X({unstack_:E$e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(t,e){return tD(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(t,e=!0,n,r){return ee.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CD(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Nt(t,"int32"),s=Nt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const a=r.indexToLoc(n[i]),o=i*t.length;s.values.set(a,o)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function N$e(t){const e=M(t,"condition","whereAsync","bool"),n=await e.data(),r=CD(e.shape,n);return t!==e&&e.dispose(),r}const CX=N$e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function A$e(t,e,n){const r=M(t,"tensor","boolMask"),s=M(e,"mask","boolMask","bool"),i=n??0,a=s.rank,o=r.shape;P(a>0,()=>"mask cannot be scalar"),Ai(o.slice(i,i+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+a;m++)l*=o[m];const u=o.slice(0,i).concat([l],o.slice(i+a)),c=ne(r,u),f=ne(s,[-1]),d=await CX(f),h=Xn(d,[1]),p=C0(c,h,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),p}const $$e=A$e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$e(t,e,n){const r=M(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),P(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{P(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?ie(()=>{let a=xy(r),o=DS(r);return a=ee.runKernel(Ph,{x:a},i),o=ee.runKernel(Ph,{x:o},i),n&&(o=$n(o)),pc(a,o)}):ee.runKernel(Ph,s,i)}const Ut=X({transpose_:I$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t,e,n,r,s=!0){const i=M(t,"v","movingAverage"),a=M(e,"x","movingAverage"),o=M(n,"decay","movingAverage");bCe(i,a),P(jt(i.shape,a.shape),()=>"Shape mismatch in v and x");const l=ut(1),u=Xe(l,o);let c=Z(Xe(a,i),u);if(s){P(r!=null,()=>"When using zeroDebias: true, step is required.");const f=M(r,"step","movingAverage");c=Ke(c,Xe(l,Xl(o,f)))}return ke(i,c)}const O$e=X({movingAverage_:_$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t,e,n){ia(n);const r=M(t,"indices","scatterND","int32"),s=M(e,"updates","scatterND");wD(s,r,n);const i={indices:r,updates:s},a={shape:n};return ee.runKernel(wO,i,a)}const R$e=X({scatterND_:D$e});function P$e(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t,e,n,r=0){ia(n);const s=M(t,"sparseIndices","sparseToDense","int32"),i=M(e,"sparseValues","sparseToDense","string_or_numeric"),a=M(r,"defaultValue","sparseToDense",i.dtype);P$e(s,i,n,a);const o={sparseIndices:s,sparseValues:i,defaultValue:a},l={outputShape:n};return ee.runKernel(AO,o,l)}const F$e=X({sparseToDense_:M$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$e(t,e){const n=M(e,"indices","gatherND","int32"),s={params:M(t,"x","gatherND","string_or_numeric"),indices:n};return ee.runKernel(nO,s)}const z$e=X({gatherND_:L$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t,e){if(e==null)return t.shape.slice();if(jt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(t,e,n,r){const s=M(t,"x","dropout");if(P(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),P(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Jt?s.clone():s;const i=B$e(s,n),a=1-e,o=Ke(T0(ke(Id(i,0,1,"float32",r),a)),a);return Z(s,o)}const EX=X({dropout_:j$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function ED(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const a=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(a)}return dr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function U$e(t,e,n=1){const r=M(t,"predictions","inTopK"),s=M(e,"targets","inTopK");P(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),P(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Ai(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];P(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const a=await r.data(),o=await s.data(),[l,u]=[a.length/i,i],c=is("bool",l);for(let f=0;f<l;f++){const d=f*u,h=a.subarray(d,d+u),p=[];for(let m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((m,g)=>g.value-m.value),c[f]=0;for(let m=0;m<n;m++)if(p[m].index===o[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),io(c,s.shape,"bool")}const V$e=U$e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t,e,n,r,s,i="NHWC",a){let o=t;t.rank===3&&(o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]])),P(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),P(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),P(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?o.shape[3]:o.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];P(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),P(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Fs("conv2dDerFilter",s,a);const f={x:o,dy:l},d={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,filterShape:n};return ee.runKernel(j_,f,d)}const kD=X({conv2DBackpropFilter_:W$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KS(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Z(t,nm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function XS(t,e){let n=e;const r=Dr(t.shape,e.shape);return r.length>0&&(n=Je(n,r)),ne(n,t.shape)}function YS(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ll(t);if(e==="elu")return w0(t);if(e==="relu6")return fD(t);if(e==="prelu")return jS(t,n);if(e==="leakyrelu")return RS(t,r);if(e==="sigmoid")return ao(t);throw new Error(`Unknown fused activation ${e}.`)}const ZS=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",ZS(ee.state.gradientDepth,l)===!1){P(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=yc(t,e,n,r,s,i,a);return o!=null&&(C=ke(C,o)),YS(C,l,u,c)}const f=M(t,"x","conv2d","float32"),d=M(e,"filter","conv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=ne(f,[1,f.shape[0],f.shape[1],f.shape[2]])),P(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),P(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Fs("fused conv2d",r,a);const m=s==="NHWC"?h.shape[3]:h.shape[1];P(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),P(us(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=Gr(h.shape,d.shape,n,i,r,a);let y;o!=null&&(y=M(o,"bias","fused conv2d"),[y]=Jn(y,f),s==="NHWC"?wt(g.outShape,y.shape):(P(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),P(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const C=u.shape;if(P(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)P(C[0]===1||C[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${g.outChannels}).`);else if(C.length===3)try{wt(C,g.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(A)}v=M(u,"prelu weights","fused conv2d")}const b=(C,E)=>{P(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[A,O,R,F]=E,z=KS(C,R,l);P(gc(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const j=HO(O.shape,z,A,n,r),H=kD(O,z,A.shape,n,r),J=[j,H];if(F!=null){const U=XS(F,z);J.push(U)}return J},x={x:h,filter:d,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Yl((E,A,O)=>{let R=ee.runKernel(yx,x,w);return O([A,E,R]),p&&(R=ne(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:b}})(h,d):Yl((E,A,O,R)=>{let F=ee.runKernel(yx,x,w);return R([A,E,F,O]),p&&(F=ne(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:b}})(h,d,y)}const NX=X({fusedConv2d_:G$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t,e,n,r,s,i=[1,1],a){let o=t;t.rank===3&&(o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:o,dy:l},c={strides:r,pad:s,dimRoundingMode:a,dilations:i,filterShape:n};return ee.runKernel(K_,u,c)}const AX=X({depthwiseConv2dNativeBackpropFilter_:H$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t,e,n,r,s,i=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:o,filter:n},c={strides:r,pad:s,dimRoundingMode:a,dilations:i,inputShape:t},f=ee.runKernel(X_,u,c);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const $X=X({depthwiseConv2dNativeBackpropInput_:q$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(ZS(ee.state.gradientDepth,l)===!1){let w=x0(t,e,n,r,s,i,a);return o!=null&&(w=ke(w,o)),YS(w,l,u,c)}const f=M(t,"x","depthwiseConv2d","float32"),d=M(e,"filter","depthwiseConv2d","float32");let h=f,p=!1;f.rank===3&&(p=!0,h=ne(f,[1,f.shape[0],f.shape[1],f.shape[2]])),P(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),P(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),P(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),P(us(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Fs("fused depthwiseConv2d",r,a);const m=Gr(h.shape,d.shape,n,i,r,a,!0);let g;o!=null&&(g=M(o,"bias","fused conv2d"),[g]=Jn(g,f),wt(m.outShape,g.shape));let y;u!=null&&(y=M(u,"prelu weights","fused depthwiseConv2d"));const v=(w,C)=>{P(gc(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[E,A,O,R]=C,F=KS(w,O,l),z=$X(A.shape,F,E,n,r,i,a),j=AX(A,F,E.shape,n,r,i,a);if(R!=null){const H=XS(g,F);return[z,j,H]}return[z,j]},b={x:h,filter:d,bias:g,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Yl((C,E,A)=>{let O=ee.runKernel(vx,b,x);return A([E,C,O]),p&&(O=ne(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:v}})(h,d):Yl((C,E,A,O)=>{let R=ee.runKernel(vx,b,x);return O([E,C,R,A]),p&&(R=ne(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:v}})(h,d,g)}const X$e=X({fusedDepthwiseConv2d_:K$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(ZS(ee.state.gradientDepth,i)===!1){let F=Pt(t,e,n,r);return s!=null&&(F=ke(F,s)),YS(F,i,a,o)}let l=M(t,"a","fused matMul"),u=M(e,"b","fused matMul");[l,u]=Jn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=pe(p),y=pe(m);P(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=wt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),x=n?ne(l,[g,c,d]):ne(l,[g,d,c]),w=r?ne(u,[y,h,f]):ne(u,[y,f,h]);let C;s!=null&&(C=M(s,"bias","fused matMul"),[C]=Jn(C,l),wt(b,C.shape));let E;a!=null&&(E=M(a,"prelu weights","fused matMul"));const A=(F,z)=>{const[j,H,J,U]=z,Y=KS(ne(F,J.shape),J,i);let Q,se;if(!n&&!r?(Q=Pt(Y,H,!1,!0),se=Pt(j,Y,!0,!1)):!n&&r?(Q=Pt(Y,H,!1,!1),se=Pt(Y,j,!0,!1)):n&&!r?(Q=Pt(H,Y,!1,!0),se=Pt(j,Y,!1,!1)):(Q=Pt(H,Y,!0,!0),se=Pt(Y,j,!0,!0)),s!=null){const he=XS(U,Y);return[Q,se,he]}else return[Q,se]},O={a:x,b:w,bias:C,preluActivationWeights:E},R={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return s==null?Yl((z,j,H)=>{const J=ee.runKernel(gx,O,R);return H([z,j,J]),{value:ne(J,b),gradFunc:A}})(x,w):Yl((z,j,H,J)=>{const U=ee.runKernel(gx,O,R);return J([z,j,U,H]),{value:ne(U,b),gradFunc:A}})(x,w,C)}const vN=X({fusedMatMul_:Y$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$e=Object.freeze(Object.defineProperty({__proto__:null,conv2d:NX,depthwiseConv2d:X$e,matMul:vN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$e(t){return ED(t,.54,.46)}const J$e=X({hammingWindow_:Q$e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t){return ED(t,.5,.5)}const IX=X({hannWindow_:eIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tIe(t,e,n,r=!1,s=0){let i=0;const a=[];for(;i+e<=t.size;)a.push(ht(t,i,e)),i+=n;if(r)for(;i<t.size;){const o=i+e-t.size,l=Zn([ht(t,i,e-o),em([o],s)]);a.push(l),i+=n}return a.length===0?nc([],[0,e]):ne(Zn(a),[a.length,e])}const _X=X({frame_:tIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t,e,n,r,s=IX){r==null&&(r=kX(e));const i=_X(t,e,n),a=Z(i,s(e));return qS(a,r)}const rIe=X({stft_:nIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t,e,n,r,s="bilinear",i=0){const a=M(t,"image","cropAndResize"),o=M(e,"boxes","cropAndResize","float32"),l=M(n,"boxInd","cropAndResize","int32"),u=o.shape[0];P(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),P(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),P(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),P(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),P(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),P(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:a,boxes:o,boxInd:l},f={method:s,extrapolationValue:i,cropSize:r};return ee.runKernel(G_,c,f)}const iIe=X({cropAndResize_:sIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t){const e=M(t,"image","flipLeftRight","float32");P(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ee.runKernel(tO,n,{})}const oIe=X({flipLeftRight_:aIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const e=M(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),P(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Ia(e,s)}const uIe=X({grayscaleToRGB_:lIe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const e=M(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),P(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Be(e,"float32"),a=dr([.2989,.587,.114]);let o;switch(e.rank){case 2:o=oh("ij,j->i",i,a);break;case 3:o=oh("ijk,k->ij",i,a);break;case 4:o=oh("ijkl,l->ijk",i,a);break;case 5:o=oh("ijklm,m->ijkl",i,a);break;case 6:o=oh("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return o=Sr(o,-1),Be(o,s)}const fIe=X({rgbToGrayscale_:cIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e,n=0,r=.5){const s=M(t,"image","rotateWithOffset","float32");P(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},a={radians:e,fillValue:n,center:r};return ee.runKernel(FO,i,a)}const hIe=X({rotateWithOffset_:dIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rm(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=t.shape[0];return n=Math.min(n,a),P(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),P(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),P(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),P(e.rank===1,()=>"scores must be a 1D tensor"),P(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),P(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=M(t,"boxes","nonMaxSuppression","float32"),a=M(e,"scores","nonMaxSuppression","float32"),o=rm(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ee.runKernel(fO,{boxes:i,scores:a},l)}const mIe=X({nonMaxSuppression_:pIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t,e,n){const r=yIe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function yIe(t,e,n){return bIe(t,e,n||vIe)}function vIe(t,e){return t>e?1:t<e?-1:0}function bIe(t,e,n){let r=0,s=t.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(s=i,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ND(t,e,n,r,s){return ID(t,e,n,r,s,0)}function AD(t,e,n,r,s,i){return ID(t,e,n,r,s,0,!1,i,!0)}function $D(t,e,n,r,s,i){return ID(t,e,n,r,s,i,!0)}function ID(t,e,n,r,s,i,a=!1,o=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>s&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(W8);const c=i>0?-.5/i:0,f=[],d=[];for(;f.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<s)break;let x=!1;for(let w=f.length-1;w>=b;--w){const C=xIe(t,v,f[w]);if(C>=r){x=!0;break}if(g.score=g.score*wIe(r,c,C),g.score<=s)break}g.suppressBeginIndex=f.length,x||(g.score===y?(f.push(v),d.push(g.score)):g.score>s&&gIe(u,g,W8))}const h=f.length,p=n-h;o&&p>0&&(f.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));const m={selectedIndices:f};return a&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function xIe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),f=Math.max(s[0],s[2]),d=Math.max(s[1],s[3]),h=(o-i)*(l-a),p=(f-u)*(d-c);if(h<=0||p<=0)return 0;const m=Math.max(i,u),g=Math.max(a,c),y=Math.min(o,f),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+p-b)}function wIe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function W8(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function SIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=M(t,"boxes","nonMaxSuppressionAsync"),a=M(e,"scores","nonMaxSuppressionAsync"),o=rm(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([i.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:f}=ND(u,c,n,r,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),dr(f,"int32")}const TIe=SIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=M(t,"boxes","nonMaxSuppression"),o=M(e,"scores","nonMaxSuppression"),l=rm(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:a,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},f=ee.runKernel(hO,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const EIe=X({nonMaxSuppressionWithScore_:CIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=M(t,"boxes","nonMaxSuppressionAsync"),o=M(e,"scores","nonMaxSuppressionAsync"),l=rm(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([a.data(),o.data()]),c=u[0],f=u[1],{selectedIndices:d,selectedScores:h}=$D(c,f,n,r,s,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:dr(d,"int32"),selectedScores:dr(h)}}const NIe=kIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=M(t,"boxes","nonMaxSuppression"),o=M(e,"scores","nonMaxSuppression"),l=rm(a,o,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,d={boxes:a,scores:o},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},p=ee.runKernel(dO,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}const $Ie=X({nonMaxSuppressionPadded_:AIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function IIe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=M(t,"boxes","nonMaxSuppressionAsync"),o=M(e,"scores","nonMaxSuppressionAsync"),l=rm(a,o,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[d,h]=await Promise.all([a.data(),o.data()]),{selectedIndices:p,validOutputs:m}=AD(d,h,u,c,f,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:dr(p,"int32"),validOutputs:ut(m,"int32")}}const _Ie=IIe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t,e,n=!1,r=!1){const s=M(t,"images","resizeBilinear");P(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),P(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=ne(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=ee.runKernel(yS,o,l);return a?ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const OX=X({resizeBilinear_:OIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t,e,n=!1,r=!1){const s=M(t,"images","resizeNearestNeighbor");P(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),P(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),P(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=ne(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=ee.runKernel(gS,o,l);return a?ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const DX=X({resizeNearestNeighbor_:DIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t,e="binary",n=!1,r=.5){const s=M(t,"image","threshold"),i=.2989,a=.587,o=.114,l=s.shape[0]*s.shape[1];let u=Z(dr([r]),255),c,f,d,h;if(P(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),P(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),P(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),P(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,f,d]=xi(s,[1,1,1],-1);const g=Z(c,i),y=Z(f,a),v=Z(d,o);h=ke(ke(g,y),v)}else h=t;if(e==="otsu"){const g=BK(Be(dD(h),"int32"),io([]),256);u=PIe(g,l)}const p=n?Ad(h,u):Ii(h,u);return Be(Z(p,255),"int32")}function PIe(t,e){let n=dr([-1]),r=dr([0]),s=dr([0]),i,a,o,l,u,c;for(let f=0;f<t.size-1;f++){i=ht(t,0,f+1),a=ht(t,f+1),u=Ke(Je(i),e),c=Ke(Je(a),e);const d=Je(Z(i,bp(0,i.size)));o=Ke(d,Je(i));const h=em(a.shape,i.size),p=ke(bp(0,a.size),h),m=Z(a,p);l=Ke(Je(m),Je(a));const g=Xe(o,l),y=Xe(o,l),v=Z(u,c);s=Z(Z(v,g),y);const b=Ii(s,r);r=xs(b,s,r),n=xs(b,dr([f]),n)}return n}const MIe=X({threshold_:RIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t,e,n="nearest",r="constant",s=0,i){const a=M(t,"image","transform","float32"),o=M(e,"transforms","transform","float32");P(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),P(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),P(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:a,transforms:o},u={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return ee.runKernel(PO,l,u)}const LIe=X({transform_:FIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(t,e,n){const r=M(t,"a","bandPart");P(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(P(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),P(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=M(e<0?i:e,"numLower","bandPart")):(P(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=xs(by(e,0),i,cd(e,i))),typeof n=="number"?(P(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),P(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=M(n<0?a:n,"numUpper","bandPart")):(P(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=xs(by(n,0),a,cd(n,a)));const u=ne(bp(0,i,1,"int32"),[-1,1]),c=bp(0,a,1,"int32"),f=Xe(u,c),d=nl(Ad(f,o),Bc(f,$n(l))),h=Tr([i,a],r.dtype);return ne(Ti(Ua(ne(r,[-1,i,a])).map(p=>xs(d,p,h))),s)}const BIe=X({bandPart_:zIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jIe(t){let e;if(Array.isArray(t)){e=!1,P(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)P(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=xi(t,t.shape[0],0).map(s=>Xn(s,[0]));P(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ee.tidy(()=>{let i=r[s];if(s>0)for(let a=0;a<s;++a){const o=Z(Je(Z(n[a],i)),n[a]);i=Xe(i,o)}return Ke(i,S0(i,"euclidean"))}));return e?Ti(n,0):n}const UIe=X({gramSchmidt_:jIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(t,e=!1){if(P(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return G8(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Ua(ne(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[u,c]=G8(l,e);s.push(u),i.push(c)});const a=ne(Ti(s,0),t.shape),o=ne(Ti(i,0),t.shape);return[a,o]}}function G8(t,e=!1){return ee.tidy(()=>{P(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=QO(n),i=Ll(t);const a=nc([[1]],[1,1]);let o=Ll(a);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,f=o,d=s;[o,i,s]=ee.tidy(()=>{const h=ht(i,[u,u],[n-u,1]),p=S0(h),m=ht(i,[u,u],[1,1]),g=xs(Ii(m,0),nc([[-1]]),nc([[1]])),y=Xe(m,Z(g,p)),v=Ke(h,y);v.shape[0]===1?o=Ll(a):o=Zn([a,ht(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=$n(Ke(Pt(g,y),p)),x=ht(i,[u,0],[n-u,r]),w=Z(b,o),C=Ut(o);if(u===0)i=Xe(x,Pt(w,Pt(C,x)));else{const O=Xe(x,Pt(w,Pt(C,x)));i=Zn([ht(i,[0,0],[u,r]),O],0)}const E=Ut(w),A=ht(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=Xe(A,Pt(Pt(A,o),E));else{const O=Xe(A,Pt(Pt(A,o),E));s=Zn([ht(s,[0,0],[n,u]),O],1)}return[o,i,s]}),mt([c,f,d])}return!e&&n>r&&(s=ht(s,[0,0],[n,r]),i=ht(i,[0,0],[r,r])),[s,i]})}const WIe=X({qr_:VIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hs;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Hs||(Hs={}));function GIe(t,e,n=Hs.SUM_BY_NONZERO_WEIGHTS){const r=M(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=M(e,"weights","computeWeightedLoss"));const i=s==null?r:Z(r,s);if(n===Hs.NONE)return i;if(n===Hs.SUM)return Je(i);if(n===Hs.MEAN){if(s==null)return Yn(i);{const a=r.size/s.size,o=Ke(Je(i),Je(s));return a>1?Ke(o,ut(a)):o}}if(n===Hs.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Ke(Je(i),ut(r.size));{const a=Z(s,yi(r.shape)),o=Be(Je(vp(a,ut(0))),"float32");return Ke(Je(i),o)}}throw Error(`Unknown reduction: ${n}`)}const fu=X({computeWeightedLoss_:GIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t,e,n,r=Hs.SUM_BY_NONZERO_WEIGHTS){const s=M(t,"labels","absoluteDifference"),i=M(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=M(n,"weights","absoluteDifference")),Ai(s.shape,i.shape,"Error in absoluteDifference: ");const o=xr(Xe(s,i));return fu(o,a,r)}const qIe=X({absoluteDifference_:HIe});function KIe(t,e,n,r,s=Hs.SUM_BY_NONZERO_WEIGHTS){const i=M(t,"labels","cosineDistance"),a=M(e,"predictions","cosineDistance");let o=null;r!=null&&(o=M(r,"weights","cosineDistance")),Ai(i.shape,a.shape,"Error in cosineDistance: ");const l=ut(1),u=Xe(l,Je(Z(i,a),n,!0));return fu(u,o,s)}const XIe=X({cosineDistance_:KIe});function YIe(t,e,n,r=Hs.SUM_BY_NONZERO_WEIGHTS){let s=M(t,"labels","hingeLoss");const i=M(e,"predictions","hingeLoss");let a=null;n!=null&&(a=M(n,"weights","hingeLoss")),Ai(s.shape,i.shape,"Error in hingeLoss: ");const o=ut(1);s=Xe(Z(ut(2),s),o);const l=ll(Xe(o,Z(s,i)));return fu(l,a,r)}const ZIe=X({hingeLoss_:YIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(t,e,n,r=1,s=Hs.SUM_BY_NONZERO_WEIGHTS){const i=M(t,"labels","huberLoss"),a=M(e,"predictions","huberLoss");let o=null;n!=null&&(o=M(n,"weights","huberLoss")),Ai(i.shape,a.shape,"Error in huberLoss: ");const l=ut(r),u=xr(Xe(a,i)),c=cd(u,l),f=Xe(u,c),d=ke(Z(ut(.5),dn(c)),Z(l,f));return fu(d,o,s)}const JIe=X({huberLoss_:QIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(t,e,n,r=1e-7,s=Hs.SUM_BY_NONZERO_WEIGHTS){const i=M(t,"labels","logLoss"),a=M(e,"predictions","logLoss");let o=null;n!=null&&(o=M(n,"weights","logLoss")),Ai(i.shape,a.shape,"Error in logLoss: ");const l=ut(1),u=ut(r),c=$n(Z(i,na(ke(a,u)))),f=Z(Xe(l,i),na(ke(Xe(l,a),u))),d=Xe(c,f);return fu(d,o,s)}const t_e=X({logLoss_:e_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(t,e,n,r=Hs.SUM_BY_NONZERO_WEIGHTS){const s=M(t,"labels","meanSquaredError"),i=M(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=M(n,"weights","meanSquaredError")),Ai(s.shape,i.shape,"Error in meanSquaredError: ");const o=xD(s,i);return fu(o,a,r)}const r_e=X({meanSquaredError_:n_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(t,e){const n=M(t,"labels","sigmoidCrossEntropyWithLogits"),r=M(e,"logits","sigmoidCrossEntropyWithLogits");Ai(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=ll(r),i=Z(r,n),a=PS(Ps($n(xr(r))));return ke(Xe(s,i),a)}function i_e(t,e,n,r=0,s=Hs.SUM_BY_NONZERO_WEIGHTS){let i=M(t,"multiClassLabels","sigmoidCrossEntropy");const a=M(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=M(n,"weights","sigmoidCrossEntropy")),Ai(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=ut(r),c=ut(1),f=ut(.5);i=ke(Z(i,Xe(c,u)),Z(f,u))}const l=s_e(i,a);return fu(l,o,s)}const a_e=X({sigmoidCrossEntropy_:i_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o_e(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Yl((s,i,a)=>{const l=MS(i,[n],!0),u=Xe(Be(i,"float32"),l);a([s,u]);const c=$n(Z(u,s));return{value:Je(c,[n]),gradFunc:(h,p)=>{const[m,g]=p,y=ir(h.shape,[n]);return[Z(ne(h,y),Xe(Be(m,"float32"),Ps(g))),Z(ne(h,y),Xe(Ps(g),Be(m,"float32")))]}}})(t,e)}function l_e(t,e,n,r=0,s=Hs.SUM_BY_NONZERO_WEIGHTS){let i=M(t,"onehotLabels","softmaxCrossEntropy");const a=M(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=M(n,"weights","softmaxCrossEntropy")),Ai(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const u=ut(r),c=ut(1),f=ut(i.shape[1]);i=ke(Z(i,Xe(c,u)),Ke(u,f))}const l=o_e(i,a);return fu(l,o,s)}const u_e=X({softmaxCrossEntropy_:l_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_e(t,e,n,r){const s=M(t,"indices","sparseFillEmptyRows","int32"),i=M(e,"values","sparseFillEmptyRows"),a=M(n,"denseShape","sparseFillEmptyRows","int32"),o=M(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:i,denseShape:a,defaultValue:o},u=ee.runKernel(CO,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const f_e=X({sparseFillEmptyRows_:c_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_e(t,e,n){const r=M(t,"inputIndices","sparseReshape","int32"),s=M(e,"inputShape","sparseReshape","int32"),i=M(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const a={inputIndices:r,inputShape:s,newShape:i},o=ee.runKernel(EO,a);return{outputIndices:o[0],outputShape:o[1]}}const h_e=X({sparseReshape_:d_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(t,e,n){const r=M(t,"data","sparseSegmentMean"),s=M(e,"indices","sparseSegmentMean","int32"),i=M(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return ee.runKernel(kO,a)}const m_e=X({sparseSegmentMean_:p_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(t,e,n){const r=M(t,"data","sparseSegmentSum"),s=M(e,"indices","sparseSegmentSum","int32"),i=M(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return ee.runKernel(NO,a)}const y_e=X({sparseSegmentSum_:g_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(t,e,n,r,s,i,a,o){const l=M(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=M(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:a,preserveShortSequences:o},f={data:l,dataSplits:u},d=ee.runKernel(_O,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const b_e=X({stringNGrams_:v_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t,e,n=!0){const r=M(t,"input","stringSplit","string"),s=M(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},a={input:r,delimiter:s},o=ee.runKernel(OO,a,i);return{indices:o[0],values:o[1],shape:o[2]}}const w_e=X({stringSplit_:x_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_e(t,e){const n=M(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return ee.runKernel(DO,s,r)}const T_e=X({stringToHashBucketFast_:S_e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(t,e,n,r=!0){const s=M(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return ee.runKernel(ES,{x:s},i)}const E_e=X({staticRegexReplace_:C_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k_e={fft:HS,ifft:Sy,rfft:qS,irfft:bD},N_e={hammingWindow:J$e,hannWindow:IX,frame:_X,stft:rIe},Ys={flipLeftRight:oIe,grayscaleToRGB:uIe,resizeNearestNeighbor:DX,resizeBilinear:OX,rgbToGrayscale:fIe,rotateWithOffset:hIe,cropAndResize:iIe,nonMaxSuppression:mIe,nonMaxSuppressionAsync:TIe,nonMaxSuppressionWithScore:EIe,nonMaxSuppressionWithScoreAsync:NIe,nonMaxSuppressionPadded:$Ie,nonMaxSuppressionPaddedAsync:_Ie,threshold:MIe,transform:LIe},RX={bandPart:BIe,gramSchmidt:UIe,qr:WIe},A_e={absoluteDifference:qIe,computeWeightedLoss:fu,cosineDistance:XIe,hingeLoss:ZIe,huberLoss:JIe,logLoss:t_e,meanSquaredError:r_e,sigmoidCrossEntropy:a_e,softmaxCrossEntropy:u_e},$_e={sparseFillEmptyRows:f_e,sparseReshape:h_e,sparseSegmentMean:m_e,sparseSegmentSum:y_e},I_e={stringNGrams:b_e,stringSplit:w_e,stringToHashBucketFast:T_e,staticRegexReplace:E_e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e=new Map,O_e=new Map;class sm{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ta{constructor(){this.classNameMap={}}static getMap(){return Ta.instance==null&&(Ta.instance=new Ta),Ta.instance}static register(e){Ta.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ie(t,e,n){P(t.className!=null,()=>"Class being registered does not have the static className property defined."),P(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),P(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Ta.register(t),__e.set(s,t),O_e.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uc extends sm{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(a)}else this.applyGradients(i);return mt(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return sNe(e,n)}dispose(){this.iterations_!=null&&mt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ut(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Uc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PX extends Uc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ee.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:ie(()=>Vt(i).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:ie(()=>Vt(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;ie(()=>{const c=ke(Z(l,this.rho),Z(dn(o),1-this.rho)),f=Z(Ke(as(ke(u,this.epsilon)),as(ke(l,this.epsilon))),o),d=ke(Z(u,this.rho),Z(dn(f),1-this.rho));l.assign(c),u.assign(d);const h=ke(Z(f,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(mt(this.accumulatedGrads.map(e=>e.variable)),mt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MX extends Uc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ee.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:ie(()=>em(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[s].variable;ie(()=>{const l=ke(o,dn(a));o.assign(l);const u=ke(Z(Ke(a,as(ke(l,ee.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&mt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FX extends Uc{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ie(()=>{this.accBeta1=ut(n).variable(),this.accBeta2=ut(r).variable()}),s==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ie(()=>{const r=Xe(1,this.accBeta1),s=Xe(1,this.accBeta2);n.forEach((i,a)=>{const o=ee.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:ie(()=>Vt(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:ie(()=>Vt(o).variable(l))});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedSecondMoment[a].variable,d=ke(Z(c,this.beta1),Z(u,1-this.beta1)),h=ke(Z(f,this.beta2),Z(dn(u),1-this.beta2)),p=Ke(d,r),m=Ke(h,s);c.assign(d),f.assign(h);const g=ke(Z(Ke(p,ke(as(m),this.epsilon)),-this.learningRate),o);o.assign(g)}),this.accBeta1.assign(Z(this.accBeta1,this.beta1)),this.accBeta2.assign(Z(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&mt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&mt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ie(()=>{this.accBeta1.assign(Xl(this.beta1,this.iterations_+1)),this.accBeta2.assign(Xl(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LX extends Uc{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ie(()=>{this.iteration=ut(0).variable(),this.accBeta1=ut(n).variable()}),s==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ie(()=>{const r=Xe(1,this.accBeta1),s=Ke(-this.learningRate,ke(Z(this.iteration,this.decay),1));n.forEach((i,a)=>{const o=ee.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Vt(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:Vt(o).variable(l)});const u=Array.isArray(e)?e[a].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedWeightedInfNorm[a].variable,d=ke(Z(c,this.beta1),Z(u,1-this.beta1)),h=Z(f,this.beta2),p=xr(u),m=cu(h,p);c.assign(d),f.assign(m);const g=ke(Z(Ke(s,r),Ke(d,ke(m,this.epsilon))),o);o.assign(g)}),this.iteration.assign(ke(this.iteration,1)),this.accBeta1.assign(Z(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&mt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&mt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _D extends Uc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=ee.registeredVariables[r];ie(()=>{const o=ke(Z(this.c,i),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=zr(ut(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zX extends _D{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ut(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ee.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:ie(()=>Vt(i).variable(!1))});const a=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&ie(()=>{let l;const u=ke(Z(this.m,a),o);this.useNesterov?l=ke(Z(this.c,ke(o,Z(u,this.m))),i):l=ke(Z(this.c,u),i),a.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&mt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BX extends Uc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=ee.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ee.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:ie(()=>Vt(i).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:ie(()=>Vt(i).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:ie(()=>Vt(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;ie(()=>{const c=ke(Z(l,this.decay),Z(dn(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[s].variable,d=ke(Z(f,this.decay),Z(o,1-this.decay)),h=Ke(Z(o,this.learningRate),as(Xe(c,ke(dn(d),this.epsilon)))),p=ke(Z(u,this.momentum),h);l.assign(c),f.assign(d),u.assign(p);const m=Xe(i,p);i.assign(m)}else{const f=ke(Z(l,this.decay),Z(dn(o),1-this.decay)),d=ke(Z(u,this.momentum),Ke(Z(o,this.learningRate),as(ke(f,this.epsilon))));l.assign(f),u.assign(d);const h=Xe(i,d);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&mt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&mt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&mt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e=[PX,MX,FX,LX,zX,BX,_D];function R_e(){for(const t of D_e)Ie(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e="model",M_e=".json",F_e=".weights.bin";function H8(t){return new Promise(e=>setTimeout(e)).then(t)}class fd{constructor(e){if(!le().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(fd.URL_SCHEME)&&(e=e.slice(fd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=P_e),this.modelJsonFileName=e+M_e,this.weightDataFileName=e+F_e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=bo.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=yK(e,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await H8(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await H8(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:y0(e)}}}}fd.URL_SCHEME="downloads://";class L_e{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const l=jO(i,u=>this.loadWeights(u));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const a of e)n.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(i).then(a=>[n,a])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=a=>{const o=a.target.result;r(o)},i.onerror=a=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>V8(i.name)),s={};for(const i of e)i.paths.forEach(a=>{const o=V8(a);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const z_e=t=>le().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(fd.URL_SCHEME)?B_e(t.slice(fd.URL_SCHEME.length)):null;Ln.registerSaveRouter(z_e);function B_e(t="model"){return new fd(t)}function j_e(t){return new L_e(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(t,e,n,r){a(t),n=n??0,r=r??1,o(n,r);let s=0;const i=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function a(l){P(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){P(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),P(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),P(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jX(t,e){e==null&&(e={});const n=e.fetchFunc==null?le().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await q8(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(o):await q8(o,e.onProgress,.5,1)}function U_e(t,e){var n;const r=e.fetchFunc==null?le().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async a=>{for(var o;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await i.read();if(l){s++,i=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/t.length);continue}a.enqueue(u);return}a.close()}})}async function V_e(t,e="",n,r){return UX(a=>jX(a,{requestInit:r}))(t,e,n)}function UX(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,p)=>{let m=0;h.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,v=id[y]*pe(g.shape),b=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:g,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((x,w)=>{x===g.name&&(b(),a[w]=!0)}):b(),o.push(g.name),m+=v})}),!a.every(h=>h)){const h=r.filter((p,m)=>!a[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((h,p,m)=>(p&&h.push(m),h),[]),u=[];l.forEach(h=>{e[h].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;u.push(m)})});const c=await t(u),f={};let d=0;return l.forEach(h=>{const p=e[h].paths.length,m=new bo(c.slice(d,d+p));i[h].forEach(y=>{const v=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),b=hK(v,[y.manifestEntry]);for(const x in b)f[x]=b[x]}),d+=p}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_e="application/octet-stream",G_e="application/json";class OD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(P(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=le().platform.fetch,P(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&P(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=yK(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:G_e}),"model.json"),e.weightData!=null){const a=bo.join(e.weightData);n.body.append("model.weights.bin",new Blob([a],{type:W_e}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:y0(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return jO(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=dN(e.weightsManifest),s=()=>U_e(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=H_e(n),i=this.weightPathPrefix||r,a=[],o=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):a.push(i+u+s);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(e){const n=await this.getWeightUrls(e),r=dN(e),s=await jX(n,this.loadOptions);return[r,s]}}OD.URL_SCHEME_REGEX=/^https?:\/\//;function H_e(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function bN(t){return t.match(OD.URL_SCHEME_REGEX)!=null}const VX=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>bN(r)):n=bN(t),n)return DD(t,e)}return null};Ln.registerSaveRouter(VX);Ln.registerLoadRouter(VX);function DD(t,e){return new OD(t,e)}function q_e(t,e){return DD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sC{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class WX{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class K_e{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function X_e(t,e,n,r){const s=arguments;return new K_e(GX(...s))}function GX(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new sC(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sC({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new sC({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Y_e(t){return new WX(t)}function Z_e(t){return new WX(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HX=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:bo,browserFiles:j_e,browserHTTPRequest:q_e,concatenateArrayBuffers:gK,copyModel:JCe,decodeWeights:hK,decodeWeightsStream:mK,encodeWeights:fN,fromMemory:X_e,fromMemorySync:GX,getLoadHandlers:zCe,getModelArtifactsForJSON:jO,getModelArtifactsForJSONSync:vK,getModelArtifactsInfoForJSON:y0,getSaveHandlers:bK,getWeightSpecs:dN,http:DD,isHTTPScheme:bN,listModels:ZCe,loadWeights:V_e,moveModel:eEe,registerLoadRouter:LCe,registerSaveRouter:FCe,removeModel:QCe,weightsLoaderFactory:UX,withSaveHandler:Y_e,withSaveHandlerSync:Z_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Jc;function Q_e(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(sN(nN,ee.backendName)!=null){const p={pixels:t},m={numChannels:e};return ee.runKernel(nN,p,m)}const[u,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f;if(a)f=t.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)f=t.data;else if(i||s||o){if(Jc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Jc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Jc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Jc.canvas.width=u,Jc.canvas.height=c,Jc.drawImage(t,0,0,u,c),f=Jc.getImageData(0,0,u,c).data}let d;if(e===4)d=new Int32Array(f);else{const p=u*c;d=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)d[m*e+g]=f[m*4+g]}return bX(d,[c,u,e],"int32")}function J_e(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function qX(t,e){let n=M(t,"img","toPixels");if(!(t instanceof Jt)){const u=n;n=Be(u,"int32"),u.dispose()}J_e(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],a=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const c=[0,0,0,255];for(let d=0;d<i;d++){const h=a[u*i+d];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(c[0]=h*o,c[1]=h*o,c[2]=h*o):c[d]=h*o}const f=u*4;l[f+0]=Math.round(c[0]),l[f+1]=Math.round(c[1]),l[f+2]=Math.round(c[2]),l[f+3]=Math.round(c[3])}return n!==t&&n.dispose(),l}const KX=X({fromPixels_:Q_e});function RD(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(pe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let a=1;for(let f=0;f<s.length-1;++f)a*=s[f];const o=t.shape,l=s.slice();l.pop();let u=1;for(let f=i;f<n;++f)u*=o[f],l.push(o[f]);const c=[...at(t.shape).map(f=>f/u),1].slice(0,i);return[l,a,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xN=-2,eOe=-1;function PD(t,e,n){const r=t.shape.length;P(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),P(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)P(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function tOe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function MD(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function XX(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function YX(t,e,n){return n<=t?n:n-(e-1)}function ZX(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function nOe(t,e,n,r,s,i,a,o,l){const u=t.length;let c=new Array(u),f=new Array(u),d=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=QX(a,h,p,r,t),f=JX(o,h,p,s,t),d=XX(i,h,p,t)}else for(let h=0;h<u;h++)c[h]=tY(a,r,i,t,h,l),f[h]=nY(o,s,i,t,h,l),d[h]=eY(i,h,l);return{begin:c,end:f,strides:d}}function QX(t,e,n,r,s){const i=[...s],a=ZX(n,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=0;else{const l=YX(e,n,o);let u=r[l];t&1<<l&&(u=0),i[o]=u}return i}function JX(t,e,n,r,s){const i=[...s],a=ZX(n,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const l=YX(e,n,o);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[o]=u}for(let o=0;o<i.length;o++){const l=s[o];i[o]<0&&(i[o]+=l),i[o]=nd(0,i[o],s[o])}return i}function eY(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function tY(t,e,n,r,s,i){let a=e[s];const o=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),a=nd(0,a,l-1),a}function nY(t,e,n,r,s,i){let a=e[s];const o=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),o>0?a=nd(0,a,l):a=nd(-1,a,l-1),a}function FD(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function LD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function QS(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(a=>{P(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((a,o)=>a>=0?a:(P(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function zD(t,e,n,r,s,i,a,o,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let b=0;b<f.dims;b++)c&&1<<b&o&&f.numAddAxisAfterEllipsis++,1<<b&a&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};rOe(f,d);let h=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(d.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(d.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const C=[d.beginMask&1<<b,d.endMask&1<<b],E=[d.strides[b]>0?0:-1,d.strides[b]>0?w:w-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[b]===1;const A=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){const z=d.begin[b]<0?w+d.begin[b]:d.begin[b];if(d.begin[b]=z,d.end[b]=d.begin[b]+1,z<0||z>=w)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=K8(d.begin[b],0,d.strides[b],w,C,E),d.end[b]=K8(d.end[b],1,d.strides[b],w,C,E);const F=d.strides[b]===1&&d.begin[b]===0&&d.end[b]===w;h=h&&F,p=p&&(b===0&&d.strides[b]===1||F)}else h=h&&d.strides[b]===1&&A,p=p&&(b===0&&d.strides[b]===1||A);let O,R=!1;if(d.beginValid&&d.endValid?(O=d.end[b]-d.begin[b],R=!0):x?(O=1,R=!0):A&&w>=0&&(d.strides[b]<0?O=-w:O=w,R=!0),R){let F;O===0||O<0!=d.strides[b]<0?F=0:F=Math.trunc(O/d.strides[b])+(O%d.strides[b]!==0?1:0),g.push(F)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){const x=d.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===xN&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>d.finalShapeGatherIndices[x]!==xN),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function rOe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(xN),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(eOe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function K8(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const a=t<0?r+t:t;return a<i[0]?i[0]:a>i[1]?i[1]:a}}const sOe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:PD,computeFlatOffset:LD,computeOutShape:MD,getNormalizedAxes:nOe,isSliceContinous:FD,maskToAxes:tOe,parseSliceParams:QS,sliceInfo:zD,startForAxis:tY,startIndicesWithElidedDims:QX,stopForAxis:nY,stopIndicesWithElidedDims:JX,stridesForAxis:eY,stridesWithElidedDims:XX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iOe{static sgd(e){return new _D(e)}static momentum(e,n,r=!1){return new zX(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new BX(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new FX(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new PX(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new LX(e,n,r,s,i)}static adagrad(e,n=.1){return new MX(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zd=iOe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function rY(){return new Promise(t=>aOe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BD(t,e){const n=t[0].length;t.forEach((s,i)=>{P(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),P(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let a=0;a<n;a++)P(a===e||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Xo(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Qa||(Qa={}));function sY(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],a=r[r.length-n.length+s],o=r[a];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${o}`)}else r[a]=i}return r}function iY(t){const e={FIRST_DIM_SIZE:Qa.FIRST_DIM_SIZE,VALUE_ROWIDS:Qa.VALUE_ROWIDS,ROW_LENGTHS:Qa.ROW_LENGTHS,ROW_SPLITS:Qa.ROW_SPLITS,ROW_LIMITS:Qa.ROW_LIMITS,ROW_STARTS:Qa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function aY(t){return t.length===0?0:t[0]===Qa.FIRST_DIM_SIZE?t.length-1:t.length}function oY(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],a=e[s+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jD=30;function JS(t){return t<=jD?t:Jk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E0(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let a=0;a<i;++a)s=s.concat([t[a+1]/e[a],e[a]]);s=s.concat(t.slice(i+1))}return s}function k0(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?i.push(a):s.push(a);r.push(...s),r.push(0),r.push(...i)}return r}function N0(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function VD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function WD(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4=1.7580993408473768,t4=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GD=.3275911,HD=.254829592,qD=-.284496736,KD=1.421413741,XD=-1.453152027,YD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function lY(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function uY(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function cY(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function ZD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function fY(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function dY(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function hY(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iC="->",oOe=/->/g,X8=",",Y8="...";function QD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(oOe,"").length)/iC.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${iC}").`);const[r,s]=t.split(iC);P(r.indexOf(Y8)===-1,()=>`The ellipsis notation ("${Y8}") is not supported yet.`);const i=r.split(X8),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<s.length;++d){const h=s[d];if(!i.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let d=0;d<r.length;++d){const h=r[d];o.indexOf(h)===-1&&h!==X8&&o.push(h)}const l=new Array(i.length);for(let d=0;d<a;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let h=0;h<i[d].length;++h)l[d].push(o.indexOf(i[d][h]))}const u=o.length,c=s.length,f=[];for(let d=c;d<u;++d)f.push(d);return{allDims:o,summedDims:f,idDims:l}}function JD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function eR(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let a=0;a<e[s].length;++a)r[e[s][a]]===void 0?r[e[s][a]]=i[a]:P(r[e[s][a]]===i[a],()=>`Expected dimension ${r[e[s][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function tR(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let a=0;a<s;++a)r.push([]);const i=[];for(let a=0;a<n.length;++a){const o=n[a],l=lOe(e,o);for(const u of l)i.indexOf(u)===-1&&(r[a].push(u),i.push(u))}return{path:n,steps:r}}function nR(t){return t.every((e,n)=>e===n)}function lOe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function rR(t,e,n=0){let r=[];if(typeof e=="number")P(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);P(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[i]=t.shape[n]-a}P(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function mY(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function gY(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function vY(t,e){return`size ${t} must be non-negative, not ${e}`}function bY(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function xY(t,e){const n=pe(t),r=pe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function wY(t,e){const n=pe(t),r=pe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wN(){return"segment ids must be >= 0"}function SY(){return"segment ids are not increasing"}function TY(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function CY(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(t,e){let n=!1,r;for(t<=jD?(r=t,n=!0):r=Jk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Jk(t,r+1);return r}function kY(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function sR(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const a=t.shape[n],o=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)o.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)o.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<s;f++)o.push(e.shape[f]);for(let f=n+1;f<i;f++)o.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:o}}const uOe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:sR,computeOutShape:kY,segOpComputeOptimalWindowSize:EY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ql(t){try{return t.map(e=>hc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function NY(t){return t.map(e=>tc(e))}const cOe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:HD,ERF_A2:qD,ERF_A3:KD,ERF_A4:XD,ERF_A5:YD,ERF_P:GD,PARALLELIZE_THRESHOLD:jD,get RowPartitionType(){return Qa},SELU_SCALE:t4,SELU_SCALEALPHA:e4,applyActivation:YS,assertAndGetBroadcastShape:wt,assertAxesAreInnerMostDims:cs,assertParamsConsistent:BD,assignToTypedArray:fY,axesAreInnerMostDims:ZO,calculateShapes:_d,checkEinsumDimSizes:eR,checkPadOnDimRoundingMode:Fs,combineLocations:JK,combineRaggedTensorToTensorShapes:sY,complexWithEvenIndex:uY,complexWithOddIndex:cY,computeConv2DInfo:Gr,computeConv3DInfo:Lc,computeDefaultPad:WO,computeDilation2DInfo:v0,computeOptimalWindowSize:JS,computeOutAndReduceShapes:Hr,computeOutShape:Xo,computePool2DInfo:Ga,computePool3DInfo:lu,convertConv2DDataFormat:uu,decodeEinsumEquation:QD,eitherStridesOrDilationsAreOne:us,expandShapeToKeepDim:ir,exponent:hY,exponents:dY,fromStringArrayToUint8:NY,fromUint8ToStringArray:Ql,getAxesPermutation:Hn,getBroadcastDims:yp,getComplexWithIndex:ZD,getEinsumComputePath:tR,getEinsumPermutation:JD,getFusedBiasGradient:XS,getFusedDyActivation:KS,getImageCenter:UD,getInnerMostAxes:ar,getPermuted:k0,getRaggedRank:aY,getReductionAxes:Dr,getReshaped:E0,getReshapedPermuted:N0,getRowPartitionTypesHelper:iY,getSliceBeginCoords:VD,getSliceSize:WD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:pY,getSparseFillEmptyRowsNegativeIndexErrorMessage:mY,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:gY,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:bY,getSparseReshapeInputOutputMismatchErrorMessage:wY,getSparseReshapeInputOutputMultipleErrorMessage:xY,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:yY,getSparseReshapeNegativeOutputDimErrorMessage:vY,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:CY,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:wN,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:SY,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:TY,getUndoAxesPermutation:zc,isIdentityPermutation:nR,log:JTe,mergeRealAndImagArrays:Zl,prepareAndValidate:RD,prepareSplitSize:rR,segment_util:uOe,shouldFuse:ZS,slice_util:sOe,splitRealAndImagArrays:lY,stridesOrDilationsArePositive:ld,tupleValuesAreOne:gc,upcastType:Si,validateDefaultValueShape:oY,validateInput:wD,validateUpdateShape:xX,warn:Gi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */R_e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY={kernelName:k3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,nm(Be(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe={kernelName:S1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=dn(Be(n,"float32")),s=as(Xe(ut(1),r));return $n(Ke(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe={kernelName:T1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=as(Xe(dn(Be(n,"float32")),1));return Ke(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe={kernelName:Jp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{let o=t;const l=Dr(n.shape,s);return l.length>0&&(o=Je(o,l)),ne(o,n.shape)},b:()=>{let o=t;const l=Dr(r.shape,s);return l.length>0&&(o=Je(o,l)),ne(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOe={kernelName:N3,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe={kernelName:A3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Vt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gOe={kernelName:$3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Vt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yOe={kernelName:C1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,as(Xe(ut(1),dn(Be(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe={kernelName:E1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=as(ke(ut(1),dn(Be(n,"float32"))));return Ke(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe={kernelName:A1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{const o=ke(dn(n),dn(r));let l=Z(t,Ke(r,o));const u=Dr(n.shape,s);return u.length>0&&(l=Je(l,u)),ne(l,n.shape)},b:()=>{const o=ke(dn(n),dn(r));let l=$n(Z(t,Ke(n,o)));const u=Dr(r.shape,s);return u.length>0&&(l=Je(l,u)),ne(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:k1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,ke(dn(Be(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe={kernelName:N1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,Xe(ut(1),dn(Be(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t,e,n,r,s,i){const a=M(t,"dy","avgPool3dGrad"),o=M(e,"input","avgPool3dGrad");let l=a,u=o,c=!1;o.rank===4&&(c=!0,l=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),P(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Fs("avgPool3dGrad",s,i);const f={dy:l,input:u},d={filterSize:n,strides:r,pad:s,dimRoundingMode:i},h=ee.runKernel(F_,f,d);return c?ne(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const TOe=X({avgPool3dGrad_:SOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={kernelName:_3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:o}=n;return{x:()=>TOe(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t,e,n,r,s){const i=M(t,"dy","avgPoolGrad"),a=M(e,"input","avgPoolGrad");P(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let o=a,l=i,u=!1;a.rank===3&&(u=!0,o=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),P(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:l,input:o},f={filterSize:n,strides:r,pad:s},d=ee.runKernel(M_,c,f);return u?ne(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const kOe=X({avgPoolGrad_:EOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe={kernelName:I3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>kOe(t,r,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe={kernelName:O3,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:a}=n;return!i&&!a?{a:()=>Pt(t,s,!1,!0),b:()=>Pt(r,t,!0,!1)}:!i&&a?{a:()=>Pt(t,s,!1,!1),b:()=>Pt(t,r,!0,!1)}:i&&!a?{a:()=>Pt(s,t,!1,!0),b:()=>Pt(r,t,!1,!1)}:{a:()=>Pt(s,t,!0,!0),b:()=>Pt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:D3,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>BS(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe={kernelName:YTe,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,a=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])a[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>Je(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe={kernelName:$1,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe={kernelName:I1,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:_1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>xs(nl(Bc(r,s),Ad(r,i)),t,Vt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe={kernelName:P3,inputsToSave:["x"],gradFunc:AY.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:M3,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=Ot(s,e[0].shape)[0],a=r.map(l=>l[i]);return xi(t,a,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:F3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:a,pad:o,dataFormat:l}=n;return P(gc(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>HO(r.shape,t,s,a,o,l),filter:()=>kD(r,t,s.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe={kernelName:L3,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>yc(t,s,i,a,o,1,l),filter:()=>kD(t,r,s.shape,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t,e,n,r,s){let i=t;t.rank===4&&(i=ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=ne(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),P(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),P(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),P(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),P(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),P(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:a},l={strides:r,pad:s,filterShape:n};return ee.runKernel(U_,o,l)}const zOe=X({conv3DBackpropFilter_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:z3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;P(gc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>qK(a.shape,t,o,s,i),filter:()=>zOe(a,t,o.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:O1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z($n(gD(Be(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe={kernelName:D1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(yD(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe={kernelName:B3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:a}=n;return{x:()=>{const o=Hn([s],r.rank);let l=XO(t,s,i,!a);return o!=null&&(l=Ut(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:j3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:a}=n,o=r??[1,1];P(gc(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=e;return P(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),P(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),P(us(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),Fs("depthwiseConv2d",i,a),{x:()=>$X(l.shape,t,u,s,i,o,a),filter:()=>AX(l,t,u.shape,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GOe={kernelName:U3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},a={x:r,filter:s,dy:t};return{x:()=>ee.runKernel(eN,i,n),filter:()=>ee.runKernel(tN,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe={kernelName:P1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ee.runKernel(Q_,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:M1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Z(Ps($n(dn(n))),2/Math.sqrt(Math.PI));return{x:()=>Z(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:F1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:W3,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ne(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:L1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Ps(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:z1,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:B1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{const o=Ke(t,Be(r,"float32")),l=Dr(n.shape,s);return l.length>0?ne(Je(o,l),n.shape):o},b:()=>{let o=Z(t,Be(n,"float32"));const l=Dr(r.shape,s);l.length>0&&(o=ne(Je(o,l),r.shape));const u=dn(r);return $n(Ke(o,Be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:G3,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,a,o]=e,l=o??ut(1),u=Dr(i.shape,s.shape),c=[];if(i.rank===1){for(let x=0;x<s.shape.length-1;++x)c.push(s.shape[x]);c.push(1)}const f=Xe(s,i),d=Z(t,l),h=hD(ke(a,ut(r))),p=Z(Z(Z(h,h),h),ut(-.5));return{x:()=>i.rank===1?ne(Z(Z(t,Ia(ne(h,[1,1,1,i.shape[0]]),c)),l),s.shape):ne(Z(Z(t,h),l),s.shape),mean:()=>{let x=Z(Z(h,ut(-1)),d);return i.rank===1&&(x=Je(x,u)),ne(x,i.shape)},variance:()=>{let x=Z(Z(p,f),d);return i.rank===1&&(x=Je(x,u)),ne(x,i.shape)},scale:()=>{const x=Z(f,h);let w=Z(t,x);return i.rank===1&&(w=Je(w,u)),ne(w,i.shape)},offset:()=>{let x=t;return i.rank===1&&(x=Je(x,u)),ne(x,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eDe={kernelName:H3,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:a}=n,o=Ot(i,r.shape)[0],l=(u,c,f)=>()=>{const d=u.shape,h=c.size,p=d.slice(0,o),m=p.length,g=d.slice(i,d.length).slice(1),y=g.length,v=Z8(0,m),b=Z8(m+1,m+1+y),x=Q8([p,[h],g]),w=ne(f,x),C=ne(c,[h]),E=Q8([[m],v,b]),A=Ut(w,E);let O=TD(A,C,u.shape[o]);const R=zc(E);return O=Ut(O,R),O};if(a===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Ti(c.map((h,p)=>l(h,s.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function Z8(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Q8(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tDe={kernelName:j1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Vt(n),b:()=>Vt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDe={kernelName:U1,gradFunc:t=>({x:()=>Be(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rDe={kernelName:V1,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe={kernelName:W1,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe={kernelName:G1,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe={kernelName:K3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Ii(r,0);return{x:()=>xs(i,t,Z(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe={kernelName:q1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,ke(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe={kernelName:H1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,Be(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uDe={kernelName:QTe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const a=Ps(r);return Xe(t,Z(Je(t,s,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t,e,n,r=5,s=1,i=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:a};return ee.runKernel(aO,o,l)}const fDe=X({localResponseNormalizationBackprop_:cDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dDe={kernelName:eS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:a,alpha:o,beta:l}=n;return{x:()=>fDe(r,s,t,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t,e,n,r){return e.rank<n.rank&&(e=ne(e,ir(e.shape,r))),t.rank<n.rank&&(t=ne(t,ir(t.shape,r))),{x:()=>Z(t,Be(uo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8={kernelName:tS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],a=e[1],o=Ot(s,i.shape),l=$Y(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDe={kernelName:K1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Z(t,Be(Bc(n,r),"float32")),b:()=>Z(t,Be(by(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t,e,n,r,s,i,a){const o=M(t,"dy","maxPool3dGrad"),l=M(e,"input","maxPool3dGrad"),u=M(n,"output","maxPool3dGrad");let c=o,f=l,d=u,h=!1;l.rank===4&&(h=!0,c=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=ne(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=ne(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),P(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),P(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),P(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Fs("maxPool3dGrad",i,a);const p={dy:c,input:f,output:d},m={filterSize:r,strides:s,pad:i,dimRoundingMode:a},g=ee.runKernel(lO,p,m);return h?ne(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const mDe=X({maxPool3dGrad_:pDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gDe={kernelName:rS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>mDe(t,r,s,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t,e,n,r,s,i,a){const o=M(t,"dy","maxPoolGrad"),l=M(e,"input","maxPoolGrad"),u=M(n,"output","maxPoolGrad");P(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),P(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),P(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Fs("maxPoolGrad",i,a);const c={dy:o,input:l,output:u},f={filterSize:r,strides:s,pad:i,dimRoundingMode:a};return ee.runKernel(oO,c,f)}const vDe=X({maxPoolGrad_:yDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe={kernelName:nS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>vDe(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDe={kernelName:sS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=Ot(s,r.shape),o=Hr(r.shape,i)[1],l=pe(o);return{x:()=>{const c=r.shape.slice();i.forEach(h=>{c[h]=1});const f=ne(t,c);return Ke(Z(f,yi(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wDe={kernelName:iS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,a]=e,o=Ot(s,i.shape),l=$Y(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SDe={kernelName:X1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Z(t,Be(Ad(n,r),"float32")),b:()=>Z(t,Be(Ii(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe={kernelName:aS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>ht(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe={kernelName:Y1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{const o=Dr(n.shape,s);return o.length>0?ne(Je(t,o),n.shape):t},b:()=>{const o=Z(t,$n(T0(Ke(n,r)))),l=Dr(r.shape,s);return l.length>0?ne(Je(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe={kernelName:Z1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{const o=Z(t,Be(r,"float32")),l=Dr(n.shape,s);return l.length>0?ne(Je(o,l),n.shape):o},b:()=>{const o=Z(t,Be(n,"float32")),l=Dr(r.shape,s);return l.length>0?ne(Je(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kDe={kernelName:oS,gradFunc:t=>({x:()=>$n(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDe={kernelName:cS,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Tr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADe={kernelName:uS,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De={kernelName:fS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Ua(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eL={kernelName:dS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>ht(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IDe={kernelName:Q1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,a=r,o=wt(i.shape,a.shape);return{a:()=>{const c=Be(a,"float32");let f=Z(t,Z(c,Xl(i,Xe(c,ut(1)))));const d=Dr(i.shape,o);return d.length>0&&(f=Je(f,d)),ne(f,i.shape)},b:()=>{const c=Ii(i,0),f=xs(c,na(i),Vt(i));let d=Z(t,Z(s,f));const h=Dr(a.shape,o);return h.length>0&&(d=Je(d,h)),ne(d,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _De={kernelName:hS,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Ii(n,0);return{x:()=>xs(s,t,Z(t,r)),alpha:()=>{let i=xs(s,Vt(t),Z(t,n));const a=Dr(r.shape,t.shape);return a.length>0&&(i=Je(i,a)),ne(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t,e,n){const r=t.shape.slice();r[n]=1;const s=ne(e,r),i=Cx(t,n,!0,!1),a=Cx(t,n,!0,!0),o=Z(i,a);return Z(s,o)}function DDe(t,e,n){const r=t.shape.length,s=r-n.length,i=Hn(n,r);let a=t;i!=null&&(a=Ut(t,i));const o=a.shape.slice(),u=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(u);const c=a.reshape(o);let f=ODe(c,e,s);if(f=f.reshape(a.shape),i!=null){const d=zc(i);f=Ut(f,d)}return f}const RDe={kernelName:pS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((a,o)=>o):typeof s=="number"?i=[s]:i=s,{x:()=>DDe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PDe={kernelName:R1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{const o=Ke(t,Be(r,"float32")),l=Dr(n.shape,s);return l.length>0?ne(Je(o,l),n.shape):o},b:()=>{let o=Z(t,Be(n,"float32"));const l=Dr(r.shape,s);l.length>0&&(o=ne(Je(o,l),r.shape));const u=dn(r);return $n(Ke(o,Be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MDe={kernelName:J1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,$n(dn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe={kernelName:t0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Z(Ad(n,6),nm(n));return{x:()=>Z(t,Be(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe={kernelName:e0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Be(nm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe={kernelName:mS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe={kernelName:yS,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ee.runKernel(xO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe={kernelName:gS,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ee.runKernel(bO,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe={kernelName:vS,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Ot(r,t.shape);return{x:()=>ja(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe={kernelName:n0,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WDe={kernelName:r0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>$n(Ke(t,Z(Xl(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe={kernelName:bS,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Be(Vt(n),"float32"),t:()=>Z(t,Be(n,t.dtype)),e:()=>Z(t,Be(FS(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe={kernelName:s0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ii(n,ut(0)),s=ut(e4),i=ut(t4),a=Z(t,i),o=Z(Z(t,s),Ps(Be(n,"float32")));return xs(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe={kernelName:l0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Z(n,Xe(ut(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe={kernelName:o0,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe={kernelName:i0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(OS(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDe={kernelName:a0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(KO(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe={kernelName:xS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,a=r.shape,[o,l]=QS(r,s,i),u=[];for(let c=0;c<t.rank;c++)u.push([o[c],a[c]-o[c]-l[c]]);return{x:()=>jc(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDe={kernelName:CS,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,a=Z(t,r);return{logits:()=>Xe(a,Z(Je(a,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDe={kernelName:u0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,ao(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tL={kernelName:SS,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>_S(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nL={kernelName:TS,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Zn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe={kernelName:c0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,Z(as(Be(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe={kernelName:$O,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,Z(Be(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe={kernelName:f0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(2);return{a:()=>Z(t,Z(s,Xe(n,r))),b:()=>Z(t,Z(s,Xe(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rRe={kernelName:g0,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe={kernelName:d0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=wt(n.shape,r.shape);return{a:()=>{let o=t;const l=Dr(n.shape,s);return l.length>0&&(o=Je(o,l)),ne(o,n.shape)},b:()=>{let o=t;const l=Dr(r.shape,s);return l.length>0&&(o=Je(o,l)),ne($n(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iRe={kernelName:wS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;Ot(i,r.shape).forEach(u=>{s[u]=1});const o=ne(t,s),l=Z(o,yi(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aRe={kernelName:h0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ke(t,dn(OS(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRe={kernelName:p0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(Xe(ut(1),dn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe={kernelName:m0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let a=Vt(r);if(r.rank===1)for(let o=0;o<s[0];++o)a=ke(a,ht(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)a=ke(a,ht(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)a=ke(a,ht(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)for(let c=0;c<s[3];++c)a=ke(a,ht(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe={kernelName:Ph,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=zc(s);return{x:()=>Ut(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cRe={kernelName:kS,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Ti(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe={kernelName:NS,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dRe(t,n)}}};function dRe(t,e){const n=cu(e,Vt(e)),r=C0(t,n);let s=Bc(e,ut(0,"int32"));const i=r.rank-s.rank;for(let o=0;o<i;++o)s=Sr(s,o+1);s=nl(s,yi(r.shape,"bool"));const a=Vt(r);return xs(s,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRe={kernelName:AS,gradFunc:t=>({x:()=>Vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pRe=[AY,fOe,dOe,hOe,pOe,mOe,gOe,yOe,vOe,bOe,xOe,wOe,COe,NOe,AOe,$Oe,IOe,_Oe,OOe,DOe,ROe,POe,FOe,MOe,BOe,jOe,UOe,VOe,WOe,GOe,PDe,HOe,qOe,KOe,XOe,YOe,QOe,ZOe,JOe,eDe,tDe,nDe,rDe,sDe,iDe,aDe,oDe,lDe,uDe,dDe,J8,J8,hDe,gDe,bDe,xDe,wDe,SDe,TDe,CDe,EDe,kDe,NDe,ADe,$De,eL,eL,IDe,_De,RDe,MDe,FDe,LDe,zDe,BDe,jDe,UDe,VDe,WDe,GDe,HDe,qDe,KDe,XDe,YDe,ZDe,QDe,JDe,tL,tL,nL,nL,eRe,nRe,tRe,rRe,sRe,iRe,aRe,oRe,lRe,uRe,cRe,fRe,hRe];for(const t of pRe)eCe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.abs=function(){return this.throwIfDisposed(),xr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.acos=function(){return this.throwIfDisposed(),AK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.acosh=function(){return this.throwIfDisposed(),$K(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.add=function(t){return this.throwIfDisposed(),ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.all=function(t,e){return this.throwIfDisposed(),VO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.any=function(t,e){return this.throwIfDisposed(),Tx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.argMax=function(t){return this.throwIfDisposed(),gp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.argMin=function(t){return this.throwIfDisposed(),IK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,()=>"The array must have only 1 element."),ne(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asType=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as1D=function(){return this.throwIfDisposed(),ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ne(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ne(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ne(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),ne(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asin=function(){return this.throwIfDisposed(),_K(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.asinh=function(){return this.throwIfDisposed(),OK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atan=function(){return this.throwIfDisposed(),DK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atan2=function(t){return this.throwIfDisposed(),RK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.atanh=function(){return this.throwIfDisposed(),PK(this)};xe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),IS(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),_S(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),b0(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Lh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cast=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.ceil=function(){return this.throwIfDisposed(),jK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Qs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Jt&&(t=[t]),Zn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),GO(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),qO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),yc(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cos=function(){return this.throwIfDisposed(),OS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cosh=function(){return this.throwIfDisposed(),KO(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Cx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),XO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),XK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),x0(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),YK(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.divNoNan=function(t){return this.throwIfDisposed(),ZK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.div=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.dot=function(t){return this.throwIfDisposed(),QK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.elu=function(){return this.throwIfDisposed(),w0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.equal=function(t){return this.throwIfDisposed(),uo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.erf=function(){return this.throwIfDisposed(),YO(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),tX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.exp=function(){return this.throwIfDisposed(),Ps(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.expandDims=function(t){return this.throwIfDisposed(),Sr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.expm1=function(){return this.throwIfDisposed(),nX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.fft=function(){return this.throwIfDisposed(),HS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.flatten=function(){return this.throwIfDisposed(),ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.floor=function(){return this.throwIfDisposed(),T0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.floorDiv=function(t){return this.throwIfDisposed(),UO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),C0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Bc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.greater=function(t){return this.throwIfDisposed(),Ii(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.ifft=function(){return this.throwIfDisposed(),Sy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.irfft=function(){return this.throwIfDisposed(),bD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isFinite=function(){return this.throwIfDisposed(),rX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isInf=function(){return this.throwIfDisposed(),sX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.isNaN=function(){return this.throwIfDisposed(),iX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),RS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.lessEqual=function(t){return this.throwIfDisposed(),Ad(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.less=function(t){return this.throwIfDisposed(),by(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),aX(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSigmoid=function(){return this.throwIfDisposed(),oX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),JO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),MS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.log=function(){return this.throwIfDisposed(),na(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.log1p=function(){return this.throwIfDisposed(),PS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),nl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalNot=function(){return this.throwIfDisposed(),FS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalOr=function(t){return this.throwIfDisposed(),eD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.logicalXor=function(t){return this.throwIfDisposed(),lX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Pt(this,t,e,n)};xe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),LS(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.max=function(t,e){return this.throwIfDisposed(),Ra(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.maximum=function(t){return this.throwIfDisposed(),cu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mean=function(t,e){return this.throwIfDisposed(),Yn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.min=function(t,e){return this.throwIfDisposed(),vy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.minimum=function(t){return this.throwIfDisposed(),cd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),cX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mod=function(t){return this.throwIfDisposed(),fX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.mul=function(t){return this.throwIfDisposed(),Z(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.neg=function(){return this.throwIfDisposed(),$n(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),S0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.notEqual=function(t){return this.throwIfDisposed(),vp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),nD(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.onesLike=function(){return this.throwIfDisposed(),ra(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.pad=function(t,e){return this.throwIfDisposed(),jc(this,t,e)};xe().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),dX(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.pow=function(t){return this.throwIfDisposed(),Xl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.prelu=function(t){return this.throwIfDisposed(),jS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.prod=function(t,e){return this.throwIfDisposed(),hX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reciprocal=function(){return this.throwIfDisposed(),mX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.relu=function(){return this.throwIfDisposed(),ll(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.relu6=function(){return this.throwIfDisposed(),fD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ne(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reshape=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),OX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),DX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.reverse=function(t){return this.throwIfDisposed(),ja(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.rfft=function(){return this.throwIfDisposed(),qS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.round=function(){return this.throwIfDisposed(),dD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.rsqrt=function(){return this.throwIfDisposed(),hD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.selu=function(){return this.throwIfDisposed(),pD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),mD(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sigmoid=function(){return this.throwIfDisposed(),ao(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sign=function(){return this.throwIfDisposed(),gX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sin=function(){return this.throwIfDisposed(),gD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sinh=function(){return this.throwIfDisposed(),yD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.slice=function(t,e){return this.throwIfDisposed(),ht(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.softmax=function(t){return this.throwIfDisposed(),GS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.softplus=function(){return this.throwIfDisposed(),tm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),BS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.split=function(t,e){return this.throwIfDisposed(),xi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sqrt=function(){return this.throwIfDisposed(),as(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.square=function(){return this.throwIfDisposed(),dn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),xD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.squeeze=function(t){return this.throwIfDisposed(),Xn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Jt?[this,t]:[this,...t];return Ti(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.step=function(t){return this.throwIfDisposed(),nm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.stridedSlice=function(t,e,n,r,s,i,a,o){return this.throwIfDisposed(),yX(this,t,e,n,r,s,i,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sub=function(t){return this.throwIfDisposed(),Xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.sum=function(t,e){return this.throwIfDisposed(),Je(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tan=function(){return this.throwIfDisposed(),vX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tanh=function(){return this.throwIfDisposed(),ud(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.tile=function(t){return this.throwIfDisposed(),Ia(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toBool=function(){return this.throwIfDisposed(),Be(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toFloat=function(){return this.throwIfDisposed(),Be(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.toInt=function(){return this.throwIfDisposed(),Be(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.topk=function(t,e){return this.throwIfDisposed(),wX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.transpose=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unique=function(t){return this.throwIfDisposed(),SX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),TD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.unstack=function(t){return this.throwIfDisposed(),Ua(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.where=function(t,e){return this.throwIfDisposed(),xs(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().prototype.zerosLike=function(){return this.throwIfDisposed(),Vt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ro extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ro.prototype)}}class _a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_a.prototype)}}class re extends Error{constructor(e){super(e),Object.setPrototypeOf(this,re.prototype)}}class kt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,kt.prototype)}}class iR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,iR.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IY{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dd(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Po(t,e){if(!t)throw new iR(e)}function rL(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ws(t){return t.length===1?t[0]:t}function nn(t){return Array.isArray(t)?t:[t]}function vl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function df(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ca={};function aR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function SN(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>SN(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:SN(r))}}}function A0(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let a;if(i in n)a=n[i];else if(i in ca)a=ca[i];else if(a=e[i],a==null)throw new re(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=t;if(i.className==null||i.config==null)throw new re(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let o,l;if(a in n?[o,l]=n[a]:a in ca?[o,l]=ca.className:a in e&&([o,l]=e[a]),o==null)throw new re(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(ca))u[h]=ca[h];for(const h of Object.keys(n))u[h]=n[h];const c=i.config;c.customObjects=u;const f=Object.assign({},ca);for(const h of Object.keys(n))ca[h]=n[h];SN(i.config);const d=l(o,i.config,n,s);return ca=Object.assign({},f),d}else{const u=Object.assign({},ca);for(const f of Object.keys(n))ca[f]=n[f];const c=new o(i.config);return ca=Object.assign({},u),c}}}function mRe(t,e){return t<e?-1:t>e?1:0}function Qv(t,e){return-1*mRe(t,e)}function rc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function gRe(t){if(t==null)throw new re(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Od(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new re(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function oR(t,e,n=0,r=1/0){return Po(n>=0),Po(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Br(t,e){Array.isArray(t)?(P(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Br(n,`element ${r+1} of ${e}`))):P(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${_Y(t)}.`)}function _Y(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>_Y(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function yRe(t,e,n){let r=n!=null?n():Us(),s;return(...a)=>{const o=n!=null?n():Us();return o-r<e||(r=o,s=t(...a)),s}}function OY(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let vRe=0;function DY(){return vRe++}const Jv={};function n4(t=""){return t in Jv||(Jv[t]=0),Jv[t]+=1,t+Jv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bRe=["channelsFirst","channelsLast"],xRe=["nearest","bilinear"],wRe=["valid","same","causal"],SRe=["max","avg"],TRe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Qd=new Map;function or(t){Od(bRe,"DataFormat",t)}function CRe(t){Od(xRe,"InterpolationFormat",t)}function aa(t){Od(wRe,"PaddingMode",t)}function RY(t){Od(SRe,"PoolMode",t)}const Bg=[],sL="/";function Uf(t,e){Bg.push(t);try{const n=e();return Bg.pop(),n}catch(n){throw Bg.pop(),n}}function ERe(){return Bg.length===0?"":Bg.join(sL)+sL}function PY(t){if(!FY(t))throw new Error("Not a valid tensor name: '"+t+"'");return ERe()+t}function MY(t){if(!FY(t))throw new Error("Not a valid tensor name: '"+t+"'");Qd.has(t)||Qd.set(t,0);const e=Qd.get(t);if(Qd.set(t,Qd.get(t)+1),e>0){const n=`${t}_${e}`;return Qd.set(n,1),n}else return t}const kRe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function FY(t){return!!t.match(kRe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NRe(t){return t===parseInt(t.toString(),10)}function sc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function xp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function vc(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function co(t,e){if(e<t)throw new re(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let aC;function kr(){return aC==null&&(aC=dK().epsilon()),aC}function fo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yo(t,e){return Be(t,e)}function $0(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ne(t,n)}function ARe(t,e){return ie(()=>{if(t.shape.length!==2)throw new re(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=$0(t,1);return TN(n,[1,e,1])})}function $Re(t){const e=[sc(t.shape)];return ne(t,e)}function IRe(t){if(t.rank<=1)throw new re(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],sc(t.shape,1)];return ne(t,e)}function Vf(t,e,n){return ie(()=>{switch(t.rank){case 1:return VS(t,e,n);case 2:return vD(t,[e,0],[n,t.shape[1]]);case 3:return WS(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return wy(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ht(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ht(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new re(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function oC(t,e,n){return ie(()=>{switch(t.rank){case 1:return VS(t,e,n);case 2:return vD(t,[0,e],[t.shape[0],n]);case 3:return WS(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return wy(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new re(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function eb(t,e,n,r){return ie(()=>{switch(t.rank){case 1:return VS(t,e,n);case 2:switch(r){case 1:return Vf(t,e,n);case 2:return oC(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Vf(t,e,n);case 2:return WS(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return oC(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Vf(t,e,n);case 2:return wy(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return wy(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return oC(t,e,n);default:throw new re(`The axis is not within the rank of the tensor ${r}`)}default:throw new re(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function lR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Zn(t,e)}function iL(t,e){switch(t.rank){case 1:return UK([t,e]);case 2:return VK([t,e],0);case 3:return WK([t,e],0);case 4:return GK([t,e],0);default:throw new re(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function TN(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new re(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Ia(t,e)}function r4(t,e=0,n=1,r,s){return cD(t,e,n,r,s)}function Zo(t,e,n,r){if(t.rank<2||e.rank<2)throw new kt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new kt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return vN({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?CN(t.rank,r,fo()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=ne(t,[-1,i]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),u=[...a,o],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=ne(Ut(e,c),[l,-1]);const f=[...s,...u];return ne(vN({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?CN(t.rank,r,fo()):null,activation:n}),f)}}function LY(t,e,n){return ie(()=>(Array.isArray(e)?e=dr(e,"int32"):e=Be(e,"int32"),C0(t,e,n)))}function I0(t){return Z(t,t)}function CN(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new re(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1,1,1]):ne(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,1,1,r[0]]):ne(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1,1]):ne(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,1,r[0]]):ne(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ne(e,[1,r[0],1]):ne(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ne(e,[1,1,r[0]]):ne(e,[1].concat(r))}else if(t<3)return e;throw new re(`Unsupported input rank by biasAdd: ${e.rank}`)}function xo(t,e,n){return ie(()=>(n==null&&(n=fo()),or(n),ke(t,CN(t.rank,e,n))))}function _Re(t,e=1){if(e!==1)throw new kt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return w0(t)}function ORe(t){return ie(()=>Ke(t,ke(xr(t),1)))}function zY(t,e,n,r){return ie(()=>EX(t,e,n,r))}function DRe(t){return ie(()=>{const e=ke(.5,Z(.2,t));return Qs(e,0,1)})}function _0(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RRe=["fanIn","fanOut","fanAvg"],PRe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MRe(t){Od(RRe,"FanMode",t)}function FRe(t){Od(PRe,"Distribution",t)}class Ha extends sm{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class BY extends Ha{apply(e,n){return Tr(e,n)}}BY.className="Zeros";Ie(BY);class uR extends Ha{apply(e,n){return yi(e,n)}}uR.className="Ones";Ie(uR);class jY extends Ha{constructor(e){if(super(),typeof e!="object")throw new re(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new re(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ie(()=>Z(ut(this.value),yi(e,n)))}getConfig(){return{value:this.value}}}jY.className="Constant";Ie(jY);class UY extends Ha{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Id(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}UY.className="RandomUniform";Ie(UY);class VY extends Ha{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new kt(`randomNormal does not support dType ${n}.`);return r4(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}VY.className="RandomNormal";Ie(VY);class WY extends Ha{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new kt(`truncatedNormal does not support dType ${n}.`);return SD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}WY.className="TruncatedNormal";Ie(WY);class GY extends Ha{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ie(()=>{if(e.length!==2||e[0]!==e[1])throw new re("Identity matrix initializer can only be used for 2D square matrices.");return Z(this.gain,QO(e[0]))})}getConfig(){return{gain:this.gain}}}GY.className="Identity";Ie(GY);function LRe(t,e="channelsLast"){let n,r;if(or(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=sc(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=sc(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=sc(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Ci extends Ha{constructor(e){if(super(),e.scale<0)throw new re(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,MRe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,FRe(this.distribution),this.seed=e.seed}apply(e,n){const r=LRe(e),s=r[0],i=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new kt(`${this.getClassName()} does not support dType ${n}.`);return SD(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return Id(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ci.className="VarianceScaling";Ie(Ci);class cR extends Ci{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}cR.className="GlorotUniform";Ie(cR);class fR extends Ci{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}fR.className="GlorotNormal";Ie(fR);class dR extends Ci{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}dR.className="HeNormal";Ie(dR);class hR extends Ci{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}hR.className="HeUniform";Ie(hR);class pR extends Ci{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}pR.className="LeCunNormal";Ie(pR);class mR extends Ci{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ci.className}}mR.className="LeCunUniform";Ie(mR);class HY extends Ha{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ie(()=>{if(e.length<2)throw new kt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=pe(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(s,r),Math.min(s,r)],o=r4(a,0,1,n,this.seed),l=RX.qr(o,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return u=Z(u,f.sign()),r<s&&(u=u.transpose()),Z(ut(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}HY.className="Orthogonal";Ie(HY);const aL={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function oL(t,e={}){return A0(t,Ta.getMap().classNameMap,e,"initializer")}function Vn(t){return aR(t)}function On(t){if(typeof t=="string"){const e=t in aL?aL[t]:t;if(e==="GlorotNormal")return new fR;if(e==="GlorotUniform")return new cR;if(e==="HeNormal")return new dR;if(e==="HeUniform")return new hR;if(e==="LeCunNormal")return new pR;if(e==="LeCunUniform")return new mR;{const n={};return n.className=e,n.config={},oL(n)}}else return t instanceof Ha?t:oL(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EN(t){return Array.isArray(t)&&Array.isArray(t[0])}function Ex(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function pt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new re(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Kt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new re(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kx(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lL="Variable";class zRe{constructor(e,n="float32",r=lL,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=DY(),r=r??lL,this.originalName=PY(r),this.name=MY(this.originalName),this.trainable_=s,this.constraint=i,this.val=TX(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),BRe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function BRe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function kN(t){return t.map(e=>e.read())}function gR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class rl{constructor(e,n,r,s,i,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=o,this.id=DY(),a!=null&&(this.originalName=PY(a),this.name=MY(this.originalName)),this.rank=n.length}}let jRe=0;class s4{constructor(e,n){this.callArgs=n,this.id=jRe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let URe=0;class Dt extends sm{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=URe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=vl(r)+"_"+n4(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new _a(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new re(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ws(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ws(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ro(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ro(`Layer ${this.name} is not connected, no input to return.`);return Ws(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ro(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ro(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ws(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=nn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=nn(this.inputSpec);if(n.length!==r.length)throw new re(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],a=r[s];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new re(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new re(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new re(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new re(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const l=i.shape;for(const u in a.axes){const c=Number(u),f=a.axes[u],d=c>=0?l[c]:l[l.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new re(`Input ${s} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const u=a.shape[l],c=i.shape[l];if(u!=null&&c!=null&&u!==c)throw new re(`Input ${s} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=nn(e),s=GRe(e),i=HRe(e);if(s===i)throw new re("Arguments to apply() must be all SymbolicTensors or all Tensors");return Uf(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of nn(e))a.push(o.shape);this.build(Ws(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const o=nn(a),l=[];for(let u of o)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(a=Ws(l),this.activityRegularizer!=null)throw new kt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=VRe(e),o=this.computeOutputShape(a);let l;const u=WRe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((c,f)=>new rl(u,c,this,nn(e),n,this.name,f)):l=new rl(u,o,this,nn(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new kt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ro(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ro(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new _a(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return kx(this.weights)}build(e){this.built=!0}getWeights(e=!1){return kN(e?this.trainableWeights:this.weights)}setWeights(e){ie(()=>{const n=this.weights;if(n.length!==e.length)throw new re(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=kN(n);for(let i=0;i<s.length;++i){const a=s[i],o=n[i],l=e[i];if(!jt(a.shape,l.shape))throw new re(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}gR(r)})}addWeight(e,n,r,s,i,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new re(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():On("zeros"));const u=s.apply(n,r),c=new zRe(u,r,e,a,o);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),a==null&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=nn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=nn(n),a=nn(s);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=a[o]}addInboundNode(e,n,r,s,i,a,o=null){const l=nn(e);n=nn(n),r=nn(r),s=nn(s),i=Ex(i),a=Ex(a);const u=[],c=[],f=[];for(const d of l)u.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new s4({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:a},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function VRe(t){t=nn(t);const e=[];for(const n of t)e.push(n.shape);return Ws(e)}function WRe(t){return"float32"}function qY(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const a=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],u=qY(a,o,l);for(const c of u)s.indexOf(c)===-1&&s.push(c)}return s}}}function GRe(t){let e=!0;for(const n of nn(t))if(!(n instanceof rl)){e=!1;break}return e}function HRe(t){let e=!0;for(const n of nn(t))if(n instanceof rl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class O0 extends Dt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:n4("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new re("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new re("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new re("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new rl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new s4({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new re(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}O0.className="InputLayer";Ie(O0);function qRe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new re("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new O0({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KRe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Be(e,t.dtype)}catch{throw new re(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Bu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Bu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=KRe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new re(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof rl){if(this.id2Value[e.id]==null)throw new re(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new re(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof rl){if(this.id2Value[e.id]==null)throw new re(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new re(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&mt(this.id2Mask)}}const Nx=new IY,Ax=new IY;function XRe(t){Nx!=null&&Nx.setMaxEntries(t),Ax!=null&&Ax.setMaxEntries(t)}function mg(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),a=i?t:[t],o=a.map(p=>p.name),l=[],u=e.names();for(const p of o)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const c=o.join(",")+"|"+e.names().sort().join(",");let f=Nx.get(c),d;if(f==null){const p=YRe(a,e);f=p.sorted,d=p.recipientCounts,Nx.put(c,f),Ax.put(c,d)}d={},s||Object.assign(d,Ax.get(c));const h=new Bu(e);for(let p=0;p<f.length;++p){const m=f[p],g=m.sourceLayer;if(g instanceof O0)continue;const y=[],v=[],b=[];let x=!1;for(const O of m.inputs){const R=h.getValue(O),F=h.getMask(O);y.push(R),v.push(F),F!=null&&(x=!0),s||(d[O.name]--,d[O.name]===0&&!e.hasKey(O)&&o.indexOf(O.name)===-1&&!R.isDisposed&&O.sourceLayer.stateful!==!0&&b.push(R))}x&&(n=n||{},n.mask=v[0]);const w=nn(g.apply(y,n));let C=null;g.supportsMasking&&(C=g.computeMask(y,v));const E=QRe(m),A=Array.isArray(E)?E:[E];for(let O=0;O<A.length;++O){h.hasKey(A[O])||h.add(A[O],w[O],Array.isArray(C)?C[0]:C);const R=o.indexOf(A[O].name);R!==-1&&(l[R]=w[O])}s||mt(b)}return h.disposeMasks(),i?l:l[0]}function YRe(t,e){P(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=uL(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:a,recipientMap:o}=uL(i,e);for(const l of a)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:ZRe(r)}}function ZRe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function uL(t,e){const n=new Set,r=[],s={};for(const o of e.names())n.add(o);const i=[],a=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const l=a[a.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(i.length-1);for(const u of o.inputs)s[u.name]==null&&(s[u.name]=new Set),s[u.name].add(o.name),!n.has(u.name)&&i.push(u)}}return{sorted:r,recipientMap:s}}function QRe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JRe=le();JRe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,XRe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yR(t,e){return ie(()=>as(Je(Z(t,t),e,!0)))}class D0 extends sm{getConfig(){return{}}}class KY extends D0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>{const n=yR(e,this.axis),r=Qs(n,0,this.maxValue);return Z(e,Ke(r,ke(kr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}KY.className="MaxNorm";Ie(KY);class XY extends D0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>Ke(e,ke(kr(),yR(e,this.axis))))}getConfig(){return{axis:this.axis}}}XY.className="UnitNorm";Ie(XY);class YY extends D0{apply(e){return ll(e)}}YY.className="NonNeg";Ie(YY);class ZY extends D0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ie(()=>{const n=yR(e,this.axis),r=ke(Z(this.rate,Qs(n,this.minValue,this.maxValue)),Z(1-this.rate,n));return Z(e,Ke(r,ke(kr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}ZY.className="MinMaxNorm";Ie(ZY);const cL={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function _r(t){return aR(t)}function fL(t,e={}){return A0(t,Ta.getMap().classNameMap,e,"constraint")}function Or(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in cL?cL[t]:t,config:{}};return fL(n)}else return t instanceof D0?t:fL(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ef(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const a=i;e.push(a.data()),n.push(s),r.push(a)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];mt(r)}}function QY(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var dL;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(dL||(dL={}));const e6e=125;class Ty{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class t6e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class n6e extends Ty{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let a;s in this.totals?a=this.totals[s]:this.totals[s]=0;const o=ie(()=>ke(this.totals[s],Z(i,r)));this.totals[s]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ie(()=>{const s=Z(Ke(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),zr(n[r])}))}}class r6e extends Ty{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const a=this.history[i];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(i),r.push(o)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class s6e extends Ty{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||rY,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=e6e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Zk(this.yieldEvery)&&(this.maybeWait=yRe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await ef(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ef(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ef(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ef(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ef(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):Zk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ef(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ef(e),await this.trainEnd(e))}}function JY(t,e){return t==null&&(t={}),t instanceof Ty?[t]:Array.isArray(t)&&t[0]instanceof Ty?t:nn(t).map(r=>new s6e(r,e))}class ha{constructor(){}static registerCallbackConstructor(e,n){P(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ha.checkForDuplicate(n),ha.constructors[e]==null&&(ha.constructors[e]=[]),ha.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ha.constructors)ha.constructors[+n].forEach(s=>{if(s===e)throw new re("Duplicate callback constructor.")})}static clear(){ha.constructors={}}static createCallbacks(e){const n=[];for(const r in ha.constructors){const s=+r;e>=s&&n.push(...ha.constructors[s])}return n.map(r=>new r)}}ha.constructors={};function eZ(t,e,n,r,s,i,a,o,l){const u=new r6e,c=[new n6e,...ha.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const f=new t6e(c);return f.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zl(t,e={},n=!1){return A0(t,Ta.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $x(t,e){return ie(()=>{t.dtype!=="float32"&&(t=Be(t,"float32"));const n=Je(I0(t),e,!0),r=em(n.shape,kr()),s=as(cu(n,r));return Ke(t,s)})}function i4(t,e){return ie(()=>Yn(I0(Xe(e,t)),-1))}function vR(t,e){return ie(()=>Yn(xr(Xe(e,t)),-1))}function bR(t,e){return ie(()=>{const n=Xe(t,e),r=Qs(xr(t),kr(),Number.MAX_VALUE),s=xr(Ke(n,r));return Z(100,Yn(s,-1))})}function i6e(t,e){return ie(()=>{const n=Qs(e,kr(),Number.MAX_VALUE),r=na(ke(1,n)),s=Qs(t,kr(),Number.MAX_VALUE),i=na(ke(1,s));return Yn(I0(Xe(r,i)),-1)})}function a6e(t,e){return ie(()=>{const n=cu(0,Xe(1,Z(t,e)));return Yn(I0(n),-1)})}function o6e(t,e){return ie(()=>{const n=cu(0,Xe(1,Z(t,e)));return Yn(n,-1)})}function l6e(t,e){return ie(()=>{const n=Je(Z(t,e),-1),r=Ra(Z(Xe(1,t),e),-1);return cu(0,ke(1,Xe(r,n)))})}function u6e(t,e){return ie(()=>{const n=Math.log(2),r=Xe(e,t),s=Xe(ke(r,tm(Z(-2,r))),n);return Yn(s,-1)})}function Cy(t,e,n=!1){return ie(()=>{if(n)e=GS(e);else{const r=Je(e,e.shape.length-1,!0);e=Ke(e,r)}return e=Qs(e,kr(),1-kr()),$n(Je(Z(Be(t,"float32"),na(e)),e.shape.length-1))})}function Ix(t,e,n=!1){return ie(()=>{const r=Be(T0($Re(t)),"int32");e=Qs(e,kr(),1-kr());const s=e.shape,i=ne(nD(r,s[s.length-1]),s);return Cy(i,e,n)})}function c6e(t,e){if(!jt(t.shape,e.shape))throw new re(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ie(()=>{const n=ll(e),r=$n(xr(e));return ke(Xe(n,Z(e,t)),PS(Ps(r)))})}function a4(t,e){return ie(()=>{let n;return n=Qs(e,kr(),1-kr()),n=na(Ke(n,Xe(1,n))),Yn(c6e(t,n),-1)})}function f6e(t,e){return ie(()=>{const n=Qs(t,kr(),1),r=Qs(e,kr(),1);return Je(Z(t,na(Ke(n,r))),-1)})}function d6e(t,e){return ie(()=>{const n=na(ke(kr(),e));return Yn(Xe(e,Z(t,n)),-1)})}function tZ(t,e){return ie(()=>{const n=$x(t,-1),r=$x(e,-1),s=Z(n,r);return $n(Je(s,-1))})}const _x={meanSquaredError:i4,meanAbsoluteError:vR,meanAbsolutePercentageError:bR,meanSquaredLogarithmicError:i6e,squaredHinge:a6e,hinge:o6e,categoricalHinge:l6e,logcosh:u6e,categoricalCrossentropy:Cy,sparseCategoricalCrossentropy:Ix,binaryCrossentropy:a4,kullbackLeiblerDivergence:f6e,poisson:d6e,cosineProximity:tZ};function lC(t){if(typeof t=="string"){if(t in _x)return _x[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new re(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nZ(t,e){return ie(()=>{const n=Z(.5,ra(e)),r=Yo(Ii(e,n),t.dtype);return Yn(uo(t,r),-1)})}function rZ(t,e){return ie(()=>Yo(uo(gp(t,-1),gp(e,-1)),"float32"))}function h6e(t,e){return ie(()=>Be(Je(nl(uo(t,1),uo(e,1))),"float32"))}function p6e(t,e){return ie(()=>Be(Je(nl(uo(t,0),uo(e,1))),"float32"))}function m6e(t,e){return ie(()=>{const n=h6e(t,e),r=p6e(t,e),s=ke(n,r);return Be(xs(Ii(s,0),Ke(n,s),0),"float32")})}function g6e(t,e){return a4(t,e)}function y6e(t,e){return t.rank===e.rank&&(t=Xn(t,[t.rank-1])),e=gp(e,-1),e.dtype!==t.dtype&&(e=Be(e,t.dtype)),Be(uo(t,e),"float32")}const v6e=i4,b6e=i4,x6e=vR,w6e=vR,S6e=bR,T6e=bR,sZ=Cy,C6e=tZ,iZ=Ix,Ox={binaryAccuracy:nZ,categoricalAccuracy:rZ,precision:m6e,categoricalCrossentropy:sZ,sparseCategoricalCrossentropy:iZ,mse:v6e,MSE:b6e,mae:x6e,MAE:w6e,mape:S6e,MAPE:T6e,cosine:C6e};function E6e(t){if(typeof t=="string"&&t in Ox)return Ox[t];if(typeof t!="string"&&t!=null)return t;throw new re(`Unknown metric ${t}`)}function tb(t){if(Po(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(_x))if(_x[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Ox))if(Ox[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k6e(t){const e={Adagrad:()=>Zd.adagrad(.01),Adadelta:()=>Zd.adadelta(1,.95,kr()),Adam:()=>Zd.adam(.001,.9,.999,kr()),Adamax:()=>Zd.adamax(.002,.9,.999,kr(),0),RMSProp:()=>Zd.rmsprop(.001,.9,0,kr()),SGD:()=>Zd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new re(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hL=1*1024*1024;function pL(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!NN(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>hL&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${hL}.`)}}function NN(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!NN(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!NN(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N6e(t,e,n,r=console.log){const s=$6e(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let a;if(!s){i.push("Receives inputs"),a=[];for(const c in t.nodesByDepth)a.push(...t.nodesByDepth[c])}r("_".repeat(e)),Dx(i,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)s?I6e(o[c],n,r):_6e(o[c],n,a,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=A6e(t),u=kx(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function A6e(t){let e;return t.collectedTrainableWeights!=null?e=kx(t.collectedTrainableWeights):e=kx(t.trainableWeights),e}function $6e(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const a of s.inboundNodes)if(r.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function Dx(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function I6e(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,a=t.getClassName(),o=[`${i} (${a})`,s,r,t.countParams().toString()];Dx(o,e,n)}function _6e(t,e,n,r){let s,i;try{i=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const a=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,p=f.nodeIndices[d],m=f.tensorIndices[d];a.push(`${h}[${p}][${m}]`)}const o=t.name,l=t.getClassName(),u=a.length===0?"":a[0],c=[`${o} (${l})`,i,s,t.countParams().toString(),u];Dx(c,e,r);for(let f=1;f<a.length;++f)Dx(["","","","",a[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aZ(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function AN(t,e){if(t===null)return null;if(typeof t=="string")return df(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];aZ(e,s,i)?n.push(i):n.push(AN(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=df(r);n[i]=AN(s,i)}}return n}}function $N(t,e){if(t==null)return null;if(typeof t=="string")return vl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];aZ(e,s,i)?n.push(i):n.push($N(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=vl(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=$N(s,r)}return n}}/** @license See the LICENSE file. */const oZ="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const O6e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};let D6e=class $o extends Dt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=n4(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],rc(this.inputs).length!==this.inputs.length)throw new re(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);rc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;Po(x===0,"input layer has >1 nodes"),Po(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const b=this.inputLayers[v];if(!(b instanceof O0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},s={},i={},a={},o=[],l=(v,b,x,w,C,E)=>{(w==null||C==null||E==null)&&(w=v.sourceLayer,C=v.nodeIndex,E=v.tensorIndex);const A=w.inboundNodes[C];if(x.indexOf(A)!==-1)throw new _a(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(A)!==-1)return;this.containerNodes.add($o.nodeKey(w,C)),w.id in a||(a[w.id]=Object.keys(a).length),x.indexOf(A)===-1&&x.push(A);const O=A.inboundLayers.length;for(let R=0;R<O;R++){const F=A.inputTensors[R],z=A.inboundLayers[R],j=A.nodeIndices[R],H=A.tensorIndices[R];l(F,b,x,z,j,H)}for(b.push(A);x.indexOf(A)>=0;)x.splice(x.indexOf(A),1);o.push(A)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const f=o.slice().reverse();for(const v of f){r[v.id]=v,v.id in n||(n[v.id]=0);let b=n[v.id];const x=s[v.outboundLayer.id]==null?0:s[v.outboundLayer.id];b=Math.max(b,x),s[v.outboundLayer.id]=b,i[v.outboundLayer.id]=v.outboundLayer,n[v.id]=b;for(let w=0;w<v.inboundLayers.length;w++){const C=v.inboundLayers[w],E=v.nodeIndices[w],A=C.inboundNodes[E],O=n[A.id]==null?0:n[A.id];n[A.id]=Math.max(b+1,O),r[A.id]=A}}const d={};for(const v in n){const b=n[v];b in d||(d[b]=[]),d[b].push(r[v])}const h={};for(const v in s){const b=s[v];b in h||(h[b]=[]),h[b].push(i[v])}let p=Object.keys(h).map(v=>parseInt(v,10)).sort(Qv);this.layers=[];for(const v of p){const b=h[v];b.sort((x,w)=>{const C=a[x.id],E=a[w.id];return C<E?-1:C>E?1:0});for(const x of b)x instanceof $o&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=h,p=Object.keys(d).map(v=>parseInt(v,10)).sort(Qv);const m=this.inputs.slice(),g=[];for(const v of p)for(const b of d[v]){const x=b.outboundLayer;if(x!=null){for(const w of b.inputTensors)if(m.indexOf(w)===-1)throw new _a(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of b.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=d;const y=this.layers.map(v=>v.name);for(const v of y){const b=y.filter(x=>x===v).length;if(b!==1)throw new _a(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new s4({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new re("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=O6e(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[l,u]of o.weights.entries()){const c=i?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new re(`Duplicate weight name: ${c}`);r[c]=u,s++}const a=[];for(const o in e){let l=o;if(r[o]==null){const u=o.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(n)throw new re(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new re(`${o.length} of ${s} weights are not set: ${o}`)}gR(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!s.includes(a)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${oZ}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=$N(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ie(()=>{e=nn(e);const r=new Bu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return mg(this.outputs,r,n)})}computeMask(e,n){return ie(()=>{e=nn(e);let r;return n==null?r=dd(null,e.length):r=nn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Ex(e);if(n.length!==this.inputLayers.length)throw new re(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],u=n[o],c=l.name+"_0_0";r[c]=u}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Qv);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const f=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],b=`${g.name}_${y}_${v}`,x=r[b];f.push(x)}const d=c.computeOutputShape(Ws(f)),h=Ex(d),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const i=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${l.name}_${u}_${c}`;a.push(f)}for(let o=0;o<a.length;o++){const l=a[o];Po(l in r),i.push(r[l])}return Ws(i)}runInternalGraph(e,n){n==null&&(n=dd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],f=n[l];r[u.id]=[c,f]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Qv);for(const l of s){const u=this.nodesByDepth[l];for(const c of u){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of d)m.id in r&&p.push(r[m.id]);if(p.length===d.length){let m={},g,y,v,b;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,w]=p[0];m.mask==null&&(m.mask=w),v=nn(f.call(x,m)),b=nn(f.computeMask(x,w)),g=[x],y=[w]}else g=p.map(x=>x[0]),y=p.map(x=>x[1]),m.mask==null&&(m.mask=y),v=nn(f.call(g,m)),b=nn(f.computeMask(g,y));if(f.activityRegularizer)throw new kt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<h.length;++x){const w=h[x],C=v[x],E=b[x];r[w.id]=[C,E]}}}}const i=[],a=[],o=[];for(const l of this.outputs){Po(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];o.push(u.shape),i.push(u),a.push(c)}return[i,a,o]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof $o?1:0;for(let i=0;i<s.inboundNodes.length;i++){const a=$o.nodeKey(s,i);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new re("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new re(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new re(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ie(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=$o.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),u=[];for(let f=0;f<a.inboundNodes.length;f++){const d=a.inboundNodes[f],h=$o.nodeKey(a,f);let p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(d.inboundLayers.length>0){const m=[];for(let g=0;g<d.inboundLayers.length;g++){const y=d.inboundLayers[g],v=d.nodeIndices[g],b=d.tensorIndices[g],x=$o.nodeKey(y,v);let w=n[x];w==null&&(w=0),m.push([y.name,w,b,p])}u.push(m)}}}const c={};c.name=a.name,c.className=o,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const s=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],u=$o.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.inputLayersTensorIndices[a];s.push([o.name,c,f])}e.inputLayers=s;const i=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],u=$o.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.outputLayersTensorIndices[a];i.push([o.name,c,f])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},a={};function o(g,y){g.name in a?a[g.name].push(y):a[g.name]=[y]}function l(g,y){const v=[];let b;for(const x of y){const w=x[0],C=x[1],E=x[2];if(b=x[3]==null?{}:x[3],!(w in i)){o(g,y);return}const A=i[w];if(A.inboundNodes.length<=C){o(g,y);return}const O=A.inboundNodes[C];v.push(O.outputTensors[E])}v.length>0&&g.apply(Ws(v),b)}function u(g){const y=g.name,v=zl(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(s),i[y]=v,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new re(`Corrupted configuration, expected array for nodeData: ${x}`);o(v,x)})}const c=n.name,f=n.layers;for(const g of f)u(g);for(;!gRe(a);)for(const g of f){const y=i[g.name];if(y.name in a){const v=a[y.name];delete a[y.name];for(const b of v)l(y,b)}}const d=[],h=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],b=g[2];Po(y in i);const w=i[y].inboundNodes[v].outputTensors;d.push(w[b])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],b=g[2];Po(y in i);const w=i[y].inboundNodes[v].outputTensors;h.push(w[b])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new re("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ie(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R6e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function lZ(t,e){return R6e(t,e,"classWeight")}async function uZ(t,e,n,r){if(n!=null){const s=ie(()=>{if(t.shape.length===1)return Ll(t);if(t.shape.length===2){if(t.shape[1]>1)return gp(t,1);if(t.shape[1]===1)return ne(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());mt(s);const a=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),dr(a,"float32")}else return null}function P6e(t,e){return Z(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const M6e=32;function cZ(t,e){let n,r;const s=e;n=s.xs,r=s.ys,P(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=mL("input",t.inputNames,n),a=mL("output",t.outputNames,r),o=i[0].shape[0];P(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),P(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)P(i[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)P(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:a}}function mL(t,e,n){if(n instanceof Jt)return[n];if(Array.isArray(n))return P(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new re(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function F6e(t){if(t.length===3)throw new kt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function L6e(t,e,n){const r=n.batchesPerEpoch!=null;if(P(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),P(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),P(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),P(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),P(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,a;if(s)if(gL(n.validationData))P(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=F6e(n.validationData);i=g.xs,a=g.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;s?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=JY(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=eZ(c,f,n.epochs,null,null,z6e(e,n),null,s,u);d.setModel(t),t.history=h,await d.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await d.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:x,ys:w}=cZ(t,b.value),C={};C.batch=v,C.size=x[0].shape[0],await d.onBatchBegin(v,C);const E=[];if(n.classWeight!=null){const R=lZ(n.classWeight,t.outputNames);for(let F=0;F<R.length;++F)E.push(await uZ(w[F],null,R[F]))}const A=x.concat(w).concat(E),O=o(A);mt(A);for(let R=0;R<l.length;++R){const F=l[R],z=O[R];C[F]=z,zr(z)}await d.onBatchEnd(v,C),QY(C),v++,y++}if(r?y>=n.batchesPerEpoch:b.done){if(s){let x;gL(n.validationData)?x=nn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=nn(t.evaluate(i,a,{batchSize:n.validationBatchSize==null?M6e:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(p,g),p++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function z6e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function gL(t){return typeof t.iterator=="function"}function B6e(t){return typeof t.next=="function"}async function j6e(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new kt("Verbose mode is not implemented yet.");P(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=B6e(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const u=await a.next();if(i=ie(()=>{if(u.value){const{xs:c,ys:f}=cZ(t,u.value),d=c.concat(f),h=ie(()=>s(d));if(mt(d),l===0)for(let m=0;m<h.length;++m)i.push(ut(0));const p=d[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],y=i[m];i[m]=ie(()=>ke(i[m],Z(p,g))),l>0&&mt(y)}mt(h),o+=p,++l}return i}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const c=i[u];i[u]=Ke(i[u],o),mt(c)}return Ws(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uC(t){P(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function ng(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Vf(r,e,n-e)):Vf(t,e,n-e)}function IN(t,e){return ie(()=>t==null?null:Array.isArray(t)?t.map(n=>IN(n,e)):LY(t,e.dtype==="int32"?e:Be(e,"int32")))}function cC(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function fZ(t){const e=[];t instanceof Jt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push($0(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ka(t,e){if(t==null)return;const n=[];if(e instanceof Jt)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Jt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U6e(t){return t instanceof Jt}function _N(t){return Array.isArray(t)}function yL(t){return!U6e(t)&&!_N(t)}function vL(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(_N(t)&&t.length>0)a=!0;else if(yL(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new re(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let i;if(yL(t)){t=t,i=[];for(const a of e){if(t[a]==null)throw new re(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(t[a])}}else if(_N(t)){if(t=t,t.length!==e.length)throw new re(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new re(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=fZ(i),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new re(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c>=0&&u!==c)throw new re(`${s} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function V6e(t,e,n){const r=rc(t.map(i=>i.shape[0]));r.sort();const s=rc(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new re(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new re(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!jt(r,s))throw new re(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function W6e(t,e,n){const r=[i4,a4,Cy];for(let s=0;s<t.length;++s){const i=t[s],a=e[s],o=n[s];if(a!=null){if(a===Cy&&i.shape[i.shape.length-1]===1)throw new re(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=i.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){const f=l[c],d=u[c];if(d!=null&&f!==d)throw new re(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function bL(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new re(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new re(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new re(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c!==u)throw new re(`Error when checking ${s}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function G6e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const H6e="layers-model";class zh extends D6e{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new re("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");N6e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=k6e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Uc))throw new re("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new re(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(lC(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new re(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>lC(o))}else{const a=lC(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Uf("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const s=G6e(e.metrics,this.outputNames),i=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};Uf("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=s[a];(u=>{const c="";let f,d,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[a];g[g.length-1]===1||this.lossFunctions[a]===a4?["accuracy","acc"].indexOf(p)!==-1?d=nZ:["crossentropy","ce"].indexOf(p)!==-1&&(d=g6e):this.lossFunctions[a]===Ix?["accuracy","acc"].indexOf(p)!==-1?d=y6e:["crossentropy","ce"].indexOf(p)!==-1&&(d=iZ):["accuracy","acc"].indexOf(p)!==-1?d=rZ:["crossentropy","ce"].indexOf(p)!==-1&&(d=sZ);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),h=d,f=c+y}else h=E6e(p),f=c+tb(p);let m;Uf(f,()=>{m=h}),i(a,f,m)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;uC(s);const a=this.standardizeUserDataXY(e,n,!0,s);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,o,s,r.verbose,r.steps);return Ws(u)}finally{Ka(a[0],e),Ka(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),j6e(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new re(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new re(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new re("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),a=new Bu;if(e instanceof Jt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new re(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new re(`No value is provided for the model's input ${l.name}`);a.add(l,u)}const o=mg(i,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=dd(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],a=i.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,a)=>{i==null&&s.push(e[a])}),new re(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return ie(()=>{const s=this.checkNumSamples(e);if(r)throw new kt("Verbose predictLoop() is not implemented yet.");const i=cC(s,n),a=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)ie(()=>{const u=i[o][0],c=i[o][1],f=ng(e,u,c),d=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)d.push({key:this.inputs[p],value:f[p]});else d.push({key:this.inputs[0],value:f});const h=new Bu(d);return mg(this.outputs,h)}).forEach((u,c)=>a[c].push(u));return Ws(a.map(o=>Zn(o,0)))})}predict(e,n={}){const r=fZ(e);bL(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return uC(s),this.predictLoop(r,s)}finally{Ka(r,e)}}predictOnBatch(e){bL(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new _a("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===Ix?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=vL(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=vL(n,this.feedOutputNames,i,!1,"target"),V6e(e,n),W6e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new re(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,i,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){const c=lZ(s,this.outputNames);u=[];for(let f=0;f<c.length;++f)u.push(await uZ(l[f],null,c[f]))}return[o,l,u]}testLoop(e,n,r,s=0,i){return ie(()=>{const a=this.checkNumSamples(n,r,i,"steps"),o=[];if(s>0)throw new kt("Verbose mode is not implemented yet.");if(i!=null)throw new kt("steps mode in testLoop() is not implemented yet");{const l=cC(a,r),u=dr(co(0,a));for(let c=0;c<l.length;++c){const f=l[c][0],d=l[c][1],h=Vf(u,f,d-f),p=IN(n,h),m=e(p);if(c===0)for(let g=0;g<m.length;++g)o.push(ut(0));for(let g=0;g<m.length;++g){const y=m[g];o[g]=ke(o[g],Z(d-f,y))}}for(let c=0;c<o.length;++c)o[c]=Ke(o[c],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(rL(e,s)>1){const a=rL(e.slice(0,r),s);i+=`_${a}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const f=[];for(let m=0;m<this.inputs.length;++m)f.push({key:this.inputs[m],value:r[m]});const d=new Bu(f),h=mg(this.outputs,d,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(s[m],h[m]);i[m]!=null&&(y=P6e(y,i[m]));const v=Yn(y);n.push(v),m===0?p=y:p=ke(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=Yn(y(s[v],h[v]))}zr(g),a.push(g)}return p=Yn(p),this.calculateLosses().forEach(m=>{p=ke(p,m)}),p},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>ie(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:s[u]});const o=new Bu(a),l=mg(this.outputs,o);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],f=Yn(c(i[u],l[u]));u===0?r=f:r=ke(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],f=this.metricsTensors[u][1],d=Yn(c(i[f],l[f]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,a,o,l,u,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;uC(h);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);s=m[0],i=m[1],d=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new kt("validationData including sample weights is not supported yet."):new re(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,u,null,null,!0,h);c=R[0],f=R[1],y=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const O=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];c=ng(s,O,R),a=s,s=ng(s,0,O),f=ng(i,O,R),o=i,i=ng(i,0,O),y=c.concat(f)}else r.validationSteps!=null&&(g=!0);const v=s.concat(i).concat(d);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let w,C;g?(this.makeTestFunction(),w=this.testFunction,C=x.slice().concat(x.map(O=>"val_"+O))):(w=null,y=[],C=x.slice());const E=JY(r.callbacks,r.yieldEvery);return await this.fitLoop(b,v,x,h,r.epochs,r.verbose,E,w,y,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ka(s,e),Ka(i,n),Ka(a,e),Ka(o,n),Ka(c,l),Ka(f,u),d!=null&&mt(d)}}async fitLoop(e,n,r,s,i,a,o,l,u,c,f,d,h,p){s==null&&(s=32),i==null&&(i=1),c==null&&(c=!0),d==null&&(d=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new re("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,s,h,"steps_per_epoch");let y;g!=null&&(y=co(0,g)),a==null&&(a=1);const{callbackList:v,history:b}=eZ(o,a,i,d,g,h,s,m,f);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let x=d;x<i;++x){await v.onEpochBegin(x);const w={};if(h!=null)throw new kt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new kt("batch shuffling is not implemneted yet");c&&MTe(y);const C=dr(y),E=cC(g,s);for(let A=0;A<E.length;++A){const O={};if(await v.onBatchBegin(A,O),ie(()=>{const R=E[A][0],F=E[A][1],z=Vf(C,R,F-R);O.batch=A,O.size=F-R;const j=IN(n,z),H=e(j);for(let J=0;J<r.length;++J){const U=r[J],Y=H[J];O[U]=Y,zr(Y)}if(A===E.length-1&&m){const J=this.testLoop(l,u,s);for(let U=0;U<r.length;++U){const Y=r[U],Q=J[U];zr(Q),w["val_"+Y]=Q}}}),await v.onBatchEnd(A,O),QY(O),this.stopTraining_)break}C.dispose()}if(await v.onEpochEnd(x,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return L6e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],o=this.makeTrainFunction()(s.concat(i)),l=[];for(const u of o){const c=await u.data();l.push(c[0])}return mt(o),Ka(r[0],e),Ka(r[1],n),Ws(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let a=0;a<s.length;++a)r&&!s[a].trainable||n.push({name:s[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=B8().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-B8().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=vl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>vl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=vl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[vl(tb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>vl(tb(e)));{const e={};for(const n in this.metrics)e[n]=vl(tb(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=AN(e.optimizer_config),r=zl(n);let s;if(typeof e.loss=="string")s=df(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>df(a));else if(e.loss!=null){s={};for(const a in e.loss)s[a]=df(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>df(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=df(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=bK(e);if(u.length===0)throw new re(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new re(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new re("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await fN(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:H6e,generatedBy:`TensorFlow.js tfjs-layers v${oZ}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:f}=await fN(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=gK([r.data,c])}return this.userDefinedMetadata!=null&&(pL(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){pL(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}zh.className="Model";Ie(zh);class dZ extends zh{}dZ.className="Functional";Ie(dZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ey extends zh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:n4("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new re(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Ey||e instanceof zh;let r;if(n){if(r=e,r.outputs.length!==1)throw new re("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new re("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new re("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=qRe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new re(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new re("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=qY(this.outputs[0])}this.inboundNodes=[],new s4({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:dd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Kt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new zh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new _a("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new _a("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new _a("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new _a("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new re("Legacy serialization format not supported yet.");i=n}else P(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof Ey))throw new kt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of i){const c=zl(l,void 0,s);s&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new re("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new re("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Ey.className="Sequential";Ie(Ey);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Cs=class extends sm{getConfig(){return{}}};class hZ extends Cs{apply(e,n=1){return _Re(e,n)}}hZ.className="elu";Ie(hZ);class pZ extends Cs{apply(e){return pD(e)}}pZ.className="selu";Ie(pZ);class mZ extends Cs{apply(e){return ll(e)}}mZ.className="relu";Ie(mZ);class gZ extends Cs{apply(e){return ie(()=>cd(6,ll(e)))}}gZ.className="relu6";Ie(gZ);class yZ extends Cs{apply(e){return e}}yZ.className="linear";Ie(yZ);class vZ extends Cs{apply(e){return ao(e)}}vZ.className="sigmoid";Ie(vZ);class bZ extends Cs{apply(e){return DRe(e)}}bZ.className="hardSigmoid";Ie(bZ);class xZ extends Cs{apply(e){return tm(e)}}xZ.className="softplus";Ie(xZ);class wZ extends Cs{apply(e){return ORe(e)}}wZ.className="softsign";Ie(wZ);class SZ extends Cs{apply(e){return ud(e)}}SZ.className="tanh";Ie(SZ);let xR=class extends Cs{apply(e,n=-1){return GS(e,n)}};xR.className="softmax";Ie(xR);class TZ extends Cs{apply(e,n=-1){return JO(e,n)}}TZ.className="logSoftmax";Ie(TZ);class CZ extends Cs{apply(e){return ie(()=>ie(()=>{const n=Math.sqrt(2),r=Z(.5,ke(1,YO(Ke(e,n))));return Z(e,r)}))}}CZ.className="gelu";Ie(CZ);class EZ extends Cs{apply(e){return ie(()=>Z(.5,Z(e,ke(1,ud(Z(as(Ke(2,Math.PI)),ke(e,Z(.044715,Xl(e,3)))))))))}}EZ.className="gelu_new";Ie(EZ);class kZ extends Cs{apply(e){return ie(()=>Z(e,ud(tm(e))))}}kZ.className="mish";Ie(kZ);class NZ extends Cs{apply(e,n=1){return ie(()=>Z(ao(Z(e,n)),e))}}NZ.className="swish";Ie(NZ);function bc(t){return t.getClassName()}function fC(t,e={}){return A0(t,Ta.getMap().classNameMap,e,"activation")}function xc(t){if(t==null){const e={};return e.className="linear",e.config={},fC(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},fC(e)}else return t instanceof Cs?t:fC(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function q6e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class AZ extends sm{}class $Z extends AZ{constructor(e){super(),q6e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ie(()=>{let n=Tr([1]);return this.hasL1&&(n=ke(n,Je(Z(this.l1,xr(e))))),this.hasL2&&(n=ke(n,Je(Z(this.l2,I0(e))))),ne(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}$Z.className="L1L2";Ie($Z);const xL={l1l2:"L1L2"};function hn(t){return aR(t)}function wL(t,e={}){return A0(t,Ta.getMap().classNameMap,e,"regularizer")}function Dn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in xL?xL[t]:t,config:{}};return wL(n)}else return t instanceof AZ?t:wL(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IZ extends Dt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=pt(e);let r=ll(e);return this.maxValue!=null&&(r=Qs(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}IZ.className="ReLU";Ie(IZ);class _Z extends Dt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=pt(e);return RS(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}_Z.className="LeakyReLU";Ie(_Z);class OZ extends Dt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=On(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Dn(e.alphaRegularizer),this.alphaConstraint=Or(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new re(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Kt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Nr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=pt(e),jS(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Vn(this.alphaInitializer),alphaRegularizer:hn(this.alphaRegularizer),alphaConstraint:_r(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}OZ.className="PReLU";Ie(OZ);let DZ=class extends Dt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new kt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=pt(e);return w0(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};DZ.className="ELU";Ie(DZ);class RZ extends Dt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=pt(e);return Z(r,Be(Ii(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}RZ.className="ThresholdedReLU";Ie(RZ);class PZ extends Dt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new xR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ie(()=>{let r=pt(e);const s=n.mask;if(s!=null){const i=Z(Xe(yi(r.shape),Be(s,r.dtype)),ut(-1e9));r=ke(r,i)}return this.axis instanceof Array?this.axis.length>1?Ps(Xe(r,MS(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}PZ.className="Softmax";Ie(PZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bh(t,e,n){if(typeof t=="number")return dd(t,e);if(t.length!==e)throw new re(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!NRe(s))throw new re(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function oo(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let a;return n==="same"?a=t:a=t-i+1,Math.floor((a+r-1)/r)}function Mo(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+vc([n-e,0]);else if(r==="same")t=t*e;else throw new re(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wR(t,e){return ie(()=>(or(e),e==="channelsFirst"?Ut(t,[0,2,3,1]):t))}function MZ(t,e){return ie(()=>(or(e),e==="channelsFirst"?Ut(t,[0,2,3,4,1]):t))}function K6e(t,e,n,r=1,s="valid",i,a=1){return ie(()=>{if(i==null&&(i=fo()),or(i),t.shape.length!==3)throw new re(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new re(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new re(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Ut(t,[0,2,1])),s==="causal")throw new kt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=GO(t,e,r,s==="same"?"same":"valid","NWC",a);return n!=null&&(o=xo(o,n)),o})}function SL(t,e,n,r=[1,1],s="valid",i,a,o=null){return ie(()=>{if(i==null&&(i=fo()),or(i),t.rank!==3&&t.rank!==4)throw new re(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new re(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=wR(t,i);if(s==="causal")throw new kt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=NX({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=Ut(l,[0,3,1,2])),l})}function X6e(t,e,n,r=[1,1,1],s="valid",i,a){return ie(()=>{if(i==null&&(i=fo()),or(i),t.rank!==4&&t.rank!==5)throw new re(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new re(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=MZ(t,i);if(s==="causal")throw new kt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=HK(o,e,r,s==="same"?"same":"valid","NDHWC",a),n!=null&&(o=xo(o,n)),i==="channelsFirst"&&(o=Ut(o,[0,4,1,2,3])),o})}class o4 extends Dt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",o4.verifyArgs(n),this.rank=e,Br(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new kt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Bh(n.kernelSize,e,"kernelSize"),this.strides=Bh(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,aa(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,or(this.dataFormat),this.activation=xc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=On(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Or(n.biasConstraint),this.biasRegularizer=Dn(n.biasRegularizer),this.activityRegularizer=Dn(n.activityRegularizer),this.dilationRate=Bh(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new re(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new re(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new re(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Po("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!oR(e.kernelSize,"number",1,3))throw new re(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:bc(this.activation),useBias:this.useBias,biasInitializer:Vn(this.biasInitializer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),biasConstraint:_r(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class im extends o4{constructor(e,n){super(e,n),this.kernel=null,im.verifyArgs(n),this.filters=n.filters,Br(this.filters,"filters"),this.kernelInitializer=On(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Or(n.kernelConstraint),this.kernelRegularizer=Dn(n.kernelRegularizer)}build(e){e=Kt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new re(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ie(()=>{e=pt(e);let r;const s=this.bias==null?null:this.bias.read(),i=OY(this.activation.getClassName());if(i!=null&&this.rank===2)r=SL(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=K6e(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=SL(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=X6e(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new kt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Kt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const a=oo(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(a)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Vn(this.kernelInitializer),kernelRegularizer:hn(this.kernelRegularizer),kernelConstraint:_r(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new re(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class R0 extends im{constructor(e){super(2,e),R0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!oR(e.kernelSize,"number",1,2))throw new re(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}R0.className="Conv2D";Ie(R0);class P0 extends im{constructor(e){super(3,e),P0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new re(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}P0.className="Conv3D";Ie(P0);class FZ extends R0{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new re(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Kt(e),e.length!==4)throw new re("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new re("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{let r=pt(e);if(r.shape.length!==4)throw new re(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=s[a],u=s[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],p=Mo(l,d,c,this.padding),m=Mo(u,h,f,this.padding),g=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,1]));let y=qO(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ut(y,[0,3,1,2])),this.bias!=null&&(y=xo(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=Kt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[s]=Mo(n[s],l,a,this.padding),n[i]=Mo(n[i],u,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}FZ.className="Conv2DTranspose";Ie(FZ);class LZ extends P0{constructor(e){if(super(e),this.inputSpec=[new Nr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new re(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Kt(e),e.length!==5)throw new re("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new re("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Nr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{let r=pt(e);if(r.shape.length!==5)throw new re(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const u=s[l],c=s[a],f=s[o],d=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Mo(u,m,d,this.padding),b=Mo(c,g,h,this.padding),x=Mo(f,y,p,this.padding),w=[i,v,b,x,this.filters];this.dataFormat!=="channelsLast"&&(r=Ut(r,[0,2,3,4,1]));let C=KK(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Ut(C,[0,4,1,2,3])),this.bias!==null&&(C=xo(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=Kt(e);const n=e.slice();let r,s,i,a;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,a=4):(r=4,s=1,i=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[s]=Mo(n[s],c,o,this.padding),n[i]=Mo(n[i],f,l,this.padding),n[a]=Mo(n[a],d,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}LZ.className="Conv3DTranspose";Ie(LZ);class zZ extends im{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new re("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new re("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new re(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Dn(n.depthwiseRegularizer),this.depthwiseConstraint=Or(n.depthwiseConstraint),this.pointwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Dn(n.pointwiseRegularizer),this.pointwiseConstraint=Or(n.pointwiseConstraint)}build(e){if(e=Kt(e),e.length<this.rank+2)throw new re(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new re(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Nr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ie(()=>{e=pt(e);let r;if(this.rank===1)throw new kt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ut(e,[0,2,3,1])),r=mD(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=xo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Ut(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Vn(this.depthwiseInitializer),e.pointwiseInitializer=Vn(this.pointwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.pointwiseRegularizer=hn(this.pointwiseRegularizer),e.depthwiseConstraint=_r(this.depthwiseConstraint),e.pointwiseConstraint=_r(this.pointwiseConstraint),e}}zZ.className="SeparableConv";class BZ extends zZ{constructor(e){super(2,e)}}BZ.className="SeparableConv2D";Ie(BZ);class l4 extends im{constructor(e){super(1,e),l4.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!oR(e.kernelSize,"number",1,1))throw new re(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}l4.className="Conv1D";Ie(l4);class jZ extends Dt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ie(()=>{if(e=pt(e),this.dataFormat==="channelsLast"){const r=eb(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return eb(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=eb(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return eb(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}jZ.className="Cropping2D";Ie(jZ);class UZ extends Dt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,CRe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ie(()=>{let r=pt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Ut(r,[0,2,3,1]);const i=this.size[0]*s[2],a=this.size[1]*s[3],o=this.interpolation==="nearest"?Ys.resizeNearestNeighbor(r,[i,a]):Ys.resizeBilinear(r,[i,a]);return Ut(o,[0,3,1,2])}else{const i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?Ys.resizeNearestNeighbor(r,[i,a]):Ys.resizeBilinear(r,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}UZ.className="UpSampling2D";Ie(UZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y6e(t,e,n=[1,1],r="valid",s,i){return ie(()=>{s==null&&(s=fo()),or(s);let a=wR(t,s);if(t.rank!==4)throw new re(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new re(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=x0(a,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(a=Ut(a,[0,3,1,2])),a})}class VZ extends o4{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=On(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Or(e.depthwiseConstraint),this.depthwiseRegularizer=Dn(e.depthwiseRegularizer)}build(e){if(e=Kt(e),e.length<4)throw new re(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new re(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{e=pt(e);let r=Y6e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=xo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Kt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=oo(n,this.kernelSize[0],this.padding,this.strides[0]),a=oo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Vn(this.depthwiseInitializer),e.depthwiseRegularizer=hn(this.depthwiseRegularizer),e.depthwiseConstraint=_r(this.depthwiseRegularizer),e}}VZ.className="DepthwiseConv2D";Ie(VZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WZ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new re("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function GZ(t,e,n,r=!1,s,i,a=!1,o=!1){return ie(()=>{const l=e.shape.length;if(l<3)throw new re(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(co(2,l));e=Ut(e,u),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Be(Be(s,"bool"),"float32"),s.rank===l-1&&(s=Sr(s,-1)),s=Ut(s,u)),r&&(e=ja(e,0),s!=null&&(s=ja(s,0)));const c=[];let f,d=n;const h=e.shape[0],p=Ua(e);let m;s!=null&&(m=Ua(s));for(let y=0;y<h;++y){const v=p[y],b=ie(()=>t(v,d));if(s==null)f=b[0],d=b[1];else{const x=ie(()=>{const w=m[y],C=Xe(ra(w),w),E=ke(Z(b[0],w),Z(d[0],C)),A=d.map((O,R)=>ke(Z(b[1][R],w),Z(O,C)));return{output:E,newStates:A}});f=x.output,d=x.newStates}o&&c.push(f)}let g;return o&&(g=Ti(c,1)),[f,g,d]})}class Vc extends Dt{constructor(e){super(e);let n;if(e.cell==null)throw new re("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new CR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new re("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Nr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return co(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){EN(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const a of n)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,n){return ie(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new kt("Constants support is not implemented in RNN yet.");EN(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Nr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!jt(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new re(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new Nr({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ie(()=>{if(!this.stateful)throw new Ro("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new re("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Tr([r,s])):this.states_=[Tr([r,this.cell.stateSize])];else if(e==null)mt(this.states_),this.keptStates!=null&&(mt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Tr([r,s])):this.states_[0]=Tr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new re(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):mt(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,a];if(!jt(i.shape,o))throw new re(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>zr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=WZ(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Nr({shape:u.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(n.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof rl){const u=[e].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return ie(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=pt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new re(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},u=GZ((p,m)=>{const g=this.cell.call([p].concat(m),o);return[g[0],g.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],f=u[1],d=u[2];this.stateful&&this.resetStates(d,s);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(e){return ie(()=>{let n=Tr(e.shape);return n=Je(n,[1,2]),n=$0(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?TN(n,[1,r]):n):this.cell.stateSize>1?[TN(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Vc.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=zl(s,r);return new e(Object.assign(n,{cell:i}))}}Vc.className="RNN";Ie(Vc);class u4 extends Dt{}class SR extends u4{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=xc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=xp([1,vc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xp([1,vc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Kt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{if(e=e,e.length!==2)throw new re(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wc({ones:()=>ra(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wc({ones:()=>ra(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?i=Zo(Z(e,a),this.kernel.read()):i=Zo(e,this.kernel.read()),this.bias!=null&&(i=xo(i,this.bias.read())),o!=null&&(r=Z(r,o));let l=ke(i,Zo(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}SR.className="SimpleRNNCell";Ie(SR);class HZ extends Vc{constructor(e){e.cell=new SR(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}HZ.className="SimpleRNN";Ie(HZ);class TR extends u4{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new re("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Br(this.units,"units"),this.activation=xc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=xp([1,vc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xp([1,vc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Kt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ie(()=>{if(e=e,e.length!==2)throw new re(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wc({ones:()=>ra(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wc({ones:()=>ra(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,u;0<this.dropout&&this.dropout<1&&(e=Z(e,i[0]));let c=Zo(e,this.kernel.read());this.useBias&&(c=xo(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Z(s,a[0]));const f=this.recurrentKernel.read(),[d,h]=xi(f,[2*this.units,this.units],f.rank-1),p=Zo(s,d),[m,g,y]=xi(c,3,c.rank-1),[v,b]=xi(p,2,p.rank-1);o=this.recurrentActivation.apply(ke(m,v)),l=this.recurrentActivation.apply(ke(g,b));const x=Zo(Z(l,s),h);u=this.activation.apply(ke(y,x));const w=ke(Z(o,s),Z(ke(1,$n(o)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),recurrentActivation:bc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}TR.className="GRUCell";Ie(TR);class qZ extends Vc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new TR(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}qZ.className="GRU";Ie(qZ);class c4 extends u4{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=xc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=xp([1,vc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=xp([1,vc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Kt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;s=new(n=class extends Ha{apply(l,u){const c=i.apply([a]),f=new uR().apply([a]),d=i.apply([a*2]);return iL(iL(c,f),d)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ie(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new re(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wc({ones:()=>ra(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wc({ones:()=>ra(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,u,c,f;0<this.dropout&&this.dropout<1&&(e=Z(e,a[0]));let d=Zo(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Z(s,o[0])),d=ke(d,Zo(s,this.recurrentKernel.read())),this.useBias&&(d=xo(d,this.bias.read()));const[h,p,m,g]=xi(d,4,d.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=ke(Z(u,i),Z(l,this.activation.apply(m))),f=this.recurrentActivation.apply(g);const y=Z(f,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),recurrentActivation:bc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:hn(this.kernelRegularizer),recurrentRegularizer:hn(this.recurrentRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}c4.className="LSTMCell";Ie(c4);class KZ extends Vc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new c4(e),super(e)}call(e,n){return ie(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}KZ.className="LSTM";Ie(KZ);class CR extends u4{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ie(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),i.push(a.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){EN(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Uf(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(zl(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return kN(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],i[a]])}gR(n)}}CR.className="StackedRNNCells";Ie(CR);function wc(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,a=()=>i!=null?i(e(),n):zY(e(),n),o=()=>_0(a,e,r);return!s||s<=1?zr(o().clone()):Array(s).fill(void 0).map(o).map(u=>zr(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Z6e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class XZ extends Vc{constructor(e){if(e.unroll)throw new kt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new kt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Nr({ndim:5})]}call(e,n){return ie(()=>{if(this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new re("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ie(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],a=Tr(i);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){ie(()=>{if(!this.stateful)throw new Ro("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new re("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(i)):this.states_=[Tr(i)];else if(e==null)mt(this.states_),this.keptStates!=null&&(mt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(i)):this.states_[0]=Tr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new re(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):mt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],u=i;if(!jt(l.shape,u))throw new re(`State ${o} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>zr(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],f=oo(u,s[0],i,a[0],o[0]),d=oo(c,s[1],i,a[1],o[1]);return[...e.slice(0,2),...l?[r,f,d]:[f,d,r]]}}XZ.className="ConvRNN2D";class ER extends c4{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Br(this.filters,"filters"),this.kernelSize=Bh(r,2,"kernelSize"),this.kernelSize.forEach(l=>Br(l,"kernelSize")),this.strides=Bh(s||1,2,"strides"),this.strides.forEach(l=>Br(l,"strides")),this.padding=i||"valid",aa(this.padding),this.dataFormat=a||"channelsLast",or(this.dataFormat),this.dilationRate=Bh(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Br(l,"dilationRate"))}build(e){var n;e=Kt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new re(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Ha{apply(d,h){const p=u.apply([c]),m=yi([c]),g=u.apply([c*2]);return lR([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ie(()=>{if(e.length!==3)throw new re(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=wc({ones:()=>ra(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(he,be,ue)=>!be||!be[ue]?he:Z(be[ue],he);let c=u(s,l,0),f=u(s,l,1),d=u(s,l,2),h=u(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=wc({ones:()=>ra(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(i,p,0),g=u(i,p,1),y=u(i,p,2),v=u(i,p,3);const b=3,[x,w,C,E]=xi(this.kernel.read(),o,b),[A,O,R,F]=this.useBias?xi(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,x,A,this.padding),f=this.inputConv(f,w,O,this.padding),d=this.inputConv(d,C,R,this.padding),h=this.inputConv(h,E,F,this.padding);const[z,j,H,J]=xi(this.recurrentKernel.read(),o,b);m=this.recurrentConv(m,z),g=this.recurrentConv(g,j),y=this.recurrentConv(y,H),v=this.recurrentConv(v,J);const U=this.recurrentActivation.apply(ke(c,m)),Y=this.recurrentActivation.apply(ke(f,g)),Q=ke(Z(Y,a),Z(U,this.activation.apply(ke(d,y)))),se=Z(this.recurrentActivation.apply(ke(h,v)),this.activation.apply(Q));return[se,se,Q]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=Z6e(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=yc(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?xo(i,r,this.dataFormat):i}recurrentConv(e,n){return yc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ER.className="ConvLSTM2DCell";Ie(ER);class YZ extends XZ{constructor(e){const n=new ER(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}YZ.className="ConvLSTM2D";Ie(YZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kR extends Dt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return _0(()=>zY(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}kR.className="Dropout";Ie(kR);class ZZ extends kR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}ZZ.className="SpatialDropout1D";Ie(ZZ);class QZ extends Dt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Br(this.units,"units"),this.activation=xc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Or(e.kernelConstraint),this.biasConstraint=Or(e.biasConstraint),this.kernelRegularizer=Dn(e.kernelRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Kt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Kt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e),s=OY(this.activation.getClassName());let i;return s!=null?i=Zo(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=Zo(r,this.kernel.read()),this.bias!=null&&(i=xo(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:bc(this.activation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:hn(this.kernelRegularizer),biasRegularizer:hn(this.biasRegularizer),activityRegularizer:hn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),biasConstraint:_r(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}QZ.className="Dense";Ie(QZ);class JZ extends Dt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Kt(e);for(const n of e.slice(1))if(n==null)throw new re(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],sc(e,1)]}call(e,n){return ie(()=>{this.invokeCallHook(e,n);let r=pt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Ut(r,s)}return IRe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}JZ.className="Flatten";Ie(JZ);class eQ extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.activation=xc(e.activation)}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e);return this.activation.apply(r)})}getConfig(){const e={activation:bc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}eQ.className="Activation";Ie(eQ);class tQ extends Dt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ie(()=>(e=pt(e),ARe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}tQ.className="RepeatVector";Ie(tQ);class nQ extends Dt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,a=null;for(let l=0;l<s.length;++l){const u=s[l];if(this.isUnknown(u))if(a===null)a=l;else throw new re("Can only specifiy one unknown dimension.");else i*=u}const o=sc(e);if(a!==null){if(i===0||o%i!==0)throw new re(r);s[a]=o/i}else if(o!==i)throw new re(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ne(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}nQ.className="Reshape";Ie(nQ);class rQ extends Dt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=co(1,e.dims.length+1);if(!jt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Nr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Kt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Ut(pt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}rQ.className="Permute";Ie(rQ);class sQ extends Dt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=pt(e);return Tx(vp(r,this.maskValue),-1)}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e),a=Tx(vp(r,this.maskValue),-1,!0);return Z(r,Be(a,r.dtype))})}}sQ.className="Masking";Ie(sQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iQ extends Dt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(nn(e.inputLength))}this.inputDim=e.inputDim,Br(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Br(this.outputDim,"outputDim"),this.embeddingsInitializer=On(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Dn(e.embeddingsRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.embeddingsConstraint=Or(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ie(()=>this.maskZero?(e=pt(e),vp(e,Vt(e))):null)}computeOutputShape(e){if(e=Kt(e),this.inputLength==null)return[...e,this.outputDim];const n=nn(this.inputLength);if(n.length!==e.length-1)throw new re(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new re(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ie(()=>{this.invokeCallHook(e,n);let r=pt(e);r.dtype!=="int32"&&(r=Yo(r,"int32"));const s=LY(this.embeddings.read(),ne(r,[r.size]));return ne(s,Kt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Vn(this.embeddingsInitializer),embeddingsRegularizer:hn(this.embeddingsRegularizer),activityRegularizer:hn(this.activityRegularizer),embeddingsConstraint:_r(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}iQ.className="Embedding";Ie(iQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dd extends Dt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new kt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],a=n[s];if(i==null||a==null||i<0||a<0)r.push(null);else if(i===1)r.push(a);else if(a===1)r.push(i);else{if(i!==a)throw new re("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Kt(e)]),e=e,e.length<2)throw new re(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=rc(n),n.length>1)throw new re(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&rc(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ie(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=vc(s);for(let a of e){const o=a.rank;for(let l=0;l<i-o;++l)a=$0(a,1);r.push(a)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,f=c[0],d=c.slice(1).concat([f]);let h=ne(l,[f].concat(sc(c.slice(1))));h=Ut(h,[1,0]),h=ne(h,d),r.push(h),i=!0}else if(u>1){const c=co(1,u).concat([0]);r.push(Ut(l,c)),i=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(i){if(o==null){const l=a.shape,u=l.length,c=l[u-1],f=[c].concat(l.slice(0,l.length-1));a=ne(Ut(ne(a,[-1,c]),[1,0]),f)}else if(o>1){const l=[o-1].concat(co(0,o-1));a=Ut(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=rc(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ie(()=>{if(n==null)return null;if(!Array.isArray(n))throw new re("`mask` should be an Array");if(!Array.isArray(e))throw new re("`inputs` should be an Array");if(n.length!==e.length)throw new re(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Sr(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=nl(r,n[s]);return r})}}class aQ extends Dd{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ke(n,e[r]);return n})}}aQ.className="Add";Ie(aQ);class oQ extends Dd{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Z(n,e[r]);return n})}}oQ.className="Multiply";Ie(oQ);class lQ extends Dd{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ke(n,e[r]);return Z(1/e.length,n)})}}lQ.className="Average";Ie(lQ);class uQ extends Dd{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=cu(n,e[r]);return n})}}uQ.className="Maximum";Ie(uQ);class cQ extends Dd{constructor(e){super(e)}mergeFunction(e){return ie(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=cd(n,e[r]);return n})}}cQ.className="Minimum";Ie(cQ);class fQ extends Dd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new re("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let a=!1;for(const o of r)if(jt(o,i)){a=!0;break}a||r.push(i)}if(r.length>1)throw new re("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ie(()=>lR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new re("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new re("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new re("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new re(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ie(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const s=[];for(let a=0;a<e.length;++a)n[a]==null?s.push(Be(ra(e[a]),"bool")):n[a].rank<e[a].rank?s.push(Sr(n[a],-1)):s.push(n[a]);const i=Zn(s,this.axis);return VO(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}fQ.className="Concatenate";Ie(fQ);function rg(t,e){for(;t<0;)t+=e;return t}function Q6e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new kt("batchDot is not implemented for tensors of 4D or higher rank yet");if(P(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),P(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new kt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return ie(()=>{let a;if(r>s){a=r-s;const l=[];for(let u=0;u<a;++u)l.push(1);e=ne(e,e.shape.concat(l))}else if(s>r){a=s-r;const l=[];for(let u=0;u<a;++u)l.push(1);t=ne(t,t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=Je(Z(t,e),i[0]):o=Je(Z(Ut(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;o=Pt(t,e,l,u)}if(a>0){let l;r>s?l=r+s-3:l=r-1;const u=[];for(let c=l;c<l+a;++c)u.push(c);o=Xn(o,u)}return o.shape.length===1&&(o=Sr(o,1)),o})}class dQ extends Dd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new kt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new re(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new re(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>rg(i,e[a].shape.length)):s=[rg(this.axes,n.shape.length),rg(this.axes,r.shape.length)],this.normalize&&(n=$x(n,s[0]),r=$x(r,s[1])),Q6e(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[rg(this.axes,e.length),rg(this.axes,n.length)],r}computeOutputShape(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new kt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}dQ.className="Dot";Ie(dQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hQ extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e);return _0(()=>ke(r4(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}hQ.className="GaussianNoise";Ie(hQ);class pQ extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ie(()=>{this.invokeCallHook(e,n);const r=pt(e);return this.rate>0&&this.rate<1?_0(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return Z(r,r4(r.shape,1,i))},()=>r,n.training||!1):r})}}pQ.className="GaussianDropout";Ie(pQ);class mQ extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||pt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ie(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return _0(()=>{const i=pt(e),o=-1.6732632423543772*1.0507009873554805;let l=Bc(Id(r),this.rate);l=Yo(l,"float32");const u=((1-this.rate)*(1+this.rate*o**2))**-.5,c=-u*o*this.rate,f=ke(Z(i,l),Z(ke(l,-1),o));return ke(Z(f,u),c)},()=>pt(e),n.training||!1)}return e})}}mQ.className="AlphaDropout";Ie(mQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ky(t,e,n,r,s,i=.001){let a;if(t.rank===2)a=FK(t,e,n,r,s,i);else if(t.rank===3)a=LK(t,e,n,r,s,i);else if(t.rank===4)a=zK(t,e,n,r,s,i);else throw new kt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function J6e(t,e,n,r,s=.001){return ie(()=>{const i=zS(t,r),a=i.mean,o=i.variance;return[ky(t,a,o,n,e,s),a,o]})}function e5e(t,e,n,r,s=.001){return ie(()=>{const i=zS(t,r),a=i.mean,o=i.variance,l=[];for(const p of co(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=ne(a,l),c=ne(o,l),f=e==null?null:ne(e,l),d=n==null?null:ne(n,l);return[ky(t,u,c,d,f,s),a,o]})}function t5e(t,e,n,r,s=.001){return jt(r.slice().sort(),co(0,t.rank-1))?J6e(t,e,n,r,s):e5e(t,e,n,r,s)}class gQ extends Dt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.movingMeanInitializer=On(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=On(e.movingVarianceInitializer||"ones"),this.betaConstraint=Or(e.betaConstraint),this.gammaConstraint=Or(e.gammaConstraint),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer)}build(e){e=Kt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new re(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Nr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ie(()=>{const r=n.training==null?!1:n.training,s=pt(e),i=s.shape,a=i.length,o=co(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const u=dd(1,a);u[l]=i[l];const c=o.slice();c.sort();const f=!jt(c,co(0,a).slice(0,a-1)),d=()=>{if(f){const v=ne(this.movingMean.read(),u),b=ne(this.movingVariance.read(),u),x=this.center?ne(this.beta.read(),u):null,w=this.scale?ne(this.gamma.read(),u):null;return ky(s,v,b,x,w,this.epsilon)}else return ky(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,p,m]=t5e(s,this.gamma.read(),this.beta.read(),o,this.epsilon),g=(v,b,x)=>{ie(()=>{const w=1-x,C=v.read(),E=Z(Xe(C,b),w);v.write(Xe(C,E))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vn(this.betaInitializer),gammaInitializer:Vn(this.gammaInitializer),movingMeanInitializer:Vn(this.movingMeanInitializer),movingVarianceInitializer:Vn(this.movingVarianceInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer),betaConstraint:_r(this.betaConstraint),gammaConstraint:_r(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}gQ.className="BatchNormalization";Ie(gQ);class yQ extends Dt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Kt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==rc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=pt(e),s=r.shape,i=s.length;return ie(()=>{let{mean:o,variance:l}=zS(r,this.axis,!0);const u=dd(1,i);for(const m of this.axis)u[m]=s[m];const c=m=>m!=null&&m.shape.length!==i?ne(m,u):m;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(h.push(s[m]),p.push(1)):(h.push(1),p.push(s[m]));return o=Ia(o,h),l=Ia(l,h),f!=null&&(f=Ia(f,p)),d!=null&&(d=Ia(d,p)),ky(r,o,l,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vn(this.betaInitializer),gammaInitializer:Vn(this.gammaInitializer),betaRegularizer:hn(this.betaRegularizer),gammaRegularizer:hn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}yQ.className="LayerNormalization";Ie(yQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n5e(t,e,n){return ie(()=>{if(t.rank!==4)throw new re(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new re("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=fo()),n!=="channelsLast"&&n!=="channelsFirst")throw new re(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],jc(t,r)})}class vQ extends Dt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?fo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new re(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new re(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new re(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=Kt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ie(()=>n5e(pt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}vQ.className="ZeroPadding2D";Ie(vQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f4(t,e,n,r,s,i){return ie(()=>{or(s),RY(i),aa(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=fo()),i==null&&(i="max"),t=wR(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=LS(t,e,n,o):a=IS(t,e,n,o),s==="channelsFirst"&&(a=Ut(a,[0,3,1,2])),a})}function bQ(t,e,n,r,s,i){return ie(()=>{or(s),RY(i),aa(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=fo()),i==null&&(i="max"),t=MZ(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=uX(t,e,n,o):a=MK(t,e,n,o),s==="channelsFirst"&&(a=Ut(a,[0,4,1,2,3])),a})}class xQ extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new re(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Br(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new re(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,aa(this.padding),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){e=Kt(e);const n=oo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ie(()=>{this.invokeCallHook(e,n),e=$0(pt(e),2);const r=this.poolingFunction(pt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Xn(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class wQ extends xQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),f4(e,n,r,s,i,"max")}}wQ.className="MaxPooling1D";Ie(wQ);class SQ extends xQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),f4(e,n,r,s,i,"avg")}}SQ.className="AveragePooling1D";Ie(SQ);class TQ extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new re(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),aa(this.padding),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){e=Kt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=oo(n,this.poolSize[0],this.padding,this.strides[0]),r=oo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(pt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class CQ extends TQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),f4(e,n,r,s,i,"max")}}CQ.className="MaxPooling2D";Ie(CQ);class EQ extends TQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),f4(e,n,r,s,i,"avg")}}EQ.className="AveragePooling2D";Ie(EQ);class kQ extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new re(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),aa(this.padding),this.inputSpec=[new Nr({ndim:5})]}computeOutputShape(e){e=Kt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=oo(n,this.poolSize[0],this.padding,this.strides[0]),r=oo(r,this.poolSize[1],this.padding,this.strides[1]),s=oo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return ie(()=>(this.invokeCallHook(e,n),this.poolingFunction(pt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class NQ extends kQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),bQ(e,n,r,s,i,"max")}}NQ.className="MaxPooling3D";Ie(NQ);class AQ extends kQ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),aa(s),bQ(e,n,r,s,i,"avg")}}AQ.className="AveragePooling3D";Ie(AQ);class $Q extends Dt{constructor(e){super(e),this.inputSpec=[new Nr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new kt}}class IQ extends $Q{constructor(e){super(e||{})}call(e,n){return ie(()=>{const r=pt(e);return Yn(r,1)})}}IQ.className="GlobalAveragePooling1D";Ie(IQ);class _Q extends $Q{constructor(e){super(e||{})}call(e,n){return ie(()=>{const r=pt(e);return Ra(r,1)})}}_Q.className="GlobalMaxPooling1D";Ie(_Q);class OQ extends Dt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.inputSpec=[new Nr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new kt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class DQ extends OQ{call(e,n){return ie(()=>{const r=pt(e);return this.dataFormat==="channelsLast"?Yn(r,[1,2]):Yn(r,[2,3])})}}DQ.className="GlobalAveragePooling2D";Ie(DQ);class RQ extends OQ{call(e,n){return ie(()=>{const r=pt(e);return this.dataFormat==="channelsLast"?Ra(r,[1,2]):Ra(r,[2,3])})}}RQ.className="GlobalMaxPooling2D";Ie(RQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class PQ extends Dt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=zl(s,r);delete n.layer;const a={layer:i};return Object.assign(a,n),new e(a)}}class MQ extends PQ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Kt(e),e.length<3)throw new re(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Kt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return ie(()=>(e=pt(e),GZ((a,o)=>[pt(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}MQ.className="TimeDistributed";Ie(MQ);function r5e(t){Od(TRe,"BidirectionalMergeMode",t)}const s5e="concat";class FQ extends PQ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=zl(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=zl(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?s5e:e.mergeMode,r5e(this.mergeMode),e.weights)throw new kt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Ws(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=WZ(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const u=r.length;if(u%2>0)throw new re("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const c=r.map(f=>new Nr({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),o.push(...c)}if(s!=null)throw new kt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof rl;for(const u of a)if(u instanceof rl!==l)throw new re("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return ie(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=ja(i,1));let o;return this.mergeMode==="concat"?o=lR([s,i]):this.mergeMode==="sum"?o=ke(s,i):this.mergeMode==="ave"?o=Z(.5,ke(s,i)):this.mergeMode==="mul"?o=Z(s,i):this.mergeMode==null&&(o=[s,i]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Uf(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Uf(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=zl(n.layer);if(delete n.layer,n.numConstants!=null)throw new kt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}FQ.className="Bidirectional";Ie(FQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LQ extends Dt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ie(()=>(e=pt(e),e.dtype!=="float32"&&(e=Yo(e,"float32")),ke(Z(e,this.scale),this.offset)))}}LQ.className="Rescaling";Ie(LQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:i5e,cropAndResize:a5e}=Ys;class zQ extends Dt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,a,o,l){return ie(()=>{let u,c=!1;const f=n/a,d=r/o,h=(s+n)/a,p=(i+r)/o,m=[f,d,h,p],g=[];e.rank===3?(c=!0,u=Ti([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=io(g,[g.length,4]),v=bp(0,g.length,1,"int32"),x=a5e(u,y,v,[s,i],"nearest");return Yo(c?pt(Ua(x)):x,l)})}upsize(e,n,r,s){return ie(()=>{const i=i5e(e,[n,r]);return Yo(i,s)})}call(e,n){return ie(()=>{const r=pt(e),s=r.dtype,i=r.shape,a=i[i.length-3],o=i[i.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let u=0;return o!==this.width&&(u=Math.floor((o-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,a,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Kt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}zQ.className="CenterCrop";Ie(zQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o5e(t,e,n,r){let s=pt(t);if(s.dtype!=="int32"&&(s=Yo(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Sr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Sr(s,-1)),s.rank>2)throw new re(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const a=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=yN(o,r,n,a):l=yN(o,[],n,a),e!=="tfIdf")return l;if(r)return Z(l,r);throw new re("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class BQ extends Dt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Kt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ie(()=>{e=pt(e),e.dtype!=="int32"&&(e=Yo(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new re(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=pt(n.countWeights)}const s=Ra(e),i=vy(e),a=Ii(this.numTokens,s).bufferSync().get(0),o=Bc(i,0).bufferSync().get(0);if(!(a&&o))throw new re(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return o5e(e,this.outputMode,this.numTokens,r)})}}BQ.className="CategoryEncoding";Ie(BQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const l5e=["bilinear","nearest"],TL=new Set(l5e);class jQ extends Dt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(TL.has(e.interpolation))this.interpolation=e.interpolation;else throw new re(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Kt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ie(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Ys.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ys.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...TL]} are supported`)})}}jQ.className="Resizing";Ie(jQ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class UQ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}UQ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VQ extends Dt{constructor(e){super(e),this.randomGenerator=new UQ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}VQ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const u5e=["bilinear","nearest"],CL=new Set(u5e);class WQ extends VQ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new re(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new re(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new re(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(CL.has(r))this.interpolation=r;else throw new re(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Kt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ie(()=>{const r=pt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Id([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Ys.resizeBilinear(e,a);case"nearest":return Ys.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...CL]} are supported`)}})}}WQ.className="RandomWidth";Ie(WQ);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5e=le();c5e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ai;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(ai||(ai={}));var EL;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(EL||(EL={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5e={};function GQ(t){return f5e[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,u=o<0?e.inputNames.length+o:o;if(i.type==="tensor")return es(e.inputNames[u],n,r,s);if(i.type==="tensors"){const d=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((p,m)=>{var g;return((g=d[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>es(p,n,r,s))}const c=es(e.inputNames[u],n,r,s),f=c.dataSync();return i.type==="number"?f[0]:Da(c.shape,f)}const a=e.attrParams[t];return a&&a.value}function es(t,e,n,r){const[s,i]=di(t,n);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const a=n.currentContextIds.find(o=>!!e[Rx(s,o)]);return a!==void 0?e[Rx(s,a)][i]:void 0}function kL(t,e,n){return e[Rx(t,n.currentContextId)]}function bl(t,e){const[n,r,s]=di(t,e);return[Rx(n,e&&e.currentContextId),r,s]}function Rx(t,e){return e?`${t}-${e}`:t}function di(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],a=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[i,o,a]}return n&&e.parseNodeNameCache.set(t,s),s}function Ub(t,e,n){let r=N("pad",t,e,n);if(r==="explicit"){r=N("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function xl(t){return t.kept?t:Ll(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],h5e=Object.freeze(Object.defineProperty({__proto__:null,json:d5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],m5e=Object.freeze(Object.defineProperty({__proto__:null,json:p5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],y5e=Object.freeze(Object.defineProperty({__proto__:null,json:g5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],b5e=Object.freeze(Object.defineProperty({__proto__:null,json:v5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x5e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],w5e=Object.freeze(Object.defineProperty({__proto__:null,json:x5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],T5e=Object.freeze(Object.defineProperty({__proto__:null,json:S5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],E5e=Object.freeze(Object.defineProperty({__proto__:null,json:C5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],N5e=Object.freeze(Object.defineProperty({__proto__:null,json:k5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$5e=Object.freeze(Object.defineProperty({__proto__:null,json:A5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],_5e=Object.freeze(Object.defineProperty({__proto__:null,json:I5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],D5e=Object.freeze(Object.defineProperty({__proto__:null,json:O5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],P5e=Object.freeze(Object.defineProperty({__proto__:null,json:R5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],F5e=Object.freeze(Object.defineProperty({__proto__:null,json:M5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],z5e=Object.freeze(Object.defineProperty({__proto__:null,json:L5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],j5e=Object.freeze(Object.defineProperty({__proto__:null,json:B5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],V5e=Object.freeze(Object.defineProperty({__proto__:null,json:U5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],G5e=Object.freeze(Object.defineProperty({__proto__:null,json:W5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],q5e=Object.freeze(Object.defineProperty({__proto__:null,json:H5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],X5e=Object.freeze(Object.defineProperty({__proto__:null,json:K5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NL{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[h5e,m5e,y5e,b5e,w5e,T5e,E5e,N5e,$5e,_5e,D5e,P5e,F5e,z5e,j5e,V5e,G5e,q5e,X5e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],a=[],o=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?s.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&a.push(m[g.name]),m),{});let l=[];const u=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(m=>{const g=o[m];g.inputNames.forEach((y,v)=>{const[b,,x]=bl(y),w=o[b];if(w.outputs!=null){const C=w.outputs.indexOf(x);if(C!==-1){const E=`${b}:${C}`;g.inputNames[v]=E}}g.inputs.push(w),w.children.push(g)})}),Object.keys(f).length===0?d.forEach(m=>{const g=o[m];g.children.length===0&&u.push(g)}):Object.keys(f).forEach(m=>{const[g]=bl(m),y=o[g];y!=null&&(y.signatureKey=f[m],u.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=bl(m),y=o[g];y&&(y.signatureKey=c[m],l.push(y))}):l=s;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:o,inputs:l,outputs:u,weights:i,placeholders:s,signature:n,functions:h};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=GQ(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const a=i.type;let o;switch(i.type){case"string":o=ON(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=ON(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":o=zN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=zN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":o=RN(e.attr,i.tfName,i.defaultValue||0),o===void 0&&i.tfDeprecatedName&&(o=RN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":o=LN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=LN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":o=DN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=DN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":o=jN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=jN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":o=FN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=FN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":o=BN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=BN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":o=PN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=PN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":o=MN(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=MN(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":o=AL(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=AL(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:o,type:a},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&s.push(f[d.name]),f),{}));const a=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=bl(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:NR(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,a.push(h),i[d]=h}),Object.keys(i).forEach(f=>{const d=i[f];d.inputNames.forEach((h,p)=>{const[m,,g]=bl(h),y=i[m];if(y.outputs!=null){const v=y.outputs.indexOf(g);if(v!==-1){const b=`${m}:${v}`;d.inputNames[p]=b}}d.inputs.push(y),y.children.push(d)})});const u=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=bl(u[f.name]),p=i[d];p!=null&&(p.defaultOutput=h,o.push(p))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:o,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function Y5e(t){const e=le().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function HQ(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):Y5e(t);return e?n:n.toLowerCase()}function ON(t,e,n,r=!1){const s=t[e];return s!=null?HQ(s.s,r):n}function DN(t,e,n){const r=t[e];return r?r.b:n}function RN(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function NR(t){switch(typeof t=="string"&&(t=ai[t]),t){case ai.DT_FLOAT:case ai.DT_HALF:return"float32";case ai.DT_INT32:case ai.DT_INT64:case ai.DT_INT8:case ai.DT_UINT8:return"int32";case ai.DT_BOOL:return"bool";case ai.DT_DOUBLE:return"float32";case ai.DT_STRING:return"string";case ai.DT_COMPLEX64:case ai.DT_COMPLEX128:return"complex64";default:return null}}function AL(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function PN(t,e,n){const r=t[e];return r&&r.type?NR(r.type):n}function MN(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>NR(s)):n}function qQ(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function FN(t,e,n){const r=t[e];return r&&r.shape?qQ(r.shape):n}function LN(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function zN(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>HQ(i,r)):n}function BN(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>qQ(s)):n}function jN(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z5e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return es(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return es(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return RN(this.node.rawAttrs,e,n);if(r.s!=null)return ON(this.node.rawAttrs,e,n);if(r.b!=null)return DN(this.node.rawAttrs,e,n);if(r.shape!=null)return FN(this.node.rawAttrs,e,n);if(r.type!=null)return PN(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return LN(this.node.rawAttrs,e,n);if(r.list.s!=null)return zN(this.node.rawAttrs,e,n);if(r.list.shape!=null)return BN(this.node.rawAttrs,e,n);if(r.list.b!=null)return jN(this.node.rawAttrs,e,n);if(r.list.type!=null)return MN(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fs=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:cK,abs:xr,acos:AK,acosh:$K,add:ke,addN:mEe,all:VO,any:Tx,argMax:gp,argMin:IK,asin:_K,asinh:OK,atan:DK,atan2:RK,atanh:PK,avgPool:IS,avgPool3d:MK,basicLSTMCell:LEe,batchNorm:b0,batchNorm2d:FK,batchNorm3d:LK,batchNorm4d:zK,batchToSpaceND:_S,bincount:BK,bitwiseAnd:qEe,booleanMaskAsync:$$e,broadcastArgs:XEe,broadcastTo:Lh,buffer:Nt,cast:Be,ceil:jK,clipByValue:Qs,clone:Ll,complex:pc,concat:Zn,concat1d:UK,concat2d:VK,concat3d:WK,concat4d:GK,conv1d:GO,conv2d:yc,conv2dTranspose:qO,conv3d:HK,conv3dTranspose:KK,cos:OS,cosh:KO,cosineWindow:ED,cumprod:Cx,cumsum:XO,denseBincount:yN,depthToSpace:XK,depthwiseConv2d:x0,diag:vke,dilation2d:YK,div:Ke,divNoNan:ZK,dot:QK,dropout:EX,einsum:oh,elu:w0,enclosingPowerOfTwo:kX,ensureShape:Ake,equal:uo,erf:YO,euclideanNorm:tX,exp:Ps,expandDims:Sr,expm1:nX,eye:QO,fft:HS,fill:em,floor:T0,floorDiv:UO,fused:Z$e,gather:C0,gatherND:z$e,greater:Ii,greaterEqual:Bc,ifft:Sy,imag:DS,image:Ys,inTopKAsync:V$e,irfft:bD,isFinite:rX,isInf:sX,isNaN:iX,leakyRelu:RS,less:by,lessEqual:Ad,linalg:RX,linspace:eNe,localResponseNormalization:aX,log:na,log1p:PS,logSigmoid:oX,logSoftmax:JO,logSumExp:MS,logicalAnd:nl,logicalNot:FS,logicalOr:eD,logicalXor:lX,losses:A_e,lowerBound:gNe,matMul:Pt,max:Ra,maxPool:LS,maxPool3d:uX,maxPoolWithArgmax:xNe,maximum:cu,mean:Yn,meshgrid:TNe,min:vy,minimum:cd,mirrorPad:cX,mod:fX,moments:zS,movingAverage:O$e,mul:Z,multiRNNCell:$Ne,multinomial:_Ne,neg:$n,norm:S0,notEqual:vp,oneHot:nD,ones:yi,onesLike:ra,op:X,outerProduct:MNe,pad:jc,pad1d:zNe,pad2d:jNe,pad3d:VNe,pad4d:GNe,pool:dX,pow:Xl,prelu:jS,print:NK,prod:hX,raggedGather:JNe,raggedRange:tAe,raggedTensorToTensor:rAe,rand:iAe,randomGamma:EAe,randomNormal:cD,randomStandardNormal:AAe,randomUniform:Id,randomUniformInt:_Ae,range:bp,real:xy,reciprocal:mX,relu:ll,relu6:fD,reshape:ne,reverse:ja,reverse1d:LAe,reverse2d:BAe,reverse3d:UAe,reverse4d:WAe,rfft:qS,round:dD,rsqrt:hD,scalar:ut,scatterND:R$e,searchSorted:tD,selu:pD,separableConv2d:mD,setdiff1dAsync:YAe,sigmoid:ao,sign:gX,signal:N_e,sin:gD,sinh:yD,slice:ht,slice1d:VS,slice2d:vD,slice3d:WS,slice4d:wy,softmax:GS,softplus:tm,spaceToBatchND:BS,sparse:$_e,sparseToDense:F$e,spectral:k_e,split:xi,sqrt:as,square:dn,squaredDifference:xD,squeeze:Xn,stack:Ti,step:nm,stridedSlice:yX,string:I_e,sub:Xe,sum:Je,tan:vX,tanh:ud,tensor:io,tensor1d:dr,tensor2d:nc,tensor3d:bX,tensor4d:g$e,tensor5d:y$e,tensor6d:v$e,tensorScatterUpdate:x$e,tile:Ia,topk:wX,transpose:Ut,truncatedNormal:SD,unique:SX,unsortedSegmentSum:TD,unstack:Ua,upperBound:k$e,variable:TX,where:xs,whereAsync:CX,zeros:Tr,zerosLike:Vt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e=(t,e,n,r=fs)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(N("a",t,e,n),N("b",t,e,n))];case"AddN":return[r.addN(N("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(N("a",t,e,n),N("b",t,e,n))];case"Mul":return[r.mul(N("a",t,e,n),N("b",t,e,n))];case"RealDiv":case"Div":return[r.div(N("a",t,e,n),N("b",t,e,n))];case"DivNoNan":return[r.divNoNan(N("a",t,e,n),N("b",t,e,n))];case"FloorDiv":return[r.floorDiv(N("a",t,e,n),N("b",t,e,n))];case"Sub":return[r.sub(N("a",t,e,n),N("b",t,e,n))];case"Minimum":return[r.minimum(N("a",t,e,n),N("b",t,e,n))];case"Maximum":return[r.maximum(N("a",t,e,n),N("b",t,e,n))];case"Pow":return[r.pow(N("a",t,e,n),N("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(N("a",t,e,n),N("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e=(t,e,n,r=fs)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(N("x",t,e,n))];case"Acos":return[r.acos(N("x",t,e,n))];case"Acosh":return[r.acosh(N("x",t,e,n))];case"Asin":return[r.asin(N("x",t,e,n))];case"Asinh":return[r.asinh(N("x",t,e,n))];case"Atan":return[r.atan(N("x",t,e,n))];case"Atan2":return[r.atan2(N("x",t,e,n),N("y",t,e,n))];case"Atanh":return[r.atanh(N("x",t,e,n))];case"Ceil":return[r.ceil(N("x",t,e,n))];case"Complex":return[r.complex(N("real",t,e,n),N("imag",t,e,n))];case"Cos":return[r.cos(N("x",t,e,n))];case"Cosh":return[r.cosh(N("x",t,e,n))];case"Elu":return[r.elu(N("x",t,e,n))];case"Erf":return[r.erf(N("x",t,e,n))];case"Exp":return[r.exp(N("x",t,e,n))];case"Expm1":return[r.expm1(N("x",t,e,n))];case"Floor":return[r.floor(N("x",t,e,n))];case"Log":return[r.log(N("x",t,e,n))];case"Log1p":return[r.log1p(N("x",t,e,n))];case"Imag":return[r.imag(N("x",t,e,n))];case"Neg":return[r.neg(N("x",t,e,n))];case"Reciprocal":return[r.reciprocal(N("x",t,e,n))];case"Real":return[r.real(N("x",t,e,n))];case"Relu":return[r.relu(N("x",t,e,n))];case"Round":return[r.round(N("x",t,e,n))];case"Selu":return[r.selu(N("x",t,e,n))];case"Sigmoid":return[r.sigmoid(N("x",t,e,n))];case"Sin":return[r.sin(N("x",t,e,n))];case"Sign":return[r.sign(N("x",t,e,n))];case"Sinh":return[r.sinh(N("x",t,e,n))];case"Softplus":return[r.softplus(N("x",t,e,n))];case"Sqrt":return[r.sqrt(N("x",t,e,n))];case"Square":return[r.square(N("x",t,e,n))];case"Tanh":return[r.tanh(N("x",t,e,n))];case"Tan":return[r.tan(N("x",t,e,n))];case"ClipByValue":return[r.clipByValue(N("x",t,e,n),N("clipValueMin",t,e,n),N("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(N("x",t,e,n))];case"Rsqrt":return[r.rsqrt(es(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(N("x",t,e,n),N("alpha",t,e,n))];case"Prelu":return[r.prelu(N("x",t,e,n),N("alpha",t,e,n))];case"IsNan":return[r.isNaN(es(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(es(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(es(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ma(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){P(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];P(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function $L(t){return!(typeof t=="number"||t.some(e=>e<0))}function sg(t,e,n){let r=UN(t,n);const s=!$L(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=UN(i.shape,r)}),!$L(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function UN(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ePe{constructor(e,n,r,s,i,a,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=ut(0),zr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),ma(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,zr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return io([],[0].concat(this.elementShape));const r=this.readMany(e);return ma(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ti(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return io([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return ma(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Zn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ua(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,a=[];ie(()=>{n=ne(n,[1,r,i]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:s[l-1],0],f=[1,e[l],i];a[l]=ne(ht(n,c,f),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);ma(n,i.shape,"TensorList shape mismatch: "),zr(i)}),this.idTensor=ut(0),this.maxNumElements=s,zr(this.idTensor)}copy(){return new hd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);ma(e,this.elementShape,"TensorList shape mismatch: ");const s=sg(this.elementShape,this.tensors,e);return ie(()=>{const i=this.tensors.map(a=>ne(a,s));return Ti(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=sg(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,ma(s.shape,e,"TensorList shape mismatch: "),ne(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ma(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");zr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new hd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ma(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=sg(this.elementShape,this.tensors,n);return ne(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ma(this.elementShape,n.shape,"TensorList shape mismatch: "),zr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);ma(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=sg(this.elementShape,this.tensors,r);return e.length===0?io([],[0].concat(s)):ie(()=>{const i=e.map(a=>ne(this.tensors[a],s));return Ti(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ma(this.elementShape,n,"TensorList shape mismatch: ");const r=sg(this.elementShape,this.tensors,n);return this.size()===0?io([],[0].concat(r)):ie(()=>{const s=this.tensors.map(i=>ne(i,r));return Zn(s,0)})}}function tPe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);ma(s,e,"TensorList shape mismatch: ");const i=Ua(t);return new hd(i,e,r)}function nPe(t,e,n,r){return new hd([],t,e,r)}function rPe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new hd([],n,t.dtype,r),a=Ua(t,0);return e.forEach((o,l)=>{i.setItem(o,a[l])}),i}function sPe(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),a=UN(i,n),o=r===0?0:t.size/r,l=ie(()=>{const c=[];t=ne(t,[1,r,o]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:s[f-1],0],p=[1,e[f],o];c[f]=ne(ht(t,h,p),a)}return t.dispose(),c}),u=new hd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iPe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=N("thenBranch",t,e,n),s=N("elseBranch",t,e,n),i=N("cond",t,e,n),a=N("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=N("body",t,e,n),s=N("cond",t,e,n),i=N("args",t,e,n),a=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(c=>c.id);let l=await a[0].data();a.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const f=u.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{const r=N("pred",t,e,n);return[xl(r)]}case"Switch":{const r=N("pred",t,e,n);let s=N("data",t,e,n);return s.kept||(s=xl(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>es(s,e,n)!==void 0);if(r){const s=es(r,e,n);return[xl(s)]}return}case"Enter":{const r=N("frameName",t,e,n),s=N("tensor",t,e,n);return n.enterFrame(r),[xl(s)]}case"Exit":{const r=N("tensor",t,e,n);return n.exitFrame(),[xl(r)]}case"NextIteration":{const r=N("tensor",t,e,n);return n.nextIteration(),[xl(r)]}case"TensorArrayV3":{const r=N("size",t,e,n),s=N("dtype",t,e,n),i=N("elementShape",t,e,n),a=N("dynamicSize",t,e,n),o=N("clearAfterRead",t,e,n),l=N("identicalElementShapes",t,e,n),u=N("name",t,e,n),c=new ePe(u,s,r,i,l,a,o);return n.addTensorArray(c),[c.idTensor,ut(1)]}case"TensorArrayWriteV3":{const r=N("tensorArrayId",t,e,n),s=N("index",t,e,n),i=N("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(s,i),[a.idTensor]}case"TensorArrayReadV3":{const r=N("tensorArrayId",t,e,n),s=N("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=N("tensorArrayId",t,e,n),s=N("indices",t,e,n),i=N("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=N("tensorArrayId",t,e,n),s=N("indices",t,e,n),i=N("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(s,i),[a.idTensor]}case"TensorArrayConcatV3":{const r=N("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=N("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=N("tensorArrayId",t,e,n),s=N("tensor",t,e,n),i=N("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(i,s),[a.idTensor]}case"TensorArraySizeV3":{const r=N("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[ut(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=N("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=N("tensorListId",t,e,n),s=N("index",t,e,n),i=N("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(s,i),[a.idTensor]}case"TensorListGetItem":{const r=N("tensorListId",t,e,n),s=N("index",t,e,n),i=N("elementShape",t,e,n),a=N("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=N("indices",t,e,n),s=N("tensor",t,e,n),i=N("elementShape",t,e,n),a=N("numElements",t,e,n),o=rPe(s,r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=N("elementShape",t,e,n),s=N("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const a=N(i,t,e,n),o=t.op==="TensorListReserve"?-1:a,l=nPe(r,s,a,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=N("tensorListId",t,e,n),s=N("indices",t,e,n),i=N("elementShape",t,e,n),a=N("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,a,i)]}case"TensorListStack":{const r=N("tensorListId",t,e,n),s=N("elementShape",t,e,n),i=N("elementDType",t,e,n),a=N("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,a)]}case"TensorListFromTensor":{const r=N("tensor",t,e,n),s=N("elementShape",t,e,n),i=N("elementDType",t,e,n),a=tPe(r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=N("tensorListId",t,e,n),s=n.getTensorList(r.id),i=N("dtype",t,e,n),a=N("elementShape",t,e,n);return[s.concat(i,a)]}case"TensorListPushBack":{const r=N("tensorListId",t,e,n),s=N("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=N("tensorListId",t,e,n),s=N("elementShape",t,e,n),i=N("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=N("tensor",t,e,n),s=N("elementShape",t,e,n),i=N("lengths",t,e,n),a=sPe(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=N("tensorListId",t,e,n),s=n.getTensorList(r.id);return[ut(s.size(),"int32")]}case"TensorListResize":{const r=N("tensorListId",t,e,n),s=N("size",t,e,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IL(t,e,n){const[r,s]=N("fusedOps",t,e,n),i=r==="biasadd",a=!i,o=s==="prelu",l=r==="fusedbatchnorm",u=N("numArgs",t,e,n);if(i){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=N("strides",t,e,n),f=Ub(t,e,n),d=N("dataFormat",t,e,n).toUpperCase(),h=N("dilations",t,e,n);let[p,m]=N("args",t,e,n);a&&(m=p,p=void 0);const g=N("leakyreluAlpha",t,e,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:g}}const aPe=(t,e,n,r=fs)=>{switch(t.op){case"Conv1D":{const s=N("stride",t,e,n),i=N("pad",t,e,n),a=N("dataFormat",t,e,n).toUpperCase(),o=N("dilation",t,e,n);return[r.conv1d(N("x",t,e,n),N("filter",t,e,n),s,i,a,o)]}case"Conv2D":{const s=N("strides",t,e,n),i=Ub(t,e,n),a=N("dataFormat",t,e,n).toUpperCase(),o=N("dilations",t,e,n);return[r.conv2d(N("x",t,e,n),N("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=IL(t,e,n);return[r.fused.conv2d({x:N("x",t,e,n),filter:N("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=IL(t,e,n);return[r.fused.depthwiseConv2d({x:N("x",t,e,n),filter:N("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=N("outputShape",t,e,n),i=N("strides",t,e,n),a=Ub(t,e,n);return[r.conv2dTranspose(N("x",t,e,n),N("filter",t,e,n),s,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=N("strides",t,e,n),i=Ub(t,e,n),a=N("dilations",t,e,n),o=N("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(N("input",t,e,n),N("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"Conv3D":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("dataFormat",t,e,n).toUpperCase(),o=N("dilations",t,e,n);return[r.conv3d(N("x",t,e,n),N("filter",t,e,n),[s[1],s[2],s[3]],i,a,[o[1],o[2],o[3]])]}case"AvgPool":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("kernelSize",t,e,n);return[r.avgPool(N("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("kernelSize",t,e,n);return[r.maxPool(N("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("kernelSize",t,e,n),o=N("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(N("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i,o);return[l,u]}case"AvgPool3D":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("kernelSize",t,e,n);return[r.avgPool3d(N("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("kernelSize",t,e,n);return[r.maxPool3d(N("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=N("strides",t,e,n),i=N("pad",t,e,n),a=N("dilations",t,e,n),o=s[1],l=s[2],u=a[1],c=a[2];return[r.dilation2d(N("x",t,e,n),N("filter",t,e,n),[o,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oPe=(t,e,n,r=fs)=>{switch(t.op){case"Fill":{const s=N("shape",t,e,n),i=N("dtype",t,e,n),a=N("value",t,e,n);return[r.fill(s,a,i)]}case"LinSpace":{const s=N("start",t,e,n),i=N("stop",t,e,n),a=N("num",t,e,n);return[r.linspace(s,i,a)]}case"Multinomial":{const s=N("logits",t,e,n),i=N("numSamples",t,e,n),a=N("seed",t,e,n);return[r.multinomial(s,i,a)]}case"OneHot":{const s=N("indices",t,e,n),i=N("depth",t,e,n),a=N("onValue",t,e,n),o=N("offValue",t,e,n),l=N("dtype",t,e,n);return[r.oneHot(s,i,a,o,l)]}case"Ones":return[r.ones(N("shape",t,e,n),N("dtype",t,e,n))];case"OnesLike":return[r.onesLike(N("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(N("shape",t,e,n),N("dtype",t,e,n),N("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(N("shape",t,e,n),N("minval",t,e,n),N("maxval",t,e,n),N("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(N("shape",t,e,n),N("minval",t,e,n),N("maxval",t,e,n),N("seed",t,e,n))];case"Range":{const s=N("start",t,e,n),i=N("stop",t,e,n),a=N("step",t,e,n);return[r.range(s,i,a,N("dtype",t,e,n))]}case"TruncatedNormal":{const s=N("shape",t,e,n),i=N("mean",t,e,n),a=N("stdDev",t,e,n),o=N("seed",t,e,n);return[r.truncatedNormal(s,i,a,N("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(N("shape",t,e,n),N("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(N("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(t,e,n){const r=N("boxes",t,e,n),s=N("scores",t,e,n),i=N("maxOutputSize",t,e,n),a=N("iouThreshold",t,e,n),o=N("scoreThreshold",t,e,n),l=N("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const lPe=async(t,e,n,r,s=fs)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=dC(t,e,n),f=await s.image.nonMaxSuppressionWithScoreAsync(i,a,o,l,u,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=dC(t,e,n),c=N("padToMaxOutputSize",t,e,n),f=await s.image.nonMaxSuppressionPaddedAsync(i,a,o,l,u,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=dC(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,a,o,l,u)]}case"Where":{const i=s.cast(N("condition",t,e,n),"bool"),a=[await s.whereAsync(i)];return i.dispose(),a}case"ListDiff":return s.setdiff1dAsync(N("x",t,e,n),N("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe=(t,e,n,r=fs)=>{switch(t.op){case"LowerBound":{const s=N("sortedSequence",t,e,n),i=N("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=N("x",t,e,n),i=N("k",t,e,n),a=N("sorted",t,e,n),o=r.topk(s,i,a);return[o.values,o.indices]}case"UpperBound":{const s=N("sortedSequence",t,e,n),i=N("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=N("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=N("x",t,e,n),i=N("axis",t,e,n),a=r.unique(s,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPe=(t,e,n,r=fs)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=N("default",t,e,n);return[es(t.name,e,n)||s];case"Placeholder":return[es(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=N("x",t,e,n);return[xl(c)]}case"IdentityN":return N("x",t,e,n).map(c=>xl(c));case"Snapshot":const i=N("x",t,e,n);return[xl(i)];case"Shape":return[r.tensor1d(N("x",t,e,n).shape,"int32")];case"ShapeN":return N("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(N("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(N("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=N("x",t,e,n),o=N("data",t,e,n),l=N("message",t,e,n),u=N("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fPe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ut(0),this.tensorMap=new Map,zr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ut(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),ie(()=>{const s=Ua(n),i=r.length,a=s.length;P(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let o=0;o<i;o++){const l=r[o],u=s[o];zr(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return ie(()=>{const s=[];for(let i=0;i<r.length;i++){const a=r[i],o=this.findWithDefault(a,n);s.push(o)}return Ti(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dPe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=N("keyDType",t,e,n),a=N("valueDType",t,e,n),o=new fPe(i,a);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=N("tableHandle",t,e,n,r),i=N("keys",t,e,n),a=N("values",t,e,n);return[await r.getHashTableById(s.id).import(i,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=N("tableHandle",t,e,n,r),i=N("keys",t,e,n),a=N("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=N("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe=(t,e,n,r=fs)=>{switch(t.op){case"ResizeBilinear":{const s=N("images",t,e,n),i=N("size",t,e,n),a=N("alignCorners",t,e,n),o=N("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],a,o)]}case"ResizeNearestNeighbor":{const s=N("images",t,e,n),i=N("size",t,e,n),a=N("alignCorners",t,e,n),o=N("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],a,o)]}case"CropAndResize":{const s=N("image",t,e,n),i=N("boxes",t,e,n),a=N("boxInd",t,e,n),o=N("cropSize",t,e,n),l=N("method",t,e,n),u=N("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,a,o,l,u)]}case"ImageProjectiveTransformV3":{const s=N("images",t,e,n),i=N("transforms",t,e,n),a=N("outputShape",t,e,n),o=N("fillValue",t,e,n),l=N("interpolation",t,e,n),u=N("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),u.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=(t,e,n,r=fs)=>{switch(t.op){case"Equal":return[r.equal(N("a",t,e,n),N("b",t,e,n))];case"NotEqual":return[r.notEqual(N("a",t,e,n),N("b",t,e,n))];case"Greater":return[r.greater(N("a",t,e,n),N("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(N("a",t,e,n),N("b",t,e,n))];case"Less":return[r.less(N("a",t,e,n),N("b",t,e,n))];case"LessEqual":return[r.lessEqual(N("a",t,e,n),N("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(N("a",t,e,n),N("b",t,e,n))];case"LogicalNot":return[r.logicalNot(N("a",t,e,n))];case"LogicalOr":return[r.logicalOr(N("a",t,e,n),N("b",t,e,n))];case"Select":case"SelectV2":return[r.where(N("condition",t,e,n),N("a",t,e,n),N("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(N("a",t,e,n),N("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe=(t,e,n,r=fs)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(N("a",t,e,n),N("b",t,e,n),N("transposeA",t,e,n),N("transposeB",t,e,n))];case"Einsum":return[r.einsum(N("equation",t,e,n),...N("tensors",t,e,n))];case"Transpose":return[r.transpose(N("x",t,e,n),N("perm",t,e,n))];case"_FusedMatMul":const[s,i]=N("fusedOps",t,e,n),a=s==="biasadd",o=i==="prelu",l=N("numArgs",t,e,n),u=N("leakyreluAlpha",t,e,n);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=N("args",t,e,n);return[r.fused.matMul({a:N("a",t,e,n),b:N("b",t,e,n),transposeA:N("transposeA",t,e,n),transposeB:N("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:f,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(N("a",t,e,n),N("numLower",t,e,n),N("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=(t,e,n,r=fs)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(N("x",t,e,n),N("axis",t,e,n),N("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(N("x",t,e,n),N("mean",t,e,n),N("variance",t,e,n),N("offset",t,e,n),N("scale",t,e,n),N("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(N("x",t,e,n),N("mean",t,e,n),N("variance",t,e,n),N("offset",t,e,n),N("scale",t,e,n),N("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(N("x",t,e,n),N("radius",t,e,n),N("bias",t,e,n),N("alpha",t,e,n),N("beta",t,e,n))];case"Softmax":return[r.softmax(N("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(N("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe=(t,e,n,r=fs)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(N("paramsNestedSplits",t,e,n),N("paramsDenseValues",t,e,n),N("indices",t,e,n),N("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(N("starts",t,e,n),N("limits",t,e,n),N("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(N("shape",t,e,n),N("values",t,e,n),N("defaultValue",t,e,n),N("rowPartitionTensors",t,e,n),N("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe=(t,e,n,r=fs)=>{switch(t.op){case"Max":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.max(N("x",t,e,n),o,l)]}case"Mean":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.mean(N("x",t,e,n),o,l)]}case"Min":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.min(N("x",t,e,n),o,l)]}case"Sum":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.sum(N("x",t,e,n),o,l)]}case"All":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.all(N("x",t,e,n),o,l)]}case"Any":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.any(N("x",t,e,n),o,l)]}case"ArgMax":{const o=N("axis",t,e,n);return[r.argMax(N("x",t,e,n),o)]}case"ArgMin":{const o=N("axis",t,e,n);return[r.argMin(N("x",t,e,n),o)]}case"Prod":{const o=N("axis",t,e,n),l=N("keepDims",t,e,n);return[r.prod(N("x",t,e,n),o,l)]}case"Cumprod":{const o=N("axis",t,e,n),l=N("exclusive",t,e,n),u=N("reverse",t,e,n);return[r.cumprod(N("x",t,e,n),o,l,u)]}case"Cumsum":{const o=N("axis",t,e,n),l=N("exclusive",t,e,n),u=N("reverse",t,e,n);return[r.cumsum(N("x",t,e,n),o,l,u)]}case"Bincount":const s=N("x",t,e,n),i=N("weights",t,e,n),a=N("size",t,e,n);return[r.bincount(s,i,a)];case"DenseBincount":{const o=N("x",t,e,n),l=N("weights",t,e,n),u=N("size",t,e,n),c=N("binaryOutput",t,e,n);return[r.denseBincount(o,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe=(t,e,n,r=fs)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=N("n",t,e,n),i=N("axis",t,e,n);let a=N("tensors",t,e,n);return a=a.slice(0,s),[r.concat(a,i)]}case"Gather":{const s=N("x",t,e,n),i=N("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=N("axis",t,e,n),i=N("batchDims",t,e,n),a=N("x",t,e,n),o=N("indices",t,e,n);return[r.gather(a,r.cast(o,"int32"),s,i)]}case"Reverse":{const s=N("dims",t,e,n),i=[];for(let o=0;o<s.length;o++)s[o]&&i.push(o);const a=N("x",t,e,n);return[r.reverse(a,i)]}case"ReverseV2":{const s=N("axis",t,e,n),i=N("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=N("begin",t,e,n),i=N("size",t,e,n);return[r.slice(N("x",t,e,n),s,i)]}case"StridedSlice":{const s=N("begin",t,e,n),i=N("end",t,e,n),a=N("strides",t,e,n),o=N("beginMask",t,e,n),l=N("endMask",t,e,n),u=N("ellipsisMask",t,e,n),c=N("newAxisMask",t,e,n),f=N("shrinkAxisMask",t,e,n),d=N("x",t,e,n);return[r.stridedSlice(d,s,i,a,o,l,u,c,f)]}case"Pack":return ie(()=>{const s=N("axis",t,e,n),i=N("tensors",t,e,n),a=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(u=>{const c=jt(u.shape,a);if(!c&&!jt(r.squeeze(u).shape,o))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,a)});return[r.stack(l,s)]});case"Unpack":{const s=N("axis",t,e,n),i=N("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=N("reps",t,e,n);return[r.tile(N("x",t,e,n),s)]}case"Split":case"SplitV":{const s=N("axis",t,e,n),i=N("numOrSizeSplits",t,e,n),a=N("x",t,e,n);return r.split(a,i,s)}case"ScatterNd":{const s=N("indices",t,e,n),i=N("values",t,e,n),a=N("shape",t,e,n);return[r.scatterND(s,i,a)]}case"GatherNd":{const s=N("x",t,e,n),i=N("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=N("sparseIndices",t,e,n),i=N("outputShape",t,e,n),a=N("sparseValues",t,e,n),o=N("defaultValue",t,e,n);return[r.sparseToDense(s,a,i,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}case"TensorScatterUpdate":{const s=N("indices",t,e,n),i=N("values",t,e,n),a=N("tensor",t,e,n);return[r.tensorScatterUpdate(a,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe=(t,e,n,r=fs)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(N("indices",t,e,n),N("values",t,e,n),N("denseShape",t,e,n),N("defaultValue",t,e,n));return[s,i,a,o]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(N("inputIndices",t,e,n),N("inputShape",t,e,n),N("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(N("data",t,e,n),N("indices",t,e,n),N("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(N("data",t,e,n),N("indices",t,e,n),N("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=(t,e,n,r=fs)=>{switch(t.op){case"FFT":return[r.fft(N("x",t,e,n))];case"IFFT":return[r.ifft(N("x",t,e,n))];case"RFFT":return[r.rfft(N("x",t,e,n))];case"IRFFT":return[r.irfft(N("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=(t,e,n,r=fs)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(N("input",t,e,n),N("pattern",t,e,n),N("rewrite",t,e,n),N("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(N("data",t,e,n),N("dataSplits",t,e,n),N("separator",t,e,n),N("nGramWidths",t,e,n),N("leftPad",t,e,n),N("rightPad",t,e,n),N("padWidth",t,e,n),N("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:a}=r.string.stringSplit(N("input",t,e,n),N("delimiter",t,e,n),N("skipEmpty",t,e,n));return[s,i,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(N("input",t,e,n),N("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=(t,e,n,r=fs)=>{switch(t.op){case"Cast":return[r.cast(N("x",t,e,n),N("dtype",t,e,n))];case"ExpandDims":{const s=N("axis",t,e,n);return[r.expandDims(N("x",t,e,n),s)]}case"Squeeze":{const s=N("axis",t,e,n);return[r.squeeze(N("x",t,e,n),s)]}case"Reshape":return[r.reshape(N("x",t,e,n),N("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(N("x",t,e,n),N("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(N("x",t,e,n),N("padding",t,e,n),N("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(N("x",t,e,n),N("padding",t,e,n),N("constantValue",t,e,n))];case"SpaceToBatchND":{const s=N("blockShape",t,e,n),i=N("paddings",t,e,n);return[r.spaceToBatchND(N("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=N("blockShape",t,e,n),i=N("crops",t,e,n);return[r.batchToSpaceND(N("x",t,e,n),s,i)]}case"DepthToSpace":{const s=N("blockSize",t,e,n),i=N("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(N("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(N("x",t,e,n),N("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(N("s0",t,e,n),N("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _L(t,e,n,r,s=ie){const i=((a,o,l)=>{switch(a.category){case"arithmetic":return s(()=>Q5e(a,o,l));case"basic_math":return s(()=>J5e(a,o,l));case"control":return iPe(a,o,l);case"convolution":return s(()=>aPe(a,o,l));case"creation":return s(()=>oPe(a,o,l));case"dynamic":return lPe(a,o,l);case"evaluation":return s(()=>uPe(a,o,l));case"image":return s(()=>hPe(a,o,l));case"graph":return s(()=>cPe(a,o,l));case"logical":return s(()=>pPe(a,o,l));case"matrices":return s(()=>mPe(a,o,l));case"normalization":return s(()=>gPe(a,o,l));case"ragged":return s(()=>yPe(a,o,l));case"reduction":return s(()=>vPe(a,o,l));case"slice_join":return s(()=>bPe(a,o,l));case"sparse":return s(()=>xPe(a,o,l));case"spectral":return s(()=>wPe(a,o,l));case"string":return s(()=>SPe(a,o,l));case"transformation":return s(()=>TPe(a,o,l));case"hash_table":return dPe(a,o,l,r);case"custom":const u=GQ(a.op);if(u&&u.customExecutor)return u.customExecutor(new Z5e(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return rd(i)?i.then(a=>[].concat(a)):[].concat(i)}class OL{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DL(t,e,n,r){const s=new Set,i=[];let a=null,o=null;const l=new Set,u=new Set(Object.keys(t).map(d=>di(d)[0]));r=r||[];const c=new Set(r.map(d=>di(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((hf(d)||_Pe(d)||OPe(d))&&a==null&&(a=d,o=a.children.map(h=>h.name).filter(h=>s.has(h))),s.add(d.name),n[d.name]==null&&!u.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:a,syncInputs:o}}function CPe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(g=>di(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],a=g=>n.has(typeof g=="string"?g:g.name);function o(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=o([...s,...t.weights,...i]).filter(a),u=o([...l,...Object.values(t.nodes)]).filter(a),c=new Map(u.map(g=>[g.name,g])),f={};for(const g of u){f[g.name]=f[g.name]||0;for(const y of g.children)a(y)||(f[y.name]=Number.POSITIVE_INFINITY),f[y.name]=(f[y.name]||0)+1}const d=Object.entries(f).filter(([,g])=>g===0).map(([g])=>g),h=[...d];for(;d.length>0;){const g=d.pop(),y=c.get(g);for(const v of y.children.filter(a))--f[v.name]===0&&(h.push(v.name),d.push(v.name))}const p=h.map(g=>c.get(g)),m=EPe(p,l);return kPe(m,l),m}function EPe(t,e){const n=new Map(t.map(a=>[a.name,a])),r=e.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),o=n.get(a);for(const l of o.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(a=>s.has(a.name))}class nb extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function kPe(t,e){const n=new Map(t.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),i=new Set(t.map(o=>o.name)),a=o=>i.has(typeof o=="string"?o:o.name);for(const o of t){for(const l of o.children.filter(a)){if(!n.has(l.name))throw new nb(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new nb(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!n.has(l.name))throw new nb(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new nb(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function NPe(t){const e=new Map(t.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,l)=>hf(o)?n:l),s=o=>{const l=r[e.get(o.name)];return l??-1},i=t.map((o,l)=>o.children.map(s).reduce((u,c)=>Math.max(u,c),r[l])),a=new Map;for(let o=0;o<t.length;++o){const l=i[o];if(l===n)continue;const u=t[o],c=t[l];a.has(c.name)||a.set(c.name,[]),a.get(c.name).push(u)}return a}const APe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),$Pe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),IPe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function hf(t){return APe.has(t.op)}function _Pe(t){return $Pe.has(t.op)}function OPe(t){return IPe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Px{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Px(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=DL(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:a}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const u=n.map(f=>f.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${s}]`)}const o=CPe(this.graph,r),l=NPe(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return zr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(d=>this.graph.nodes[di(d)[0]]),i=n.map(d=>di(d)[0]),a=new Set(i);let o=i.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,o),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=le().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return ie(()=>{const d=new OL(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[v,b]=di(y,d),x=[];x[b]=e[y],h[v]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(x))});const p=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=u;for(const y of m){if(h[y.name])continue;const v=_L(y,h,d,this._resourceManager);if(rd(v))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);h[y.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,h,d,p,a,g.get(y.name))}return this.parent==null&&d.dispose(p),n.map(y=>es(y,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,a,o){if(!(hf(n)||a.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(const l of n.inputs){if(hf(l))continue;const u=kL(l.name,r,s);if(u!=null)for(const c of u){if(!c||c.kept||i.has(c.id))continue;const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,a){function o(l){return hf(l)||i.has(l.name)}if(!(hf(e)||a==null))for(const l of a){if(o(l))continue;const u=kL(l.name,n,r);for(const c of u)!c||c.kept||s.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=le().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const a=new OL(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,a,n,r),l=n.map(d=>es(d,o,a)),u=l.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...u,...c,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&a.dispose(f),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,a,o)=>(i[this.inputs[o].name]=a,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),a=i.map(x=>this.graph.nodes[di(x)[0]]),o=r.map(x=>di(x)[0]),l=new Set(o);let u=o.map(x=>this.graph.nodes[x]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=DL(e,u,this.weightMap,this._initNodes),p=[...a,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(x=>{const[w,C]=di(x),E=[];E[C]=e[x],m[w]=E});const g={},y=this.getFrozenTensorIds(m),v={};for(;p.length>0;){const x=this.processStack(a,p,n,m,v,y,l,g,c);await Promise.all(x)}d==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=u.filter(x=>!hf(x)&&!es(x.name,m,n)).map(x=>x.name);if(b.length>0){let x="";throw d!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${x}`)}return m}processStack(e,n,r,s,i,a,o,l,u){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&N("isConstant",f.node,s,r)&&([d]=bl(f.node.name,r)),s[f.node.name]==null){const h=_L(f.node,s,r,this._resourceManager);d||([d]=bl(f.node.name,r));const p=r.currentContext;rd(h)?c.push(h.then(m=>(s[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(d,f.node,s,r,a,o,l),this.processChildNodes(f.node,n,r,s,i,u),m))):(s[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,s,r,a,o,l),this.processChildNodes(f.node,n,r,s,i,u))}else this.processChildNodes(f.node,n,r,s,i,u)}return c}processChildNodes(e,n,r,s,i,a){e.children.forEach(o=>{const[l]=bl(o.name,r);i[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!es(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(u=>!!es(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=di(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const a=i.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,u)=>a[u]===-1||a[u]===l);P(o,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&P(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];a!=null?s[a.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=di(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=di(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class DPe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe="?tfjs-format=file",PPe="model.json";class MPe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=HX){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new DPe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return rd(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await mK(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Px(NL.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=NL.Instance.transformGraph(e.modelInitializer);this.initializer=new Px(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Jt?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Jt)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const a in i){const o=i[a];o.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,a)=>{var o,l,u;const c=(u=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[a])===null||u===void 0?void 0:u.resourceId;return c!=null?i[a]=this.resourceIdToCapturedInput[c]:i[a]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],a=n[i];this.resourceIdToCapturedInput[a.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&mt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function KQ(t,e={},n=HX){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=FPe(t));const r=new MPe(t,e,n);return await r.load(),r}function FPe(t){return t.endsWith("/")||(t=t+"/"),`${t}${PPe}${RPe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var RL;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(RL||(RL={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function et(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe=CD;class d4 extends I_{nextDataId(){return d4.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Fq(this,Io())}write(e,n,r){this.firstUse&&(this.firstUse=!1,le().get("IS_NODE")&&Gi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&w1(r[0])){const i=r.map(a=>tc(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Zl(s,i)}return VTe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>hc(s));return Nt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Nt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Io().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Us();return e(),{kernelMs:Us()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){et([e],"where");const n=this.readSync(e.dataId);return LPe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}d4.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const zPe=t=>{const{x:e}=t.inputs,n=t.backend;et(e,"abs");let r=new Float32Array(pe(e.shape));const s=n.data.get(e.dataId).values;return r=XQ(s),n.makeOutput(r,e.shape,e.dtype)},BPe={kernelName:k3,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lr(t){return(e,n,r,s,i)=>{const a=wt(e,n),o=a.length,l=at(a),u=pe(a),c=is(i,u),f=e.length,d=n.length,h=at(e),p=at(n),m=yp(e,a),g=yp(n,a);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<c.length;++y){const v=Qp(y,o,l),b=v.slice(-f);m.forEach(E=>b[E]=0);const x=Ko(b,f,h),w=v.slice(-d);g.forEach(E=>w[E]=0);const C=Ko(w,d,p);c[y]=t(r[x],s[C])}return[c,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",a)},o}const jPe={kernelName:B_,backendName:"cpu",kernelFunc:hi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mx(t,e,n="float32"){if(n==="complex64"){const s=Mx(t,e,"float32"),i=Mx(t,e,"float32");return hi({inputs:{real:s,imag:i},backend:t})}const r=Ss(pe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const UPe={kernelName:U1,backendName:"cpu",kernelFunc:sl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const VPe={kernelName:vO,backendName:"cpu",kernelFunc:pd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Nd([0],n),[i,a]=lr((o,l)=>o!==l?1:0)(e,[],t,s,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Sc(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return sl({inputs:{x:s},backend:n});const c=Mx(n,s.shape,s.dtype),f=Sc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),d=hi({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(s.dtype==="complex64"){const c=pd({inputs:{input:s},backend:n}),f=Sc({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),f}if(!zq(s.dtype,i)){const c=sl({inputs:{x:s},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const a=n.data.get(s.dataId).values,[o,l,u]=YQ(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,u)}const WPe={kernelName:$1,backendName:"cpu",kernelFunc:Sc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;et([a,o],t);const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=a.dtype==="string"?Ql(u):u,d=a.dtype==="string"?Ql(c):c,h=r||a.dtype,[p,m]=e(a.shape,o.shape,f,d,h);return l.makeTensorInfo(m,h,p)}:({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;if(a.dtype==="complex64"||o.dtype==="complex64"){const u=Sc({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=l.data.get(f.dataId).values,p=l.data.get(d.dataId).values,m=Sc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,b=l.data.get(y.dataId).values,x=l.data.get(v.dataId).values,[w,C,E]=n(a.shape,o.shape,h,p,b,x),A=l.makeTensorInfo(E,"float32",w),O=l.makeTensorInfo(E,"float32",C),R=hi({inputs:{real:A,imag:O},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(O),R}else{const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=r||a.dtype,[d,h]=e(a.shape,o.shape,u,c,f);return l.makeTensorInfo(h,f,d)}}}function AR(t){return(e,n,r,s,i,a)=>{const o=wt(e,n),l=pe(o),u=o.length,c=at(o),f=is("float32",l),d=is("float32",l),h=yp(e,o),p=yp(n,o),m=Zl(r,s),g=Zl(i,a),y=e.length,v=at(e),b=n.length,x=at(n);if(h.length+p.length===0)for(let w=0;w<f.length;w++){const C=w%m.length,E=w%g.length,A=t(m[C*2],m[C*2+1],g[E*2],g[E*2+1]);f[w]=A.real,d[w]=A.imag}else for(let w=0;w<f.length;w++){const C=Qp(w,u,c),E=C.slice(-y);h.forEach(z=>E[z]=0);const A=Ko(E,y,v),O=C.slice(-b);p.forEach(z=>O[z]=0);const R=Ko(O,b,x),F=t(m[A*2],m[A*2+1],g[R*2],g[R*2+1]);f[w]=F.real,d[w]=F.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQ=lr((t,e)=>t+e),GPe=AR((t,e,n,r)=>({real:t+n,imag:e+r})),wp=Rr(Jp,ZQ,GPe),HPe={kernelName:Jp,backendName:"cpu",kernelFunc:wp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $R(t,e,n,r,s){const i=pe(r),a=Ss(s,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?a[l]+=e[o]:a[l]+=1)}return a}function QQ(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],a=Nt([s,n],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<i;l++){const u=t.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?a.set(1,o,u):e.size>0?a.set(a.get(o,u)+e.get(o,l),o,u):a.set(a.get(o,u)+1,o,u))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JQ=lr((t,e)=>t&e),qPe=Rr(R3,JQ),KPe={kernelName:R3,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ul(t){return(e,n,r)=>{const s=rr(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rn(t,e,n){const r=ul(e);return Wc(t,r,n)}function Wc(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:a}=r;et(a,t);const o=i,l=o.data.get(a.dataId).values;let u;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Ql(l)}else u=l;const c=n||a.dtype,f=e(u,c,s);return o.makeTensorInfo(a.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ=ul(t=>Math.ceil(t)),XPe=Wc(I1,eJ),YPe={kernelName:I1,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(t,e,n,r){const s=rr(n,pe(e));if(r&&n!=="string"){let i=0;t.forEach(a=>{const o=pe(a.shape);s.set(a.vals,i),i+=o})}else{let i=0;t.forEach(a=>{const o=n==="string"?Ql(a.vals):a.vals;let l=0;for(let u=0;u<a.shape[0];++u){const c=u*e[1]+i;for(let f=0;f<a.shape[1];++f)s[c+f]=o[l++]}i+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJ=lr((t,e)=>t===e?1:0),rJ=Rr(V3,nJ,null,"bool"),ZPe={kernelName:V3,backendName:"cpu",kernelFunc:rJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sJ=ul(t=>Math.exp(t)),iJ=Wc(F1,sJ,"float32"),QPe={kernelName:F1,backendName:"cpu",kernelFunc:iJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJ=ul(t=>Math.expm1(t)),JPe=Wc(L1,aJ),eMe={kernelName:L1,backendName:"cpu",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ=ul(t=>Math.floor(t)),tMe=Wc(z1,oJ),nMe={kernelName:z1,backendName:"cpu",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lJ=lr((t,e)=>Math.floor(t/e)),rMe=Rr(B1,lJ,null,"int32"),sMe={kernelName:B1,backendName:"cpu",kernelFunc:rMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(t,e,n,r,s,i,a,o,l){const u=Nt([r,i],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<s;h++){const p=t[c*s+h];d+=p*a[h],f.push(p)}if(d<0||d>=l/i)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let h=0;h<i;h++)u.values[c*i+h]=e.get(...e.indexToLoc(d*i+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cJ(t,e,n){const r=Nt(n,t.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),o=a[0],l=a[2],u=e.locToIndex([o,l]);a[2]=e.values[u];const c=t.locToIndex(a);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJ=lr((t,e)=>t>e?1:0),iMe=Rr(q3,fJ,null,"bool"),aMe={kernelName:q3,backendName:"cpu",kernelFunc:iMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJ=lr((t,e)=>t>=e?1:0),oMe=Rr(j1,dJ,null,"bool"),lMe={kernelName:j1,backendName:"cpu",kernelFunc:oMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJ=lr((t,e)=>t<e?1:0),uMe=Rr(X3,hJ,null,"bool"),cMe={kernelName:X3,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pJ=lr((t,e)=>t<=e?1:0),fMe=Rr(Y3,pJ,null,"bool"),dMe={kernelName:Y3,backendName:"cpu",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mJ(t,e,n){const r=(e-t)/(n-1),s=Ss(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gJ=ul(t=>Math.log(t)),hMe=Wc(H1,gJ),pMe={kernelName:H1,backendName:"cpu",kernelFunc:hMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(t,e,n,r){const s=is(r,pe(n));for(let i=0;i<s.length;++i){const a=i*e;let o=t[a];for(let l=0;l<e;++l){const u=t[a+l];(Number.isNaN(u)||u>o)&&(o=u)}s[i]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vJ=lr((t,e)=>Math.max(t,e)),mMe=Rr(K1,vJ),gMe={kernelName:K1,backendName:"cpu",kernelFunc:mMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bJ=lr((t,e)=>Math.min(t,e)),yMe=Rr(X1,bJ),vMe={kernelName:X1,backendName:"cpu",kernelFunc:yMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IR=lr((t,e)=>t*e),bMe=AR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),h4=Rr(Z1,IR,bMe),xMe={kernelName:Z1,backendName:"cpu",kernelFunc:h4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xJ(t,e,n){const r=Pc(-1,n);return IR([],e,r,t,n)}function wMe(t){const{inputs:e,backend:n}=t,{x:r}=e;et(r,"neg");const s=n.data.get(r.dataId).values,[i,a]=xJ(s,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}const SMe={kernelName:oS,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJ=lr((t,e)=>t!==e?1:0),TMe=Rr(lS,wJ,null,"bool"),CMe={kernelName:lS,backendName:"cpu",kernelFunc:TMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _R(t,e,n,r,s){const i=e.length,a=pe(e),o=at(e),l=at(s),u=is(n,pe(s));for(let c=0;c<a;++c){const f=Qp(c,i,o),d=new Array(f.length);for(let p=0;p<d.length;p++)d[p]=f[r[p]];const h=Ko(d,i,l);u[h]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Js(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;et(s,"transpose");const a=s.shape.length,o=new Array(a);for(let f=0;f<o.length;f++)o[f]=s.shape[i[f]];const l=r.data.get(s.dataId).values,u=_R(l,s.shape,s.dtype,i,o);return{dataId:r.write(u,o,s.dtype),shape:o,dtype:s.dtype}}const EMe={kernelName:Ph,backendName:"cpu",kernelFunc:Js};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(t,e,n,r){const[s,i]=Hr(t,r),a=Si(e,"int32"),o=Ss(pe(s),a),l=pe(i);for(let u=0;u<o.length;++u){const c=u*l;let f=1;for(let d=0;d<l;++d)f*=n[c+d];o[u]=f}return{outVals:o,outShape:s,outDtype:a}}function kMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;et(s,"prod");const o=s.shape.length,l=Ot(i,s.shape),u=Hn(l,o);let c=l,f=s;const d=[];u!=null&&(f=Js({inputs:{x:s},backend:n,attrs:{perm:u}}),d.push(f),c=ar(c.length,o));const h=n.data.get(f.dataId).values,{outVals:p,outShape:m,outDtype:g}=SJ(f.shape,f.dtype,h,c);let y=m;return a&&(y=ir(m,l)),d.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const NMe={kernelName:pS,backendName:"cpu",kernelFunc:kMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Qp(s,e.length,at(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function $Me(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function IMe(t,e,n,r){const s=[];let i=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);$Me(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let f=1;f<l+1;++f)o[u].push(f*c)}for(let u=0;u<t.length;++u){let c=t[u],f=t[u]+1;for(let d=0;d<n.length;++d){const h=n[d],p=d+e.length-1;if(p>=0){const m=o[p],g=m[m.length-1]-h[c];for(let y=c;y<f;++y)o[p].push(h[y+1]+g)}c=h[c],f=h[f]}f!==c&&(s.push([c,f]),i+=f-c)}return{outSplits:o,valueSlices:s,numValues:i}}function _Me(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=rr("int32",r);e.push(s),t[n].forEach((i,a)=>s[a]=i)}return e}function PL(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function OMe(t,e,n,r,s,i){const a=PL(e,2)[1],o=PL(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let f=0;f<r;++f)s[l*o+f]=t[c*a+f];++l}}function DMe(t,e,n,r,s){const i=e.slice();i[0]=s;const a=rr(n,pe(i)),o=t.length,l=o===0?0:o/e[0];return OMe(t,e,r,l,a,i),[a,i]}function TJ(t,e,n,r,s,i,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(AMe(i,a,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:f,numValues:d}=IMe(i,a,t,u),h=_Me(c),p=DMe(n,r,s,f,d);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ML=2147483647;function CJ(t,e,n,r,s,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,u=a.length===0,c=[];o||c.push(e[0]),l||c.push(s[0]),u||c.push(a[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=rr("int32",f+1);d[0]=0;for(let g=0;g<f;++g){const y=o?t[0]:t[g],v=l?r[0]:r[g],b=u?i[0]:i[g];if(b===0)throw new Error("Requires delta != 0");let x;if(b>0&&v<y||b<0&&v>y)x=0;else if(x=Math.ceil(Math.abs((v-y)/b)),x>ML)throw new Error(`Requires ((limit - start) / delta) <= ${ML}`);d[g+1]=d[g]+x}const h=d[f],p=rr(n,h);let m=0;for(let g=0;g<f;++g){const y=d[g+1]-d[g];let v=o?t[0]:t[g];const b=u?i[0]:i[g];for(let x=0;x<y;++x)p[m++]=v,v+=b}return[d,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var fa=Qa;class Fx{constructor(e,n,r,s,i,a,o,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=iY(c),this.raggedRank=aY(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===fa.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===fa.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case fa.VALUE_ROWIDS:return Fx.getMaxWidthValueRowID(n);case fa.ROW_SPLITS:return Fx.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${fa[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let a=1;a<n;++a){const o=e[a];o!==s&&(s=o,i=Math.max(a-r,i),r=a)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return LL(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;oY(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=sY(this.raggedRank,s,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let a=0;for(let o=0;o<s;++o,a+=n)i.push(a);for(let o=s;o<e;++o)i.push(-1);return P(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,a=[];for(let o=0;o<i-1;++o){const l=e[o+1]-e[o];let u=Math.min(s,l),c=n[o];c===-1&&(u=0);for(let f=0;f<u;++f)a.push(c),c+=r;for(let f=0;f<l-u;++f)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,a=[];if(i===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];a.push(u);for(let c=1;c<i;++c){const f=e[c];if(f===l)u>=0&&(++o,o<s?u+=r:u=-1);else{if(o=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}a.push(u)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case fa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case fa.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${fa[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case fa.FIRST_DIM_SIZE:return e[0];case fa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case fa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${fa[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=LL(r,!1),a=rr(this.valuesDType,pe(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,s[u],r[u]);this.setOutput(this.raggedRank,l,a,i)}return[i,a]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,a=r;let o=s.slice();o=o.slice(e+1);const l=pe(o),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;ie(()=>{const m=ne(c,p);c=Lh(m,o).dataSync()})}let f=0,d=0,h=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===h){++h;continue}if(d<h){const g=i.subarray(f*l),y=a.subarray(d*l),v=(h-d)*l;FL(y,g,v)}if(p>=u){const g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)a.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=a.slice(h*l);FL(g,c,l),++h}m<0?(f=p+1,d=h):(f=p,d=h,h=d+1)}}}function FL(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function LL(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function EJ(t,e,n,r,s,i,a,o,l,u){return new Fx(t,e,n,r,s,i,a,o,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJ(t,e,n,r){const s=t===e,i=t<e&&n<0,a=e<t&&n>1;if(s||i||a)return Ss(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=Ss(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NJ=ul(t=>1/Math.sqrt(t)),RMe=Wc(r0,NJ),PMe={kernelName:r0,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kf(t,e,n,r,s,i,a,o,l,u){const c=[r/s,s],f=t.values,d=e.values;if(r===0)return Nt(n,e.dtype);const h=l instanceof Ir?l:Nt(c,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<i;p++){const m=[];let g=0;for(let y=0;y<a;y++){const v=f[p*a+y];m.push(v),g+=v*o[y]}if(g<0||g>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<s;y++)u?h.values[g*s+y]+=d[p*s+y]:h.values[g*s+y]=e.rank===0?d[0]:d[p*s+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MMe=ul(t=>1/(1+Math.exp(-t))),AJ=rn(l0,t=>1/(1+Math.exp(-t))),FMe={kernelName:l0,backendName:"cpu",kernelFunc:AJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(t,e,n,r,s){const i=FD(r,e,n),a=pe(n),o=at(r);if(i){const f=LD(e,o);return s==="string"?t.slice(f,f+a):t.subarray(f,f+a)}const l=s==="string"?Ql(t):t,u=Nt(r,s,l),c=Nt(n,s);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((p,m)=>p+e[m]);c.set(u.get(...h),...d)}return s==="string"?NY(c.values):c.values}function md(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r;et(s,"slice");const[o,l]=QS(s,i,a);PD(s,o,l);const u=n.data.get(s.dataId).values,c=$J(u,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,c)}const LMe={kernelName:xS,backendName:"cpu",kernelFunc:md};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(t,e,n,r,s,i,a){const o=e[0],l=i[0],u=new Array(l),c=new Array(o),f=e[1];if(l===0){if(o!==0)throw new Error(pY(o));const g=rr(n,0),y=rr(s,0);return[g,[0,f],y,u,c]}let d=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<o;++g){const y=t[g*f];if(y<0)throw new Error(mY(g,y));if(y>=l)throw new Error(gY(g,y,l));++p[y],d=d&&y>=h,h=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&d){const g=t,y=r;for(let v=0;v<o;++v)c[v]=v;return[g,[o,f],y,u,c]}else{const g=p[l-1],y=rr(n,g*f),v=rr(s,g),b=new Array(l).fill(0);for(let x=0;x<o;++x){const w=t[x*f],C=b[w],E=(w===0?0:p[w-1])+C;b[w]++;for(let A=0;A<f;++A)y[E*f+A]=t[x*f+A];v[E]=r[x],c[x]=E}for(let x=0;x<l;++x)if(b[x]===0){const C=x===0?0:p[x-1];y[C*f+0]=x;for(let E=1;E<f;++E)y[C*f+E]=0;v[C]=a}return[y,[g,f],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _J(t,e,n,r,s){const i=pe(r),a=e[0],o=s.length,l=[];let u=1,c=-1;for(let g=0;g<o;++g){const y=s[g];if(y===-1){if(c!==-1)throw new Error(yY(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(vY(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(bY());const g=Math.trunc(i/u);if(u*g!==i)throw new Error(xY(r,l));l[c]=g}if(pe(l)!==i)throw new Error(wY(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let g=d-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(o>0){p[o-1]=1;for(let g=o-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=rr(n,a*o);for(let g=0;g<a;++g){let y=0;for(let v=0;v<d;++v)y+=t[g*d+v]*h[v];for(let v=0;v<o;++v)m[g*o+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OR(t,e,n,r,s,i=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],u=l[1],f=o>0?s[o-1]+1:0;if(f<0)throw new Error(wN());const d=e.slice();d[0]=f;const h=d.reduce((b,x)=>b*x,1),p=rr(n,h);if(o===0)return f>0&&p.fill(a),[p,d];if(f<=0)throw new Error(wN());let m=0,g=1,y=0,v=s[m];for(;;){let b=0;if(g<o){if(b=s[g],v===b){++g;continue}if(v>=b)throw new Error(SY())}if(v<0||v>=f)throw new Error(TY(v,f));v>y&&p.fill(a,y*u,v*u);for(let x=m;x<g;++x){const w=r[x];if(w<0||w>=l[0])throw new Error(CY(x,r[x],l[0]));for(let C=0;C<u;C++)p[v*u+C]+=t[w*u+C]}if(i)for(let x=0;x<u;x++)p[v*u+x]/=g-m;if(m=g,++g,y=v+1,v=b,g>o)break}return y<f&&p.fill(a,y*u,f*u),[p,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zMe=ul(t=>Math.sqrt(t)),BMe=rn(c0,t=>Math.sqrt(t)),jMe={kernelName:c0,backendName:"cpu",kernelFunc:BMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OJ=lr((t,e)=>{const n=t-e;return n*n}),UMe=Rr(f0,OJ),VMe={kernelName:f0,backendName:"cpu",kernelFunc:UMe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ=ul((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),WMe=Wc(ES,DJ),GMe={kernelName:ES,backendName:"cpu",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RJ(t,e,n,r){const s=Nt(t,e.dtype);for(let i=0;i<s.size;i++){const a=s.indexToLoc(i),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];s.set(e.get(...o),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HMe{constructor(e,n,r,s,i,a){this.separator=tc(e),this.nGramWidths=n,this.leftPad=tc(r),this.rightPad=tc(s),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,a){for(let o=0;o<i;++o){const l=this.getPadWidth(a),u=Math.max(0,l-o),c=Math.max(0,l-(i-(o+1))),f=a-(u+c),d=n+(u>0?0:o-l);let h=0;h+=u*this.leftPad.length;for(let v=0;v<f;++v)h+=e[d+v].length;h+=c*this.rightPad.length;const p=u+c+f-1;h+=p*this.separator.length,r[s+o]=new Uint8Array(h);const m=r[s+o];let g=0;const y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<f-1;++v)y(e[d+v]),y(this.separator);if(f>0){y(e[d+f-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<s;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,a=rr("int32",s);if(r===0||s===0){const l=new Array(r);for(let u=0;u<=i;++u)a[u]=0;return[l,a]}a[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&c===0&&(c=1),a[l]=a[l-1]+c}const o=new Array(a[i]);for(let l=0;l<i;++l){const u=n[l];let c=a[l];if(this.nGramWidths.forEach(f=>{const d=n[l+1]-n[l],h=this.getNumNGrams(d,f);this.createNGrams(e,u,o,c,h,f),c+=h}),this.preserveShort&&c===a[l]){const f=n[l+1]-n[l];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,u,o,c,1,d)}}return[o,a]}}function PJ(t,e,n,r,s,i,a,o){return new HMe(n,r,s,i,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=t.indexOf(i);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const a=t.subarray(s,i);(!n||a.length!==0)&&r.push(a),s=i+1}}function MJ(t,e,n){const r=t.length,s=[];let i=0,a=0;const o=new Array(r);for(let d=0;d<r;++d){const h=s.length;qMe(t[d],e,n,s);const p=s.length-h;o[d]=p,i+=p,a=Math.max(a,p)}const l=rr("int32",i*2),u=new Array(i),c=[r,a];let f=0;for(let d=0;d<r;++d)for(let h=0;h<o[d];++h)l[f*2]=d,l[f*2+1]=h,u[f]=s[f],++f;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(t,e){const n=rr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=oCe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ=lr((t,e)=>t-e),KMe=AR((t,e,n,r)=>({real:t-n,imag:e-r})),DR=Rr(d0,LJ,KMe),XMe={kernelName:d0,backendName:"cpu",kernelFunc:DR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=Nt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=i[l]%t.shape[l];const o=t.locToIndex(a);r.values[s]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gg=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function BJ(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,u=Math.log(o),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(o-c)/o)*Math.sign(l-o/2),d=Math.max(n,Math.floor(e-l*c/o+f)),h=Math.min(r,Math.floor(e+(o-l)*c/o+f));BJ(t,e,d,h)}const s=t[e];let i=n,a=r;for(sh(t,n,e),gg(t[r],s)>0&&sh(t,n,r);i<a;){for(sh(t,i,a),i++,a--;gg(t[i],s)<0;)i=i+1;for(;gg(t[a],s)>0;)a=a-1}gg(t[n],s)===0?sh(t,n,a):(a=a+1,sh(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function jJ(t,e,n,r,s){const i=e[e.length-1],[a,o]=[t.length/i,i],l=is(n,a*r),u=is("int32",a*r);for(let f=0;f<a;f++){const d=f*o,h=t.subarray(d,d+o);let p=new Array(h.length);h.forEach((v,b)=>p[b]={value:v,index:b}),r<p.length&&(BJ(p,r),p=p.slice(0,r)),s&&p.sort(gg);const m=f*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Nt(c,n,l),Nt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(t,e,n,r){const s=Ot(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const a=new Map,o=new Int32Array(n[s]),l=new Ir(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)y.push(l.get(v,p,b));m=y.join(",")}const g=a.get(m);if(g!=null)o[p]=g;else{const y=a.size;a.set(m,y),o[p]=y,u.push(p)}}const f=i.slice();f[1]=a.size;const d=new Ir(f,r);u.forEach((p,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)d.set(l.get(g,p,y),g,m,y)});const h=n.slice();return h[s]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YMe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:ZQ,bincountImpl:$R,bincountReduceImpl:QQ,bitwiseAndImpl:JQ,castImpl:YQ,ceilImpl:eJ,concatImpl:tJ,equalImpl:nJ,expImpl:sJ,expm1Impl:aJ,floorDivImpl:lJ,floorImpl:oJ,gatherNdImpl:uJ,gatherV2Impl:cJ,greaterEqualImpl:dJ,greaterImpl:fJ,lessEqualImpl:pJ,lessImpl:hJ,linSpaceImpl:mJ,logImpl:gJ,maxImpl:yJ,maximumImpl:vJ,minimumImpl:bJ,multiplyImpl:IR,negImpl:xJ,notEqualImpl:wJ,prodImpl:SJ,raggedGatherImpl:TJ,raggedRangeImpl:CJ,raggedTensorToTensorImpl:EJ,rangeImpl:kJ,rsqrtImpl:NJ,scatterImpl:kf,sigmoidImpl:MMe,simpleAbsImpl:XQ,sliceImpl:$J,sparseFillEmptyRowsImpl:IJ,sparseReshapeImpl:_J,sparseSegmentReductionImpl:OR,sqrtImpl:zMe,squaredDifferenceImpl:OJ,staticRegexReplaceImpl:DJ,stridedSliceImpl:RJ,stringNGramsImpl:PJ,stringSplitImpl:MJ,stringToHashBucketFastImpl:FJ,subImpl:LJ,tileImpl:zJ,topKImpl:jJ,transposeImpl:_R,uniqueImpl:UJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fK("cpu",()=>new d4,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VJ=rn(P1,t=>t>=0?t:Math.exp(t)-1),ZMe={kernelName:P1,backendName:"cpu",kernelFunc:VJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;et([s],"leakyRelu");const a=pe(s.shape),o=n.data.get(s.dataId).values,l=is("float32",a);for(let u=0;u<o.length;u++)l[u]=o[u]<0?i*o[u]:o[u];return n.makeTensorInfo(s.shape,"float32",l)}const QMe={kernelName:K3,backendName:"cpu",kernelFunc:WJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JMe=lr((t,e)=>t<0?e*t:t);function GJ(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;et([r,s],"prelu");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,[o,l]=JMe(r.shape,s.shape,i,a,"float32");return n.makeTensorInfo(l,"float32",o)}const eFe={kernelName:hS,backendName:"cpu",kernelFunc:GJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJ=rn(e0,t=>Math.max(0,t)),tFe={kernelName:e0,backendName:"cpu",kernelFunc:HJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJ=rn(t0,t=>Math.min(Math.max(0,t),6)),nFe={kernelName:t0,backendName:"cpu",kernelFunc:qJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lx(t,e,n,r,s){if(n==="linear")return sl({inputs:{x:e},backend:t});if(n==="relu")return HJ({inputs:{x:e},backend:t});if(n==="elu")return VJ({inputs:{x:e},backend:t});if(n==="relu6")return qJ({inputs:{x:e},backend:t});if(n==="prelu")return GJ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return WJ({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return AJ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=pe(s.shape),o=Lq(i,a),l=pe(o);P(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const u=n.data.get(s.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const rFe={kernelName:mS,backendName:"cpu",kernelFunc:bn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;et([s,i],"matMul");const l=s.shape.length,u=i.shape.length,c=a?s.shape[l-2]:s.shape[l-1],f=o?i.shape[u-1]:i.shape[u-2],d=a?s.shape[l-1]:s.shape[l-2],h=o?i.shape[u-2]:i.shape[u-1],p=s.shape.slice(0,-2),m=i.shape.slice(0,-2),g=pe(p),y=pe(m),b=wt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);P(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${a} and transposeB=${o} must match.`);const x=a?[g,c,d]:[g,d,c],w=o?[y,h,f]:[y,f,h],C=bn({inputs:{x:s},backend:n,attrs:{shape:x}}),E=bn({inputs:{x:i},backend:n,attrs:{shape:w}}),A=a?C.shape[1]:C.shape[2],O=a?C.shape[2]:C.shape[1],R=o?E.shape[1]:E.shape[2],F=Math.max(g,y),z=n.data.get(C.dataId).values,j=n.data.get(E.dataId).values,H=at(C.shape),J=at(E.shape),[U,Y,Q]=a?[H[0],1,H[1]]:[H[0],H[1],1],[se,he,be]=o?[1,J[1],J[0]]:[J[1],1,J[0]],ue=O*R,Ne=Nt([F,O,R],C.dtype),_e=Ne.values,Ee=n.blockSize;for(let Me=0;Me<F;Me++){const He=Me%g,Ze=Me%y;for(let ye=0;ye<O;ye+=Ee){const Re=Math.min(ye+Ee,O);for(let Oe=0;Oe<R;Oe+=Ee){const me=Math.min(Oe+Ee,R);for(let ft=0;ft<A;ft+=Ee){const st=Math.min(ft+Ee,A);for(let ot=ye;ot<Re;ot++)for(let lt=Oe;lt<me;lt++){let Ct=0;for(let St=ft;St<st;St++){const Pn=z[He*U+ot*Y+St*Q],K=j[St*se+lt*he+Ze*be];Ct+=Pn*K}_e[Me*ue+(ot*R+lt)]+=Ct}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(b,Ne.dtype,Ne.values)}const sFe={kernelName:O3,backendName:"cpu",kernelFunc:KJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;let d,h,p;const m=[];d=KJ({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(h=wp({inputs:{a:d,b:a},backend:n}),m.push(d),d=h),c&&(p=Lx(n,d,c,o,f),m.push(d),d=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return d}const aFe={kernelName:gx,backendName:"cpu",kernelFunc:iFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe=rn(S1,t=>Math.acos(t)),lFe={kernelName:S1,backendName:"cpu",kernelFunc:oFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe=rn(T1,t=>Math.acosh(t)),cFe={kernelName:T1,backendName:"cpu",kernelFunc:uFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(t){const{inputs:e,backend:n}=t,r=e;et(e,"addN");const s=r.map(o=>n.data.get(o.dataId).values),i=Nt(r[0].shape,r[0].dtype),a=i.values;for(let o=0;o<r.length;o++){const l=s[o];for(let u=0;u<a.length;u++)a[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const dFe={kernelName:N3,backendName:"cpu",kernelFunc:fFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;et(s,"all");const o=Ot(i,s.shape);let l=o;const u=Hn(l,s.shape.length);let c=s;u!=null&&(c=Js({inputs:{x:s},backend:n,attrs:{perm:u}}),l=ar(l.length,s.shape.length)),cs("all",l,c.shape.length);const[f,d]=Hr(c.shape,l),h=pe(d),p=Ss(pe(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];b=b&&w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const y=ir(f,o),v=bn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const pFe={kernelName:R_,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;et(s,"any");const o=Ot(i,s.shape);let l=o;const u=Hn(l,s.shape.length);let c=s;u!=null&&(c=Js({inputs:{x:s},backend:n,attrs:{perm:u}}),l=ar(l.length,s.shape.length)),cs("any",l,c.shape.length);const[f,d]=Hr(c.shape,l),h=pe(d),p=Ss(pe(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];b=b||w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const y=ir(f,o),v=bn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const gFe={kernelName:P_,backendName:"cpu",kernelFunc:mFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;et(s,"argMax");let a=Ot(i,s.shape);const o=Hn(a,s.shape.length);let l=s;const u=[];o!=null&&(l=Js({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),a=ar(a.length,l.shape.length)),a=[a[0]],cs("argMax",a,l.shape.length);const[c,f]=Hr(l.shape,a),d=pe(c),h=Ss(d,"int32"),p=pe(f),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w>v&&(v=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const vFe={kernelName:A3,backendName:"cpu",kernelFunc:yFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;et(s,"argMin");let a=Ot(i,s.shape);const o=Hn(a,s.shape.length);let l=s;const u=[];o!=null&&(l=Js({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),a=ar(a.length,l.shape.length)),a=[a[0]],cs("argMin",a,l.shape.length);const[c,f]=Hr(l.shape,a),d=pe(c),h=Ss(d,"int32"),p=pe(f),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w<v&&(v=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const xFe={kernelName:$3,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wFe=rn(C1,t=>Math.asin(t)),SFe={kernelName:C1,backendName:"cpu",kernelFunc:wFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe=rn(E1,t=>Math.asinh(t)),CFe={kernelName:E1,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EFe=rn(k1,t=>Math.atan(t)),kFe={kernelName:k1,backendName:"cpu",kernelFunc:EFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe=lr((t,e)=>Math.atan2(t,e)),AFe=Rr(A1,NFe),$Fe={kernelName:A1,backendName:"cpu",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFe=rn(N1,t=>Math.atanh(t)),_Fe={kernelName:N1,backendName:"cpu",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RR(t,e,n,r,s,i){const a=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,c=s.effectiveFilterHeight,f=s.effectiveFilterWidth,d=s.padInfo.top,h=s.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Nt(s.outShape,n),g=m.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],b=s.outShape[3];for(let x=0;x<s.batchSize;++x){const w=x*y,C=x*r[0];for(let E=0;E<s.inChannels;++E)for(let A=0;A<s.outHeight;++A){const O=A*a-d,R=Math.max(0,O),F=Math.min(s.inHeight,c+O),z=w+A*v;for(let j=0;j<s.outWidth;++j){const H=j*o-h,J=Math.max(0,H),U=Math.min(s.inWidth,f+H);let Y=p,Q=0,se=0;for(let be=R;be<F;be+=l){const ue=C+be*r[1];for(let Ne=J;Ne<U;Ne+=u){const _e=ue+Ne*r[2],Ee=t[_e+E];i==="max"&&Ee>Y?Y=Ee:i==="avg"&&(Q+=Ee,se++)}if(isNaN(Y))break}const he=z+j*b+E;g[he]=i==="avg"?Q/se:Y}}}return m}function XJ(t,e,n,r,s=!1,i=!1){const a=Nt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Nt(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const b=v*o-h;let x=b;for(;x<0;)x+=u;const w=Math.min(r.inHeight,f+b);for(let C=0;C<r.outWidth;++C){const E=C*l-p;let A=E;for(;A<0;)A+=c;const O=Math.min(r.inWidth,d+E);let R=Number.NEGATIVE_INFINITY,F=-1;for(let z=x;z<w;z+=u){const j=z-b;for(let H=A;H<O;H+=c){const J=H-E,U=m.get(g,z,H,y);U>R&&(R=U,s?F=i?((g*r.inHeight+z)*r.inWidth+H)*r.inChannels+y:(z*r.inWidth+H)*r.inChannels+y:F=j*d+J)}}a.set(F,g,v,C,y)}}return a}function YJ(t,e,n,r,s,i){const a=s.strideDepth,o=s.strideHeight,l=s.strideWidth,u=s.dilationDepth,c=s.dilationHeight,f=s.dilationWidth,d=s.effectiveFilterDepth,h=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Nt(s.outShape,n),x=b.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[2]*s.outShape[3]*s.outShape[4],E=s.outShape[3]*s.outShape[4],A=s.outShape[4];for(let O=0;O<s.batchSize;++O){const R=O*w,F=O*r[0];for(let z=0;z<s.inChannels;++z)for(let j=0;j<s.outDepth;++j){const H=j*a-m;let J=H;for(;J<0;)J+=u;const U=Math.min(s.inDepth,d+H),Y=R+j*C;for(let Q=0;Q<s.outHeight;++Q){const se=Q*o-g;let he=se;for(;he<0;)he+=c;const be=Math.min(s.inHeight,h+se),ue=Y+Q*E;for(let Ne=0;Ne<s.outWidth;++Ne){const _e=Ne*l-y;let Ee=_e;for(;Ee<0;)Ee+=f;const Me=Math.min(s.inWidth,p+_e),He=ue+Ne*A;let Ze=v,ye=0,Re=0;for(let me=J;me<U;me+=u){const ft=F+me*r[1];for(let st=he;st<be;st+=c){const ot=ft+st*r[2];for(let lt=Ee;lt<Me;lt+=f){const Ct=ot+lt*r[3],St=t[Ct+z];if(i==="max"&&St>Ze?Ze=St:i==="avg"&&(ye+=St,Re++),isNaN(Ze))break}if(isNaN(Ze))break}if(isNaN(Ze))break}const Oe=He+z;x[Oe]=i==="avg"?ye/Math.max(Re,1):Ze}}}}return b}function OFe(t,e){const n=Nt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=a;const x=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const C=w*s-h;let E=C;for(;E<0;)E+=o;const A=Math.min(e.inHeight,c+C);for(let O=0;O<e.outWidth;++O){const R=O*i-p;let F=R;for(;F<0;)F+=l;const z=Math.min(e.inWidth,f+R);let j=Number.NEGATIVE_INFINITY,H=-1;for(let J=b;J<x;J+=a){const U=J-v;for(let Y=E;Y<A;Y+=o){const Q=Y-C;for(let se=F;se<z;se+=l){const he=se-R,be=t.get(m,J,Y,se,g);be>=j&&(j=be,H=U*c*f+Q*c+he)}}}n.set(H,m,y,w,O,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;et(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,u=1;P(us(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ga(s.shape,i,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&jt(c.inShape,c.outShape))f=sl({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,h=at(s.shape),p=RR(d,s.shape,s.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return f}const RFe={kernelName:I3,backendName:"cpu",kernelFunc:DFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;et(s,"avgPool3d");const c=lu(s.shape,i,a,1,o,l,u),f=n.data.get(s.dataId).values,d=YJ(f,s.shape,s.dtype,at(s.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const MFe={kernelName:_3,backendName:"cpu",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;et([s,i],"avgPool3DGrad");const c=lu(i.shape,a,o,1,l,u),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=x-1-c.padInfo.front,A=C-1-c.padInfo.left,O=w-1-c.padInfo.top,R=Nt(i.shape,"float32"),F=1/(p*m*g),z=n.bufferSync(s);for(let j=0;j<c.batchSize;++j)for(let H=0;H<c.inChannels;++H)for(let J=0;J<c.inDepth;++J)for(let U=0;U<c.inHeight;++U)for(let Y=0;Y<c.inWidth;++Y){const Q=J-E,se=U-O,he=Y-A;let be=0;for(let ue=0;ue<x;ue+=y){const Ne=(Q+ue)/f;if(!(Ne<0||Ne>=c.outDepth||Math.floor(Ne)!==Ne))for(let _e=0;_e<w;_e+=v){const Ee=(se+_e)/d;if(!(Ee<0||Ee>=c.outHeight||Math.floor(Ee)!==Ee))for(let Me=0;Me<C;Me+=b){const He=(he+Me)/h;if(He<0||He>=c.outWidth||Math.floor(He)!==He)continue;const Ze=z.get(j,Ne,Ee,He,H);be+=Ze}}}R.set(be*F,j,J,U,Y,H)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const LFe={kernelName:F_,backendName:"cpu",kernelFunc:FFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;et([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=Ga(a.shape,o,l,1,u),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=Nt(a.shape,"float32"),C=1/(h*p),E=n.data.get(s.dataId).values,A=Nt(s.shape,"float32",E);for(let O=0;O<c.batchSize;++O)for(let R=0;R<c.inChannels;++R)for(let F=0;F<c.inHeight;++F)for(let z=0;z<c.inWidth;++z){const j=F-x,H=z-b;let J=0;for(let U=0;U<y;U+=m){const Y=(j+U)/f;if(!(Y<0||Y>=c.outHeight||Math.floor(Y)!==Y))for(let Q=0;Q<v;Q+=g){const se=(H+Q)/d;if(se<0||se>=c.outWidth||Math.floor(se)!==se)continue;const he=A.get(O,Y,se,R);J+=he}}w.set(J*C,O,F,z,R)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const BFe={kernelName:M_,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:a,mean:o,variance:l}=e;P(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),et([s,o,l,i,a],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(s.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=h.length,v=d.length,b=f.length;let x=0,w=0,C=0,E=0;for(let A=0;A<c.length;++A)m[A]=p[x++]+(c[A]-f[w++])*h[C++]/Math.sqrt(d[E++]+u),x>=g&&(x=0),w>=b&&(w=0),C>=y&&(C=0),E>=v&&(E=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const UFe={kernelName:G3,backendName:"cpu",kernelFunc:jFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;et([s],"batchToSpaceND");const o=i.reduce((y,v)=>y*v),l=E0(s.shape,i,o),u=k0(l.length,i.length),c=N0(s.shape,i,o),f=VD(a,i.length),d=WD(c,a,i.length),h=bn({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Js({inputs:{x:h},backend:n,attrs:{perm:u}}),m=bn({inputs:{x:p},backend:n,attrs:{shape:c}}),g=md({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const WFe={kernelName:D3,backendName:"cpu",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=$R(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const HFe={kernelName:L_,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=wt(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const KFe={kernelName:z_,backendName:"cpu",kernelFunc:qFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe=rn(_1,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),YFe={kernelName:_1,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZFe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(pe(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<o.length;u++){const c=o[u],f=l[u];r[u]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},QFe={kernelName:P3,backendName:"cpu",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const JFe={kernelName:sO,backendName:"cpu",kernelFunc:Sp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Ot(s,e[0].shape)[0],a=e.map(m=>m.shape);BD(a,i);let o=Xo(e.map(m=>m.shape),i);if(pe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(m=>pe(m.shape)>0);if(l.length===1)return sl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(x=>pd({inputs:{input:x},backend:n})),g=l.map(x=>Sp({inputs:{input:x},backend:n})),y=Tp({inputs:m,backend:n,attrs:{axis:i}}),v=Tp({inputs:g,backend:n,attrs:{axis:i}}),b=hi({inputs:{real:y,imag:v},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}const u=l.map(m=>{const y=[-1,pe(m.shape.slice(i))];return bn({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));o=Xo(u.map(m=>m.shape),1);const f=u[0].shape[0]===1,d=tJ(c,o,e[0].dtype,f),h=Xo(l.map(m=>m.shape),i),p=n.makeTensorInfo(h,e[0].dtype,d);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const e8e={kernelName:M3,backendName:"cpu",kernelFunc:Tp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r;et([s,i],"conv2d");const f=uu(l),d=Gr(s.shape,i.shape,a,u,o,c,!1,f),h=d.filterHeight,p=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b=d.dataFormat==="channelsLast",x=new Ir(d.outShape,s.dtype),w=at(s.shape),C=at(i.shape),E=w[0],A=b?w[1]:w[2],O=b?w[2]:1,R=b?1:w[1],F=x.strides[0],z=b?x.strides[1]:x.strides[2],j=b?x.strides[2]:1,H=b?1:x.strides[1],J=n.data.get(s.dataId).values,U=n.data.get(i.dataId).values,Y=x.values;for(let Q=0;Q<d.batchSize;++Q){const se=Q*E,he=Q*F;for(let be=0;be<d.outHeight;++be){const ue=he+be*z,Ne=be*d.strideHeight-v;for(let _e=0;_e<h;++_e){const Ee=Ne+_e*m;if(Ee<0||Ee>=d.inHeight)continue;const Me=_e*C[0],He=se+Ee*A;for(let Ze=0;Ze<d.outWidth;++Ze){const ye=ue+Ze*j,Re=Ze*d.strideWidth-y;for(let Oe=0;Oe<p;++Oe){const me=Re+Oe*g;if(me<0||me>=d.inWidth)continue;const ft=Me+Oe*C[1],st=He+me*O;let ot=ft;for(let lt=0;lt<d.inChannels;++lt){const Ct=J[st+lt*R];for(let St=0;St<d.outChannels;++St)Y[ye+St*H]+=Ct*U[ot+St];ot+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,Y)}const t8e={kernelName:F3,backendName:"cpu",kernelFunc:ZJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;et([s,i],"conv2dBackpropFilter");const f=uu(l),d=Gr(s.shape,c,a,1,o,u,!1,f),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=d,y=d.dataFormat==="channelsLast",v=new Ir(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,E=new Ir(s.shape,s.dtype,w),A=new Ir(i.shape,i.dtype,C);for(let O=0;O<m;++O){const R=Math.max(0,Math.ceil((x-O)/h)),F=Math.min(d.outHeight,(d.inHeight+x-O)/h);for(let z=0;z<g;++z){const j=Math.max(0,Math.ceil((b-z)/p)),H=Math.min(d.outWidth,(d.inWidth+b-z)/p);for(let J=0;J<d.inChannels;++J)for(let U=0;U<d.outChannels;++U){let Y=0;for(let Q=0;Q<d.batchSize;++Q)for(let se=R;se<F;++se){const he=O+se*h-x;for(let be=j;be<H;++be){const ue=z+be*p-b;y?Y+=E.get(Q,he,ue,J)*A.get(Q,se,be,U):Y+=E.get(Q,J,he,ue)*A.get(Q,U,se,be)}}v.set(Y,O,z,J,U)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const r8e={kernelName:j_,backendName:"cpu",kernelFunc:n8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r;et([s,i],"conv2dBackpropInput");const f=at(i.shape),d=at(s.shape);let h=uu(u);const p=Gr(a,i.shape,o,1,l,c,!1,h),m=new Ir(p.inShape,"float32"),g=m.values,y=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,[b,x,w]=f,{batchSize:C,filterHeight:E,filterWidth:A,inChannels:O,inHeight:R,inWidth:F,outChannels:z,outHeight:j,outWidth:H,strideHeight:J,strideWidth:U}=p;h=p.dataFormat;const Y=E-1-p.padInfo.top,Q=A-1-p.padInfo.left,se=h==="channelsLast",he=m.strides[0],be=se?m.strides[1]:m.strides[2],ue=se?m.strides[2]:1,Ne=se?1:m.strides[1],_e=d[0],Ee=se?d[1]:d[2],Me=se?d[2]:1,He=se?1:d[1];for(let Ze=0;Ze<C;++Ze)for(let ye=0;ye<O;++ye)for(let Re=0;Re<R;++Re){const Oe=Re-Y,me=Math.max(0,Math.ceil(Oe/J)),ft=Math.min(j,(E+Oe)/J);for(let st=0;st<F;++st){const ot=st-Q,lt=Math.max(0,Math.ceil(ot/U)),Ct=Math.min(H,(A+ot)/U);let St=0;for(let K=me;K<ft;++K){const ae=K*J-Oe;for(let ve=lt;ve<Ct;++ve){const je=ve*U-ot,Pe=_e*Ze+Ee*K+Me*ve,De=b*(E-1-ae)+x*(A-1-je)+w*ye;for(let We=0;We<z;++We){const vt=y[Pe+He*We],dt=v[De+We];St+=vt*dt}}}const Pn=he*Ze+be*Re+ue*st+Ne*ye;g[Pn]=St}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const i8e={kernelName:L3,backendName:"cpu",kernelFunc:s8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r;et([s,i],"conv3d");const u=Lc(s.shape,i.shape,a,l,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new Ir(u.outShape,s.dtype),w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,E=x.values,A=at(s.shape),O=at(i.shape);for(let R=0;R<u.batchSize;++R){const F=R*A[0],z=R*x.strides[0];for(let j=0;j<u.outDepth;++j){const H=z+j*x.strides[1],J=j*u.strideDepth-y;for(let U=0;U<c;++U){const Y=J+U*h;if(Y<0||Y>=u.inDepth)continue;const Q=U*O[0],se=F+Y*A[1];for(let he=0;he<u.outHeight;++he){const be=H+he*x.strides[2],ue=he*u.strideHeight-b;for(let Ne=0;Ne<f;++Ne){const _e=ue+Ne*p;if(_e<0||_e>=u.inHeight)continue;const Ee=Q+Ne*O[1],Me=se+_e*A[2];for(let He=0;He<u.outWidth;++He){const Ze=be+He*u.outChannels,ye=He*u.strideWidth-v;for(let Re=0;Re<d;++Re){const Oe=ye+Re*m;if(Oe<0||Oe>=u.inWidth)continue;const me=Ee+Re*O[2],ft=Me+Oe*u.inChannels;let st=me;for(let ot=0;ot<u.inChannels;++ot){const lt=w[ft+ot];for(let Ct=0;Ct<u.outChannels;++Ct)E[Ze+Ct]+=lt*C[st+Ct];st+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const o8e={kernelName:z3,backendName:"cpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r;et([s,i],"conv3dBackpropFilterV2");const u=at(s.shape),c=at(i.shape),f=Lc(s.shape,l,a,1,o),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,v=new Ir(f.filterShape,"float32"),b=v.values,[x,w,C,E]=v.strides,A=n.data.get(i.dataId).values,[O,R,F,z]=c,j=n.data.get(s.dataId).values,[H,J,U,Y]=u,Q=f.padInfo.front,se=f.padInfo.left,he=f.padInfo.top;for(let be=0;be<m;++be){const ue=Math.max(0,Math.ceil((Q-be)/d)),Ne=Math.min(f.outDepth,(f.inDepth+Q-be)/d),_e=be*x;for(let Ee=0;Ee<g;++Ee){const Me=Math.max(0,Math.ceil((he-Ee)/h)),He=Math.min(f.outHeight,(f.inHeight+he-Ee)/h),Ze=Ee*w+_e;for(let ye=0;ye<y;++ye){const Re=Math.max(0,Math.ceil((se-ye)/p)),Oe=Math.min(f.outWidth,(f.inWidth+se-ye)/p),me=ye*C+Ze;for(let ft=0;ft<f.inChannels;++ft){const st=ft*E+me;for(let ot=0;ot<f.outChannels;++ot){let lt=0;for(let Ct=0;Ct<f.batchSize;++Ct){const St=Ct*H,Pn=Ct*O;for(let K=ue;K<Ne;++K){const ve=(be+K*d-Q)*J+St,je=K*R+Pn;for(let Pe=Me;Pe<He;++Pe){const We=(Ee+Pe*h-he)*U+ve,vt=Pe*F+je;for(let dt=Re;dt<Oe;++dt){const ti=(ye+dt*p-se)*Y+We,qr=dt*z+vt;lt+=j[ti+ft]*A[qr+ot]}}}}b[st+ot]=lt}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const u8e={kernelName:U_,backendName:"cpu",kernelFunc:l8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r;et([s],"conv3dBackpropInputV2");const u=at(s.shape),c=at(i.shape),f=Lc(l,i.shape,o,1,a),d=new Ir(f.inShape,"float32"),h=d.values,[p,m,g,y]=d.strides,v=n.data.get(s.dataId).values,[b,x,w,C]=u,E=n.data.get(i.dataId).values,[A,O,R,F]=c,{batchSize:z,filterDepth:j,filterHeight:H,filterWidth:J,inChannels:U,inDepth:Y,inHeight:Q,inWidth:se,outChannels:he,outDepth:be,outHeight:ue,outWidth:Ne,strideDepth:_e,strideHeight:Ee,strideWidth:Me}=f,He=j-1-f.padInfo.front,Ze=H-1-f.padInfo.top,ye=J-1-f.padInfo.left;for(let Re=0;Re<z;++Re)for(let Oe=0;Oe<U;++Oe)for(let me=0;me<Y;++me){const ft=me-He,st=Math.max(0,Math.ceil(ft/_e)),ot=Math.min(be,(j+ft)/_e);for(let lt=0;lt<Q;++lt){const Ct=lt-Ze,St=Math.max(0,Math.ceil(Ct/Ee)),Pn=Math.min(ue,(H+Ct)/Ee);for(let K=0;K<se;++K){const ae=K-ye,ve=Math.max(0,Math.ceil(ae/Me)),je=Math.min(Ne,(J+ae)/Me);let Pe=0;for(let De=st;De<ot;++De){const We=De*_e-ft;for(let vt=St;vt<Pn;++vt){const dt=vt*Ee-Ct;for(let wn=ve;wn<je;++wn){const ti=wn*Me-ae,qr=b*Re+x*De+w*vt+C*wn,hu=A*(j-1-We)+O*(H-1-dt)+R*(J-1-ti)+F*Oe;for(let _i=0;_i<he;++_i){const qn=v[qr+_i],Sn=E[hu+_i];Pe+=qn*Sn}}}}h[p*Re+m*me+g*lt+y*K+Oe]=Pe}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const f8e={kernelName:V_,backendName:"cpu",kernelFunc:c8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8e=rn(O1,t=>Math.cos(t)),h8e={kernelName:O1,backendName:"cpu",kernelFunc:d8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8e=rn(D1,t=>Math.cosh(t)),m8e={kernelName:D1,backendName:"cpu",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:u}=r,[c,f,d,h]=s.shape,p=i.shape[0],[m,g]=o,y=Nt([p,m,g,h],"float32"),v=n.data.get(i.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(s.dataId).values,w=at(s.shape),C=at(y.shape);for(let E=0;E<p;E++){const A=E*4,O=v[A],R=v[A+1],F=v[A+2],z=v[A+3],j=b[E];if(j>=c)continue;const H=m>1?(F-O)*(f-1)/(m-1):0,J=g>1?(z-R)*(d-1)/(g-1):0;for(let U=0;U<m;U++){const Y=m>1?O*(f-1)+U*H:.5*(O+F)*(f-1);if(Y<0||Y>f-1){for(let Q=0;Q<g;Q++)for(let se=0;se<h;se++){const he=se+Q*C[2]+U*C[1]+E*C[0];y.values[he]=u}continue}if(l==="bilinear"){const Q=Math.floor(Y),se=Math.ceil(Y),he=Y-Q;for(let be=0;be<g;be++){const ue=g>1?R*(d-1)+be*J:.5*(R+z)*(d-1);if(ue<0||ue>d-1){for(let Me=0;Me<h;Me++){const He=Me+be*C[2]+U*C[1]+E*C[0];y.values[He]=u}continue}const Ne=Math.floor(ue),_e=Math.ceil(ue),Ee=ue-Ne;for(let Me=0;Me<h;Me++){let He=Me+Ne*w[2]+Q*w[1]+j*w[0];const Ze=x[He];He=Me+_e*w[2]+Q*w[1]+j*w[0];const ye=x[He];He=Me+Ne*w[2]+se*w[1]+j*w[0];const Re=x[He];He=Me+_e*w[2]+se*w[1]+j*w[0];const Oe=x[He],me=Ze+(ye-Ze)*Ee,ft=Re+(Oe-Re)*Ee;He=Me+be*C[2]+U*C[1]+E*C[0],y.values[He]=me+(ft-me)*he}}}else for(let Q=0;Q<g;++Q){const se=g>1?R*(d-1)+Q*J:.5*(R+z)*(d-1);if(se<0||se>d-1){for(let ue=0;ue<h;ue++){const Ne=ue+Q*C[2]+U*C[1]+E*C[0];y.values[Ne]=u}continue}const he=Math.round(se),be=Math.round(Y);for(let ue=0;ue<h;ue++){const Ne=ue+he*w[2]+be*w[1]+j*w[0],_e=ue+Q*C[2]+U*C[1]+E*C[0];y.values[_e]=x[Ne]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const y8e={kernelName:G_,backendName:"cpu",kernelFunc:g8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;et(s,"cumprod");const l=Hn([i],s.shape.length);let u=s;l!=null&&(u=Js({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=ar(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=Si(u.dtype,"int32"),d=O_(pe(u.shape),f),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=o?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)d[b]=a?1:h[b];else{const x=m(y,v-1);d[b]=a?h[x]*d[x]:h[b]*d[x]}}const g=n.makeTensorInfo(u.shape,f,d);if(l!=null){const y=zc(l),v=Js({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const b8e={kernelName:W_,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;et(s,"cumsum");const l=Hn([i],s.shape.length);let u=s;l!=null&&(u=Js({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=ar(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=Si(u.dtype,"int32"),d=Ss(pe(u.shape),f),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=o?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)d[b]=a?0:h[b];else{const x=m(y,v-1);d[b]=a?h[x]+d[x]:h[b]+d[x]}}const g=n.makeTensorInfo(u.shape,f,d);if(l!=null){const y=zc(l),v=Js({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const w8e={kernelName:B3,backendName:"cpu",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=$R(l,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=QQ(l,u,a,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const T8e={kernelName:H_,backendName:"cpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r;P(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=s.shape[0],l=s.shape[1],u=s.shape[2],c=s.shape[3],f=l*i,d=u*i,h=c/(i*i),p=n.data.get(s.dataId).values,m=new Float32Array(o*f*d*h);let g=0;for(let y=0;y<o;++y)for(let v=0;v<f;++v){const b=Math.floor(v/i),x=v%i;for(let w=0;w<d;++w){const C=Math.floor(w/i),E=w%i,A=(x*i+E)*h;for(let O=0;O<h;++O){const F=O+A+c*(C+u*(b+l*y));m[g++]=p[F]}}}return n.makeTensorInfo([o,f,d,h],s.dtype,m)}const E8e={kernelName:q_,backendName:"cpu",kernelFunc:C8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;et([s,i],"depthwiseConv2DNative");const c=at(s.shape),f=at(i.shape);let d=l;d==null&&(d=[1,1]),P(us(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const h=Gr(s.shape,i.shape,a,d,o,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,b=v.left,x=v.top,w=h.outChannels/h.inChannels,C=new Ir(h.outShape,s.dtype),E=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,O=C.values;for(let R=0;R<h.batchSize;++R){const F=R*c[0],z=R*C.strides[0];for(let j=0;j<h.outHeight;++j){const H=z+j*C.strides[1],J=j*h.strideHeight-x;for(let U=0;U<p;++U){const Y=J+U*g;if(Y<0||Y>=h.inHeight)continue;const Q=U*f[0],se=F+Y*c[1];for(let he=0;he<h.outWidth;++he){const be=H+he*C.strides[2],ue=he*h.strideWidth-b;for(let Ne=0;Ne<m;++Ne){const _e=ue+Ne*y;if(_e<0||_e>=h.inWidth)continue;const Ee=Q+Ne*f[1],Me=se+_e*h.inChannels;let He=be,Ze=Ee;for(let ye=0;ye<h.inChannels;++ye){const Re=E[Me+ye];for(let Oe=0;Oe<w;++Oe)O[He+Oe]+=Re*A[Ze+Oe];He+=w,Ze+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const k8e={kernelName:j3,backendName:"cpu",kernelFunc:QJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r;et([s,i],"depthwiseConv2dNativeBackpropFilter");const f=Gr(s.shape,c,a,o,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:p,filterWidth:m}=f,g=new Ir(f.filterShape,"float32"),y=f.padInfo.left,v=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(s.dataId).values,w=new Ir(s.shape,s.dtype,x),C=n.data.get(i.dataId).values,E=new Ir(i.shape,i.dtype,C);for(let A=0;A<p;++A){const O=Math.max(0,Math.ceil((v-A)/d)),R=Math.min(f.outHeight,(f.inHeight+v-A)/d);for(let F=0;F<m;++F){const z=Math.max(0,Math.ceil((y-F)/h)),j=Math.min(f.outWidth,(f.inWidth+y-F)/h);for(let H=0;H<f.outChannels;++H){const J=Math.trunc(H/b),U=H%b;let Y=0;for(let Q=0;Q<f.batchSize;++Q)for(let se=O;se<R;++se){const he=A+se*d-v;for(let be=z;be<j;++be){const ue=F+be*h-y;Y+=w.get(Q,he,ue,J)*E.get(Q,se,be,H)}}g.set(Y,A,F,J,U)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const A8e={kernelName:K_,backendName:"cpu",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r;et([s,i],"depthwiseConv2DNativeBackpropInput");const f=at(s.shape),d=at(i.shape),h=Gr(c,i.shape,a,o,l,u,!0),p=new Ir(h.inShape,"float32"),m=p.values,[g,y,v]=p.strides,b=n.data.get(s.dataId).values,[x,w,C]=f,E=n.data.get(i.dataId).values,[A,O,R]=d,{batchSize:F,filterHeight:z,filterWidth:j,inChannels:H,inHeight:J,inWidth:U,outChannels:Y,outHeight:Q,outWidth:se,strideHeight:he,strideWidth:be}=h,ue=z-1-h.padInfo.top,Ne=j-1-h.padInfo.left,_e=Y/H;for(let Ee=0;Ee<F;++Ee)for(let Me=0;Me<H;++Me)for(let He=0;He<J;++He){const Ze=He-ue,ye=Math.max(0,Math.ceil(Ze/he)),Re=Math.min(Q,(z+Ze)/he);for(let Oe=0;Oe<U;++Oe){const me=Oe-Ne,ft=Math.max(0,Math.ceil(me/be)),st=Math.min(se,(j+me)/be);let ot=0;for(let lt=ye;lt<Re;++lt){const Ct=lt*he-Ze;for(let St=ft;St<st;++St){const Pn=St*be-me,K=x*Ee+w*lt+C*St,ae=A*(z-1-Ct)+O*(j-1-Pn)+R*Me;for(let ve=0;ve<_e;++ve){const je=Me*_e+ve,Pe=b[K+je],De=E[ae+ve];ot+=Pe*De}}}m[g*Ee+y*He+v*Oe+Me]=ot}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const I8e={kernelName:X_,backendName:"cpu",kernelFunc:$8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=pe(r.shape),i=n.data.get(r.dataId).values,a=Nt([s,s],r.dtype),o=a.values;for(let u=0;u<i.length;u++)o[u*s+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const O8e={kernelName:Y_,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8e={kernelName:U3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:a,dilations:o}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,f=l.data.get(s.dataId).values,d=s.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:O,outShape:R}=v0(r.shape,s.shape,i,a,"NHWC",o),F=pe(R),z=R.length,j=rr(r.dtype,F);for(let J=0;J<h;++J)for(let U=0;U<y;++U){const Y=U*x-b.top;for(let Q=0;Q<v;++Q){const se=Q*w-b.left;for(let he=0;he<g;++he){let be=Number.MIN_SAFE_INTEGER;for(let Ne=0;Ne<C;++Ne){const _e=Y+Ne*A;if(_e>=0&&_e<p)for(let Ee=0;Ee<E;++Ee){const Me=se+Ee*O;if(Me>=0&&Me<m){const He=Ko([J,_e,Me,he],c,at(r.shape)),Ze=Ko([Ne,Ee,he],d,at(s.shape)),ye=u[He]+f[Ze];ye>be&&(be=ye)}}}const ue=Ko([J,U,Q,he],z,at(R));j[ue]=be}}}return{dataId:l.write(Nd(j,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R8e={kernelName:tN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,u=e,c=Da(r.shape,u.data.get(r.dataId).values),f=Da(s.shape,u.data.get(s.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:C,dilationHeight:E,dilationWidth:A,outShape:O}=v0(r.shape,s.shape,a,o,"NHWC",l);P(i.rank===O.length,()=>`Error in ${tN}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const R=Da(O,u.data.get(i.dataId).values),F=jq(s.shape,s.dtype);for(let j=0;j<d;++j)for(let H=0;H<g;++H){const J=H*b-v.top;for(let U=0;U<y;++U){const Y=U*x-v.left;for(let Q=0;Q<m;++Q){let se=Number.MIN_SAFE_INTEGER,he=0,be=0;for(let ue=0;ue<w;++ue){const Ne=J+ue*E;if(Ne>=0&&Ne<h)for(let _e=0;_e<C;++_e){const Ee=Y+_e*A;if(Ee>=0&&Ee<p){const Me=c[j][Ne][Ee][Q]+f[ue][_e][Q];Me>se&&(se=Me,he=ue,be=_e)}}}F[he][be][Q]+=R[j][H][U][Q]}}}return{dataId:u.write(Nd(F,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e={kernelName:eN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,u=e,c=Da(r.shape,u.data.get(r.dataId).values),f=Da(s.shape,u.data.get(s.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:C,dilationHeight:E,dilationWidth:A,outShape:O}=v0(r.shape,s.shape,a,o,"NHWC",l);P(i.rank===O.length,()=>`Error in ${eN}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const R=Da(O,u.data.get(i.dataId).values),F=jq(r.shape,r.dtype);for(let j=0;j<d;++j)for(let H=0;H<g;++H){const J=H*b-v.top;for(let U=0;U<y;++U){const Y=U*x-v.left;for(let Q=0;Q<m;++Q){let se=Number.MIN_SAFE_INTEGER,he=J<0?0:J,be=Y<0?0:Y;for(let ue=0;ue<w;++ue){const Ne=J+ue*E;if(Ne>=0&&Ne<h)for(let _e=0;_e<C;++_e){const Ee=Y+_e*A;if(Ee>=0&&Ee<p){const Me=c[j][Ne][Ee][Q]+f[ue][_e][Q];Me>se&&(se=Me,he=Ne,be=Ee)}}}F[j][he][be][Q]+=R[j][H][U][Q]}}}return{dataId:u.write(Nd(F,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},u=(l==null?void 0:l.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=i.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,g=s.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*d*4);for(let b=0;b<d*h;++b){const x=[0,0,0,255*u];for(let C=0;C<p;C++){const E=m[b*p+C];if(s.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(s.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);p===1?(x[0]=E*g,x[1]=E*g,x[2]=E*g):x[C]=E*g}const w=b*4;y[w+0]=Math.round(x[0]),y[w+1]=Math.round(x[1]),y[w+2]=Math.round(x[2]),y[w+3]=Math.round(x[3])}i.width=h,i.height=d;const v=new ImageData(y,h,d);return f.putImageData(v,0,0),s}const F8e={kernelName:ZTe,backendName:"cpu",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;et(s,"sum");let o;s.dtype==="bool"?o=Sc({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):o=sl({inputs:{x:s},backend:n});const l=o.shape.length,u=Ot(i,o.shape),c=Hn(u,l);let f=u,d=o;c!=null&&(d=Js({inputs:{x:o},backend:n,attrs:{perm:c}}),f=ar(f.length,l)),cs("sum",f,d.shape.length);const[h,p]=Hr(d.shape,f),m=Si(d.dtype,"int32");let g=Mx(n,h,m);const y=pe(p),v=n.data.get(g.dataId).values,b=n.data.get(d.dataId).values;for(let x=0;x<v.length;++x){const w=x*y;let C=0;for(let E=0;E<y;++E)C+=b[w+E];v[x]=C}if(a){const x=ir(g.shape,u),w=g;g=bn({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),g}const L8e={kernelName:wS,backendName:"cpu",kernelFunc:M0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=QD(s,i.length);eR(a.length,l,i);const{path:u,steps:c}=tR(o,l),f=c.length;let d=null,h=a.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=JD(h,l[g]);let b;nR(y)?b=i[g]:(b=Js({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);jt(b.shape,x)||(b=bn({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),d===null?d=b:(d=h4({inputs:{a:b,b:d},backend:n}),p.push(d))}m<f-1&&(u[m]>=0&&(d=M0({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-h),keepDims:!1}}),p.push(d)),h--)}for(const m of p)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const B8e={kernelName:Z_,backendName:"cpu",kernelFunc:z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;et([r,s],"eluGrad");const i=new Float32Array(pe(s.shape)),a=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const u=a[l];u>=0?i[l]=o[l]:i[l]=o[l]*(u+1)}return n.makeTensorInfo(s.shape,"float32",i)}const U8e={kernelName:Q_,backendName:"cpu",kernelFunc:j8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V8e=GD,W8e=HD,G8e=qD,H8e=KD,q8e=XD,K8e=YD,X8e=rn(M1,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+V8e*n);return e*(1-((((K8e*r+q8e)*r+H8e)*r+G8e)*r+W8e)*r*Math.exp(-n*n))}),Y8e={kernelName:M1,backendName:"cpu",kernelFunc:X8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zx(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(P(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),bn({inputs:{x:s},backend:n,attrs:{shape:o}})}const Z8e={kernelName:W3,backendName:"cpu",kernelFunc:zx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8e=lr((t,e)=>t/e),PR=Rr(R1,Q8e),VN={kernelName:R1,backendName:"cpu",kernelFunc:PR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJ(t,e,n){const r=t.shape,s=r[0],i=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[s,i],c=pe(u),f=is("float32",c),d=is("float32",c);for(let g=0;g<s;g++){const y=md({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=md({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),b=hi({inputs:{real:y,imag:v},backend:n}),{real:x,imag:w}=J8e(b,e,n),C=Zl(x,w);for(let E=0;E<i;E++){const A=ZD(C,E);f[g*i+E]=A.real,d[g*i+E]=A.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b)}const h=n.makeTensorInfo(u,"float32",f),p=n.makeTensorInfo(u,"float32",d),m=hi({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function J8e(t,e,n){const r=pe(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,a=n.data.get(s.complexTensorInfos.imag.dataId).values;if(eLe(r)){const o=WN(i,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",o.real),c=n.makeTensorInfo(l,"float32",o.imag),f=n.makeTensorInfo([],"float32",Pc(r,"float32")),d=sl({inputs:{x:f},backend:n}),h=VN.kernelFunc({inputs:{a:u,b:f},backend:n}),p=VN.kernelFunc({inputs:{a:c,b:d},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return o}else{const o=Zl(i,a),l=tLe(o,r,e);return lY(l)}}function eLe(t){return(t&t-1)===0}function WN(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=Zl(t,e),a=n/2,o=uY(i),l=o.real,u=o.imag,c=[l.length],f=s.makeTensorInfo(c,"float32",l),d=s.makeTensorInfo(c,"float32",u),h=hi({inputs:{real:f,imag:d},backend:s}),p=cY(i),m=p.real,g=p.imag,y=[m.length],v=s.makeTensorInfo(y,"float32",m),b=s.makeTensorInfo(y,"float32",g),x=hi({inputs:{real:v,imag:b},backend:s}),w=WN(l,u,a,r,s),C=w.real,E=w.imag,A=[C.length],O=s.makeTensorInfo(A,"float32",C),R=s.makeTensorInfo(A,"float32",E),F=hi({inputs:{real:O,imag:R},backend:s}),z=WN(m,g,a,r,s),j=z.real,H=z.imag,J=[j.length],U=s.makeTensorInfo(J,"float32",j),Y=s.makeTensorInfo(J,"float32",H),Q=hi({inputs:{real:U,imag:Y},backend:s}),se=dY(n,r),he=[se.real.length],be=s.makeTensorInfo(he,"float32",se.real),ue=s.makeTensorInfo(he,"float32",se.imag),Ne=hi({inputs:{real:be,imag:ue},backend:s}),_e=h4({inputs:{a:Ne,b:Q},backend:s}),Ee=wp({inputs:{a:F,b:_e},backend:s}),Me=DR({inputs:{a:F,b:_e},backend:s}),He=pd({inputs:{input:Ee},backend:s}),Ze=pd({inputs:{input:Me},backend:s}),ye=Sp({inputs:{input:Ee},backend:s}),Re=Sp({inputs:{input:Me},backend:s}),Oe=Tp({inputs:[He,Ze],backend:s,attrs:{axis:0}}),me=Tp({inputs:[ye,Re],backend:s,attrs:{axis:0}}),ft=s.data.get(Oe.dataId).values,st=s.data.get(me.dataId).values;return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(be),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(Ee),s.disposeIntermediateTensorInfo(Me),s.disposeIntermediateTensorInfo(He),s.disposeIntermediateTensorInfo(ye),s.disposeIntermediateTensorInfo(Ze),s.disposeIntermediateTensorInfo(Re),s.disposeIntermediateTensorInfo(Oe),s.disposeIntermediateTensorInfo(me),{real:ft,imag:st}}function tLe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,a=0;for(let o=0;o<e;o++){const l=hY(s*o,e,n),u=ZD(t,o);i+=u.real*l.real-u.imag*l.imag,a+=u.real*l.imag+u.imag*l.real}n&&(i/=e,a/=e),fY(r,i,a,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nLe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=pe(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=bn({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=JJ(o,!1,n),u=bn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const rLe={kernelName:J_,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MR(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,a=i||Zp(s),o=rr(a,pe(r));return iLe(o,s,a),e.makeTensorInfo(r,a,o)}const sLe={kernelName:eO,backendName:"cpu",kernelFunc:MR};function iLe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe={kernelName:tO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=is(r.dtype,pe(r.shape)),[a,o,l,u]=r.shape,c=s.data.get(r.dataId).values;for(let d=0;d<a;d++){const h=d*l*o*u;for(let p=0;p<o;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const b=Math.round(l-g-1),x=h+m+y+v;let w=c[x];if(b>=0&&b<l){const C=b*u,E=h+m+C+v;w=c[E]}i[x]=w}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=ZJ({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const g=m;if(c==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const y=bn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=wp({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=wp({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const y=bn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Lx(n,m,h,y,p),n.disposeIntermediateTensorInfo(y)}else m=Lx(n,m,h,o,p);n.disposeIntermediateTensorInfo(g)}return m}const lLe={kernelName:yx,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r;let m=QJ({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const g=m;m=wp({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=Lx(n,m,h,o,p),n.disposeIntermediateTensorInfo(g)}return m}const cLe={kernelName:vx,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=pe(r.shape),a=s.shape,o=a[a.length-1],[l,u,c,f]=RD(r,s);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const d=n.data.get(s.dataId).values,h=n.bufferSync(r),p=uJ(d,h,r.dtype,u,o,c,f,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}const dLe={kernelName:nO,backendName:"cpu",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r;et([s,i],"gatherV2");const l=Ot(a,s.shape)[0],u=n.data.get(i.dataId).values,c=s.shape[l];for(let x=0;x<u.length;++x){const w=u[x];P(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let f=o;o==null&&(f=0);const d=pe(i.shape),h=sR(s,i,l,f),p=bn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=bn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),b=cJ(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,b.dtype,b.values)}const pLe={kernelName:H3,backendName:"cpu",kernelFunc:hLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=pe(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=bn({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=JJ(o,!0,n),u=bn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const gLe={kernelName:rO,backendName:"cpu",kernelFunc:mLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe=rn(V1,t=>Number.isFinite(t)?1:0,"bool"),vLe={kernelName:V1,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe=rn(W1,t=>Math.abs(t)===1/0?1:0,"bool"),xLe={kernelName:W1,backendName:"cpu",kernelFunc:bLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe=rn(G1,t=>Number.isNaN(t)?1:0,"bool"),SLe={kernelName:G1,backendName:"cpu",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=mJ(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const CLe={kernelName:iO,backendName:"cpu",kernelFunc:TLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELe=rn(q1,t=>Math.log1p(t)),kLe={kernelName:q1,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=lr((t,e)=>t&&e),ALe=Rr(Z3,NLe,null,"bool"),$Le={kernelName:Z3,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ILe=rn(Q3,t=>t?0:1,"bool"),_Le={kernelName:Q3,backendName:"cpu",kernelFunc:ILe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe=lr((t,e)=>t||e),DLe=Rr(J3,OLe,null,"bool"),RLe={kernelName:J3,backendName:"cpu",kernelFunc:DLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r;et(s,"LRN");const u=s.shape[3],c=u-1,f=n.data.get(s.dataId).values,d=pe(s.shape),h=new Float32Array(d);function p(m){const g=m%u;let y=m-g+Math.max(0,g-i);const v=m-g+Math.min(g+i,c);let b=0;for(;y<=v;y++){const x=f[y];b+=x*x}return b}for(let m=0;m<d;m++){const g=p(m),y=f[m]*Math.pow(a+o*g,-l);h[m]=y}return n.makeTensorInfo(s.shape,s.dtype,h)}const MLe={kernelName:eS,backendName:"cpu",kernelFunc:PLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r;et(a,"LRNGrad");const f=pe(a.shape),d=a.shape[3],h=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(f),y=f;for(let v=0;v<y;v++){const b=v%d,x=v-b+Math.max(0,b-o),w=v-b+Math.min(d,b+o+1);let C=0;for(let E=x;E<w;E++)C+=Math.pow(p[E],2);C=u*C+l;for(let E=x;E<w;E++){let A=-2*u*c*p[E]*m[v]/C;v===E&&(A+=Math.pow(C,-c)),A*=h[v],g[E]+=A}}return n.makeTensorInfo(a.shape,s.dtype,g)}const LLe={kernelName:aO,backendName:"cpu",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=n;let l=s.shape;const u=l.length,c=Ot(i,l);let f=c;const d=Hn(f,u);let h=o.data.get(s.dataId).values;if(d!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[d[w]];h=_R(h,l,s.dtype,d,x),f=ar(f.length,u),l=x}et(s,"max"),cs("max",f,u);const[p,m]=Hr(l,f),g=pe(m),y=yJ(h,g,p,s.dtype),v=o.write(y,p,s.dtype);let b=p;return a&&(b=ir(p,c)),{dataId:v,shape:b,dtype:s.dtype}}const zLe={kernelName:tS,backendName:"cpu",kernelFunc:eee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;et(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,u=1;P(us(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ga(s.shape,i,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&jt(c.inShape,c.outShape))f=sl({inputs:{x:s},backend:n});else{const d=n.data.get(s.dataId).values,h=at(s.shape),p=RR(d,s.shape,s.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return f}const jLe={kernelName:nS,backendName:"cpu",kernelFunc:BLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;et(s,"maxPool3d");const c=lu(s.shape,i,a,1,o,l,u),f=n.data.get(s.dataId).values,d=YJ(f,s.shape,s.dtype,at(s.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const VLe={kernelName:rS,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;et([s,i],"maxPool3DGrad");const c=lu(i.shape,a,o,1,l,u),f=n.bufferSync(i),d=OFe(f,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=b-1-c.padInfo.front,E=w-1-c.padInfo.left,A=x-1-c.padInfo.top,O=Nt(i.shape,"float32"),R=n.bufferSync(s);for(let F=0;F<c.batchSize;++F)for(let z=0;z<c.inChannels;++z)for(let j=0;j<c.inDepth;++j)for(let H=0;H<c.inHeight;++H)for(let J=0;J<c.inWidth;++J){const U=j-C,Y=H-A,Q=J-E;let se=0;for(let he=0;he<b;he+=g){const be=(U+he)/h;if(!(be<0||be>=c.outDepth||Math.floor(be)!==be))for(let ue=0;ue<x;ue+=y){const Ne=(Y+ue)/p;if(!(Ne<0||Ne>=c.outHeight||Math.floor(Ne)!==Ne))for(let _e=0;_e<w;_e+=v){const Ee=(Q+_e)/m;if(Ee<0||Ee>=c.outWidth||Math.floor(Ee)!==Ee)continue;const Me=b*x*w-1-d.get(F,be,Ne,Ee,z),He=he*x*w+ue*w+_e,Ze=Me===He?1:0;if(Ze===0)continue;const ye=R.get(F,be,Ne,Ee,z);se+=ye*Ze}}}O.set(se,F,j,H,J,z)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const GLe={kernelName:lO,backendName:"cpu",kernelFunc:WLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;et([i,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=Ga(o.shape,l,u,1,c,f),h=n.data.get(o.dataId).values,p=Nt(d.outShape,o.dtype,XJ(h,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,C=b-1-d.padInfo.top,E=Nt(o.shape,"float32"),A=n.data.get(s.dataId).values,O=Nt(s.shape,"float32",A);for(let R=0;R<d.batchSize;++R)for(let F=0;F<d.inChannels;++F)for(let z=0;z<d.inHeight;++z)for(let j=0;j<d.inWidth;++j){const H=z-C,J=j-w;let U=0;for(let Y=0;Y<b;Y+=y){const Q=(H+Y)/m;if(!(Q<0||Q>=d.outHeight||Math.floor(Q)!==Q))for(let se=0;se<x;se+=v){const he=(J+se)/g;if(he<0||he>=d.outWidth||Math.floor(he)!==he)continue;const be=b*x-1-p.get(R,Q,he,F),ue=Y*x+se,Ne=be===ue?1:0;if(Ne===0)continue;const _e=O.get(R,Q,he,F);U+=_e*Ne}}E.set(U,R,z,j,F)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const qLe={kernelName:oO,backendName:"cpu",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(t,e,n,r,s){const i=at(e),a=RR(t,e,n,i,s,"max"),o=XJ(t,e,n,s,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe={kernelName:uO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;et(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Ga(r.shape,s,i,[1,1],a),[f,d]=KLe(u,r.shape,r.dtype,o,c),h=l.write(f,c.outShape,r.dtype),p=l.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=Ot(i,s.shape),u=Hr(s.shape,o)[1],c=pe(u),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=Sc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});f.push(h);const p=PR({inputs:{a:h,b:d},backend:n});f.push(p);const m=M0({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:a}});return f.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const ZLe={kernelName:sS,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;et(s,"min");const o=Ot(i,s.shape);let l=o;const u=Hn(l,s.shape.length);let c=s;u!=null&&(c=Js({inputs:{x:s},backend:n,attrs:{perm:u}}),l=ar(l.length,s.shape.length)),cs("min",l,c.shape.length);const[f,d]=Hr(c.shape,l),h=pe(d),p=Ss(pe(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];(Number.isNaN(w)||w<b)&&(b=w)}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(a){const y=ir(f,o),v=bn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const JLe={kernelName:iS,backendName:"cpu",kernelFunc:QLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:a}=r;et(s,"mirrorPad");const o=i.map((b,x)=>b[0]+s.shape[x]+b[1]),l=i.map(b=>b[0]),u=i.map((b,x)=>b[0]+s.shape[x]),c=a==="reflect"?0:1,f=n.data.get(s.dataId).values,d=s.shape.length,h=at(s.shape),p=pe(o),m=o.length,g=at(o),y=is(s.dtype,p);for(let b=0;b<p;b++){let x=Qp(b,m,g);for(let C=0;C<m;C++)x[C]<l[C]?x[C]=l[C]*2-x[C]-c:x[C]>=u[C]&&(x[C]=(u[C]-1)*2-x[C]+c);x=x.map((C,E)=>C-l[E]);const w=Ko(x,d,h);y[b]=f[w]}return{dataId:n.write(y,o,s.dtype),shape:o,dtype:s.dtype}}const t7e={kernelName:aS,backendName:"cpu",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7e=lr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),r7e=Rr(Y1,n7e),s7e={kernelName:Y1,backendName:"cpu",kernelFunc:r7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=s.shape.length;let o=i;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=Ot([o],s.shape),u=eee({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=ir(u.shape,l),f=bn({inputs:{x:u},backend:n,attrs:{shape:c}}),d=DR({inputs:{a:s,b:f},backend:n}),h=iJ({inputs:{x:d},backend:n}),p=M0({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=bn({inputs:{x:p},backend:n,attrs:{shape:c}}),g=PR({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const i7e={kernelName:CS,backendName:"cpu",kernelFunc:tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r;et(s,"multinomial");const l=o?s:tee({inputs:{logits:s},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],f=n.data.get(l.dataId).values,d=[u,i],h=Ss(pe(d),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=f[m];for(let b=1;b<g.length;++b)g[b]=g[b-1]+f[m+b];const y=US.alea(a.toString()),v=p*i;for(let b=0;b<i;++b){const x=y();h[v+b]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){h[v+b]=w;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}const o7e={kernelName:cO,backendName:"cpu",kernelFunc:a7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e=ND;function u7e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;et(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:f}=l7e(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const c7e={kernelName:fO,backendName:"cpu",kernelFunc:u7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7e=AD;function d7e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;et(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:h}=f7e(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const h7e={kernelName:dO,backendName:"cpu",kernelFunc:d7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7e=$D;function m7e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;et(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,d=a,h=o,p=l,m=u,{selectedIndices:g,selectedScores:y}=p7e(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const g7e={kernelName:hO,backendName:"cpu",kernelFunc:m7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r;et(s,"oneHot");const u=pe(s.shape),c=new Float32Array(u*a);c.fill(l);const f=n.data.get(s.dataId).values;for(let d=0;d<u;++d)f[d]>=0&&f[d]<a&&(c[d*a+f[d]]=o);return n.makeTensorInfo([...s.shape,a],i,c)}const v7e={kernelName:cS,backendName:"cpu",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bx(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=pd({inputs:{input:r},backend:n}),i=Bx({inputs:{x:s},backend:n}),a=Sp({inputs:{input:r},backend:n}),o=Bx({inputs:{x:a},backend:n}),l=hi({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return MR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const b7e={kernelName:AS,backendName:"cpu",kernelFunc:Bx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=pd({inputs:{input:r},backend:n}),i=nee({inputs:{x:s},backend:n}),a=Sp({inputs:{input:r},backend:n}),o=Bx({inputs:{x:a},backend:n}),l=hi({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return MR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const x7e={kernelName:uS,backendName:"cpu",kernelFunc:nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return zx({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(c=>{Ai(i,c.shape,"All tensors passed to stack must have matching shapes"),P(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const f=zx({inputs:{input:c},backend:n,attrs:{dim:s}});return o.push(f),f}),u=Tp({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const w7e={kernelName:fS,backendName:"cpu",kernelFunc:ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;et(s,"pad");const o=i.map((v,b)=>v[0]+s.shape[b]+v[1]),l=i.map(v=>v[0]),u=n.data.get(s.dataId).values,c=pe(s.shape),f=s.shape.length,d=at(s.shape),h=pe(o),p=o.length,m=at(o),g=is(s.dtype,h);a!==0&&g.fill(a);for(let v=0;v<c;v++){const x=Qp(v,f,d).map((C,E)=>C+l[E]),w=Ko(x,p,m);g[w]=u[v]}return{dataId:n.write(g,o,s.dtype),shape:o,dtype:s.dtype}}const see={kernelName:dS,backendName:"cpu",kernelFunc:S7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7e=lr((t,e)=>Math.pow(t,e)),C7e=Rr(Q1,T7e),E7e={kernelName:Q1,backendName:"cpu",kernelFunc:C7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k7e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(y=>n.data.get(y.dataId).values),u=s.map(y=>y.shape),c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,[d,h,p]=TJ(l,u,c,i.shape,i.dtype,f,a.shape),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,h);return m.concat([g])}const N7e={kernelName:pO,backendName:"cpu",kernelFunc:k7e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A7e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=CJ(a,r.shape,r.dtype,o,s.shape,l,i.shape),f=n.makeTensorInfo([u.length],"int32",u),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const $7e={kernelName:mO,backendName:"cpu",kernelFunc:A7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,d=o.map(g=>n.data.get(g.dataId).values),h=o.map(g=>g.shape),[p,m]=EJ(u,s.shape,c,i.shape,i.dtype,f,a.shape,d,h,l);return n.makeTensorInfo(p,i.dtype,m)}const _7e={kernelName:gO,backendName:"cpu",kernelFunc:I7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:a}=n,o=kJ(r,s,a,i);return e.makeTensorInfo([o.length],i,o)}const D7e={kernelName:yO,backendName:"cpu",kernelFunc:O7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7e=rn(J1,t=>1/t),P7e={kernelName:J1,backendName:"cpu",kernelFunc:R7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;et(s,"resizeBilinear");const l=at(s.shape),[u,c]=o,[f,d,h,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(pe([f,u,c,p])),y=[i&&u>1?d-1:d,i&&c>1?h-1:h],v=[i&&u>1?u-1:u,i&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let C=0;C<f;C++)for(let E=0;E<u;E++){let A;a?A=x*(E+.5)-.5:A=x*E;const O=Math.max(0,Math.floor(A)),R=A-O,F=Math.min(d-1,Math.ceil(A)),z=C*l[0]+O*l[1],j=C*l[0]+F*l[1];for(let H=0;H<c;H++){let J;a?J=w*(H+.5)-.5:J=w*H;const U=Math.max(0,Math.floor(J)),Y=J-U,Q=Math.min(h-1,Math.ceil(J)),se=z+U*l[2],he=j+U*l[2],be=z+Q*l[2],ue=j+Q*l[2];for(let Ne=0;Ne<p;Ne++){const _e=m[se+Ne],Ee=m[he+Ne],Me=m[be+Ne],He=m[ue+Ne],Ze=_e+(Me-_e)*Y,ye=Ee+(He-Ee)*Y,Re=Ze+(ye-Ze)*R;g[b++]=Re}}}return n.makeTensorInfo([f,u,c,p],"float32",g)}const F7e={kernelName:yS,backendName:"cpu",kernelFunc:M7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L7e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;et([i,s],"resizeBilinearGrad");const o=at(s.shape),[l,u,c,f]=s.shape,[,d,h]=i.shape,p=new Float32Array(l*u*c*f),m=[a&&d>1?u-1:u,a&&h>1?c-1:c],g=[a&&d>1?d-1:d,a&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(i.dataId).values;let x=0;for(let w=0;w<l;w++){const C=w*o[0];for(let E=0;E<d;E++){const A=E*y,O=Math.floor(A),R=Math.min(Math.ceil(A),u-1),F=C+O*o[1],z=C+R*o[1],j=A-O,H=1-j;for(let J=0;J<h;J++){const U=J*v,Y=Math.floor(U),Q=Math.min(Math.ceil(U),c-1),se=U-Y,he=1-se,be=F+Y*o[2],ue=F+Q*o[2],Ne=z+Y*o[2],_e=z+Q*o[2],Ee=H*he,Me=H*se,He=j*he,Ze=j*se;for(let ye=0;ye<f;ye++){const Re=b[x++];p[be+ye]+=Re*Ee,p[ue+ye]+=Re*Me,p[Ne+ye]+=Re*He,p[_e+ye]+=Re*Ze}}}}return n.makeTensorInfo([l,c,u,f],"float32",p)}const z7e={kernelName:xO,backendName:"cpu",kernelFunc:L7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B7e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;et(s,"resizeNearestNeighbor");const l=at(s.shape),[u,c]=o,[f,d,h,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(f*u*c*p),y=[i&&u>1?d-1:d,i&&c>1?h-1:h],v=[i&&u>1?u-1:u,i&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let C=0;C<f;C++){const E=C*l[0];for(let A=0;A<u;A++){const O=a?b*(A+.5):b*A;let R=Math.min(d-1,i?Math.round(O):Math.floor(O));a&&(R=Math.max(0,R));const F=E+R*l[1];for(let z=0;z<c;z++){const j=a?x*(z+.5):x*z;let H=Math.min(h-1,i?Math.round(j):Math.floor(j));a&&(H=Math.max(0,H));const J=F+H*l[2];for(let U=0;U<p;U++){const Y=m[J+U];g[w++]=Y}}}}return n.makeTensorInfo([f,u,c,p],s.dtype,g)}const j7e={kernelName:gS,backendName:"cpu",kernelFunc:B7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;et([i,s],"resizeNearestNeighborGrad");const o=at(s.shape),l=at(i.shape),[u,c,f,d]=s.shape,[,h,p]=i.shape,m=new Float32Array(u*c*f*d),g=n.data.get(i.dataId).values,y=[a&&h>1?c-1:c,a&&p>1?f-1:f],v=[a&&h>1?h-1:h,a&&p>1?p-1:p],b=y[0]/v[0],x=y[1]/v[1],w=1/b,C=1/x,E=Math.ceil(w)*2+2,A=Math.ceil(C)*2+2;for(let O=0;O<u;O++){const R=O*o[0];for(let F=0;F<c;F++){const z=R+F*o[1],j=Math.floor(F*w),H=Math.floor(j-E/2);for(let J=0;J<f;J++){const U=z+J*o[2],Y=Math.floor(J*C),Q=Math.floor(Y-A/2);for(let se=0;se<d;se++){let he=0;for(let be=0;be<E;be++){const ue=be+H;if(ue<0||ue>=h)continue;const Ne=R+ue*l[1],_e=ue*b,Ee=Math.min(c-1,a?Math.round(_e):Math.floor(_e));if(F===Ee)for(let Me=0;Me<A;Me++){const He=Me+Q;if(He<0||He>=p)continue;const Ze=Ne+He*l[2],ye=He*x,Re=Math.min(f-1,a?Math.round(ye):Math.floor(ye));J===Re&&(he+=g[Ze+se])}}m[U+se]=he}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const V7e={kernelName:bO,backendName:"cpu",kernelFunc:U7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;et(s,"reverse");const a=s.shape.length,o=Ot(i,s.shape);if(a===0)return sl({inputs:{x:s},backend:n});const l=new Ir(s.shape,s.dtype),u=n.bufferSync(s);for(let c=0;c<l.size;c++){const f=l.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=s.shape[h]-1-d[h]),l.set(u.get(...d),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const G7e={kernelName:vS,backendName:"cpu",kernelFunc:W7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H7e={kernelName:FO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=is(r.dtype,pe(r.shape)),[u,c,f,d]=r.shape,[h,p]=UD(a,c,f),m=255,g=Math.sin(s),y=Math.cos(s),v=o.data.get(r.dataId).values;for(let x=0;x<u;x++){const w=x*f*c*d;for(let C=0;C<c;C++){const E=C*(f*d);for(let A=0;A<f;A++){const O=A*d;for(let R=0;R<d;R++){const F=[u,C,A,R],z=F[2],j=F[1];let H=(z-h)*y-(j-p)*g,J=(z-h)*g+(j-p)*y;H=Math.round(H+h),J=Math.round(J+p);let U=i;if(typeof i!="number"&&(R===3?U=m:U=i[R]),H>=0&&H<f&&J>=0&&J<c){const Q=J*(f*d),se=H*d,he=w+Q+se+R;U=v[he]}const Y=w+E+O+R;l[Y]=U}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q7e=rn(n0,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),K7e={kernelName:n0,backendName:"cpu",kernelFunc:q7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=_d(i,s,a),d=!0,h=n.bufferSync(s),p=n.bufferSync(i),m=kf(h,p,a,f,u,l,o,c,0,d);return n.makeTensorInfo(a,m.dtype,m.values)}const Y7e={kernelName:wO,backendName:"cpu",kernelFunc:X7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function Q7e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function J7e(t,e,n,r,s,i){const a=rr("int32",n*s);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),u=o*s;for(let c=0;c<s;++c)a[u+c]=i==="left"?Z7e(l,e[c+u]):Q7e(l,e[c+u])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=J7e(o,l,s.shape[0],s.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",u)}const t9e={kernelName:TO,backendName:"cpu",kernelFunc:e9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;et([r,s,i],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=Si(s.dtype,i.dtype),f=Ss(pe(s.shape),c);let d=0;const h=a===0||a>1||s.shape.length===1?1:pe(s.shape.slice(1));for(let p=0;p<o.length;p++)for(let m=0;m<h;m++)o[p]===1?f[d++]=l[p]:f[d++]=u[p];return n.makeTensorInfo(s.shape,c,f)}const r9e={kernelName:bS,backendName:"cpu",kernelFunc:n9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9e=e4,i9e=t4,a9e=rn(s0,t=>t>=0?i9e*t:s9e*(Math.exp(t)-1)),o9e={kernelName:s0,backendName:"cpu",kernelFunc:a9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9e=rn(o0,t=>t<0?-1:t>0?1:0),u9e={kernelName:o0,backendName:"cpu",kernelFunc:l9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9e=rn(i0,t=>Math.sin(t)),f9e={kernelName:i0,backendName:"cpu",kernelFunc:c9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9e=rn(a0,t=>Math.sinh(t)),h9e={kernelName:a0,backendName:"cpu",kernelFunc:d9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9e=11920928955078125e-23,zL=Math.log(p9e)+2,m9e=rn(u0,t=>{const e=t>-zL,n=t<zL,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),g9e={kernelName:u0,backendName:"cpu",kernelFunc:m9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;et([s],"spaceToBatchND");const o=pe(i),l=[[0,0]];l.push(...a);for(let C=1+i.length;C<s.shape.length;++C)l.push([0,0]);const u=see.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),c=E0(u.shape,i,o,!1),f=k0(c.length,i.length,!1),d=N0(u.shape,i,o,!1),m=bn({inputs:{x:u},backend:n,attrs:{shape:c}}),v=Js({inputs:{x:m},backend:n,attrs:{perm:f}}),w=bn({inputs:{x:v},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const v9e={kernelName:SS,backendName:"cpu",kernelFunc:y9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values[0],[f,d,h,p,m]=IJ(o,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],s.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const x9e={kernelName:CO,backendName:"cpu",kernelFunc:b9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,f]=_J(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const S9e={kernelName:EO,backendName:"cpu",kernelFunc:w9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=OR(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const C9e={kernelName:kO,backendName:"cpu",kernelFunc:T9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=OR(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const k9e={kernelName:NO,backendName:"cpu",kernelFunc:E9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=_d(i,s,o),h=!1,p=n.bufferSync(s);let m;switch(i.dtype){case"bool":{const g=n.bufferSync(i),y=!!n.data.get(a.dataId).values[0];m=kf(p,g,o,d,c,u,l,f,y,h);break}case"float32":{const g=n.bufferSync(i),y=n.data.get(a.dataId).values[0];m=kf(p,g,o,d,c,u,l,f,y,h);break}case"int32":{const g=n.bufferSync(i),y=n.data.get(a.dataId).values[0];m=kf(p,g,o,d,c,u,l,f,y,h);break}case"string":{const g=n.bufferSync(i),y=hc(n.data.get(a.dataId).values[0]);m=kf(p,g,o,d,c,u,l,f,y,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,m.dtype,m.values)}const A9e={kernelName:AO,backendName:"cpu",kernelFunc:N9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Ot(a,s.shape)[0],l=rR(s,i,o),u=new Array(s.shape.length).fill(0),c=s.shape.slice();return l.map(f=>{const d=[...c];d[o]=f;const h=md({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});return u[o]+=f,h})}const I9e={kernelName:TS,backendName:"cpu",kernelFunc:$9e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _9e={kernelName:$O,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;et(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];i[o]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O9e=rn(g0,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),D9e={kernelName:g0,backendName:"cpu",kernelFunc:O9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;et(s,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=zD(s.shape,i,a,o,l,u,c,f,d);let w;if(m)w=bn({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=MD(v,b,x),E=md({inputs:{x:s},backend:n,attrs:{begin:v,size:C}});w=bn({inputs:{x:E},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(E)}else{const C=n.bufferSync(s),E=RJ(h,C,x,v);w=n.makeTensorInfo(p,E.dtype,E.values)}return w}const P9e={kernelName:IO,backendName:"cpu",kernelFunc:R9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[p,m]=PJ(d,h,s,i,a,o,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const F9e={kernelName:_O,backendName:"cpu",kernelFunc:M9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L9e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,f]=MJ(o,l,s),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const z9e={kernelName:OO,backendName:"cpu",kernelFunc:L9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(i.dataId).values,o=FJ(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const j9e={kernelName:DO,backendName:"cpu",kernelFunc:B9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9e=rn(h0,t=>Math.tan(t)),V9e={kernelName:h0,backendName:"cpu",kernelFunc:U9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9e=rn(p0,t=>Math.tanh(t)),G9e={kernelName:p0,backendName:"cpu",kernelFunc:W9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:u,outputSize:c}=_d(i,s,r.shape),f=!1,d=n.bufferSync(s),h=n.bufferSync(i),p=n.bufferSync(r),m=kf(d,h,r.shape,c,l,o,a,u,p,f);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const q9e={kernelName:SO,backendName:"cpu",kernelFunc:H9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;et(s,"tile");const a=zJ(n.bufferSync(s),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const X9e={kernelName:m0,backendName:"cpu",kernelFunc:K9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r;et(s,"topk");const o=n.data.get(s.dataId).values,[l,u]=jJ(o,s.shape,s.dtype,i,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Z9e={kernelName:RO,backendName:"cpu",kernelFunc:Y9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9e(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:u}=n,[c,f,d,h]=s.shape,[p,m]=u??[f,d],g=[c,p,m,h],y=at(s.shape),v=y[0],b=y[1],x=y[2],w=at(g),C=w[0],E=w[1],A=w[2],O=is(s.dtype,pe(g));O.fill(l);const R=r.data.get(s.dataId).values,F=r.data.get(i.dataId).values;for(let j=0;j<c;++j){const H=i.shape[0]===1?F:F.subarray(j*8,j*8+8);for(let J=0;J<p;++J)for(let U=0;U<m;++U)for(let Y=0;Y<h;++Y){let Q;const se=H[6]*U+H[7]*J+1;if(se===0)continue;const he=(H[0]*U+H[1]*J+H[2])/se,be=(H[3]*U+H[4]*J+H[5])/se,ue=BL(he,d,o),Ne=BL(be,f,o);switch(a){case"nearest":Q=sze(R,f,d,v,b,x,j,Ne,ue,Y,l);break;case"bilinear":Q=ize(R,f,d,v,b,x,j,Ne,ue,Y,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const _e=j*C+J*E+U*A+Y;O[_e]=Q}return r.makeTensorInfo(g,s.dtype,O)}return{dataId:r.write(O,g,s.dtype),shape:s.shape,dtype:s.dtype}}const J9e={kernelName:PO,backendName:"cpu",kernelFunc:Q9e};function BL(t,e,n){switch(n){case"reflect":return eze(t,e);case"wrap":return tze(t,e);case"nearest":return rze(t,e);case"constant":default:return nze(t)}}function eze(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return nd(0,n,e-1)}function tze(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return nd(0,n,e-1)}function nze(t,e){return t}function rze(t,e){return nd(0,t,e-1)}function yg(t,e,n,r,s,i,a,o,l,u,c){const f=a*r+o*s+l*i+u;return 0<=o&&o<e&&0<=l&&l<n?t[f]:c}function sze(t,e,n,r,s,i,a,o,l,u,c){const f=Math.round(o),d=Math.round(l);return yg(t,e,n,r,s,i,a,f,d,u,c)}function ize(t,e,n,r,s,i,a,o,l,u,c){const f=Math.floor(o),d=Math.floor(l),h=f+1,p=d+1,m=(p-l)*yg(t,e,n,r,s,i,a,f,d,u,c)+(l-d)*yg(t,e,n,r,s,i,a,f,p,u,c),g=(p-l)*yg(t,e,n,r,s,i,a,h,d,u,c)+(l-d)*yg(t,e,n,r,s,i,a,h,p,u,c);return(h-o)*m+(o-f)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aze(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;et(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:u}=UJ(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const oze={kernelName:MO,backendName:"cpu",kernelFunc:aze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lze(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s.shape.length,o=s.shape[i],l=new Array(a-1);let u=0;for(let h=0;h<a;h++)h!==i&&(l[u++]=s.shape[h]);const c=new Array(a).fill(0),f=s.shape.slice();f[i]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[i]=h;const p=md({inputs:{x:s},backend:n,attrs:{begin:c,size:f}});d[h]=bn({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return d}const uze={kernelName:kS,backendName:"cpu",kernelFunc:lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r;et(s,"unsortedSegmentSum");const o=s.shape.length,l=i.shape.length,u=[],c=[],f=o-l;let d=i;for(let p=0;p<f;++p){const m=zx({inputs:{input:d},backend:n,attrs:{dim:p+1}});d=m,c.push(m)}for(let p=0;p<a;++p){const m=Pc(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=rJ({inputs:{a:g,b:d},backend:n}),v=Sc({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),b=h4({inputs:{a:v,b:s},backend:n}),x=M0({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(y),c.push(v),c.push(b),c.push(x)}const h=ree({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const fze={kernelName:NS,backendName:"cpu",kernelFunc:cze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=[aFe,BPe,lFe,cFe,HPe,dFe,pFe,gFe,vFe,xFe,SFe,CFe,kFe,$Fe,_Fe,RFe,MFe,LFe,BFe,sFe,UFe,WFe,HFe,KPe,KFe,WPe,YPe,YFe,jPe,QFe,e8e,t8e,r8e,i8e,o8e,u8e,f8e,h8e,m8e,y8e,b8e,w8e,T8e,E8e,k8e,A8e,I8e,O8e,D8e,R8e,P8e,F8e,B8e,ZMe,U8e,ZPe,Y8e,QPe,Z8e,eMe,rLe,sLe,aLe,nMe,sMe,lLe,cLe,dLe,pLe,aMe,lMe,UPe,gLe,JFe,vLe,xLe,SLe,QMe,cMe,dMe,CLe,pMe,kLe,$Le,_Le,RLe,MLe,LLe,zLe,gMe,jLe,VLe,GLe,qLe,XLe,ZLe,JLe,vMe,t7e,s7e,o7e,xMe,SMe,c7e,h7e,g7e,CMe,v7e,x7e,w7e,see,E7e,eFe,NMe,N7e,$7e,_7e,D7e,VPe,VN,P7e,tFe,nFe,rFe,F7e,z7e,j7e,V7e,G7e,H7e,K7e,PMe,Y7e,t9e,r9e,o9e,FMe,u9e,f9e,h9e,LMe,i7e,g9e,v9e,x9e,S9e,C9e,k9e,A9e,I9e,jMe,_9e,VMe,GMe,D9e,P9e,F9e,z9e,j9e,XMe,L8e,V9e,G9e,q9e,X9e,Z9e,J9e,EMe,oze,uze,fze,b7e];for(const t of dze)Wq(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pf={},rb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function hze(t,e){pf[t]=e}function ho(t,e){if(!(t in pf)||e!=null){const r=mze(t,e);if(r!==null)pf[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=pf[t];return n==null||n.isContextLost()?(delete pf[t],ho(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),pf[t])}function pze(t){if(!le().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function mze(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??pze(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete pf[t]},!1),le().getBool("SOFTWARE_WEBGL_ENABLED")&&(rb.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",rb)||n.getContext("experimental-webgl",rb):n.getContext("webgl2",rb)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ny;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Ny||(Ny={}));var Hi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Hi||(Hi={}));var ts;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ts||(ts={}));function F0(t,e){return[e,t]}function gze(t,e){return t*e}function sb(t){const e=pe(t),n=Math.ceil(e/4);return Yk(n)}function am(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function yze(t,e){const[n,r]=am(t,e);return n*r*4}function FR(t,e){const n=t;let r,s,i,a,o,l,u,c,f,d;return le().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,a=n.RGBA32F,o=n.RED,u=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,a=n.RGBA,o=t.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e){const n=e();return le().getBool("DEBUG")&&vze(t),n}function vze(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Sze(t,e))}const bze=596e-10,xze=65504;function wze(t){return!!(le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||bze<Math.abs(t)&&Math.abs(t)<xze)}function Sze(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function ib(t,e){return du(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Tze(t,e){const n=du(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(qe(t,()=>t.shaderSource(n,e)),qe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Cze(t,e){const n=du(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(qe(t,()=>t.shaderSource(n,e)),qe(t,()=>t.compileShader(n)),le().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw iee(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Eze=/ERROR: [0-9]+:([0-9]+):/g;function iee(t,e){const n=Eze.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,a=s.map((f,d)=>Rh((d+1).toString(),i)+f);let o=0;for(let f=0;f<a.length;f++)o=Math.max(a[f].length,o);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Rh(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function kze(t){return du(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Nze(t,e){if(qe(t,()=>t.linkProgram(e)),!le().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function hC(t,e){if(qe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Aze(t,e){const n=du(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),qe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function $ze(t,e){const n=du(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return qe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),qe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Ize(t){return du(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function _ze(t,e){const n=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function Oze(t){return du(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function jL(t,e,n,r,s,i,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),qe(t,()=>t.vertexAttribPointer(o,s,t.FLOAT,!1,i,a)),qe(t,()=>t.enableVertexAttribArray(o)),!0)}function Dze(t,e,n){Lze(t,n),qe(t,()=>t.activeTexture(t.TEXTURE0+n)),qe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Rze(t,e,n){return du(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Pze(t,e,n){return t.getUniformLocation(e,n)}function Mze(t,e,n,r){qe(t,()=>Dze(t,e,r)),qe(t,()=>t.uniform1i(n,r))}function pC(t,e,n){qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function UL(t,e){qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function ab(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Fze(t,e))}function Fze(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function du(t,e,n){const r=qe(t,()=>e());if(r==null)throw new Error(n);return r}function Lze(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Cp(t,e=2){return pe(t.slice(0,t.length-e))}function Ep(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ob(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Cp(t),...Ep(t)]),e}function zze(t,e=!1){let n=le().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=le().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&le().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?__(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Rc(t).newShape);let s=pe(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const a=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const o=Cp(t);let l=2,u=2;t.length&&([l,u]=Ep(t)),s=o*(l/2)*(u/2),i=Yk(s).map(c=>c*2)}else i=Yk(s);return i}function lb(t){return t%2===0}function jx(t,e){if(t=t.slice(-2),e=e.slice(-2),jt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||lb(n)&&lb(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&lb(t[0])&&lb(e[0])}let mC,gC;function Bze(t){if(mC==null){const e=ho(t);mC=e.getParameter(e.MAX_TEXTURE_SIZE)}return mC}function jze(t){if(gC==null){const e=ho(t);gC=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,gC)}function Uze(t){if(t===0)return 0;let e;const n=ho(t);return Oa(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Oa(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Oa(t,e){return t.getExtension(e)!=null}function VL(t){try{if(ho(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Vze(t){if(t===0)return!1;const e=ho(t);if(t===1){if(!Oa(e,"OES_texture_float"))return!1}else if(!Oa(e,"EXT_color_buffer_float"))return!1;return GN(e)}function Wze(t){if(t===0)return!1;const e=ho(t);if(t===1){if(!Oa(e,"OES_texture_float")||!Oa(e,"WEBGL_color_buffer_float"))return!1}else{if(Oa(e,"EXT_color_buffer_float"))return GN(e);const r="EXT_color_buffer_half_float";if(Oa(e,r)){const s=e.getExtension(r);return Gze(e,s)}return!1}return GN(e)}function GN(t){const e=FR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),a}function Gze(t,e){const n=FR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function Hze(t){return t!==2?!1:ho(t).fenceSync!=null}function L0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nt=le();nt.registerFlag("HAS_WEBGL",()=>nt.getNumber("WEBGL_VERSION")>0);nt.registerFlag("WEBGL_VERSION",()=>VL(2)?2:VL(1)?1:0);nt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);nt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>nt.get("WEBGL_VERSION")===2);nt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);nt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);nt.registerFlag("WEBGL_PACK",()=>nt.getBool("HAS_WEBGL"));nt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_CLIP",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_REDUCE",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_LAZILY_UNPACK",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_CONV_IM2COL",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>nt.getBool("WEBGL_PACK"));nt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Bze(nt.getNumber("WEBGL_VERSION")));nt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>jze(nt.getNumber("WEBGL_VERSION")));nt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=nt.getNumber("WEBGL_VERSION");return t===0?0:Uze(t)});nt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>nt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!oK());nt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Vze(nt.getNumber("WEBGL_VERSION")));nt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>nt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:nt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));nt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Wze(nt.getNumber("WEBGL_VERSION")));nt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Hze(nt.getNumber("WEBGL_VERSION")));nt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>nt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);nt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});nt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>oK()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});nt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);nt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);nt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);nt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);nt.registerFlag("WEBGL_EXP_CONV",()=>!1);nt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>nt.getBool("IS_TEST"));nt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);nt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);nt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);nt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(){let t,e,n,r,s,i,a,o,l,u;return le().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",a="out vec4 outputColor;",o=le().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rd(t,e,n="index"){const r=at(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${s}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${a}; ${o};`}).join("")}function p4(t,e,n="index"){const r=at(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${o};`}).join("")}function qze(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function Kze(t,e,n="index"){const r=t.map((i,a)=>a),s=qze(r,e);return s.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${s[a]}`,l=a===s.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s[a]}`:`index -= ${t[a]} * ${s[a]}`;return`${o}; ${l};`}).join("")}function LR(t){const e=at(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function zR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const aee=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:oee}=cOe;function Xze(t,e,n){const r=[];if(t.forEach(h=>{const p=pe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=BR(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(h=>Yze(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=Ls(),l=Jze(o);let u,c,f=nBe(o);return e.isPacked?(u=Zze(e.logicalShape,a,n.enableShapeUniforms),c=tBe(o)):(u=Qze(e.logicalShape,a,n.enableShapeUniforms),c=eBe(o)),n.packedInputs&&(f+=aBe),[f,l,c,s,u,i,n.userCode].join(`
`)}function om(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return vBe(t,e);case 1:return xBe(t,e);case 2:return SBe(t,e);case 3:return CBe(t,e);case 4:return kBe(t,e);case 5:return NBe(t);case 6:return ABe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function lee(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return yBe(t);case 1:return bBe(t,e);case 2:return wBe(t,e);case 3:return TBe(t,e);default:return EBe(t,e)}}function Yze(t,e,n=!1,r){let s="";n?s+=lee(t,r):s+=om(t,r);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(n?s+=$Be(t,e):s+=IBe(t,e)),s}function Zze(t,e,n){switch(t.length){case 0:return uee();case 1:return oBe(t,e,n);case 2:return mBe(t,e,n);case 3:return uBe(t,e,n);default:return fBe(t,e,n)}}function Qze(t,e,n){switch(t.length){case 0:return uee();case 1:return lBe(t,e,n);case 2:return gBe(t,e,n);case 3:return cBe(t,e,n);case 4:return dBe(t,e,n);case 5:return hBe(t,e);case 6:return pBe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Jze(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function eBe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function tBe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function nBe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${rBe}
    ${sBe}
    ${iBe}
  `}const rBe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,sBe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,iBe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aBe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function uee(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function oBe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function lBe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function uBe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function cBe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${p4(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Rd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function fBe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let a=i,o="",l="b, r, c";for(let u=2;u<t.length-1;u++)a*=t[t.length-u-1],o=`
      int b${u} = index / ${a};
      index -= b${u} * ${a};
    `+o,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function dBe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${p4(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Rd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function hBe(t,e){const n=Rd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function pBe(t,e){const n=Rd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function mBe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(jt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function gBe(t,e,n){return jt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Pd(t){return`offset${t}`}function yBe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ls();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function vBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Pd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function bBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Ls();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function xBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${lm(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Pd(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function wBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=i[0],o=i[1],l=Ls();if(i!=null&&jt(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function SBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&jt(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],h=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Rc(n),l=a;if(l.length<n.length){const d=um(t,l),h=["row","col"];return`
      ${om(d,e)}
      float ${s}(int row, int col) {
        return ${s}(${cm(h,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${lm(t)}
      }
    `;const u=i[0],c=i[1],f=Pd(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function TBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],p=um(t,d),m=["b","row","col"];return`
        ${lee(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${cm(m,h)});
        }
      `}const o=Ls();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function CBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=Rc(n),u=o;if(u.length<n.length){const m=um(t,u),g=["row","col","depth"];return`
        ${om(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${cm(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${lm(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===i&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===a&&h==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Pd(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function EBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Ls();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,a=i.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],c=l[1],f=Math.ceil(i[a-1]/2);let d=f*Math.ceil(i[a-2]/2),h="int b, int row, int col",p=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let m=2;m<a-1;m++)h=`int b${m}, `+h,d*=i[a-m-1],p=`b${m} * ${d} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function kBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,o=n[1]*a,{newShape:l,keptDims:u}=Rc(n);if(l.length<n.length){const v=um(t,l),b=["row","col","depth","depth2"];return`
      ${om(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${cm(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${i}, 1)));
        ${lm(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Pd(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function NBe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,a=e[2]*i,o=e[1]*a,{newShape:l,keptDims:u}=Rc(e);if(l.length<e.length){const m=um(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${om(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${cm(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${i}, ${s})) +
          depth3;
        ${lm(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Pd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ABe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Rc(e);if(s.length<e.length){const g=um(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${om(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${cm(y,i)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${lm(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===a&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Pd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function lm(t){const e=t.name,n=pe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function $Be(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=oee(t.shapeInfo.logicalShape,e.logicalShape),l=ln(a),u=a-i;let c;const f=["x","y","z","w","u","v"];i===0?c="":a<2&&o.length>=1?c="coords = 0;":c=o.map(v=>`coords.${f[v+u]} = 0;`).join(`
`);let d="";a<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((v,b)=>`coords.${f[b+u]}`).join(", ");let h="return outputValue;";const m=pe(t.shapeInfo.logicalShape)===1,y=pe(e.logicalShape)===1;if(i===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const v=i-2,b=i-1;o.indexOf(v)>-1&&o.indexOf(b)>-1?h="return vec4(outputValue.x);":o.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(b)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function IBe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&jt(a,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=ln(l),c=oee(t.shapeInfo.logicalShape,e.logicalShape),f=l-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":l<2&&c.length>=1?d="coords = 0;":d=c.map(m=>`coords.${h[m+f]} = 0;`).join(`
`);let p="";return l<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+f]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${d}
      return get${r}(${p});
    }
  `}function ln(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function BR(t,e,n){const{newShape:r,keptDims:s}=Rc(e),i=e.length,a=t&&i===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&i>1&&!jt(e,n)&&r.length<i||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function um(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function cm(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t,e,n,r){const s=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),i=s.map(c=>c.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=Xze(s,a,e),l=Cze(t.gl,o),u=t.createProgram(l);return le().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:i,outShapeInfo:a},cee(t,e,u)))}function cee(t,e,n){const r=[],s=[];let i,a,o,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),le().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const d={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${f}Shape`,c),d.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),o=t.getUniformLocation(n,"outShapeStrides",c),a=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)s.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:a}}function WL(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],a=i.shape;if(!jt(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!jt(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function OBe(t,e,n,r,s){e.program.enableShapeUniforms||(WL(e.inShapeInfos,n),WL([e.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):t.setOutputMatrixTexture(i.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),le().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:f,shape:d,texShape:h}=e.variablesLocations[l];if(d){const{uniformShape:p}=BR(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(d,new Int32Array(p));break;case 2:t.gl.uniform2iv(d,new Int32Array(p));break;case 3:t.gl.uniform3iv(d,new Int32Array(p));break;case 4:t.gl.uniform4iv(d,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(pe(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=at(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],f=s[l];if(u.type==="float")t.gl.uniform1fv(c,f);else if(u.type==="vec2")t.gl.uniform2fv(c,f);else if(u.type==="vec3")t.gl.uniform3fv(c,f);else if(u.type==="vec4")t.gl.uniform4fv(c,f);else if(u.type==="int")t.gl.uniform1iv(c,f);else if(u.type==="ivec2")t.gl.uniform2iv(c,f);else if(u.type==="ivec3")t.gl.uniform3iv(c,f);else if(u.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function DBe(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:f}=BR(t.packedInputs,a.shape,l);let d="",h="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=at(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=a.shape.length,g=c.length===2&&jt(a.shape,l),y=pe(a.shape)===1,v=yp(a.shape,n.shape),b=!t.packedInputs&&m===n.shape.length&&jt(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${u?f:""}_${c.length}_${y}_${v}_${g}_${d}_${h}_${p}_${x}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${le().getNumber("WEBGL_VERSION")}`,i}function Es(t){return le().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RBe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ny.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ls();this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?p4(["r","c","d"],e):Rd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ny.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ls();this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?p4(["r","c","d"],e):Rd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MBe{constructor(e){this.variableNames=["A"],this.outTexUsage=Hi.DOWNLOAD;const n=Ls();this.outputShape=e,this.userCode=`
      ${aee}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Hi.DOWNLOAD;const n=Ls();this.outputShape=e,this.userCode=`
      ${aee}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LBe={R:0,G:1,B:2,A:3};class GL{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Ls();this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${LBe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?zR():LR(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zBe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ls();this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?zR():LR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BBe(t){const e=Ls(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Tze(t,n)}function jBe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Aze(t,e)}function UBe(t){const e=new Uint16Array([0,1,2,2,1,3]);return $ze(t,e)}function z0(t,e,n,r,s,i){_ze(e,n);const a=Ize(t),o=t.TEXTURE_2D;return qe(t,()=>t.bindTexture(o,a)),qe(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),qe(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),qe(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),qe(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),le().getNumber("WEBGL_VERSION")===1?qe(t,()=>t.texImage2D(o,0,r,e,n,0,s,i,null)):qe(t,()=>t.texStorage2D(o,1,r,e,n)),qe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function fee(t){return t.internalFormatFloat}function VBe(t,e,n,r){const[s,i]=F0(e,n);return z0(t,s,i,fee(r),r.textureFormatFloat,t.FLOAT)}function dee(t){return t.internalFormatHalfFloat}function WBe(t,e,n,r){const[s,i]=F0(e,n);return z0(t,s,i,dee(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function hee(t){return t.downloadTextureFormat}function GBe(t,e,n,r){const[s,i]=F0(e,n);return z0(t,s,i,hee(r),t.RGBA,t.UNSIGNED_BYTE)}function pee(t){return t.internalFormatPackedFloat}function HBe(t,e,n,r){const[s,i]=am(e,n);return z0(t,s,i,pee(r),t.RGBA,t.FLOAT)}function mee(t){return t.internalFormatPackedHalfFloat}function qBe(t,e,n,r){const[s,i]=am(e,n);return z0(t,s,i,mee(r),t.RGBA,r.textureTypeHalfFloat)}function KBe(t,e,n){return qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),jL(t,e,"clipSpacePos",n,3,20,0)&&jL(t,e,"uv",n,2,20,12)}function XBe(t,e,n,r,s,i){qe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;s instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=i.internalFormatPackedFloat),a.set(s),le().getNumber("WEBGL_VERSION")===2?qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function YBe(t,e,n){qe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?le().getNumber("WEBGL_VERSION")===2?qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):le().getNumber("WEBGL_VERSION")===2?qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ZBe(t,e,n,r){const s=t.createBuffer();qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=4*4*e*n;return qe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),qe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function QBe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function JBe(t,e,n,r){const[s,i]=F0(e,n),a=4,o=new Uint8Array(gze(e*n,a));return qe(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function eje(t,e,n,r,s,i,a,o){const l=t,u=new Float32Array(yze(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function tje(t,e,n){const r=new Float32Array(e*n*4);return qe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=le().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,hze(n,e)):this.gl=ho(n),e=this.gl,le().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>qe(i,()=>i.createVertexArray()),this.bindVertexArray=a=>qe(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>qe(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>qe(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>qe(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>qe(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>qe(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>qe(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),le().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=ib(this.gl,i),Oa(this.gl,a))this.textureHalfFloatExtension=ib(this.gl,a);else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Oa(this.gl,s))this.colorBufferHalfFloatExtension=ib(this.gl,s);else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Oa(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Oa(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=jBe(this.gl),this.indexBuffer=UBe(this.gl),this.framebuffer=Oze(this.gl),this.textureConfig=FR(this.gl,this.textureHalfFloatExtension)}get debug(){return le().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;qe(e,()=>e.finish()),qe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),qe(e,()=>e.deleteFramebuffer(this.framebuffer)),qe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),qe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),qe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),VBe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),WBe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),GBe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),YBe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),XBe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),qBe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),HBe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(UL(this.gl,this.framebuffer),this.outputTexture=null),qe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>JBe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,a){return eje(this.gl,e,n,r,s,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return QBe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=ZBe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(le().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=i}else le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>tje(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=BBe(n));const r=kze(n);qe(n,()=>n.attachShader(r,this.vertexShader)),qe(n,()=>n.attachShader(r,e)),Nze(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&hC(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;qe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),KBe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(qe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&hC(this.gl,this.program),qe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Rze(this.gl,e,n):Pze(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),qe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Mze(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=am(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&hC(this.gl,this.program),ab(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}qe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),qe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ib(this.gl,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await k8(()=>this.disposed||this.isQueryAvailable(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=nje(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in le().platform&&(r=le().platform.setTimeoutCustom.bind(le().platform)),k8(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),pC(this.gl,e,this.framebuffer),this.debug&&ab(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(pC(this.gl,this.outputTexture,this.framebuffer),this.debug&&ab(this.gl)):UL(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;pC(s,e,this.framebuffer),this.debug&&ab(s),this.outputTexture=e,qe(s,()=>s.viewport(0,0,n,r)),qe(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),qe(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function nje(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:rje,bincountImpl:gee,bincountReduceImpl:sje,bitwiseAndImpl:ije,castImpl:aje,ceilImpl:oje,concatImpl:lje,equalImpl:uje,expImpl:cje,expm1Impl:fje,floorImpl:dje,gatherNdImpl:hje,gatherV2Impl:pje,greaterImpl:mje,greaterEqualImpl:gje,lessImpl:yje,lessEqualImpl:vje,linSpaceImpl:bje,logImpl:xje,maxImpl:wje,maximumImpl:Sje,minimumImpl:Tje,multiplyImpl:Cje,negImpl:Eje,notEqualImpl:kje,prodImpl:Nje,raggedGatherImpl:Aje,raggedRangeImpl:$je,raggedTensorToTensorImpl:Ije,rangeImpl:_je,rsqrtImpl:Oje,scatterImpl:Dje,sigmoidImpl:Rje,simpleAbsImpl:yee,sliceImpl:Pje,sparseFillEmptyRowsImpl:Mje,sparseReshapeImpl:Fje,sparseSegmentReductionImpl:vee,sqrtImpl:Lje,staticRegexReplaceImpl:zje,stridedSliceImpl:Bje,stringNGramsImpl:jje,stringSplitImpl:Uje,stringToHashBucketFastImpl:Vje,subImpl:Wje,tileImpl:Gje,topKImpl:Hje,transposeImpl:jR,uniqueImpl:qje}=YMe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function _s(t,e){return e===1?[t]:bee(t,e)}function Kje(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xje{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Es(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=_s("rc",this.rank),r=ln(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xee{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${Yje(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?zR():LR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Yje(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Kze(["r","c","d"],"inputShape"):Rd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zje{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=qL(n,r),i=KL(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=HL(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let o;return s===ts.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===ts.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===ts.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===ts.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===ts.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=qL(r,s),a=KL(n,i,s);a in this.freeTextures||(this.freeTextures[a]=[]);const o=HL(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=le().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[a],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Qje(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function HL(t,e,n,r,s){const i=Jje(e,r);let a;if(s){const[l,u]=am(t[0],t[1]);a=l*u}else{const[l,u]=F0(t[0],t[1]);a=l*u}const o=Qje(n,i);return a*o}function Jje(t,e){switch(t){case ts.PACKED_2X2_FLOAT32:return pee(e);case ts.PACKED_2X2_FLOAT16:return mee(e);case ts.UNPACKED_FLOAT32:return fee(e);case ts.UNPACKED_FLOAT16:return dee(e);case ts.PACKED_4X1_UNSIGNED_BYTE:return hee(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function eUe(t){return le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ts.PACKED_2X2_FLOAT32:ts.UNPACKED_FLOAT32:t?ts.PACKED_2X2_FLOAT16:ts.UNPACKED_FLOAT16}function qL(t,e){if(t===Hi.UPLOAD)return ts.PACKED_2X2_FLOAT32;if(t===Hi.RENDER||t==null)return eUe(e);if(t===Hi.DOWNLOAD||t===Hi.PIXELS)return ts.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function KL(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const qa="if (isnan(x)) return x;",tUe="return x;",XL="return abs(x);",nUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",rUe=qa+`
  return (x < 0.0) ? 0.0 : x;
`,sUe=qa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Nu="return x;",iUe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aUe="return x;",oUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,lUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cUe="return 1.0 / (1.0 + exp(-1.0 * x));";class ju{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fUe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length);const n=e.length,r=_s("rc",n),s=ln(n),i=Kje(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dUe=CD,hUe=1e-7,pUe=1e-4,ub={};function mUe(t){return t in ub||(ub[t]={}),ub[t]}const gUe=le().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),yUe=600;function vUe(){return le().global.screen==null?1024:le().global.screen.height*le().global.screen.width*window.devicePixelRatio*yUe/1024/1024}class m4 extends I_{nextDataId(){return m4.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!le().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof yC)n=e;else{const r=ho(le().getNumber("WEBGL_VERSION"),e);n=new yC(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ho(le().getNumber("WEBGL_VERSION"));n=new yC(r),this.binaryCache=mUe(le().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Zje(this.gpgpu),this.numMBBeforeWarning=vUe(),this.texData=new Fq(this,Io())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const u=ob(n),c=new GL(u,!1,a),f=this.runWebGLProgram(c,[o],r,[[s,i]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(e,n,r){if((le().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||le().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Hi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(le().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Hi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:a,shape:o,isPacked:l}=n;if(a!=null){let d;l?d=new ju(o,Nu):d=new jo(o,Nu);const h=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:s}],s),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Us());let f;if(s==="complex64"){const d=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);f=Zl(d,h)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Us()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(i!=null){let p;l?p=new ju(s,Nu):p=new jo(s,Nu);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(le().getBool("DEBUG")&&!le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&le().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(a!=="complex64"&&le().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...sb(s))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(a==="complex64"){const p=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),m=p[0],g=p[1];f=Zl(m,g)}else if(u==null)f=this.getValuesFromTexture(e);else{const p=pe(s);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;qe(p,()=>p.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Io().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:a,dtype:o,isPacked:l,texture:u}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let h;l?h=new ju(i,Nu):h=new jo(i,Nu);const p=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:o}],o),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=Io().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>hc(s));return Nt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Nt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!wze(r))throw le().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=pe(n);if(le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...sb(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),p}const a=le().getBool("WEBGL_PACK")&&s===!0,o=a?ob(n):n,l=a?new FBe(o):new MBe(o),u=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=sd(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=sd(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);o.kernelMs=FTe(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:a[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Us(),endMs:null}}endTimer(e){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Us(),e)}async getQueryTime(e){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,a)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=gUe){return le().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&pe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Gi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return dUe(e.shape,n)}packedUnaryOp(e,n,r){const s=new ju(e.shape,n),i=this.compileAndRun(s,[e],r);return Io().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=yee(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,XL,e.dtype);const n=new jo(e.shape,XL),r=this.compileAndRun(n,[e]);return Io().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&w1(r[0])){const i=r.map(a=>tc(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Io().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new fUe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Xje(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Cp(e.shape),...Ep(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Cp(n),...Ep(n)],a=new xee(i,r),o=!0,l=[r],u=this.runWebGLProgram(a,[s],e.dtype,l,o);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=r;if(n!=null){const d=pe(i),h=n[0]*n[1]*4;P(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=ob(i);let l;s?l=new PBe(o):l=new RBe(o);const u=!0,c=[n??sb(o)],f=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,c,u,n);return{dtype:a,shape:i,dataId:f.dataId}}runWebGLProgram(e,n,r,s,i=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Ny.DENSE){const y=a??sb(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),pe(o.shape)===0)return l.values=is(o.dtype,0),o;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&pe(y.shape)<=le().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!jx(v.shape,y.shape)){const b=y,x=y.shape;y.shape=v.shape,y=this.packedReshape(y,x),u.push(y),v=this.texData.get(y.dataId),b.shape=x}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:l,isUniform:!1},d=DBe(e,c,f),h=this.getAndSaveBinary(d,()=>_Be(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),le().get("ENGINE_COMPILE_ONLY")||OBe(this.gpgpu,h,c,f,s),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=le().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=Us();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!le().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),y}return o}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(le().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ie(()=>{if(!le().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=le().getBool("DEBUG");le().set("DEBUG",!1);const n=this.abs(ut(1e-8)).dataSync()[0];if(le().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?hUe:pUe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Us());let f=n.texShape;if(f==null&&(f=zze(r,l),n.texShape=f),i!=null){const d=ob(r);let h,p=f[1],m=f[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([p,m]=am(f[0],f[1])),l?h=new zBe(d,g):h=new GL(d,g);const y=g?[m,p]:f,v=this.makeTensorInfo(y,s),b=this.texData.get(v.dataId);g?b.usage=Hi.PIXELS:b.usage=Hi.UPLOAD,b.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const x=[[m,p]],C=this.runWebGLProgram(h,[v],s,x,!0),E=this.texData.get(C.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,le().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=Us()-c)}else{const d=this.acquireTexture(f,o,s,l);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=bUe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*mx(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await rY(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(iee(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=cee(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:a,channels:o}=e,l=Io().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(s,n,r,i,a,o);return Io().makeTensorFromDataId(u,n,r,l)}}m4.nextDataId=0;function bUe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lK()&&fK("webgl",()=>new m4,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class gd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=wt(n,r),this.enableShapeUniforms=Es(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Md=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class fm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=wt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Es(i);let a="";if(s)if(i===0||pe(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${ln(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=_s("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const xUe={kernelName:U1,backendName:"webgl",kernelFunc:Ei};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gc(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(i.dataId),o=Ei({inputs:{x:r},backend:n}),l=Ei({inputs:{x:s},backend:n});return a.complexTensorInfos={real:o,imag:l},i}const wUe={kernelName:B_,backendName:"webgl",kernelFunc:Gc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wee="return (a < 0.) ? b * a : a;",See=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function SUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,a=n.makeTensorInfo([],"float32",Pc(i,"float32")),o=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(See,s.shape,a.shape):new gd(wee,s.shape,a.shape),l=n.runWebGLProgram(o,[s,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const TUe={kernelName:K3,backendName:"webgl",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tee="return (a < 0.) ? b * a : a;",Cee=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function CUe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(Cee,r.shape,s.shape):new gd(Tee,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const EUe={kernelName:hS,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dm="if (isnan(x)) return x;";function Ht({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:a}=s,o=i,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const f=o.texData.get(a.dataId),d=n(f.values,l);return o.makeTensorInfo(a.shape,l,d)}const u=le().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new ju(a.shape,e):c=new jo(a.shape,t),o.runWebGLProgram(c,[a],l)}}function ds({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:a,backend:o})=>{const{a:l,b:u}=a,c=o;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,C={dataId:x.dataId,dtype:x.dtype,shape:l.shape},E={dataId:w.dataId,dtype:w.dtype,shape:u.shape},A=new gd(t,l.shape,u.shape);return c.runWebGLProgram(A,[C,E],Si(x.dtype,w.dtype))}),v=Gc({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const f=i||Si(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&s!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Ql(p):p,y=l.dtype==="string"?Ql(m):m,[v,b]=s(l.shape,u.shape,g,y,f),x=c.makeTensorInfo(b,f),w=c.texData.get(x.dataId);return w.values=v,x}const d=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new fm(e,l.shape,u.shape,n):h=new gd(t,l.shape,u.shape),c.runWebGLProgram(h,[l,u],f)}}function Ay(t,e=!1){if(t==="linear")return e?aUe:tUe;if(t==="relu")return e?lUe:rUe;if(t==="elu")return e?oUe:nUe;if(t==="relu6")return e?uUe:sUe;if(t==="prelu")return e?Cee:Tee;if(t==="leakyrelu")return e?See:wee;if(t==="sigmoid")return e?cUe:iUe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eee{constructor(e,n,r,s=!1,i=!1,a=!1,o=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Es(this.outputShape.length);const c=s?e[1]:e[2],f=Math.ceil(c/2),d=s?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";o&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:g=`vec4 activation(vec4 x) {
          ${o}
        }`,y="result = activation(result);");const v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${x};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YL={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class ZL{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=wt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QL="return a * b;";function VR(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Si(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),u=new ZL(YL.REAL,r.shape,s.shape),c=new ZL(YL.IMAG,r.shape,s.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Gc({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,s])){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[u,c]=Cje(r.shape,s.shape,o.values,l.values,i),f=n.makeTensorInfo(c,i),d=n.texData.get(f.dataId);return d.values=u,f}let a;return le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new fm(QL,r.shape,s.shape):a=new gd(QL,r.shape,s.shape),n.runWebGLProgram(a,[r,s],i)}const kUe={kernelName:Z1,backendName:"webgl",kernelFunc:VR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(t,e,n){const r=[Cp(t.shape),...Ep(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Cp(e),...Ep(e)],a=new xee(i,r),o=!0,l=[r],u=n.runWebGLProgram(a,[s],t.dtype,l,o);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ue(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=n,o=pe(s.shape),l=Lq(i,o),u=pe(l);P(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=a.texData.get(s.dataId);return c.isPacked&&!jx(s.shape,l)&&!(c.texture!==null&&jx(c.shape,l))?NUe(s,l,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const AUe={kernelName:mS,backendName:"webgl",kernelFunc:Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JL{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];const o=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${hp(f)?f.toPrecision(2):f}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ue{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IUe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=JS(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Fd(t,e,n,r){const s=IUe(t.shape);let i=t;for(let a=0;a<s.length;a++){const{inSize:o,windowSize:l,outSize:u}=s[a];let c,f;n==="mean"?c=a===0?new JL({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},o):new JL({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u}):c=new $Ue({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},n),f=i,i=r.runWebGLProgram(c,[i],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ue{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const s=ln(this.rank),i=OUe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function OUe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DUe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=ln(this.rank),i=bee("rc",this.rank),a=new Array(this.rank);for(let c=0;c<n.length;c++)a[n[c]]=i[c];const o=`vec2(${a.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(t,e,n){const r=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DUe(t.shape,e):new _Ue(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RUe(t,e,n,r){const s=e,i=t.shape.length,a=Ot(s,t.shape);let o=a;const l=Hn(o,i),u=l!=null;let c=t;u&&(c=g4(t,l,r),o=ar(o.length,i)),cs("sum",o,i);const[f,d]=Hr(c.shape,o);let h=f;n&&(h=ir(f,a));const p=pe(d),g=pe(t.shape)/p,y=Ue({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=zO(t.dtype),b=Fd(y,v,"sum",r),x=Ue({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;return RUe(s,i,a,n)}const PUe={kernelName:wS,backendName:"webgl",kernelFunc:y4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,a=n,o=s.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=s.shape[i[c]];let u;if(a.shouldExecuteOnCPU([s])){const f=a.texData.get(s.dataId).values,d=jR(f,s.shape,s.dtype,i,l);u=a.makeTensorInfo(l,s.dtype);const h=a.texData.get(u.dataId);h.values=d}else u=g4(s,i,a);return u}const MUe={kernelName:Ph,backendName:"webgl",kernelFunc:Ms};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kee=1e3;function Ux({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=pe(m),v=pe(g),x=wt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);P(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,f,h]:[y,h,f],C=r?[v,p,d]:[v,d,p],E=Ue({inputs:{x:t},backend:s,attrs:{shape:w}}),A=Ue({inputs:{x:e},backend:s,attrs:{shape:C}}),O=[E,A],R=Math.max(y,v),F=n?E.shape[1]:E.shape[2],z=i!=null,j=a!=null,H=l==="leakyrelu",J=l!=null?Ay(l,!0):null,U=z||j||H||J!=null;let Y;if((h===1||p===1)&&F>kee&&U===!1){let se=E,he=A;n&&(se=Ms({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),O.push(se)),r&&(he=Ms({inputs:{x:A},backend:s,attrs:{perm:[0,2,1]}}),O.push(he));const be=p!==1,ue=p===1;let Ne=se;be&&(Ne=Ue({inputs:{x:se},backend:s,attrs:{shape:[R,F,1]}}),O.push(Ne));const _e=p===1?2:1;let Ee=he;ue&&(Ee=Ue({inputs:{x:he},backend:s,attrs:{shape:[R,1,F]}}),O.push(Ee));const Me=VR({inputs:{a:Ne,b:Ee},backend:s});Y=y4({inputs:{x:Me},backend:s,attrs:{axis:_e,keepDims:!0}}),O.push(Me)}else{const se=Si(t.dtype,e.dtype),he=new Eee(w,C,[R,h,p],n,r,z,J,j,H),be=[E,A];if(i!=null&&be.push(i),j&&be.push(a),H){const ue=s.makeTensorInfo([],"float32",Pc(o,"float32"));be.push(ue),O.push(ue)}Y=s.runWebGLProgram(he,be,se)}const Q=Ue({inputs:{x:Y},backend:s,attrs:{shape:x}});O.push(Y);for(const se of O)s.disposeIntermediateTensorInfo(se);return Q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FUe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return Ux({a:s,b:i,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const LUe={kernelName:gx,backendName:"webgl",kernelFunc:FUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e7="return abs(x);";function zUe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),a=yee(i.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let s;return le().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new ju(r.shape,e7):s=new jo(r.shape,e7),n.runWebGLProgram(s,[r],r.dtype)}const BUe={kernelName:k3,backendName:"webgl",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe=qa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,UUe=Ht({opSnippet:jUe}),VUe={kernelName:S1,backendName:"webgl",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WUe=qa+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,GUe=Ht({opSnippet:WUe}),HUe={kernelName:T1,backendName:"webgl",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t7="return a + b;",qUe=ds({opSnippet:t7,packedOpSnippet:t7,supportsComplex:!0,cpuKernelImpl:rje}),KUe={kernelName:Jp,backendName:"webgl",kernelFunc:qUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XUe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YUe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vb(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ei({inputs:{x:r[0]},backend:n});if(r.length>le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Vb({inputs:r.slice(0,l),backend:n}),c=Vb({inputs:r.slice(l),backend:n});return Vb({inputs:[u,c],backend:n})}const s=r.map(l=>l.dtype).reduce((l,u)=>Si(l,u)),i=r.map(l=>l.shape),o=le().getBool("WEBGL_PACK")?new YUe(r[0].shape,i):new XUe(r[0].shape,i);return n.runWebGLProgram(o,r,s)}const ZUe={kernelName:N3,backendName:"webgl",kernelFunc:Vb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Ot(i,s.shape);let u=l;const c=Hn(u,o);let f=s;c!=null&&(f=Ms({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,o)),cs("all",u,o);const[d,h]=Hr(f.shape,u),p=pe(h),m=Ue({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Fd(m,m.dtype,"all",n);let y;if(a){const v=ir(d,l);y=Ue({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ue({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const JUe={kernelName:R_,backendName:"webgl",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Ot(i,s.shape);let u=l;const c=Hn(u,o);let f=s;c!=null&&(f=Ms({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,o)),cs("any",u,o);const[d,h]=Hr(f.shape,u),p=pe(h),m=Ue({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Fd(m,m.dtype,"any",n);let y;if(a){const v=ir(d,l);y=Ue({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ue({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const tVe={kernelName:P_,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nVe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rVe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,u=ln(l),c=_s("coords",l);let f,d;if(a===1){d=l+1;const A=ln(d);f=`
        ${A} sourceLocR = ${A}(${c.join()}, 0);
        ++${c[l-1]};
        ${A} sourceLocG = ${A}(${c.join()}, 0);
        ++${c[l-2]};
        ${A} sourceLocA = ${A}(${c.join()}, 0);
        --${c[l-1]};
        ${A} sourceLocB = ${A}(${c.join()}, 0);
        --${c[l-2]};`}else d=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],m=h.map(A=>"int "+A),g=_s("sourceLocR",d-1).concat("inIdx.r"),y=_s("sourceLocG",d-1).concat("inIdx.g"),v=_s("sourceLocB",d-1).concat("inIdx.b"),b=_s("sourceLocA",d-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,C=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,E=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${o[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const a=JS(i),o={windowSize:a,inSize:i,batchSize:s,outSize:Math.ceil(i/a)},l=new nVe(o,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=Nee(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function Aee(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],a=JS(i),o=new rVe(s,a,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(o,l,"int32");if(u.shape.length===e.shape.length){const c=Aee(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function $ee(t,e,n,r){const s=[n];if(cs("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!le().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Hr(l.shape,s),f=pe(c),d=Ue({inputs:{x:l},backend:t,attrs:{shape:[-1,f]}});i.push(d);const h=Nee(t,d,r);i.push(h);const p=Ue({inputs:{x:h},backend:t,attrs:{shape:u}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return Aee(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Ot(i,s.shape);const o=Hn(a,s.shape.length);let l=s;const u=[];o!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),a=ar(a.length,l.shape.length)),cs("argMax",[a[0]],l.shape.length);const c=$ee(n,l,a[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const iVe={kernelName:A3,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Ot(i,s.shape);const o=Hn(a,s.shape.length);let l=s;const u=[];o!=null&&(l=Ms({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),a=ar(a.length,l.shape.length)),cs("argMin",[a[0]],l.shape.length);const c=$ee(n,l,a[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const oVe={kernelName:$3,backendName:"webgl",kernelFunc:aVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe=qa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,uVe=Ht({opSnippet:lVe}),cVe={kernelName:C1,backendName:"webgl",kernelFunc:uVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe=qa+"return log(x + sqrt(x * x + 1.0));",dVe=Ht({opSnippet:fVe}),hVe={kernelName:E1,backendName:"webgl",kernelFunc:dVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pVe=qa+`
  return atan(x);
`,mVe=Ht({opSnippet:pVe}),gVe={kernelName:k1,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=UR+`
  return atan(a, b);
`,vVe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Md+`
  return result;
`,bVe=ds({opSnippet:yVe,packedOpSnippet:vVe}),xVe={kernelName:A1,backendName:"webgl",kernelFunc:bVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wVe=qa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,SVe=Ht({opSnippet:wVe}),TVe={kernelName:N1,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $y{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const A=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?g:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const w=Math.floor(a/4)*4,C=a%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${x});
      }
    `}}class WR{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const E=Math.floor(a/4)*4,A=a%4,O=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${E};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;L0(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,u=1;P(us(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ga(s.shape,i,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&jt(c.inShape,c.outShape))return Ei({inputs:{x:s},backend:n});const f=new $y(c,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const EVe={kernelName:I3,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=lu(s.shape,i,a,c,o,l,u),d=new WR(f,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const NVe={kernelName:_3,backendName:"webgl",kernelFunc:kVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AVe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,f=u-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class $Ve{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=f-1-e.padInfo.front,m=d-1-e.padInfo.top,g=h-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=lu(a.shape,o,l,f,u,c),h=new $Ve(d);return n.runWebGLProgram(h,[s],a.dtype)}const _Ve={kernelName:F_,backendName:"webgl",kernelFunc:IVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;L0([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=Ga(a.shape,o,l,1,u),f=new AVe(c);return n.runWebGLProgram(f,[s],a.dtype)}const DVe={kernelName:M_,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RVe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;return Ux({a:s,b:i,transposeA:a,transposeB:o,backend:n})}const PVe={kernelName:O3,backendName:"webgl",kernelFunc:RVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MVe{constructor(e,n,r,s,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],wt(e,n),wt(e,r);let o="0.0";s!=null&&(wt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";i!=null&&(wt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FVe{constructor(e,n,r,s,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],wt(e,n),wt(e,r);let o="vec4(0.0)";s!=null&&(wt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(wt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LVe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:a,scale:o}=t;P(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,s,i];let c=null;a!=null&&(c=a.shape,u.push(a));let f=null;o!=null&&(f=o.shape,u.push(o));const d=le().getBool("WEBGL_PACK_NORMALIZATION")?new FVe(r.shape,s.shape,i.shape,c,f,l):new MVe(r.shape,s.shape,i.shape,c,f,l);return e.runWebGLProgram(d,u,u[0].dtype)},zVe={kernelName:G3,backendName:"webgl",kernelFunc:LVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BVe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=ln(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=jVe(this.rank);let s;const i=e.map((a,o)=>`sourceLoc.${HN[o]} = start[${o}] + coords.${HN[o]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const HN=["x","y","z","w","u","v"];function jVe(t){if(t===1)return"sourceLoc";if(t<=6)return HN.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UVe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=ln(this.rank),r=_s("coords",this.rank),s=_s("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${i})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${s[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VVe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),a=r.texData.get(i.dataId);Object.assign(a,s),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=LD(e,at(t.shape));s.slice&&(o+=s.slice.flatOffset),a.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),i}function hm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r,[o,l]=QS(s,i,a);if(PD(s,o,l),pe(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const f=n.texData.get(s.dataId),d=Pje(f.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const{isPacked:u}=n.texData.get(s.dataId),c=FD(s.shape,o,l);if(u||!c){const f=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UVe(l):new BVe(l),d=[o];return n.runWebGLProgram(f,[s],s.dtype,d)}return n.uploadToGPU(s.dataId),VVe(s,o,l,n)}const WVe={kernelName:xS,backendName:"webgl",kernelFunc:hm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;P(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((v,b)=>v*b),l=E0(s.shape,i,o),u=k0(l.length,i.length),c=N0(s.shape,i,o),f=VD(a,i.length),d=WD(c,a,i.length),h=[],p=Ue({inputs:{x:s},backend:n,attrs:{shape:l}}),m=Ms({inputs:{x:p},backend:n,attrs:{perm:u}}),g=Ue({inputs:{x:m},backend:n,attrs:{shape:c}}),y=hm({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(m),h.push(g),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},HVe={kernelName:D3,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.readSync(s.dataId),l=n.readSync(i.dataId),u=gee(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}const KVe={kernelName:L_,backendName:"webgl",kernelFunc:qVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,YVe=`
  return float(int(a.r) & int(b.r));
`;function ZVe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=le().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=le().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||a===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(s.dataId).values,[c,f]=ije(r.shape,s.shape,l,u,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let o;return i?o=new fm(XVe,r.shape,s.shape,!1):o=new gd(YVe,r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}const QVe={kernelName:R3,backendName:"webgl",kernelFunc:ZVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JVe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),o=wt(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const eWe={kernelName:z_,backendName:"webgl",kernelFunc:JVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tWe="return float(a != b);",Iee=ds({opSnippet:tWe,cpuKernelImpl:kje,dtype:"bool"}),nWe={kernelName:lS,backendName:"webgl",kernelFunc:Iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ei({inputs:{x:s.complexTensorInfos.real},backend:n})}const rWe={kernelName:vO,backendName:"webgl",kernelFunc:B0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sWe="return float(int(x));";function iWe(t,e){const n=new jo(t.shape,sWe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qN(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Ei({inputs:{x:s},backend:n});const a=Tr(s.shape),o=qN({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Gc({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const a=B0({inputs:{input:s},backend:n}),o=qN({inputs:{x:a},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(a),o}if(!zq(s.dtype,i)){const a=Ei({inputs:{x:s},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const a=n.texData.get(s.dataId).values,[o,l,u]=aje(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,u)}if(i==="int32")return iWe(s,n);if(i==="bool"){const a=n.makeTensorInfo([],"bool",is("bool",1)),l=Iee({inputs:{a:s,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const aWe={kernelName:$1,backendName:"webgl",kernelFunc:qN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7="return ceil(x);",oWe=Ht({opSnippet:n7,packedOpSnippet:n7,cpuKernelImpl:oje}),lWe={kernelName:I1,backendName:"webgl",kernelFunc:oWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uWe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cWe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:a}=r;let o;le().getBool("WEBGL_PACK_CLIP")?o=new cWe(s.shape):o=new uWe(s.shape);const l=[[i],[a]];return n.runWebGLProgram(o,[s],s.dtype,l)}const dWe={kernelName:_1,backendName:"webgl",kernelFunc:fWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hWe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function pWe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new hWe(r.shape),a=[r7(r,s.complexTensorInfos.real),r7(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}const mWe={kernelName:P3,backendName:"webgl",kernelFunc:pWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gWe{constructor(e){this.outputShape=[],this.outputShape=Xo(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yWe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xo(e,n);const r=this.outputShape,s=r.length,i=ln(s),a=_s("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=o[n],c=o.slice(-2),f=o.join();let d=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];d+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${cb(o,u,g)}),
            vec2(${cb(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];d+=`
        return getChannel(
          getT${h}(${cb(o,u,p)}),
          vec2(${cb(c,u,p)}));`,this.userCode=`
      float getValue(${o.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function cb(t,e,n){const r=t.indexOf(e);return t.map((i,a)=>a===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ei({inputs:{x:s.complexTensorInfos.imag},backend:n})}const vWe={kernelName:sO,backendName:"webgl",kernelFunc:v4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vg(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>B0({inputs:{input:v},backend:n})),p=t.map(v=>v4({inputs:{input:v},backend:n})),m=vg(h,e,n),g=vg(p,e,n),y=Gc({inputs:{real:m,imag:g},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const h=t.map(x=>{const C=[-1,pe(x.shape.slice(e))];return Ue({inputs:{x},backend:n,attrs:{shape:C}})}),p=h.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=Xo(h.map(x=>x.shape),1),g=h[0].shape[0]===1,y=lje(p,m,r,g),v=Xo(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=t.filter(h=>pe(h.shape)>0),a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=a?new jo(t[0].shape,Nu):new ju(t[0].shape,Nu);return n.runWebGLProgram(h,t,r)}const o=le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const h=[];for(let m=0;m<i.length;m+=o){const g=i.slice(m,m+o);h.push(vg(g,e,n))}const p=vg(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(a){const h=new yWe(i.map(p=>p.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:l,outShape:u}=bWe(i,e,n),c=new gWe(l.map(h=>h.shape)),f=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=Ue({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),d}function bWe(t,e,n){const r=Xo(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Ue({inputs:{x:i},attrs:{shape:[-1,pe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Ot(s,e[0].shape)[0],a=e.map(u=>u.shape);BD(a,i);const o=Xo(e.map(u=>u.shape),i);if(pe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(u=>pe(u.shape)>0);return l.length===1?Ei({inputs:{x:l[0]},backend:n}):vg(l,i,n)}const xWe={kernelName:M3,backendName:"webgl",kernelFunc:_ee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oee{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1;let x="",w="";r&&(s?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class wWe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dee{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Es(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)d+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;d+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)d+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(f+1)/2;g++){const y=g*2;if(d+=`
           xC = xCCorner + ${y*l};
           `,o===1){if(y<c&&(a%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=a%2===0?__(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(a%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",p="";r&&(s?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SWe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Es(this.outputShape.length);const{dataFormat:r}=n,s=Ls(),i=r==="channelsLast",a=i?1:2,o=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vx(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Ree({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],d=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(i!=null){const x=Vx(i.shape,h);x!=null&&(i=Ue({inputs:{x:i},backend:r,attrs:{shape:x}}),y.push(i))}if(s!=null){const x=Vx(s.shape,h);x!=null&&(s=Ue({inputs:{x:s},backend:r,attrs:{shape:x}}),y.push(s))}if(!((f===1||d===1)&&c>kee)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&jt(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,P(jx(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const E=Ue({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(E);const A=Ux({a:w,b:E,backend:r,transposeA:p,transposeB:m,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a}),O=r.texData.get(A.dataId);P(O.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,O.shape=n.outShape,g=Ei({inputs:{x:A},backend:r}),g.shape=n.outShape,y.push(A)}else{const x=n.outHeight*n.outWidth,w=Ue({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),C=Ue({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=Ux({a:h?w:C,b:h?C:w,transposeA:!h,transposeB:m,backend:r,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a});g=Ue({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(C),y.push(E)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function Pee({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=d*f,y=[n.batchSize,m,g],v=!0,b=!1,x=[];if(i!=null){const Q=Vx(i.shape,p);Q!=null&&(i=Ue({inputs:{x:i},backend:r,attrs:{shape:Q}}),x.push(i))}if(s!=null){const Q=Vx(s.shape,p);Q!=null&&(s=Ue({inputs:{x:s},backend:r,attrs:{shape:Q}}),x.push(s))}const w=Ue({inputs:{x:e},backend:r,attrs:{shape:[1,m,pe(e.shape)/m]}});x.push(w);const C=new SWe(y,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],A=r.runWebGLProgram(C,[t],"float32",E),O=Ue({inputs:{x:A},backend:r,attrs:{shape:y}});x.push(A),x.push(O);const R=s!=null,F=i!=null,z=o==="leakyrelu",j=o?Ay(o,!0):null,H=new Eee(p?O.shape:w.shape,p?w.shape:O.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,b,R,j,F,z),J=p?[O,w]:[w,O];if(s&&J.push(s),F&&J.push(i),z){const Q=r.makeTensorInfo([],"float32",Pc(a,"float32"));J.push(Q),x.push(Q)}const U=r.runWebGLProgram(H,J,"float32"),Y=Ue({inputs:{x:U},backend:r,attrs:{shape:n.outShape}});x.push(U);for(const Q of x)r.disposeIntermediateTensorInfo(Q);return Y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=uu(l),d=Gr(s.shape,i.shape,a,u,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=Ree({x:s,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&le().getBool("WEBGL_EXP_CONV")){const m=new Dee(d),g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(m,[s,i],"float32",g)}else if(le().getBool("WEBGL_CONV_IM2COL"))h=Pee({x:s,filter:i,convInfo:d,backend:n});else{const m=new Oee(d);h=n.runWebGLProgram(m,[s,i],"float32")}const p=Ue({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),p}const CWe={kernelName:F3,backendName:"webgl",kernelFunc:TWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EWe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class kWe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=a?1:2,c=a?2:3,f=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class NWe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AWe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $We(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=uu(l),d=Gr(s.shape,c,a,1,o,u,!1,f),h=new EWe(d);return n.runWebGLProgram(h,[s,i],"float32")}const IWe={kernelName:j_,backendName:"webgl",kernelFunc:$We};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _We{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Es(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=uu(u),d=Gr(a,i.shape,o,1,l,c,!1,f);if(le().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],p=new _We(d);return n.runWebGLProgram(p,[s,i],"float32",h)}else{const h=new kWe(d);return n.runWebGLProgram(h,[s,i],"float32")}}const DWe={kernelName:L3,backendName:"webgl",kernelFunc:OWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,u=Lc(s.shape,i.shape,a,l,o),c=new wWe(u);return n.runWebGLProgram(c,[s,i],"float32")}const PWe={kernelName:z3,backendName:"webgl",kernelFunc:RWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r,u=Lc(s.shape,l,a,1,o),c=new NWe(u);return n.runWebGLProgram(c,[s,i],"float32")}const FWe={kernelName:U_,backendName:"webgl",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r,u=Lc(l,i.shape,o,1,a),c=new AWe(u);return n.runWebGLProgram(c,[s,i],"float32")}const zWe={kernelName:V_,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BWe=dm+`
  return cos(x);
`,jWe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Md}
  return result;
`,UWe=Ht({opSnippet:BWe,packedOpSnippet:jWe}),VWe={kernelName:O1,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WWe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,GWe=Ht({opSnippet:WWe}),HWe={kernelName:D1,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qWe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,u]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,u];const h=s==="bilinear"?1:0,[p,m]=[`${o-1}.0`,`${l-1}.0`],[g,y,v]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,x,w]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:u}=r,c=new qWe(s.shape,i.shape,o,l,u);return n.runWebGLProgram(c,[s,i,a],"float32")},XWe={kernelName:G_,backendName:"webgl",kernelFunc:KWe};var Iy;(function(t){t.Prod="*",t.Sum="+"})(Iy||(Iy={}));class s7{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===Iy.Prod?"1.0":"0.0",o=r?a:`getX(${i7(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=s?`end != ${l-1}`:"end != 0",c=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${l}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${ln(i)} coords = getOutputCoords();
        int end = ${a7(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${a7(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${i7(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function i7(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function a7(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t,e,n,r,s,i){const a=e.shape.length,o=Hn([r],a);let l=e;o!=null&&(l=Ms({inputs:{x:e},backend:n,attrs:{perm:o}}));const u=ar(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let f=Ei({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new s7(t,l.shape,!1,i),p=[[d]],m=f;f=n.runWebGLProgram(h,[f],f.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const d=new s7(t,l.shape,s,i),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const d=zc(o),h=Ms({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Mee(Iy.Prod,s,n,i,a,o)}const ZWe={kernelName:W_,backendName:"webgl",kernelFunc:YWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Mee(Iy.Sum,s,n,i,a,o)}const JWe={kernelName:B3,backendName:"webgl",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=gee(l,u,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=sje(l,u,a,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const tGe={kernelName:H_,backendName:"webgl",kernelFunc:eGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nGe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r,o=s.shape[0],l=a==="NHWC"?s.shape[1]:s.shape[2],u=a==="NHWC"?s.shape[2]:s.shape[3],c=a==="NHWC"?s.shape[3]:s.shape[1],f=l*i,d=u*i,h=c/(i*i),p=a==="NHWC"?[o,f,d,h]:[o,h,f,d],m=new nGe(p,i,a);return n.runWebGLProgram(m,[s],s.dtype)}const sGe={kernelName:q_,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fee{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Es(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lee{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Es(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<f;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){const v=y*2;if(h+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<f&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<f)){const b=o%2===0?__(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<f&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<f&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<f&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<f&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),P(us(a,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=Gr(s.shape,i.shape,a,c,o,u,!0);let d;le().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new Lee(f):d=new Fee(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[s,i],"float32",h)}const aGe={kernelName:j3,backendName:"webgl",kernelFunc:iGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oGe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lGe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,f=Gr(s.shape,c,a,o,l,u,!0),d=new oGe(f);return n.runWebGLProgram(d,[s,i],"float32")}const cGe={kernelName:K_,backendName:"webgl",kernelFunc:uGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,f=Gr(c,i.shape,a,o,l,u,!0),d=new lGe(f);return n.runWebGLProgram(d,[s,i],"float32")}const dGe={kernelName:X_,backendName:"webgl",kernelFunc:fGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hGe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=pe(r.shape),a=Ue({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new hGe(i),l=n.runWebGLProgram(o,[a],a.dtype),u=Ue({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const mGe={kernelName:Y_,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gGe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:f,left:d}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,u=v0(s.shape,i.shape,a,o,"NHWC",l);let c;const f=new gGe(u);c=n.runWebGLProgram(f,[s,i],"float32");const d=Ue({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}const vGe={kernelName:U3,backendName:"webgl",kernelFunc:yGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bGe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=QD(s,i.length);eR(a.length,l,i);const{path:u,steps:c}=tR(o,l),f=c.length;let d=null,h=a.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=JD(h,l[g]);let b;nR(y)?b=i[g]:(b=Ms({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);jt(b.shape,x)||(b=Ue({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),d===null?d=b:(d=VR({inputs:{a:b,b:d},backend:n}),p.push(d))}m<f-1&&(u[m]>=0&&(d=y4({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-h),keepDims:!1}}),p.push(d)),h--)}for(const m of p)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const xGe={kernelName:Z_,backendName:"webgl",kernelFunc:bGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wGe="return (x >= 0.0) ? x : (exp(x) - 1.0);",SGe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,TGe=Ht({opSnippet:wGe,packedOpSnippet:SGe}),CGe={kernelName:P1,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EGe="return (b >= 0.0) ? a : a * (b + 1.0);",kGe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,NGe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(kGe,r.shape,s.shape):new gd(EGe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},AGe={kernelName:Q_,backendName:"webgl",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ge=`
  return vec4(equal(a, b));
`,IGe="return float(a == b);",_Ge=ds({opSnippet:IGe,packedOpSnippet:$Ge,dtype:"bool",cpuKernelImpl:uje}),OGe={kernelName:V3,backendName:"webgl",kernelFunc:_Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DGe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${GD};
  float a1 = ${HD};
  float a2 = ${qD};
  float a3 = ${KD};
  float a4 = ${XD};
  float a5 = ${YD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,RGe=Ht({opSnippet:DGe}),PGe={kernelName:M1,backendName:"webgl",kernelFunc:RGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MGe=dm+`
  return exp(x);
`,FGe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zee=Ht({opSnippet:MGe,packedOpSnippet:FGe,cpuKernelImpl:cje,dtype:"float32"}),LGe={kernelName:F1,backendName:"webgl",kernelFunc:zee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KN(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(P(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Ue({inputs:{x:i},backend:r,attrs:{shape:o}})}const zGe={kernelName:W3,backendName:"webgl",kernelFunc:KN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o7="return exp(x) - 1.0;",BGe=Ht({opSnippet:o7,packedOpSnippet:o7,cpuKernelImpl:fje}),jGe={kernelName:L1,backendName:"webgl",kernelFunc:BGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l7{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t,e,n){const r=n.texData.get(t.dataId),s=pe(t.shape),i=t.shape[t.shape.length-1],a=s/i,o=Ue({inputs:{x:t},backend:n,attrs:{shape:[a,i]}}),l=o.shape,u=new l7("real",l,e),c=new l7("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),p=Gc({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const m=Ue({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Bee(r,!1,n)}const VGe={kernelName:J_,backendName:"webgl",kernelFunc:UGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WGe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Zp(s),i==="string"){const a=rr(i,pe(r));return a.fill(s),e.makeTensorInfo(r,i,a)}else{const a=new WGe(r,s),o=[[s]];return e.runWebGLProgram(a,[],i,o)}}const GGe={kernelName:eO,backendName:"webgl",kernelFunc:j0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HGe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qGe={kernelName:tO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new HGe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u7="return floor(x);",KGe=Ht({opSnippet:u7,packedOpSnippet:u7,cpuKernelImpl:dje}),XGe={kernelName:z1,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,ZGe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,QGe=ds({opSnippet:YGe,packedOpSnippet:ZGe,dtype:"int32"}),JGe={kernelName:B1,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eHe{constructor(e){this.variableNames=["A"];const n=Ls(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tHe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ls(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe={kernelName:nN,backendName:"webgl",kernelFunc:rHe};let Jd,vC=le().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function rHe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,u]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],f=[u,l,i];if(o||a){const m=le().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Jd==null||m!==vC)&&(vC=m,Jd=document.createElement("canvas").getContext("2d",{willReadFrequently:vC})),Jd.canvas.width=l,Jd.canvas.height=u,Jd.drawImage(s,0,0,l,u),s=Jd.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Hi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),s);const h=le().getBool("WEBGL_PACK")?new tHe(f):new eHe(f),p=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,m=uu(c),g=Gr(s.shape,i.shape,l,f,u,d,!1,m);let y;const v=[],b=a!=null,x=o!=null,w=h==="leakyrelu",C=()=>{const A=[s,i],O=(R,F)=>{if(F==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const z=Ue({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return v.push(z),z}return R};if(b&&A.push(O(a,c)),x&&A.push(O(o,c)),w){const R=n.makeTensorInfo([],"float32",Pc(p,"float32"));A.push(R),v.push(R)}return A};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=Ree({x:s,filter:i,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&le().getBool("WEBGL_EXP_CONV")){const A=h?Ay(h,!0):null,O=new Dee(g,b,A,x,w),R=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],F=C();y=n.runWebGLProgram(O,F,"float32",R)}else if(le().getBool("WEBGL_CONV_IM2COL"))y=Pee({x:s,filter:i,convInfo:g,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:p});else{const A=h?Ay(h,!1):null,O=new Oee(g,b,A,x,w),R=C();y=n.runWebGLProgram(O,R,"float32")}const E=Ue({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(A=>n.disposeIntermediateTensorInfo(A)),E}const iHe={kernelName:yx,backendName:"webgl",kernelFunc:sHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),P(us(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Gr(s.shape,i.shape,l,m,u,f,!0),y=le().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?Ay(d,y):null,b=[s,i],x=a!=null,w=o!=null,C=d==="leakyrelu";if(x&&b.push(a),w&&b.push(o),C){const R=n.makeTensorInfo([],"float32",Pc(h,"float32"));b.push(R),p.push(R)}let E;y?E=new Lee(g,x,v,w,C):E=new Fee(g,x,v,w,C);const A=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],O=n.runWebGLProgram(E,b,"float32",A);return p.forEach(R=>n.disposeIntermediateTensorInfo(R)),O}const oHe={kernelName:vx,backendName:"webgl",kernelFunc:aHe};class lHe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=ln(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uHe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,a=i[i.length-1],o=pe(r.shape),[l,u,c,f]=RD(r,s),d=Ue({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),h=Ue({inputs:{x:r},backend:n,attrs:{shape:[pe(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),v=n.bufferSync(r),b=hje(y,v,r.dtype,u,a,c,f,r.shape,o);return n.makeTensorInfo(l,r.dtype,b.values)}const p=new lHe(a,f,[u,c],r.shape),m=n.runWebGLProgram(p,[h,d],h.dtype),g=Ue({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const cHe={kernelName:nO,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fHe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=ln(this.rank),s=dHe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function dHe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r,l=Ot(a,s.shape)[0];if(le().get("DEBUG")){const v=n.readSync(i.dataId),b=s.shape[l];for(let x=0;x<v.length;++x){const w=v[x];P(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const u=sR(s,i,l,o),c=pe(i.shape),f=[],d=Ue({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=Ue({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(d),f.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=n.bufferSync(h),b=n.bufferSync(d),x=pje(b,v,p);return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new fHe(d.shape,p),g=n.runWebGLProgram(m,[d,h],d.dtype);f.push(g);const y=Ue({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const hHe={kernelName:H3,backendName:"webgl",kernelFunc:jee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pHe="return float(a > b);",mHe=`
  return vec4(greaterThan(a, b));
`,gHe=ds({opSnippet:pHe,packedOpSnippet:mHe,cpuKernelImpl:mje,dtype:"bool"}),yHe={kernelName:q3,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vHe="return float(a >= b);",bHe=`
  return vec4(greaterThanEqual(a, b));
`,xHe=ds({opSnippet:vHe,packedOpSnippet:bHe,dtype:"bool",cpuKernelImpl:gje}),wHe={kernelName:j1,backendName:"webgl",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SHe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Bee(r,!0,n)}const THe={kernelName:rO,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHe="return float(!isnan(x) && !isinf(x));",EHe=Ht({opSnippet:CHe,dtype:"bool"}),kHe={kernelName:V1,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NHe="return float(isinf(x));",AHe=Ht({opSnippet:NHe,dtype:"bool"}),$He={kernelName:W1,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe="return float(isnan(x));",_He=Ht({opSnippet:IHe,dtype:"bool"}),OHe={kernelName:G1,backendName:"webgl",kernelFunc:_He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe="return float(a < b);",RHe=`
  return vec4(lessThan(a, b));
`,PHe=ds({opSnippet:DHe,packedOpSnippet:RHe,cpuKernelImpl:yje,dtype:"bool"}),MHe={kernelName:X3,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe="return float(a <= b);",LHe=`
  return vec4(lessThanEqual(a, b));
`,zHe=ds({opSnippet:FHe,packedOpSnippet:LHe,cpuKernelImpl:vje,dtype:"bool"}),BHe={kernelName:Y3,backendName:"webgl",kernelFunc:zHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=bje(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const UHe={kernelName:iO,backendName:"webgl",kernelFunc:jHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VHe=dm+`
  return x < 0.0 ? 0./0. : log(x);
`,WHe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,GHe=Ht({opSnippet:VHe,packedOpSnippet:WHe,cpuKernelImpl:xje}),HHe={kernelName:H1,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qHe=dm+`
  return log(1.0 + x);
`,KHe=Ht({opSnippet:qHe}),XHe={kernelName:q1,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YHe="return float(a >= 1.0 && b >= 1.0);",ZHe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,QHe=ds({opSnippet:YHe,packedOpSnippet:ZHe,dtype:"bool"}),JHe={kernelName:Z3,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eqe="return float(!(x >= 1.0));",tqe=Ht({opSnippet:eqe}),nqe={kernelName:Q3,backendName:"webgl",kernelFunc:tqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rqe="return float(a >= 1.0 || b >= 1.0);",sqe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,iqe=ds({opSnippet:rqe,packedOpSnippet:sqe,dtype:"bool"}),aqe={kernelName:J3,backendName:"webgl",kernelFunc:iqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oqe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lqe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r,u=le().getBool("WEBGL_PACK_NORMALIZATION")?new lqe(s.shape,i,a,o,l):new oqe(s.shape,i,a,o,l);return n.runWebGLProgram(u,[s],s.dtype)},cqe={kernelName:eS,backendName:"webgl",kernelFunc:uqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fqe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r,f=new fqe(s.shape,o,l,u,c);return n.runWebGLProgram(f,[s,i,a],s.dtype)},hqe={kernelName:aO,backendName:"webgl",kernelFunc:dqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(t,e,n,r){const s=pe(e),a=pe(t.shape)/s,o=Ue({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=Fd(o,t.dtype,"max",r),u=Ue({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=s.shape.length,l=Ot(i,s.shape);let u=l;const c=Hn(u,o),f=c!=null,d=n.shouldExecuteOnCPU([s]);let h=s;if(f){if(d){const b=n.texData.get(h.dataId).values,x=new Array(o);for(let E=0;E<x.length;E++)x[E]=s.shape[c[E]];const w=jR(b,s.shape,s.dtype,c,x);h=n.makeTensorInfo(x,s.dtype);const C=n.texData.get(h.dataId);C.values=w}else h=g4(s,c,n);u=ar(u.length,o)}cs("max",u,o);const[p,m]=Hr(h.shape,u);let g=p;a&&(g=ir(p,l));let y;if(d){const b=n.texData.get(h.dataId).values,x=wje(b,pe(m),g,s.dtype);y=n.makeTensorInfo(g,s.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=pqe(h,m,g,n);return f&&n.disposeIntermediateTensorInfo(h),y}const mqe={kernelName:tS,backendName:"webgl",kernelFunc:Uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gqe=UR+`
  return max(a, b);
`,yqe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Md+`
  return result;
`,vqe=ds({opSnippet:gqe,packedOpSnippet:yqe,cpuKernelImpl:Sje}),bqe={kernelName:K1,backendName:"webgl",kernelFunc:vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;L0(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,u=1;P(us(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ga(s.shape,i,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&jt(c.inShape,c.outShape))return Ei({inputs:{x:s},backend:n});const f=new $y(c,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const wqe={kernelName:nS,backendName:"webgl",kernelFunc:xqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=lu(s.shape,i,a,c,o,u,l),d=new WR(f,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const Tqe={kernelName:rS,backendName:"webgl",kernelFunc:Sqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cqe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,l=a-1-e.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Eqe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.front,d=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=lu(a.shape,o,l,f,u,c),h=new WR(d,"max",!0),p=n.runWebGLProgram(h,[a],a.dtype),m=new Eqe(d),g=n.runWebGLProgram(m,[s,p],a.dtype);return n.disposeIntermediateTensorInfo(p),g}const Nqe={kernelName:lO,backendName:"webgl",kernelFunc:kqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;L0([i,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=Ga(o.shape,l,u,1,c,f),h=!0,p=new $y(d,"max",h),m=n.runWebGLProgram(p,[o],o.dtype),g=new Cqe(d),y=n.runWebGLProgram(g,[s,m],o.dtype);return n.disposeIntermediateTensorInfo(m),y}const $qe={kernelName:oO,backendName:"webgl",kernelFunc:Aqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iqe(t,e,n,r){let s=new $y(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new $y(n,"max",!0,!0,e);const a=r.runWebGLProgram(s,[t],"float32");return[i,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _qe={kernelName:uO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;P(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];P(us(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Ga(r.shape,s,i,u,a),[f,d]=Iqe(r,o,c,l);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oqe(t,e,n,r){const s=pe(e),a=pe(t.shape)/s,o=Ue({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=Fd(o,"float32","mean",r),u=Ue({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dqe={kernelName:sS,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,a=n,o=r.shape.length,l=Ot(i,r.shape);let u=l;const c=Hn(u,o),f=c!=null,d=a.shouldExecuteOnCPU([r]),h=[];let p=r;if(f){if(d){const x=a.texData.get(p.dataId).values,w=new Array(o);for(let A=0;A<w.length;A++)w[A]=r.shape[c[A]];const C=jR(x,r.shape,r.dtype,c,w);p=a.makeTensorInfo(w,r.dtype);const E=a.texData.get(p.dataId);E.values=C}else p=g4(r,c,a);h.push(p),u=ar(u.length,o)}cs("sum",u,o);const[m,g]=Hr(p.shape,u);let y=m;s&&(y=ir(m,l));const v=Oqe(p,g,y,a);for(const b of h)a.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Ot(i,s.shape);let u=l;const c=Hn(u,o);let f=s;c!=null&&(f=Ms({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,s.shape.length)),cs("min",u,o);const[d,h]=Hr(f.shape,u),p=pe(h),m=Ue({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=Fd(m,m.dtype,"min",n);let y;if(a){const v=ir(d,l);y=Ue({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=Ue({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const Pqe={kernelName:iS,backendName:"webgl",kernelFunc:Rqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mqe=UR+`
  return min(a, b);
`,Fqe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Md+`
  return result;
`,Lqe=ds({opSnippet:Mqe,packedOpSnippet:Fqe,cpuKernelImpl:Tje}),zqe={kernelName:X1,backendName:"webgl",kernelFunc:Lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bqe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const s=e.length,i=ln(s),a=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jqe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=ln(s),a=n.map(p=>p[0]).join(","),o=n.map((p,m)=>p[0]+e[m]).join(","),l=_s("rc",s),u=_s("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uqe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jqe(r.shape,s,i):new Bqe(r.shape,s,i);return e.runWebGLProgram(a,[r],r.dtype)},Vqe={kernelName:aS,backendName:"webgl",kernelFunc:Uqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wqe=`if (b == 0.0) return NAN;
  return mod(a, b);`,Gqe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Md+`
  return result;
`,Hqe=ds({opSnippet:Wqe,packedOpSnippet:Gqe}),qqe={kernelName:Y1,backendName:"webgl",kernelFunc:Hqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kqe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xqe=`
if (a == b) {
  return 1.0;
};
return a / b;`,Yqe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Vee=ds({opSnippet:Xqe,packedOpSnippet:Yqe,checkOutOfBounds:!0}),Zqe={kernelName:R1,backendName:"webgl",kernelFunc:Vee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7="return a - b;",Wee=ds({opSnippet:c7,packedOpSnippet:c7,supportsComplex:!0,cpuKernelImpl:Wje}),Qqe={kernelName:d0,backendName:"webgl",kernelFunc:Wee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=Ot([i],s.shape),o=Uee({inputs:{x:s},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=ir(o.shape,a),u=Ue({inputs:{x:o},backend:n,attrs:{shape:l}}),c=Wee({inputs:{a:s,b:u},backend:n}),f=zee({inputs:{x:c},backend:n}),d=y4({inputs:{x:f},backend:n,attrs:{axis:a,keepDims:!1}}),h=Ue({inputs:{x:d},backend:n,attrs:{shape:l}}),p=Vee({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}const Jqe={kernelName:CS,backendName:"webgl",kernelFunc:Gee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r,l=o?s:Gee({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new Kqe(u,c,i),d=[[a]],h=n.runWebGLProgram(f,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),h}const tKe={kernelName:cO,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nKe=qa+`
  return -x;
`,rKe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function sKe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[a,o]=Eje(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let s;return le().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new ju(r.shape,rKe):s=new jo(r.shape,nKe),n.runWebGLProgram(s,[r],r.dtype)}const iKe={kernelName:oS,backendName:"webgl",kernelFunc:sKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aKe=ND;function oKe(t){Gi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:f}=aKe(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const lKe={kernelName:fO,backendName:"webgl",kernelFunc:oKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uKe=AD;function cKe(t){Gi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),f=n.readSync(i.dataId),{selectedIndices:d,validOutputs:h}=uKe(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const fKe={kernelName:dO,backendName:"webgl",kernelFunc:cKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dKe=$D;function hKe(t){Gi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),f=n.readSync(i.dataId),d=a,h=o,p=l,m=u,{selectedIndices:g,selectedScores:y}=dKe(c,f,d,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const pKe={kernelName:hO,backendName:"webgl",kernelFunc:hKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mKe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gKe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r,u=pe(s.shape),c=new mKe(u,a,o,l),f=Ue({inputs:{x:s},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[f],i);n.disposeIntermediateTensorInfo(f);const h=[...s.shape,a],p=Ue({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),p},yKe={kernelName:cS,backendName:"webgl",kernelFunc:gKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wx(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=B0({inputs:{input:r},backend:n}),i=Wx({inputs:{x:s},backend:n}),a=v4({inputs:{input:r},backend:n}),o=Wx({inputs:{x:a},backend:n}),l=Gc({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return j0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const vKe={kernelName:AS,backendName:"webgl",kernelFunc:Wx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=B0({inputs:{input:r},backend:n}),i=Hee({inputs:{x:s},backend:n}),a=v4({inputs:{input:r},backend:n}),o=Wx({inputs:{x:a},backend:n}),l=Gc({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return j0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const bKe={kernelName:uS,backendName:"webgl",kernelFunc:Hee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xKe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return KN({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(c=>{Ai(i,c.shape,"All tensors passed to stack must have matching shapes"),P(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const f=KN({inputs:{input:c},backend:n,attrs:{dim:s}});return o.push(f),f}),u=_ee({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const wKe={kernelName:fS,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SKe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const s=e.length,i=ln(s),a=n.map(u=>u[0]).join(","),o=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TKe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=ln(s),a=n.map(m=>m[0]).join(","),o=n.map((m,g)=>m[0]+e[g]).join(","),l=_s("rc",s),u=_s("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${u.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${c}) {`],h=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=s===1?2:4;m<g;m++)p+=`
        ${d[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${f});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qee=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;if(pe(s.shape)===0){const u=i.map((c,f)=>c[0]+s.shape[f]+c[1]);return j0({backend:n,attrs:{shape:u,value:a,dtype:s.dtype}})}const o=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TKe(s.shape,i,a):new SKe(s.shape,i,a),l=[[a]];return n.runWebGLProgram(o,[s],s.dtype,l)},CKe={kernelName:dS,backendName:"webgl",kernelFunc:qee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EKe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,kKe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Md+`
  return result;
`,NKe=ds({opSnippet:EKe,packedOpSnippet:kKe}),AKe={kernelName:Q1,backendName:"webgl",kernelFunc:NKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=[],u=Ot(i,s.shape);let c=u;const f=Hn(c,o);let d=s;f!=null&&(d=Ms({inputs:{x:s},backend:n,attrs:{perm:f}}),c=ar(c.length,o),l.push(d)),cs("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const p=n.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=Nje(d.shape,d.dtype,p,c);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=Hr(d.shape,c),g=pe(m),y=Ue({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=zO(s.dtype),b=Fd(y,v,"prod",n);h=Ue({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(y),l.push(b)}if(a){l.push(h);const p=ir(h.shape,u);h=Ue({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const IKe={kernelName:pS,backendName:"webgl",kernelFunc:$Ke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ke(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(y=>n.readSync(y.dataId)),u=s.map(y=>y.shape),c=n.readSync(i.dataId),f=n.readSync(a.dataId),[d,h,p]=Aje(l,u,c,i.shape,i.dtype,f,a.shape,o),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,h);return m.concat([g])}const OKe={kernelName:pO,backendName:"webgl",kernelFunc:_Ke};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=$je(a,r.shape,r.dtype,o,s.shape,l,i.shape),f=n.makeTensorInfo([u.length],"int32",u),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const RKe={kernelName:mO,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PKe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),f=n.readSync(a.dataId),d=o.map(g=>n.readSync(g.dataId)),h=o.map(g=>g.shape),[p,m]=Ije(u,s.shape,c,i.shape,i.dtype,f,a.shape,d,h,l);return n.makeTensorInfo(p,i.dtype,m)}const MKe={kernelName:gO,backendName:"webgl",kernelFunc:PKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kee=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:a}=n,o=_je(r,s,i,a);return e.makeTensorInfo([o.length],a,o)},FKe={kernelName:yO,backendName:"webgl",kernelFunc:Kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LKe="return 1.0 / x;",zKe=Ht({opSnippet:LKe}),BKe={kernelName:J1,backendName:"webgl",kernelFunc:zKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jKe=qa+`
  return (x < 0.0) ? 0.0 : x;
`,UKe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VKe=Ht({opSnippet:jKe,packedOpSnippet:UKe}),WKe={kernelName:e0,backendName:"webgl",kernelFunc:VKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GKe=qa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,HKe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qKe=Ht({opSnippet:GKe,packedOpSnippet:HKe}),KKe={kernelName:t0,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XKe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YKe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,u]=o,c=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new YKe(s.shape,l,u,i,a):new XKe(s.shape,l,u,i,a);return n.runWebGLProgram(c,[s],"float32")}const QKe={kernelName:yS,backendName:"webgl",kernelFunc:ZKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JKe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eXe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new JKe(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const tXe={kernelName:xO,backendName:"webgl",kernelFunc:eXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nXe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rXe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,u]=e;this.outputShape=[a,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],d=s?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sXe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,u]=o,c=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rXe(s.shape,l,u,i,a):new nXe(s.shape,l,u,i,a);return n.runWebGLProgram(c,[s],s.dtype)}const iXe={kernelName:gS,backendName:"webgl",kernelFunc:sXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aXe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,p=Math.ceil(d)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oXe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new aXe(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const lXe={kernelName:bO,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uXe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,l)=>s(l)).join(","),a=ln(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cXe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=_s("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=ln(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${u(s.slice())};
          }
          if(${a}) {
            result.b = ${c(s.slice())};
            if(${i}) {
              result.a = ${f(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return d(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",d(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",d(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",d(p)}function d(p){const m=e.map((v,b)=>h(b,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,a=s.shape.length,o=Ot(i,s.shape);if(a===0)return Ei({inputs:{x:s},backend:n});const l=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cXe(s.shape,o):new uXe(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}const dXe={kernelName:vS,backendName:"webgl",kernelFunc:fXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hXe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pXe={kernelName:FO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=new hXe(r.shape,i),[u,c]=UD(a,r.shape[1],r.shape[2]),f=[[u,c,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mXe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,gXe=Ht({opSnippet:mXe}),yXe={kernelName:n0,backendName:"webgl",kernelFunc:gXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vXe="return inversesqrt(x);",bXe=Ht({opSnippet:vXe,cpuKernelImpl:Oje}),xXe={kernelName:r0,backendName:"webgl",kernelFunc:bXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GR{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const u=ln(i.length),c=ln(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wXe{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const u=ln(i.length),c=ln(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";s===1?h="i":s===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SXe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=_d(i,s,a),d=[f/u,u];if(f===0)return n.makeTensorInfo(a,s.dtype);const h=Ue({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),p=Ue({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;le().getBool("WEBGL_PACK")?g=new wXe(l,o,h.shape.length,p.shape.length,c,d):g=new GR(l,o,h.shape.length,p.shape.length,c,d);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),v=Ue({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const TXe={kernelName:wO,backendName:"webgl",kernelFunc:SXe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CXe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=le().getNumber("WEBGL_VERSION")===2?i:a,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EXe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=new CXe(s.shape[0],s.shape[1],i.shape[1],a),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,i],"int32",l)}const kXe={kernelName:TO,backendName:"webgl",kernelFunc:EXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NXe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${o[c]}`),c<e&&l.push(`${o[c]}`);s=l.join(),i=u.join()}const a=ln(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AXe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,a=new NXe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(a,[r,s,i],Si(s.dtype,i.dtype))}const $Xe={kernelName:bS,backendName:"webgl",kernelFunc:AXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IXe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${e4};
  float scale = ${t4};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,_Xe=Ht({opSnippet:IXe}),OXe={kernelName:s0,backendName:"webgl",kernelFunc:_Xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe=dm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,RXe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PXe=Ht({opSnippet:DXe,packedOpSnippet:RXe,cpuKernelImpl:Rje}),MXe={kernelName:l0,backendName:"webgl",kernelFunc:PXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FXe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,LXe=Ht({opSnippet:FXe}),zXe={kernelName:o0,backendName:"webgl",kernelFunc:LXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BXe=dm+`
  return sin(x);
`,jXe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Md}
  return result;
`,UXe=Ht({opSnippet:BXe,packedOpSnippet:jXe}),VXe={kernelName:i0,backendName:"webgl",kernelFunc:UXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WXe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,GXe=Ht({opSnippet:WXe}),HXe={kernelName:a0,backendName:"webgl",kernelFunc:GXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qXe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,KXe=Ht({opSnippet:qXe}),XXe={kernelName:u0,backendName:"webgl",kernelFunc:KXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YXe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;P(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((y,v)=>y*v),l=[[0,0]];l.push(...a);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const u=[],c=qee({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),f=E0(c.shape,i,o,!1),d=k0(f.length,i.length,!1),h=N0(c.shape,i,o,!1),p=Ue({inputs:{x:c},backend:n,attrs:{shape:f}}),m=Ms({inputs:{x:p},backend:n,attrs:{perm:d}}),g=Ue({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},ZXe={kernelName:SS,backendName:"webgl",kernelFunc:YXe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QXe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=n.readSync(a.dataId)[0],[f,d,h,p,m]=Mje(o,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],s.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const JXe={kernelName:CO,backendName:"webgl",kernelFunc:QXe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eYe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,f]=Fje(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const tYe={kernelName:EO,backendName:"webgl",kernelFunc:eYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nYe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=vee(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const rYe={kernelName:kO,backendName:"webgl",kernelFunc:nYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sYe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=vee(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const iYe={kernelName:NO,backendName:"webgl",kernelFunc:sYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aYe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=_d(i,s,o),h=!1;if(i.dtype==="string"){const y=n.bufferSync(s),v=n.bufferSync(i),b=hc(n.readSync(a.dataId)[0]),x=Dje(y,v,o,d,c,u,l,f,b,h);return n.makeTensorInfo(o,x.dtype,x.values)}const p=new GR(u,l,s.shape.length,i.shape.length,f,[d,1],h),m=n.runWebGLProgram(p,[i,s,a],i.dtype),g=Ue({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}const oYe={kernelName:AO,backendName:"webgl",kernelFunc:aYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Ot(a,s.shape)[0],l=rR(s,i,o),u=s.shape.length,c=new Array(u).fill(0),f=s.shape.slice();return l.map(d=>{const h=[...f];h[o]=d;const p=hm({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,p})}const uYe={kernelName:TS,backendName:"webgl",kernelFunc:lYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7="return sqrt(x);",cYe=Ht({opSnippet:f7,packedOpSnippet:f7,cpuKernelImpl:Lje}),fYe={kernelName:c0,backendName:"webgl",kernelFunc:cYe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dYe="return x * x;",hYe=Ht({opSnippet:dYe}),pYe={kernelName:$O,backendName:"webgl",kernelFunc:hYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7="return (a - b) * (a - b);",mYe=ds({opSnippet:d7,packedOpSnippet:d7}),gYe={kernelName:f0,backendName:"webgl",kernelFunc:mYe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),a=Ql(i),o=zje(a,"string",r);return n.makeTensorInfo(s.shape,"string",o)}const vYe={kernelName:ES,backendName:"webgl",kernelFunc:yYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bYe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=qa+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new jo(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const xYe={kernelName:g0,backendName:"webgl",kernelFunc:bYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wYe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=ln(r.length),a=ln(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=zD(s.shape,i,a,o,l,u,c,f,d);let w;if(m)w=Ue({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const E=MD(v,b,x),A=hm({inputs:{x:s},backend:n,attrs:{begin:v,size:E}});w=Ue({inputs:{x:A},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(A)}else if(n.shouldExecuteOnCPU([s])){const A=n.readSync(s.dataId),O=Nt(s.shape,s.dtype,A),R=Bje(h,O,x,v);w=n.makeTensorInfo(p,s.dtype,R.values)}else{const A=new wYe(v,x,h);w=n.runWebGLProgram(A,[s],s.dtype)}const C=Ue({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const TYe={kernelName:IO,backendName:"webgl",kernelFunc:SYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CYe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[p,m]=jje(d,h,s,i,a,o,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const EYe={kernelName:_O,backendName:"webgl",kernelFunc:CYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(i.dataId),l=n.readSync(a.dataId)[0],[u,c,f]=Uje(o,l,s),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const NYe={kernelName:OO,backendName:"webgl",kernelFunc:kYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AYe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),o=Vje(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const $Ye={kernelName:DO,backendName:"webgl",kernelFunc:AYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IYe="return tan(x);",_Ye=Ht({opSnippet:IYe}),OYe={kernelName:h0,backendName:"webgl",kernelFunc:_Ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DYe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,RYe=Ht({opSnippet:DYe}),PYe={kernelName:p0,backendName:"webgl",kernelFunc:RYe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MYe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=_d(a,i,s.shape),d=[f/u,u];if(f===0)return n.makeTensorInfo(s.shape,i.dtype);const h=Ue({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),p=Ue({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=Ue({inputs:{x:s},backend:n,attrs:{shape:d}}),g=new GR(l,o,h.shape.length,p.shape.length,c,d,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),v=Ue({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const FYe={kernelName:SO,backendName:"webgl",kernelFunc:MYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LYe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const s=ln(this.rank),i=zYe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function zYe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(d=>hc(d)):l,c=Nt(s.shape,s.dtype,u),f=Gje(c,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const a=new LYe(s.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const BYe={kernelName:m0,backendName:"webgl",kernelFunc:Xee};class jYe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class UYe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tf(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function h7(t){let e=1;for(;e<t;)e*=2;return e}function VYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r,o=le().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=le().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([s])||c<o||i>l){const R=n.readSync(s.dataId),[F,z]=Hje(R,u,s.dtype,i,a);return[n.makeTensorInfo(F.shape,F.dtype,F.values),n.makeTensorInfo(z.shape,z.dtype,z.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[s,j0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(s.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(s):s,m=pe(u)/c,g=Ue({inputs:{x:h},attrs:{shape:[m,c]},backend:n});d&&tf(n,h);const y=h7(i),v=h7(c);let b=null;const x=()=>b===null?[g,g]:[g,b],w=(R,F,z)=>{const j=x(),H=new jYe(z),U=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[R],[F]],Y=b;b=n.runWebGLProgram(H,j,"int32",U),tf(n,Y)};for(let R=1;R<y;R*=2){const F=R*2;for(let z=R;z>=1;z/=2)w(F,z,[m,v])}for(let R=v;R>y;R/=2){const F=x(),z=new UYe([m,R/2]),H=[[c],[b===null?1:0],[y]],J=b;b=n.runWebGLProgram(z,F,"int32",H),tf(n,J);const U=y/2,Y=U*2;for(let Q=U;Q>=1;Q/=2)w(Y,Q,b.shape)}let C=b;b=hm({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,i]}}),tf(n,C);let E=jee({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});tf(n,g);const A=u.slice(0,-1);A.push(i),C=b,b=Ue({inputs:{x:b},attrs:{shape:A},backend:n}),tf(n,C);const O=E;return E=Ue({inputs:{x:E},attrs:{shape:A},backend:n}),tf(n,O),[E,b]}const WYe={kernelName:RO,backendName:"webgl",kernelFunc:VYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GYe{constructor(e,n,r,s,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HYe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:u}=r,[c,f,d,h]=s.shape,[p,m]=u??[f,d],g=[c,p,m,h],y=new GYe(f,d,a,o,l,g);return n.runWebGLProgram(y,[s,i],"float32")}const qYe={kernelName:PO,backendName:"webgl",kernelFunc:HYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KYe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;L0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:u}=qje(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const XYe={kernelName:MO,backendName:"webgl",kernelFunc:KYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YYe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s,o=a.shape.length,l=s.shape[i],u=new Array(o-1);let c=0;for(let m=0;m<o;m++)m!==i&&(u[c++]=a.shape[m]);const f=[],d=new Array(o).fill(0),h=a.shape.slice();h[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){d[i]=m;const g=hm({inputs:{x:a},backend:n,attrs:{begin:d,size:h}}),y=Ue({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,f.push(g)}return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const ZYe={kernelName:kS,backendName:"webgl",kernelFunc:YYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QYe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/r);this.outputShape=[s,o];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r,o=s.shape.length,l=[];let u=0;const c=Hn([u],o);let f=s;c!=null&&(f=Ms({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(f),u=ar(1,o)[0]);const d=kY(f.shape,u,a),h=pe([f.shape[u]]),p=Ue({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=zO(s.dtype),g=(x,w,C,E,A)=>{const O=x.shape[0],R=x.shape[1],F=EY(R,A),z={windowSize:F,inSize:R,batchSize:O,numSegments:A},j=new QYe(z,w),H=n.compileAndRun(j,[x,C],E);if(l.push(H),H.shape[1]===A)return H;const J=Kee({backend:n,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),U=Xee({inputs:{x:J},backend:n,attrs:{reps:[R/F]}});return l.push(J),l.push(U),g(H,w,U,E,A)},y=g(p,"unsortedSegmentSum",i,m,a),v=Ue({inputs:{x:y},backend:n,attrs:{shape:d}});let b=v;if(c!=null){l.push(v);const x=zc(c);b=Ms({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const eZe={kernelName:NS,backendName:"webgl",kernelFunc:JYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZe=[LUe,BUe,VUe,HUe,KUe,ZUe,JUe,tVe,iVe,oVe,cVe,hVe,gVe,xVe,TVe,EVe,NVe,_Ve,DVe,PVe,zVe,HVe,KVe,QVe,eWe,aWe,lWe,dWe,wUe,mWe,xWe,CWe,IWe,DWe,PWe,FWe,zWe,VWe,HWe,XWe,ZWe,JWe,tGe,sGe,aGe,cGe,dGe,mGe,vGe,xGe,CGe,AGe,OGe,PGe,LGe,zGe,jGe,VGe,GGe,qGe,XGe,JGe,nHe,iHe,oHe,cHe,hHe,yHe,wHe,xUe,THe,vWe,kHe,$He,OHe,TUe,MHe,BHe,UHe,HHe,XHe,JHe,nqe,aqe,cqe,hqe,mqe,bqe,wqe,Tqe,Nqe,$qe,_qe,Dqe,Pqe,zqe,Vqe,qqe,tKe,kUe,iKe,lKe,fKe,pKe,nWe,yKe,bKe,wKe,CKe,AKe,EUe,IKe,OKe,RKe,MKe,FKe,rWe,Zqe,BKe,WKe,KKe,AUe,QKe,tXe,iXe,lXe,dXe,pXe,yXe,xXe,TXe,kXe,$Xe,OXe,MXe,zXe,VXe,HXe,WVe,Jqe,XXe,ZXe,JXe,tYe,rYe,iYe,oYe,uYe,fYe,pYe,gYe,vYe,xYe,TYe,EYe,NYe,$Ye,Qqe,PUe,OYe,PYe,FYe,BYe,WYe,qYe,MUe,XYe,ZYe,eZe,vKe];for(const t of tZe)Wq(t);var nZe={};(function(){var t;function e(T){var $=0;return function(){return $<T.length?{done:!1,value:T[$++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,$,_){return T==Array.prototype||T==Object.prototype||(T[$]=_.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uo=="object"&&Uo];for(var $=0;$<T.length;++$){var _=T[$];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=r(this);function i(T,$){if($)e:{var _=s;T=T.split(".");for(var G=0;G<T.length-1;G++){var oe=T[G];if(!(oe in _))break e;_=_[oe]}T=T[T.length-1],G=_[T],$=$(G),$!=G&&$!=null&&n(_,T,{configurable:!0,writable:!0,value:$})}}i("Symbol",function(T){function $(Se){if(this instanceof $)throw new TypeError("Symbol is not a constructor");return new _(G+(Se||"")+"_"+oe++,Se)}function _(Se,ce){this.g=Se,n(this,"description",{configurable:!0,writable:!0,value:ce})}if(T)return T;_.prototype.toString=function(){return this.g};var G="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",oe=0;return $}),i("Symbol.iterator",function(T){if(T)return T;T=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),_=0;_<$.length;_++){var G=s[$[_]];typeof G=="function"&&typeof G.prototype[T]!="function"&&n(G.prototype,T,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return T});function a(T){return T={next:T},T[Symbol.iterator]=function(){return this},T}function o(T){var $=typeof Symbol<"u"&&Symbol.iterator&&T[Symbol.iterator];return $?$.call(T):{next:e(T)}}function l(T){if(!(T instanceof Array)){T=o(T);for(var $,_=[];!($=T.next()).done;)_.push($.value);T=_}return T}var u=typeof Object.create=="function"?Object.create:function(T){function $(){}return $.prototype=T,new $},c;if(typeof Object.setPrototypeOf=="function")c=Object.setPrototypeOf;else{var f;e:{var d={a:!0},h={};try{h.__proto__=d,f=h.a;break e}catch{}f=!1}c=f?function(T,$){if(T.__proto__=$,T.__proto__!==$)throw new TypeError(T+" is not extensible");return T}:null}var p=c;function m(T,$){if(T.prototype=u($.prototype),T.prototype.constructor=T,p)p(T,$);else for(var _ in $)if(_!="prototype")if(Object.defineProperties){var G=Object.getOwnPropertyDescriptor($,_);G&&Object.defineProperty(T,_,G)}else T[_]=$[_];T.ea=$.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function y(T){if(T.l)throw new TypeError("Generator is already running");T.l=!0}g.prototype.o=function(T){this.h=T};function v(T,$){T.j={U:$,V:!0},T.g=T.m||T.s}g.prototype.return=function(T){this.j={return:T},this.g=this.s};function b(T,$,_){return T.g=_,{value:$}}function x(T){this.g=new g,this.h=T}function w(T,$){y(T.g);var _=T.g.i;return _?C(T,"return"in _?_.return:function(G){return{value:G,done:!0}},$,T.g.return):(T.g.return($),E(T))}function C(T,$,_,G){try{var oe=$.call(T.g.i,_);if(!(oe instanceof Object))throw new TypeError("Iterator result "+oe+" is not an object");if(!oe.done)return T.g.l=!1,oe;var Se=oe.value}catch(ce){return T.g.i=null,v(T.g,ce),E(T)}return T.g.i=null,G.call(T.g,Se),E(T)}function E(T){for(;T.g.g;)try{var $=T.h(T.g);if($)return T.g.l=!1,{value:$.value,done:!1}}catch(_){T.g.h=void 0,v(T.g,_)}if(T.g.l=!1,T.g.j){if($=T.g.j,T.g.j=null,$.V)throw $.U;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function A(T){this.next=function($){return y(T.g),T.g.i?$=C(T,T.g.i.next,$,T.g.o):(T.g.o($),$=E(T)),$},this.throw=function($){return y(T.g),T.g.i?$=C(T,T.g.i.throw,$,T.g.o):(v(T.g,$),$=E(T)),$},this.return=function($){return w(T,$)},this[Symbol.iterator]=function(){return this}}function O(T,$){return $=new A(new x($)),p&&T.prototype&&p($,T.prototype),$}function R(T,$){T instanceof String&&(T+="");var _=0,G=!1,oe={next:function(){if(!G&&_<T.length){var Se=_++;return{value:$(Se,T[Se]),done:!1}}return G=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}var F=typeof Object.assign=="function"?Object.assign:function(T,$){for(var _=1;_<arguments.length;_++){var G=arguments[_];if(G)for(var oe in G)Object.prototype.hasOwnProperty.call(G,oe)&&(T[oe]=G[oe])}return T};i("Object.assign",function(T){return T||F}),i("Promise",function(T){function $(ce){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ce=this.j();try{ce(Ce.resolve,Ce.reject)}catch(Fe){Ce.reject(Fe)}}function _(){this.g=null}function G(ce){return ce instanceof $?ce:new $(function(Ce){Ce(ce)})}if(T)return T;_.prototype.h=function(ce){if(this.g==null){this.g=[];var Ce=this;this.i(function(){Ce.l()})}this.g.push(ce)};var oe=s.setTimeout;_.prototype.i=function(ce){oe(ce,0)},_.prototype.l=function(){for(;this.g&&this.g.length;){var ce=this.g;this.g=[];for(var Ce=0;Ce<ce.length;++Ce){var Fe=ce[Ce];ce[Ce]=null;try{Fe()}catch(Ye){this.j(Ye)}}}this.g=null},_.prototype.j=function(ce){this.i(function(){throw ce})},$.prototype.j=function(){function ce(Ye){return function(yt){Fe||(Fe=!0,Ye.call(Ce,yt))}}var Ce=this,Fe=!1;return{resolve:ce(this.C),reject:ce(this.l)}},$.prototype.C=function(ce){if(ce===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ce instanceof $)this.F(ce);else{e:switch(typeof ce){case"object":var Ce=ce!=null;break e;case"function":Ce=!0;break e;default:Ce=!1}Ce?this.u(ce):this.m(ce)}},$.prototype.u=function(ce){var Ce=void 0;try{Ce=ce.then}catch(Fe){this.l(Fe);return}typeof Ce=="function"?this.G(Ce,ce):this.m(ce)},$.prototype.l=function(ce){this.s(2,ce)},$.prototype.m=function(ce){this.s(1,ce)},$.prototype.s=function(ce,Ce){if(this.h!=0)throw Error("Cannot settle("+ce+", "+Ce+"): Promise already settled in state"+this.h);this.h=ce,this.i=Ce,this.h===2&&this.D(),this.A()},$.prototype.D=function(){var ce=this;oe(function(){if(ce.B()){var Ce=s.console;typeof Ce<"u"&&Ce.error(ce.i)}},1)},$.prototype.B=function(){if(this.o)return!1;var ce=s.CustomEvent,Ce=s.Event,Fe=s.dispatchEvent;return typeof Fe>"u"?!0:(typeof ce=="function"?ce=new ce("unhandledrejection",{cancelable:!0}):typeof Ce=="function"?ce=new Ce("unhandledrejection",{cancelable:!0}):(ce=s.document.createEvent("CustomEvent"),ce.initCustomEvent("unhandledrejection",!1,!0,ce)),ce.promise=this,ce.reason=this.i,Fe(ce))},$.prototype.A=function(){if(this.g!=null){for(var ce=0;ce<this.g.length;++ce)Se.h(this.g[ce]);this.g=null}};var Se=new _;return $.prototype.F=function(ce){var Ce=this.j();ce.J(Ce.resolve,Ce.reject)},$.prototype.G=function(ce,Ce){var Fe=this.j();try{ce.call(Ce,Fe.resolve,Fe.reject)}catch(Ye){Fe.reject(Ye)}},$.prototype.then=function(ce,Ce){function Fe($t,xt){return typeof $t=="function"?function(rt){try{Ye($t(rt))}catch(S){yt(S)}}:xt}var Ye,yt,Wt=new $(function($t,xt){Ye=$t,yt=xt});return this.J(Fe(ce,Ye),Fe(Ce,yt)),Wt},$.prototype.catch=function(ce){return this.then(void 0,ce)},$.prototype.J=function(ce,Ce){function Fe(){switch(Ye.h){case 1:ce(Ye.i);break;case 2:Ce(Ye.i);break;default:throw Error("Unexpected state: "+Ye.h)}}var Ye=this;this.g==null?Se.h(Fe):this.g.push(Fe),this.o=!0},$.resolve=G,$.reject=function(ce){return new $(function(Ce,Fe){Fe(ce)})},$.race=function(ce){return new $(function(Ce,Fe){for(var Ye=o(ce),yt=Ye.next();!yt.done;yt=Ye.next())G(yt.value).J(Ce,Fe)})},$.all=function(ce){var Ce=o(ce),Fe=Ce.next();return Fe.done?G([]):new $(function(Ye,yt){function Wt(rt){return function(S){$t[rt]=S,xt--,xt==0&&Ye($t)}}var $t=[],xt=0;do $t.push(void 0),xt++,G(Fe.value).J(Wt($t.length-1),yt),Fe=Ce.next();while(!Fe.done)})},$}),i("Object.is",function(T){return T||function($,_){return $===_?$!==0||1/$===1/_:$!==$&&_!==_}}),i("Array.prototype.includes",function(T){return T||function($,_){var G=this;G instanceof String&&(G=String(G));var oe=G.length;for(_=_||0,0>_&&(_=Math.max(_+oe,0));_<oe;_++){var Se=G[_];if(Se===$||Object.is(Se,$))return!0}return!1}}),i("String.prototype.includes",function(T){return T||function($,_){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf($,_||0)!==-1}}),i("Array.prototype.keys",function(T){return T||function(){return R(this,function($){return $})}});var z=this||self;function j(T,$){T=T.split(".");var _=z;T[0]in _||typeof _.execScript>"u"||_.execScript("var "+T[0]);for(var G;T.length&&(G=T.shift());)T.length||$===void 0?_[G]&&_[G]!==Object.prototype[G]?_=_[G]:_=_[G]={}:_[G]=$}function H(T,$){return $=String.fromCharCode.apply(null,$),T==null?$:T+$}var J,U=typeof TextDecoder<"u",Y,Q=typeof TextEncoder<"u";function se(T){if(Q)T=(Y||(Y=new TextEncoder)).encode(T);else{var $=void 0;$=$===void 0?!1:$;for(var _=0,G=new Uint8Array(3*T.length),oe=0;oe<T.length;oe++){var Se=T.charCodeAt(oe);if(128>Se)G[_++]=Se;else{if(2048>Se)G[_++]=Se>>6|192;else{if(55296<=Se&&57343>=Se){if(56319>=Se&&oe<T.length){var ce=T.charCodeAt(++oe);if(56320<=ce&&57343>=ce){Se=1024*(Se-55296)+ce-56320+65536,G[_++]=Se>>18|240,G[_++]=Se>>12&63|128,G[_++]=Se>>6&63|128,G[_++]=Se&63|128;continue}else oe--}if($)throw Error("Found an unpaired surrogate");Se=65533}G[_++]=Se>>12|224,G[_++]=Se>>6&63|128}G[_++]=Se&63|128}}T=G.subarray(0,_)}return T}var he={},be=null;function ue(T,$){$===void 0&&($=0),Ee(),$=he[$];for(var _=Array(Math.floor(T.length/3)),G=$[64]||"",oe=0,Se=0;oe<T.length-2;oe+=3){var ce=T[oe],Ce=T[oe+1],Fe=T[oe+2],Ye=$[ce>>2];ce=$[(ce&3)<<4|Ce>>4],Ce=$[(Ce&15)<<2|Fe>>6],Fe=$[Fe&63],_[Se++]=Ye+ce+Ce+Fe}switch(Ye=0,Fe=G,T.length-oe){case 2:Ye=T[oe+1],Fe=$[(Ye&15)<<2]||G;case 1:T=T[oe],_[Se]=$[T>>2]+$[(T&3)<<4|Ye>>4]+Fe+G}return _.join("")}function Ne(T){var $=T.length,_=3*$/4;_%3?_=Math.floor(_):"=.".indexOf(T[$-1])!=-1&&(_="=.".indexOf(T[$-2])!=-1?_-2:_-1);var G=new Uint8Array(_),oe=0;return _e(T,function(Se){G[oe++]=Se}),G.subarray(0,oe)}function _e(T,$){function _(Fe){for(;G<T.length;){var Ye=T.charAt(G++),yt=be[Ye];if(yt!=null)return yt;if(!/^[\s\xa0]*$/.test(Ye))throw Error("Unknown base64 encoding at char: "+Ye)}return Fe}Ee();for(var G=0;;){var oe=_(-1),Se=_(0),ce=_(64),Ce=_(64);if(Ce===64&&oe===-1)break;$(oe<<2|Se>>4),ce!=64&&($(Se<<4&240|ce>>2),Ce!=64&&$(ce<<6&192|Ce))}}function Ee(){if(!be){be={};for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],_=0;5>_;_++){var G=T.concat($[_].split(""));he[_]=G;for(var oe=0;oe<G.length;oe++){var Se=G[oe];be[Se]===void 0&&(be[Se]=oe)}}}}var Me=typeof Uint8Array.prototype.slice=="function",He;function Ze(T,$,_){return $===_?He||(He=new Uint8Array(0)):Me?T.slice($,_):new Uint8Array(T.subarray($,_))}var ye=0,Re=0;function Oe(T,$){$=$===void 0?{}:$,$=$.v===void 0?!1:$.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=$,T&&me(this,T)}function me(T,$){$=$.constructor===Uint8Array?$:$.constructor===ArrayBuffer?new Uint8Array($):$.constructor===Array?new Uint8Array($):$.constructor===String?Ne($):$ instanceof Uint8Array?new Uint8Array($.buffer,$.byteOffset,$.byteLength):new Uint8Array(0),T.h=$,T.l=0,T.j=T.h.length,T.g=T.l}Oe.prototype.reset=function(){this.g=this.l};function ft(T){for(var $=128,_=0,G=0,oe=0;4>oe&&128<=$;oe++)$=T.h[T.g++],_|=($&127)<<7*oe;if(128<=$&&($=T.h[T.g++],_|=($&127)<<28,G|=($&127)>>4),128<=$)for(oe=0;5>oe&&128<=$;oe++)$=T.h[T.g++],G|=($&127)<<7*oe+3;if(128>$)return T=_>>>0,$=G>>>0,(G=$&2147483648)&&(T=~T+1>>>0,$=~$>>>0,T==0&&($=$+1>>>0)),T=4294967296*$+(T>>>0),G?-T:T;T.m=!0}Oe.prototype.i=function(){var T=this.h,$=T[this.g],_=$&127;return 128>$?(this.g+=1,_):($=T[this.g+1],_|=($&127)<<7,128>$?(this.g+=2,_):($=T[this.g+2],_|=($&127)<<14,128>$?(this.g+=3,_):($=T[this.g+3],_|=($&127)<<21,128>$?(this.g+=4,_):($=T[this.g+4],_|=($&15)<<28,128>$?(this.g+=5,_>>>0):(this.g+=5,128<=T[this.g++]&&128<=T[this.g++]&&128<=T[this.g++]&&128<=T[this.g++]&&this.g++,_)))))},Oe.prototype.o=function(){var T=this.h[this.g],$=this.h[this.g+1],_=this.h[this.g+2],G=this.h[this.g+3];return this.g+=4,_=(T<<0|$<<8|_<<16|G<<24)>>>0,T=2*(_>>31)+1,$=_>>>23&255,_&=8388607,$==255?_?NaN:1/0*T:$==0?T*Math.pow(2,-149)*_:T*Math.pow(2,$-150)*(_+Math.pow(2,23))};var st=[];function ot(){this.g=new Uint8Array(64),this.h=0}ot.prototype.push=function(T){if(!(this.h+1<this.g.length)){var $=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set($)}this.g[this.h++]=T},ot.prototype.length=function(){return this.h},ot.prototype.end=function(){var T=this.g,$=this.h;return this.h=0,Ze(T,0,$)};function lt(T,$){for(;127<$;)T.push($&127|128),$>>>=7;T.push($)}function Ct(T){var $={},_=$.N===void 0?!1:$.N;this.o={v:$.v===void 0?!1:$.v},this.N=_,$=this.o,st.length?(_=st.pop(),$&&(_.v=$.v),T&&me(_,T),T=_):T=new Oe(T,$),this.g=T,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Ct.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function St(T){var $=T.g;if(($=$.g==$.j)||($=T.j)||($=T.g,$=$.m||0>$.g||$.g>$.j),$)return!1;T.m=T.g.g,$=T.g.i();var _=$&7;return _!=0&&_!=5&&_!=1&&_!=2&&_!=3&&_!=4?(T.j=!0,!1):(T.i=$,T.l=$>>>3,T.h=_,!0)}function Pn(T){switch(T.h){case 0:if(T.h!=0)Pn(T);else{for(T=T.g;T.h[T.g]&128;)T.g++;T.g++}break;case 1:T.h!=1?Pn(T):(T=T.g,T.g+=8);break;case 2:if(T.h!=2)Pn(T);else{var $=T.g.i();T=T.g,T.g+=$}break;case 5:T.h!=5?Pn(T):(T=T.g,T.g+=4);break;case 3:$=T.l;do{if(!St(T)){T.j=!0;break}if(T.h==4){T.l!=$&&(T.j=!0);break}Pn(T)}while(!0);break;default:T.j=!0}}function K(T,$,_){var G=T.g.j,oe=T.g.i(),Se=T.g.g+oe;if(T.g.j=Se,_($,T),_=Se-T.g.g,_!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+oe+" bytes, instead read "+(oe-_)+" bytes, either the data ended unexpectedly or the message misreported its own length");return T.g.g=Se,T.g.j=G,$}function ae(T){return T.g.o()}function ve(T){var $=T.g.i();T=T.g;var _=T.g;T.g+=$,T=T.h;var G;if(U)(G=J)||(G=J=new TextDecoder("utf-8",{fatal:!1})),G=G.decode(T.subarray(_,_+$));else{$=_+$;for(var oe=[],Se=null,ce,Ce,Fe;_<$;)ce=T[_++],128>ce?oe.push(ce):224>ce?_>=$?oe.push(65533):(Ce=T[_++],194>ce||(Ce&192)!==128?(_--,oe.push(65533)):oe.push((ce&31)<<6|Ce&63)):240>ce?_>=$-1?oe.push(65533):(Ce=T[_++],(Ce&192)!==128||ce===224&&160>Ce||ce===237&&160<=Ce||((G=T[_++])&192)!==128?(_--,oe.push(65533)):oe.push((ce&15)<<12|(Ce&63)<<6|G&63)):244>=ce?_>=$-2?oe.push(65533):(Ce=T[_++],(Ce&192)!==128||(ce<<28)+(Ce-144)>>30||((G=T[_++])&192)!==128||((Fe=T[_++])&192)!==128?(_--,oe.push(65533)):(ce=(ce&7)<<18|(Ce&63)<<12|(G&63)<<6|Fe&63,ce-=65536,oe.push((ce>>10&1023)+55296,(ce&1023)+56320))):oe.push(65533),8192<=oe.length&&(Se=H(Se,oe),oe.length=0);G=H(Se,oe)}return G}function je(T,$,_){var G=T.g.i();for(G=T.g.g+G;T.g.g<G;)_.push($.call(T.g))}function Pe(T,$){T.h==2?je(T,Oe.prototype.o,$):$.push(ae(T))}function De(){this.h=[],this.i=0,this.g=new ot}function We(T,$){$.length!==0&&(T.h.push($),T.i+=$.length)}function vt(T){var $=T.i+T.g.length();if($===0)return new Uint8Array(0);$=new Uint8Array($);for(var _=T.h,G=_.length,oe=0,Se=0;Se<G;Se++){var ce=_[Se];ce.length!==0&&($.set(ce,oe),oe+=ce.length)}return _=T.g,G=_.h,G!==0&&($.set(_.g.subarray(0,G),oe),_.h=0),T.h=[$],$}function dt(T,$,_){if(_!=null){lt(T.g,8*$+5),T=T.g;var G=_;G=(_=0>G?1:0)?-G:G,G===0?0<1/G?ye=Re=0:(Re=0,ye=2147483648):isNaN(G)?(Re=0,ye=2147483647):34028234663852886e22<G?(Re=0,ye=(_<<31|2139095040)>>>0):11754943508222875e-54>G?(G=Math.round(G/Math.pow(2,-149)),Re=0,ye=(_<<31|G)>>>0):($=Math.floor(Math.log(G)/Math.LN2),G*=Math.pow(2,-$),G=Math.round(8388608*G),16777216<=G&&++$,Re=0,ye=(_<<31|$+127<<23|G&8388607)>>>0),_=ye,T.push(_>>>0&255),T.push(_>>>8&255),T.push(_>>>16&255),T.push(_>>>24&255)}}var wn=typeof Uint8Array=="function";function ti(T,$,_){if(T!=null)return typeof T=="object"?wn&&T instanceof Uint8Array?_(T):qr(T,$,_):$(T)}function qr(T,$,_){if(Array.isArray(T)){for(var G=Array(T.length),oe=0;oe<T.length;oe++)G[oe]=ti(T[oe],$,_);return Array.isArray(T)&&T.W&&qn(G),G}G={};for(oe in T)G[oe]=ti(T[oe],$,_);return G}function hu(T){return typeof T=="number"?isFinite(T)?T:String(T):T}var _i={W:{value:!0,configurable:!0}};function qn(T){return Array.isArray(T)&&!Object.isFrozen(T)&&Object.defineProperties(T,_i),T}var Sn;function Mn(T,$,_){var G=Sn;Sn=null,T||(T=G),G=this.constructor.ca,T||(T=G?[G]:[]),this.j=G?0:-1,this.m=this.g=null,this.h=T;e:{if(G=this.h.length,T=G-1,G&&(G=this.h[T],!(G===null||typeof G!="object"||Array.isArray(G)||wn&&G instanceof Uint8Array))){this.l=T-this.j,this.i=G;break e}$!==void 0&&-1<$?(this.l=Math.max($,T+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(_)for($=0;$<_.length;$++)T=_[$],T<this.l?(T+=this.j,(G=this.h[T])?qn(G):this.h[T]=hs):(wo(this),(G=this.i[T])?qn(G):this.i[T]=hs)}var hs=Object.freeze(qn([]));function wo(T){var $=T.l+T.j;T.h[$]||(T.i=T.h[$]={})}function pn(T,$,_){return $===-1?null:_!==void 0&&_||$>=T.l?T.i?T.i[$]:void 0:T.h[$+T.j]}function Hc(T,$){var _=_===void 0?!1:_,G=pn(T,$,_);return G==null&&(G=hs),G===hs&&(G=qn([]),Rt(T,$,G,_)),G}function pm(T){var $=Hc(T,3);if(T.m||(T.m={}),!T.m[3]){for(var _=0;_<$.length;_++)$[_]=+$[_];T.m[3]=!0}return $}function So(T,$,_){return T=pn(T,$),T??_}function Oi(T,$,_){return T=pn(T,$),T=T==null?T:+T,T??(_===void 0?0:_)}function Rt(T,$,_,G){G!==void 0&&G||$>=T.l?(wo(T),T.i[$]=_):T.h[$+T.j]=_}function U0(T,$,_){if(_===-1)return null;if(T.g||(T.g={}),!T.g[_]){var G=pn(T,_,!1);G&&(T.g[_]=new $(G))}return T.g[_]}function Ld(T,$){T.g||(T.g={});var _=T.g[1];if(!_){var G=Hc(T,1);_=[];for(var oe=0;oe<G.length;oe++)_[oe]=new $(G[oe]);T.g[1]=_}return _}function qc(T,$,_){var G=G===void 0?!1:G;T.g||(T.g={});var oe=_&&To(_);T.g[$]=_,Rt(T,$,oe,G)}function Kc(T,$,_,G){var oe=Ld(T,_);$=$||new _,T=Hc(T,1),G!=null?(oe.splice(G,0,$),T.splice(G,0,To($))):(oe.push($),T.push(To($)))}Mn.prototype.toJSON=function(){var T=To(this);return qr(T,hu,ue)};function To(T,$){if(T.g)for(var _ in T.g){var G=T.g[_];if(Array.isArray(G))for(var oe=0;oe<G.length;oe++)G[oe]&&To(G[oe]);else G&&To(G)}return T.h}Mn.prototype.toString=function(){return To(this).toString()};function zd(T,$){if(T=T.o){We($,$.g.end());for(var _=0;_<T.length;_++)We($,T[_])}}function Di(T,$){if($.h==4)return!1;var _=$.m;return Pn($),$.N||($=Ze($.g.h,_,$.g.g),(_=T.o)?_.push($):T.o=[$]),!0}function Co(T){Mn.call(this,T,-1,b4)}m(Co,Mn),Co.prototype.getRows=function(){return pn(this,1)},Co.prototype.getCols=function(){return pn(this,2)},Co.prototype.getPackedDataList=function(){return pm(this)},Co.prototype.getLayout=function(){return So(this,4,0)};function V0(T,$){for(;St($);)switch($.i){case 8:var _=$.g.i();Rt(T,1,_);break;case 16:_=$.g.i(),Rt(T,2,_);break;case 29:case 26:Pe($,T.getPackedDataList());break;case 32:_=ft($.g),Rt(T,4,_);break;default:if(!Di(T,$))return T}return T}var b4=[3];function Kr(T,$){var _=void 0;return new(_||(_=Promise))(function(G,oe){function Se(Fe){try{Ce($.next(Fe))}catch(Ye){oe(Ye)}}function ce(Fe){try{Ce($.throw(Fe))}catch(Ye){oe(Ye)}}function Ce(Fe){Fe.done?G(Fe.value):new _(function(Ye){Ye(Fe.value)}).then(Se,ce)}Ce(($=$.apply(T,void 0)).next())})}function Eo(T){Mn.call(this,T)}m(Eo,Mn);function W0(T,$){for(;St($);)switch($.i){case 8:var _=$.g.i();Rt(T,1,_);break;case 21:_=ae($),Rt(T,2,_);break;case 26:_=ve($),Rt(T,3,_);break;case 34:_=ve($),Rt(T,4,_);break;default:if(!Di(T,$))return T}return T}function Bd(T){Mn.call(this,T,-1,G0)}m(Bd,Mn),Bd.prototype.addClassification=function(T,$){return Kc(this,T,Eo,$),this};var G0=[1];function pu(T){Mn.call(this,T)}m(pu,Mn);function x4(T,$){for(;St($);)switch($.i){case 13:var _=ae($);Rt(T,1,_);break;case 21:_=ae($),Rt(T,2,_);break;case 29:_=ae($),Rt(T,3,_);break;case 37:_=ae($),Rt(T,4,_);break;case 45:_=ae($),Rt(T,5,_);break;default:if(!Di(T,$))return T}return T}function H0(T){Mn.call(this,T,-1,K0)}m(H0,Mn);function q0(T){e:{var $=new H0;for(T=new Ct(T);St(T);)switch(T.i){case 10:var _=K(T,new pu,x4);Kc($,_,pu,void 0);break;default:if(!Di($,T))break e}}return $}var K0=[1];function jd(T){Mn.call(this,T)}m(jd,Mn);function cl(T){Mn.call(this,T,-1,S4)}m(cl,Mn),cl.prototype.getVertexType=function(){return So(this,1,0)},cl.prototype.getPrimitiveType=function(){return So(this,2,0)},cl.prototype.getVertexBufferList=function(){return pm(this)},cl.prototype.getIndexBufferList=function(){return Hc(this,4)};function w4(T,$){for(;St($);)switch($.i){case 8:var _=ft($.g);Rt(T,1,_);break;case 16:_=ft($.g),Rt(T,2,_);break;case 29:case 26:Pe($,T.getVertexBufferList());break;case 32:case 34:_=$;var G=T.getIndexBufferList();_.h==2?je(_,Oe.prototype.i,G):G.push(_.g.i());break;default:if(!Di(T,$))return T}return T}var S4=[3,4];function Ud(T){Mn.call(this,T)}m(Ud,Mn),Ud.prototype.getMesh=function(){return U0(this,cl,1)},Ud.prototype.getPoseTransformMatrix=function(){return U0(this,Co,2)};function X0(T){e:{var $=new Ud;for(T=new Ct(T);St(T);)switch(T.i){case 10:var _=K(T,new cl,w4);qc($,1,_);break;case 18:_=K(T,new Co,V0),qc($,2,_);break;default:if(!Di($,T))break e}}return $}function mm(T,$,_){if(_=T.createShader(_===0?T.VERTEX_SHADER:T.FRAGMENT_SHADER),T.shaderSource(_,$),T.compileShader(_),!T.getShaderParameter(_,T.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+T.getShaderInfoLog(_));return _}function gm(T){return Ld(T,Eo).map(function($){return{index:So($,1,0),Y:Oi($,2),label:pn($,3)!=null?So($,3,""):void 0,displayName:pn($,4)!=null?So($,4,""):void 0}})}function ym(T){return{x:Oi(T,1),y:Oi(T,2),z:Oi(T,3),visibility:pn(T,4)!=null?Oi(T,4):void 0}}function Xc(T,$){this.h=T,this.g=$,this.l=0}function mu(T,$,_){return Ri(T,$),typeof T.g.canvas.transferToImageBitmap=="function"?Promise.resolve(T.g.canvas.transferToImageBitmap()):_?Promise.resolve(T.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(T.g.canvas):(T.i===void 0&&(T.i=document.createElement("canvas")),new Promise(function(G){T.i.height=T.g.canvas.height,T.i.width=T.g.canvas.width,T.i.getContext("2d",{}).drawImage(T.g.canvas,0,0,T.g.canvas.width,T.g.canvas.height),G(T.i)}))}function Ri(T,$){var _=T.g;if(T.m===void 0){var G=mm(_,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),oe=mm(_,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Se=_.createProgram();if(_.attachShader(Se,G),_.attachShader(Se,oe),_.linkProgram(Se),!_.getProgramParameter(Se,_.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+_.getProgramInfoLog(Se));G=T.m=Se,_.useProgram(G),oe=_.getUniformLocation(G,"sampler0"),T.j={I:_.getAttribLocation(G,"aVertex"),H:_.getAttribLocation(G,"aTex"),da:oe},T.s=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,T.s),_.enableVertexAttribArray(T.j.I),_.vertexAttribPointer(T.j.I,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),T.o=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,T.o),_.enableVertexAttribArray(T.j.H),_.vertexAttribPointer(T.j.H,2,_.FLOAT,!1,0,0),_.bufferData(_.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),_.STATIC_DRAW),_.bindBuffer(_.ARRAY_BUFFER,null),_.uniform1i(oe,0)}G=T.j,_.useProgram(T.m),_.canvas.width=$.width,_.canvas.height=$.height,_.viewport(0,0,$.width,$.height),_.activeTexture(_.TEXTURE0),T.h.bindTexture2d($.glName),_.enableVertexAttribArray(G.I),_.bindBuffer(_.ARRAY_BUFFER,T.s),_.vertexAttribPointer(G.I,2,_.FLOAT,!1,0,0),_.enableVertexAttribArray(G.H),_.bindBuffer(_.ARRAY_BUFFER,T.o),_.vertexAttribPointer(G.H,2,_.FLOAT,!1,0,0),_.bindFramebuffer(_.DRAW_FRAMEBUFFER?_.DRAW_FRAMEBUFFER:_.FRAMEBUFFER,null),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),_.colorMask(!0,!0,!0,!0),_.drawArrays(_.TRIANGLE_FAN,0,4),_.disableVertexAttribArray(G.I),_.disableVertexAttribArray(G.H),_.bindBuffer(_.ARRAY_BUFFER,null),T.h.bindTexture2d(0)}function T4(T){this.g=T}var C4=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Y0(T,$){return $+T}function vm(T,$){window[T]=$}function ni(T){var $=document.createElement("script");return $.setAttribute("src",T),$.setAttribute("crossorigin","anonymous"),new Promise(function(_){$.addEventListener("load",function(){_()},!1),$.addEventListener("error",function(){_()},!1),document.body.appendChild($)})}function Z0(){return Kr(this,function T(){return O(T,function($){switch($.g){case 1:return $.m=2,b($,WebAssembly.instantiate(C4),4);case 4:$.g=3,$.m=0;break;case 2:return $.m=0,$.j=null,$.return(!1);case 3:return $.return(!0)}})})}function fl(T){if(this.g=T,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=T&&T.locateFile||Y0,typeof window=="object")var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=$,T.options){$=o(Object.keys(T.options));for(var _=$.next();!_.done;_=$.next()){_=_.value;var G=T.options[_].default;G!==void 0&&(this.j[_]=typeof G=="function"?G():G)}}}t=fl.prototype,t.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Q0(T,$){return T.g.files===void 0?[]:typeof T.g.files=="function"?T.g.files($):T.g.files}function bm(T){return Kr(T,function $(){var _=this,G,oe,Se,ce,Ce,Fe,Ye,yt,Wt,$t,xt;return O($,function(rt){switch(rt.g){case 1:return G=_,_.R?(oe=Q0(_,_.j),b(rt,Z0(),2)):rt.return();case 2:if(Se=rt.h,typeof window=="object")return vm("createMediapipeSolutionsWasm",{locateFile:_.locateFile}),vm("createMediapipeSolutionsPackedAssets",{locateFile:_.locateFile}),Fe=oe.filter(function(S){return S.data!==void 0}),Ye=oe.filter(function(S){return S.data===void 0}),yt=Promise.all(Fe.map(function(S){var I=gu(G,S.url);if(S.path!==void 0){var D=S.path;I=I.then(function(L){return G.overrideFile(D,L),Promise.resolve(L)})}return I})),Wt=Promise.all(Ye.map(function(S){return S.simd===void 0||S.simd&&Se||!S.simd&&!Se?ni(G.locateFile(S.url,G.S)):Promise.resolve()})).then(function(){return Kr(G,function S(){var I,D,L=this;return O(S,function(W){if(W.g==1)return I=window.createMediapipeSolutionsWasm,D=window.createMediapipeSolutionsPackedAssets,b(W,I(D),2);L.h=W.h,W.g=0})})}),$t=function(){return Kr(G,function S(){var I=this;return O(S,function(D){return I.g.graph&&I.g.graph.url?D=b(D,gu(I,I.g.graph.url),0):(D.g=0,D=void 0),D})})}(),b(rt,Promise.all([Wt,yt,$t]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return ce=oe.filter(function(S){return S.simd===void 0||S.simd&&Se||!S.simd&&!Se}).map(function(S){return G.locateFile(S.url,G.S)}),importScripts.apply(null,l(ce)),b(rt,createMediapipeSolutionsWasm(Module),6);case 6:_.h=rt.h,_.l=new OffscreenCanvas(1,1),_.h.canvas=_.l,Ce=_.h.GL.createContext(_.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),_.h.GL.makeContextCurrent(Ce),rt.g=4;break;case 7:if(_.l=document.createElement("canvas"),xt=_.l.getContext("webgl2",{}),!xt&&(xt=_.l.getContext("webgl",{}),!xt))return alert("Failed to create WebGL canvas context when passing video frame."),rt.return();_.D=xt,_.h.canvas=_.l,_.h.createContext(_.l,!0,!0,{});case 4:_.i=new _.h.SolutionWasm,_.R=!1,rt.g=0}})})}function E4(T){return Kr(T,function $(){var _=this,G,oe,Se,ce,Ce,Fe,Ye,yt;return O($,function(Wt){if(Wt.g==1){if(_.g.graph&&_.g.graph.url&&_.P===_.g.graph.url)return Wt.return();if(_.o=!0,!_.g.graph||!_.g.graph.url){Wt.g=2;return}return _.P=_.g.graph.url,b(Wt,gu(_,_.g.graph.url),3)}for(Wt.g!=2&&(G=Wt.h,_.i.loadGraph(G)),oe=o(Object.keys(_.B)),Se=oe.next();!Se.done;Se=oe.next())ce=Se.value,_.i.overrideFile(ce,_.B[ce]);if(_.B={},_.g.listeners)for(Ce=o(_.g.listeners),Fe=Ce.next();!Fe.done;Fe=Ce.next())Ye=Fe.value,N4(_,Ye);yt=_.j,_.j={},_.setOptions(yt),Wt.g=0})})}t.reset=function(){return Kr(this,function T(){var $=this;return O(T,function(_){$.i&&($.i.reset(),$.m={},$.s={}),_.g=0})})},t.setOptions=function(T,$){var _=this;if($=$||this.g.options){for(var G=[],oe=[],Se={},ce=o(Object.keys(T)),Ce=ce.next();!Ce.done;Se={K:Se.K,L:Se.L},Ce=ce.next()){var Fe=Ce.value;Fe in this.j&&this.j[Fe]===T[Fe]||(this.j[Fe]=T[Fe],Ce=$[Fe],Ce!==void 0&&(Ce.onChange&&(Se.K=Ce.onChange,Se.L=T[Fe],G.push(function(Ye){return function(){return Kr(_,function yt(){var Wt,$t=this;return O(yt,function(xt){if(xt.g==1)return b(xt,Ye.K(Ye.L),2);Wt=xt.h,Wt===!0&&($t.o=!0),xt.g=0})})}}(Se))),Ce.graphOptionXref&&(Fe={valueNumber:Ce.type===1?T[Fe]:0,valueBoolean:Ce.type===0?T[Fe]:!1,valueString:Ce.type===2?T[Fe]:""},Ce=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ce.graphOptionXref),Fe),oe.push(Ce))))}(G.length!==0||oe.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(oe),this.u=(this.u===void 0?[]:this.u).concat(G))}};function k4(T){return Kr(T,function $(){var _=this,G,oe,Se,ce,Ce,Fe,Ye;return O($,function(yt){switch(yt.g){case 1:if(!_.o)return yt.return();if(!_.u){yt.g=2;break}G=o(_.u),oe=G.next();case 3:if(oe.done){yt.g=5;break}return Se=oe.value,b(yt,Se(),4);case 4:oe=G.next(),yt.g=3;break;case 5:_.u=void 0;case 2:if(_.A){for(ce=new _.h.GraphOptionChangeRequestList,Ce=o(_.A),Fe=Ce.next();!Fe.done;Fe=Ce.next())Ye=Fe.value,ce.push_back(Ye);_.i.changeOptions(ce),ce.delete(),_.A=void 0}_.o=!1,yt.g=0}})})}t.initialize=function(){return Kr(this,function T(){var $=this;return O(T,function(_){return _.g==1?b(_,bm($),2):_.g!=3?b(_,E4($),3):b(_,k4($),0)})})};function gu(T,$){return Kr(T,function _(){var G=this,oe,Se;return O(_,function(ce){return $ in G.F?ce.return(G.F[$]):(oe=G.locateFile($,""),Se=fetch(oe).then(function(Ce){return Ce.arrayBuffer()}),G.F[$]=Se,ce.return(Se))})})}t.overrideFile=function(T,$){this.i?this.i.overrideFile(T,$):this.B[T]=$},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(T,$){return Kr(this,function _(){var G=this,oe,Se,ce,Ce,Fe,Ye,yt,Wt,$t;return O(_,function(xt){switch(xt.g){case 1:return G.g.inputs?(oe=1e3*($??performance.now()),b(xt,G.C,2)):xt.return();case 2:return b(xt,G.initialize(),3);case 3:for(Se=new G.h.PacketDataList,ce=o(Object.keys(T)),Ce=ce.next();!Ce.done;Ce=ce.next())if(Fe=Ce.value,Ye=G.g.inputs[Fe]){e:{var rt=G,S=T[Fe];switch(Ye.type){case"video":var I=rt.m[Ye.stream];if(I||(I=new Xc(rt.h,rt.D),rt.m[Ye.stream]=I),rt=I,rt.l===0&&(rt.l=rt.h.createTexture()),typeof HTMLVideoElement<"u"&&S instanceof HTMLVideoElement){var D=S.videoWidth;I=S.videoHeight}else typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement?(D=S.naturalWidth,I=S.naturalHeight):(D=S.width,I=S.height);I={glName:rt.l,width:D,height:I},D=rt.g,D.canvas.width=I.width,D.canvas.height=I.height,D.activeTexture(D.TEXTURE0),rt.h.bindTexture2d(rt.l),D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,S),rt.h.bindTexture2d(0),rt=I;break e;case"detections":for(I=rt.m[Ye.stream],I||(I=new T4(rt.h),rt.m[Ye.stream]=I),rt=I,rt.data||(rt.data=new rt.g.DetectionListData),rt.data.reset(S.length),I=0;I<S.length;++I){D=S[I];var L=rt.data,W=L.setBoundingBox,V=I,q=D.T,te=new jd;Rt(te,1,q.Z),Rt(te,2,q.$),Rt(te,3,q.height),Rt(te,4,q.width),Rt(te,5,q.rotation),Rt(te,6,q.X);var fe=q=new De;dt(fe,1,pn(te,1)),dt(fe,2,pn(te,2)),dt(fe,3,pn(te,3)),dt(fe,4,pn(te,4)),dt(fe,5,pn(te,5));var Te=pn(te,6);if(Te!=null&&Te!=null){lt(fe.g,48);var Ae=fe.g,Le=Te;Te=0>Le,Le=Math.abs(Le);var ze=Le>>>0;for(Le=Math.floor((Le-ze)/4294967296),Le>>>=0,Te&&(Le=~Le>>>0,ze=(~ze>>>0)+1,4294967295<ze&&(ze=0,Le++,4294967295<Le&&(Le=0))),ye=ze,Re=Le,Te=ye,ze=Re;0<ze||127<Te;)Ae.push(Te&127|128),Te=(Te>>>7|ze<<25)>>>0,ze>>>=7;Ae.push(Te)}if(zd(te,fe),q=vt(q),W.call(L,V,q),D.O)for(L=0;L<D.O.length;++L)te=D.O[L],fe=!!te.visibility,W=rt.data,V=W.addNormalizedLandmark,q=I,te=Object.assign(Object.assign({},te),{visibility:fe?te.visibility:0}),fe=new pu,Rt(fe,1,te.x),Rt(fe,2,te.y),Rt(fe,3,te.z),te.visibility&&Rt(fe,4,te.visibility),Ae=te=new De,dt(Ae,1,pn(fe,1)),dt(Ae,2,pn(fe,2)),dt(Ae,3,pn(fe,3)),dt(Ae,4,pn(fe,4)),dt(Ae,5,pn(fe,5)),zd(fe,Ae),te=vt(te),V.call(W,q,te);if(D.M)for(L=0;L<D.M.length;++L){if(W=rt.data,V=W.addClassification,q=I,te=D.M[L],fe=new Eo,Rt(fe,2,te.Y),te.index&&Rt(fe,1,te.index),te.label&&Rt(fe,3,te.label),te.displayName&&Rt(fe,4,te.displayName),Ae=te=new De,ze=pn(fe,1),ze!=null&&ze!=null)if(lt(Ae.g,8),Te=Ae.g,0<=ze)lt(Te,ze);else{for(Le=0;9>Le;Le++)Te.push(ze&127|128),ze>>=7;Te.push(1)}dt(Ae,2,pn(fe,2)),Te=pn(fe,3),Te!=null&&(Te=se(Te),lt(Ae.g,26),lt(Ae.g,Te.length),We(Ae,Ae.g.end()),We(Ae,Te)),Te=pn(fe,4),Te!=null&&(Te=se(Te),lt(Ae.g,34),lt(Ae.g,Te.length),We(Ae,Ae.g.end()),We(Ae,Te)),zd(fe,Ae),te=vt(te),V.call(W,q,te)}}rt=rt.data;break e;default:rt={}}}switch(yt=rt,Wt=Ye.stream,Ye.type){case"video":Se.pushTexture2d(Object.assign(Object.assign({},yt),{stream:Wt,timestamp:oe}));break;case"detections":$t=yt,$t.stream=Wt,$t.timestamp=oe,Se.pushDetectionList($t);break;default:throw Error("Unknown input config type: '"+Ye.type+"'")}}return G.i.send(Se),b(xt,G.C,4);case 4:Se.delete(),xt.g=0}})})};function J0(T,$,_){return Kr(T,function G(){var oe,Se,ce,Ce,Fe,Ye,yt=this,Wt,$t,xt,rt,S,I,D,L;return O(G,function(W){switch(W.g){case 1:if(!_)return W.return($);for(oe={},Se=0,ce=o(Object.keys(_)),Ce=ce.next();!Ce.done;Ce=ce.next())Fe=Ce.value,Ye=_[Fe],typeof Ye!="string"&&Ye.type==="texture"&&$[Ye.stream]!==void 0&&++Se;1<Se&&(yt.G=!1),Wt=o(Object.keys(_)),Ce=Wt.next();case 2:if(Ce.done){W.g=4;break}if($t=Ce.value,xt=_[$t],typeof xt=="string")return D=oe,L=$t,b(W,ev(yt,$t,$[xt]),14);if(rt=$[xt.stream],xt.type==="detection_list"){if(rt){for(var V=rt.getRectList(),q=rt.getLandmarksList(),te=rt.getClassificationsList(),fe=[],Te=0;Te<V.size();++Te){var Ae=V.get(Te);e:{var Le=new jd;for(Ae=new Ct(Ae);St(Ae);)switch(Ae.i){case 13:var ze=ae(Ae);Rt(Le,1,ze);break;case 21:ze=ae(Ae),Rt(Le,2,ze);break;case 29:ze=ae(Ae),Rt(Le,3,ze);break;case 37:ze=ae(Ae),Rt(Le,4,ze);break;case 45:ze=ae(Ae),Rt(Le,5,ze);break;case 48:ze=ft(Ae.g),Rt(Le,6,ze);break;default:if(!Di(Le,Ae))break e}}Le={Z:Oi(Le,1),$:Oi(Le,2),height:Oi(Le,3),width:Oi(Le,4),rotation:Oi(Le,5,0),X:So(Le,6,0)},Ae=Ld(q0(q.get(Te)),pu).map(ym);var Ge=te.get(Te);e:for(ze=new Bd,Ge=new Ct(Ge);St(Ge);)switch(Ge.i){case 10:ze.addClassification(K(Ge,new Eo,W0));break;default:if(!Di(ze,Ge))break e}Le={T:Le,O:Ae,M:gm(ze)},fe.push(Le)}V=fe}else V=[];oe[$t]=V,W.g=7;break}if(xt.type==="proto_list"){if(rt){for(V=Array(rt.size()),q=0;q<rt.size();q++)V[q]=rt.get(q);rt.delete()}else V=[];oe[$t]=V,W.g=7;break}if(rt===void 0){W.g=3;break}if(xt.type==="float_list"){oe[$t]=rt,W.g=7;break}if(xt.type==="proto"){oe[$t]=rt,W.g=7;break}if(xt.type!=="texture")throw Error("Unknown output config type: '"+xt.type+"'");return S=yt.s[$t],S||(S=new Xc(yt.h,yt.D),yt.s[$t]=S),b(W,mu(S,rt,yt.G),13);case 13:I=W.h,oe[$t]=I;case 7:xt.transform&&oe[$t]&&(oe[$t]=xt.transform(oe[$t])),W.g=3;break;case 14:D[L]=W.h;case 3:Ce=Wt.next(),W.g=2;break;case 4:return W.return(oe)}})})}function ev(T,$,_){return Kr(T,function G(){var oe=this,Se;return O(G,function(ce){return typeof _=="number"||_ instanceof Uint8Array||_ instanceof oe.h.Uint8BlobList?ce.return(_):_ instanceof oe.h.Texture2dDataOut?(Se=oe.s[$],Se||(Se=new Xc(oe.h,oe.D),oe.s[$]=Se),ce.return(mu(Se,_,oe.G))):ce.return(void 0)})})}function N4(T,$){for(var _=$.name||"$",G=[].concat(l($.wants)),oe=new T.h.StringList,Se=o($.wants),ce=Se.next();!ce.done;ce=Se.next())oe.push_back(ce.value);Se=T.h.PacketListener.implement({onResults:function(Ce){for(var Fe={},Ye=0;Ye<$.wants.length;++Ye)Fe[G[Ye]]=Ce.get(Ye);var yt=T.listeners[_];yt&&(T.C=J0(T,Fe,$.outs).then(function(Wt){Wt=yt(Wt);for(var $t=0;$t<$.wants.length;++$t){var xt=Fe[G[$t]];typeof xt=="object"&&xt.hasOwnProperty&&xt.hasOwnProperty("delete")&&xt.delete()}Wt&&(T.C=Wt)}))}}),T.i.attachMultiListener(oe,Se),oe.delete()}t.onResults=function(T,$){this.listeners[$||"$"]=T},j("Solution",fl),j("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function A4(T){T=X0(T);var $=T.getMesh();if(!$)return T;var _=new Float32Array($.getVertexBufferList());$.getVertexBufferList=function(){return _};var G=new Uint32Array($.getIndexBufferList());return $.getIndexBufferList=function(){return G},T}var xm={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(T){return T.map(A4)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(T){return T.map(function($){return Ld(q0($),pu).map(ym)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},wm=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Sm=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Tm=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Cm=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Em=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],km=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],tv=[].concat(l(wm),l(Sm),l(Tm),l(Cm),l(Em),l(km));function nv(T){T=T||{},T=Object.assign(Object.assign({},xm),T),this.g=new fl(T)}t=nv.prototype,t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(T){this.g.onResults(T)},t.initialize=function(){return Kr(this,function T(){var $=this;return O(T,function(_){return b(_,$.g.initialize(),0)})})},t.reset=function(){this.g.reset()},t.send=function(T){return Kr(this,function $(){var _=this;return O($,function(G){return b(G,_.g.send(T),0)})})},t.setOptions=function(T){this.g.setOptions(T)},j("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),j("FaceMesh",nv),j("FACEMESH_LIPS",wm),j("FACEMESH_LEFT_EYE",Sm),j("FACEMESH_LEFT_EYEBROW",Tm),j("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),j("FACEMESH_RIGHT_EYE",Cm),j("FACEMESH_RIGHT_EYEBROW",Em),j("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),j("FACEMESH_FACE_OVAL",km),j("FACEMESH_CONTOURS",tv),j("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),j("matrixDataToMatrix",function(T){for(var $=T.getCols(),_=T.getRows(),G=T.getPackedDataList(),oe=[],Se=0;Se<_;Se++)oe.push(Array($));for(Se=0;Se<_;Se++)for(var ce=0;ce<$;ce++){var Ce=T.getLayout()===1?Se*$+ce:ce*_+Se;oe[Se][ce]=G[Ce]}return oe}),j("VERSION","0.4.1633559619")}).call(Uo);/**
    * @license
    * Copyright 2024 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var lo=function(){return lo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},lo.apply(this,arguments)};function Ol(t,e,n,r){return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(c){i(c)}}function o(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){var c;u.done?s(u.value):(c=u.value,c instanceof n?c:new n(function(f){f(c)})).then(a,o)}l((r=r.apply(t,[])).next())})}function Dl(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&c[0]?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!((s=s.length>0&&s[s.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(c[0]===6&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(f){c=[6,f],r=0}finally{n=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function xu(t){var e=t.map(function(n){return n[0]});return e.push(t[t.length-1][1]),e}var rZe={lips:xu([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:xu([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:xu([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:xu([[474,475],[475,476],[476,477],[477,474]]),rightEye:xu([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:xu([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:xu([[469,470],[470,471],[471,472],[472,469]]),faceOval:xu([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},sZe=Object.entries(rZe).map(function(t){var e=t[0];return t[1].map(function(n){return[n,e]})}).flat(),Yee=new Map(sZe);function XN(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=0;a<t.length;++a){var o=t[a];n=Math.min(n,o.x),r=Math.max(r,o.x),s=Math.min(s,o.y),i=Math.max(i,o.y),e.locationData.relativeKeypoints.push({x:o.x,y:o.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:s,xMax:r,yMax:i,width:r-n,height:i-s},e}var bC={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},iZe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new nZe.FaceMesh({locateFile:function(r,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+r:s+"/"+r}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.multiFaceLandmarks!==null)for(var s=r.multiFaceLandmarks,i=0;i<s.length;i++){var a=n.translateOutput(s[i]);n.faces.push({keypoints:a,box:XN(a).locationData.relativeBoundingBox})}})}return t.prototype.translateOutput=function(e){var n=this;return e.map(function(r,s){var i={x:r.x*n.width,y:r.y*n.height,z:r.z*n.width},a=Yee.get(s);return a!=null&&(i.name=a),i})},t.prototype.estimateFaces=function(e,n){return Ol(this,void 0,void 0,function(){var r,s;return Dl(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Jt?(s=ImageData.bind,[4,qX(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceMeshSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceMeshSolution.close()},t.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceMeshSolution.initialize()},t}();function aZe(t){return Ol(this,void 0,void 0,function(){var e,n;return Dl(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return lo({},bC);var i=lo({},s);return i.runtime="mediapipe",i.maxFaces==null&&(i.maxFaces=bC.maxFaces),i.refineLandmarks==null&&(i.refineLandmarks=bC.refineLandmarks),i}(t),[4,(n=new iZe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}var xC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oZe={};(function(){var t;function e(S){var I=0;return function(){return I<S.length?{done:!1,value:S[I++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,I,D){return S==Array.prototype||S==Object.prototype||(S[I]=D.value),S},r=function(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof xC=="object"&&xC];for(var I=0;I<S.length;++I){var D=S[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}(this);function s(S,I){if(I)e:{var D=r;S=S.split(".");for(var L=0;L<S.length-1;L++){var W=S[L];if(!(W in D))break e;D=D[W]}(I=I(L=D[S=S[S.length-1]]))!=L&&I!=null&&n(D,S,{configurable:!0,writable:!0,value:I})}}function i(S){return(S={next:S})[Symbol.iterator]=function(){return this},S}function a(S){var I=typeof Symbol<"u"&&Symbol.iterator&&S[Symbol.iterator];return I?I.call(S):{next:e(S)}}function o(S){if(!(S instanceof Array)){S=a(S);for(var I,D=[];!(I=S.next()).done;)D.push(I.value);S=D}return S}s("Symbol",function(S){function I(W,V){this.g=W,n(this,"description",{configurable:!0,writable:!0,value:V})}if(S)return S;I.prototype.toString=function(){return this.g};var D="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",L=0;return function W(V){if(this instanceof W)throw new TypeError("Symbol is not a constructor");return new I(D+(V||"")+"_"+L++,V)}}),s("Symbol.iterator",function(S){if(S)return S;S=Symbol("Symbol.iterator");for(var I="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<I.length;D++){var L=r[I[D]];typeof L=="function"&&typeof L.prototype[S]!="function"&&n(L.prototype,S,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return S});var l,u=typeof Object.create=="function"?Object.create:function(S){function I(){}return I.prototype=S,new I};if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var c;e:{var f={};try{f.__proto__={a:!0},c=f.a;break e}catch{}c=!1}l=c?function(S,I){if(S.__proto__=I,S.__proto__!==I)throw new TypeError(S+" is not extensible");return S}:null}var d=l;function h(S,I){if(S.prototype=u(I.prototype),S.prototype.constructor=S,d)d(S,I);else for(var D in I)if(D!="prototype")if(Object.defineProperties){var L=Object.getOwnPropertyDescriptor(I,D);L&&Object.defineProperty(S,D,L)}else S[D]=I[D];S.na=I.prototype}function p(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function m(S){if(S.l)throw new TypeError("Generator is already running");S.l=!0}function g(S,I){S.j={da:I,ea:!0},S.g=S.o||S.u}function y(S,I,D){return S.g=D,{value:I}}function v(S){this.g=new p,this.h=S}function b(S,I,D,L){try{var W=I.call(S.g.i,D);if(!(W instanceof Object))throw new TypeError("Iterator result "+W+" is not an object");if(!W.done)return S.g.l=!1,W;var V=W.value}catch(q){return S.g.i=null,g(S.g,q),x(S)}return S.g.i=null,L.call(S.g,V),x(S)}function x(S){for(;S.g.g;)try{var I=S.h(S.g);if(I)return S.g.l=!1,{value:I.value,done:!1}}catch(D){S.g.h=void 0,g(S.g,D)}if(S.g.l=!1,S.g.j){if(I=S.g.j,S.g.j=null,I.ea)throw I.da;return{value:I.return,done:!0}}return{value:void 0,done:!0}}function w(S){this.next=function(I){return m(S.g),S.g.i?I=b(S,S.g.i.next,I,S.g.s):(S.g.s(I),I=x(S)),I},this.throw=function(I){return m(S.g),S.g.i?I=b(S,S.g.i.throw,I,S.g.s):(g(S.g,I),I=x(S)),I},this.return=function(I){return function(D,L){m(D.g);var W=D.g.i;return W?b(D,"return"in W?W.return:function(V){return{value:V,done:!0}},L,D.g.return):(D.g.return(L),x(D))}(S,I)},this[Symbol.iterator]=function(){return this}}function C(S){return function(I){function D(W){return I.next(W)}function L(W){return I.throw(W)}return new Promise(function(W,V){(function q(te){te.done?W(te.value):Promise.resolve(te.value).then(D,L).then(q,V)})(I.next())})}(new w(new v(S)))}p.prototype.s=function(S){this.h=S},p.prototype.return=function(S){this.j={return:S},this.g=this.u},s("Promise",function(S){function I(q){this.h=0,this.i=void 0,this.g=[],this.s=!1;var te=this.j();try{q(te.resolve,te.reject)}catch(fe){te.reject(fe)}}function D(){this.g=null}function L(q){return q instanceof I?q:new I(function(te){te(q)})}if(S)return S;D.prototype.h=function(q){if(this.g==null){this.g=[];var te=this;this.i(function(){te.l()})}this.g.push(q)};var W=r.setTimeout;D.prototype.i=function(q){W(q,0)},D.prototype.l=function(){for(;this.g&&this.g.length;){var q=this.g;this.g=[];for(var te=0;te<q.length;++te){var fe=q[te];q[te]=null;try{fe()}catch(Te){this.j(Te)}}}this.g=null},D.prototype.j=function(q){this.i(function(){throw q})},I.prototype.j=function(){function q(Te){return function(Ae){fe||(fe=!0,Te.call(te,Ae))}}var te=this,fe=!1;return{resolve:q(this.D),reject:q(this.l)}},I.prototype.D=function(q){if(q===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(q instanceof I)this.H(q);else{e:switch(typeof q){case"object":var te=q!=null;break e;case"function":te=!0;break e;default:te=!1}te?this.A(q):this.o(q)}},I.prototype.A=function(q){var te=void 0;try{te=q.then}catch(fe){return void this.l(fe)}typeof te=="function"?this.I(te,q):this.o(q)},I.prototype.l=function(q){this.u(2,q)},I.prototype.o=function(q){this.u(1,q)},I.prototype.u=function(q,te){if(this.h!=0)throw Error("Cannot settle("+q+", "+te+"): Promise already settled in state"+this.h);this.h=q,this.i=te,this.h===2&&this.G(),this.B()},I.prototype.G=function(){var q=this;W(function(){if(q.C()){var te=r.console;te!==void 0&&te.error(q.i)}},1)},I.prototype.C=function(){if(this.s)return!1;var q=r.CustomEvent,te=r.Event,fe=r.dispatchEvent;return fe===void 0||(typeof q=="function"?q=new q("unhandledrejection",{cancelable:!0}):typeof te=="function"?q=new te("unhandledrejection",{cancelable:!0}):(q=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,q),q.promise=this,q.reason=this.i,fe(q))},I.prototype.B=function(){if(this.g!=null){for(var q=0;q<this.g.length;++q)V.h(this.g[q]);this.g=null}};var V=new D;return I.prototype.H=function(q){var te=this.j();q.M(te.resolve,te.reject)},I.prototype.I=function(q,te){var fe=this.j();try{q.call(te,fe.resolve,fe.reject)}catch(Te){fe.reject(Te)}},I.prototype.then=function(q,te){function fe(ze,Ge){return typeof ze=="function"?function(bt){try{Te(ze(bt))}catch(At){Ae(At)}}:Ge}var Te,Ae,Le=new I(function(ze,Ge){Te=ze,Ae=Ge});return this.M(fe(q,Te),fe(te,Ae)),Le},I.prototype.catch=function(q){return this.then(void 0,q)},I.prototype.M=function(q,te){function fe(){switch(Te.h){case 1:q(Te.i);break;case 2:te(Te.i);break;default:throw Error("Unexpected state: "+Te.h)}}var Te=this;this.g==null?V.h(fe):this.g.push(fe),this.s=!0},I.resolve=L,I.reject=function(q){return new I(function(te,fe){fe(q)})},I.race=function(q){return new I(function(te,fe){for(var Te=a(q),Ae=Te.next();!Ae.done;Ae=Te.next())L(Ae.value).M(te,fe)})},I.all=function(q){var te=a(q),fe=te.next();return fe.done?L([]):new I(function(Te,Ae){function Le(bt){return function(At){ze[bt]=At,--Ge==0&&Te(ze)}}var ze=[],Ge=0;do ze.push(void 0),Ge++,L(fe.value).M(Le(ze.length-1),Ae),fe=te.next();while(!fe.done)})},I});var E=typeof Object.assign=="function"?Object.assign:function(S,I){for(var D=1;D<arguments.length;D++){var L=arguments[D];if(L)for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&(S[W]=L[W])}return S};s("Object.assign",function(S){return S||E}),s("Object.is",function(S){return S||function(I,D){return I===D?I!==0||1/I==1/D:I!=I&&D!=D}}),s("Array.prototype.includes",function(S){return S||function(I,D){var L=this;L instanceof String&&(L=String(L));var W=L.length;for(0>(D=D||0)&&(D=Math.max(D+W,0));D<W;D++){var V=L[D];if(V===I||Object.is(V,I))return!0}return!1}}),s("String.prototype.includes",function(S){return S||function(I,D){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(I instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(I,D||0)!==-1}}),s("Array.prototype.keys",function(S){return S||function(){return function(I,D){I instanceof String&&(I+="");var L=0,W=!1,V={next:function(){if(!W&&L<I.length){var q=L++;return{value:D(q,I[q]),done:!1}}return W=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}(this,function(I){return I})}});var A=this||self;function O(S,I){S=S.split(".");var D,L=A;for((S[0]in L)||L.execScript===void 0||L.execScript("var "+S[0]);S.length&&(D=S.shift());)S.length||I===void 0?L=L[D]&&L[D]!==Object.prototype[D]?L[D]:L[D]={}:L[D]=I}function R(){throw Error("Invalid UTF8")}function F(S,I){return I=String.fromCharCode.apply(null,I),S==null?I:S+I}var z,j,H=typeof TextDecoder<"u",J=typeof TextEncoder<"u",U={},Y=null;function Q(S){var I;I===void 0&&(I=0),he(),I=U[I];for(var D=Array(Math.floor(S.length/3)),L=I[64]||"",W=0,V=0;W<S.length-2;W+=3){var q=S[W],te=S[W+1],fe=S[W+2],Te=I[q>>2];q=I[(3&q)<<4|te>>4],te=I[(15&te)<<2|fe>>6],fe=I[63&fe],D[V++]=Te+q+te+fe}switch(Te=0,fe=L,S.length-W){case 2:fe=I[(15&(Te=S[W+1]))<<2]||L;case 1:S=S[W],D[V]=I[S>>2]+I[(3&S)<<4|Te>>4]+fe+L}return D.join("")}function se(S){var I=S.length,D=3*I/4;D%3?D=Math.floor(D):"=.".indexOf(S[I-1])!=-1&&(D="=.".indexOf(S[I-2])!=-1?D-2:D-1);var L=new Uint8Array(D),W=0;return function(V,q){function te(Ge){for(;fe<V.length;){var bt=V.charAt(fe++),At=Y[bt];if(At!=null)return At;if(!/^[\s\xa0]*$/.test(bt))throw Error("Unknown base64 encoding at char: "+bt)}return Ge}he();for(var fe=0;;){var Te=te(-1),Ae=te(0),Le=te(64),ze=te(64);if(ze===64&&Te===-1)break;q(Te<<2|Ae>>4),Le!=64&&(q(Ae<<4&240|Le>>2),ze!=64&&q(Le<<6&192|ze))}}(S,function(V){L[W++]=V}),W!==D?L.subarray(0,W):L}function he(){if(!Y){Y={};for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),I=["+/=","+/","-_=","-_.","-_"],D=0;5>D;D++){var L=S.concat(I[D].split(""));U[D]=L;for(var W=0;W<L.length;W++){var V=L[W];Y[V]===void 0&&(Y[V]=W)}}}}var be,ue=typeof Uint8Array=="function";function Ne(S){return ue&&S!=null&&S instanceof Uint8Array}function _e(S){if(this.L=S,S!==null&&S.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ee=typeof Uint8Array.prototype.slice=="function",Me=0;function He(S,I){return Error("Invalid wire type: "+S+" (at position "+I+")")}function Ze(){return Error("Failed to read varint, encoding is invalid.")}function ye(S,I){I=(I=I===void 0?{}:I).v!==void 0&&I.v,this.h=null,this.g=this.i=this.j=0,this.v=I,S&&Re(this,S)}function Re(S,I){S.h=function(D,L){if(D.constructor===Uint8Array)return D;if(D.constructor===ArrayBuffer)return new Uint8Array(D);if(D.constructor===Array)return new Uint8Array(D);if(D.constructor===String)return se(D);if(D.constructor===_e)return!L&&(L=D.L)&&L.constructor===Uint8Array?L:(L=(L=D.L)==null||Ne(L)?L:typeof L=="string"?se(L):null,(D=D.L=L)?new Uint8Array(D):be||(be=new Uint8Array(0)));if(D instanceof Uint8Array)return new Uint8Array(D.buffer,D.byteOffset,D.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(I,S.v),S.j=0,S.i=S.h.length,S.g=S.j}function Oe(S){if(S.g>S.i)throw Error("Tried to read past the end of the data "+S.g+" > "+S.i)}function me(S){var I=S.h,D=I[S.g],L=127&D;if(128>D)return S.g+=1,Oe(S),L;if(L|=(127&(D=I[S.g+1]))<<7,128>D)return S.g+=2,Oe(S),L;if(L|=(127&(D=I[S.g+2]))<<14,128>D)return S.g+=3,Oe(S),L;if(L|=(127&(D=I[S.g+3]))<<21,128>D)return S.g+=4,Oe(S),L;if(D=I[S.g+4],S.g+=5,L|=(15&D)<<28,128>D)return Oe(S),L;if(128<=I[S.g++]&&128<=I[S.g++]&&128<=I[S.g++]&&128<=I[S.g++]&&128<=I[S.g++])throw Ze();return Oe(S),L}ye.prototype.reset=function(){this.g=this.j};var ft=[];function st(){this.g=[]}function ot(S,I){for(;127<I;)S.g.push(127&I|128),I>>>=7;S.g.push(I)}function lt(S){var I={},D=I.W!==void 0&&I.W;this.l={v:I.v!==void 0&&I.v},this.W=D,I=this.l,ft.length?(D=ft.pop(),I&&(D.v=I.v),S&&Re(D,S),S=D):S=new ye(S,I),this.g=S,this.j=this.g.g,this.h=this.i=-1}function Ct(S){var I=S.g;if(I.g==I.i)return!1;S.j=S.g.g;var D=me(S.g)>>>0;if(I=D>>>3,!(0<=(D&=7)&&5>=D))throw He(D,S.j);if(1>I)throw Error("Invalid field number: "+I+" (at position "+S.j+")");return S.i=I,S.h=D,!0}function St(S){switch(S.h){case 0:if(S.h!=0)St(S);else e:{for(var I=(S=S.g).g,D=I+10;I<D;)if(!(128&S.h[I++])){S.g=I,Oe(S);break e}throw Ze()}break;case 1:(S=S.g).g+=8,Oe(S);break;case 2:S.h!=2?St(S):(I=me(S.g)>>>0,(S=S.g).g+=I,Oe(S));break;case 5:(S=S.g).g+=4,Oe(S);break;case 3:for(I=S.i;;){if(!Ct(S))throw Error("Unmatched start-group tag: stream EOF");if(S.h==4){if(S.i!=I)throw Error("Unmatched end-group tag");break}St(S)}break;default:throw He(S.h,S.j)}}st.prototype.length=function(){return this.g.length},st.prototype.end=function(){var S=this.g;return this.g=[],S},lt.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var Pn=[];function K(){this.i=[],this.h=0,this.g=new st}function ae(S,I){I.length!==0&&(S.i.push(I),S.h+=I.length)}var ve=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function je(S,I){Object.isFrozen(S)||(ve?S[ve]|=I:S.N!==void 0?S.N|=I:Object.defineProperties(S,{N:{value:I,configurable:!0,writable:!0,enumerable:!1}}))}function Pe(S){var I;return(I=ve?S[ve]:S.N)==null?0:I}function De(S){return je(S,1),S}function We(S){return!!Array.isArray(S)&&!!(2&Pe(S))}function vt(S){if(!Array.isArray(S))throw Error("cannot mark non-array as immutable");je(S,2)}function dt(S){return S!==null&&typeof S=="object"&&!Array.isArray(S)&&S.constructor===Object}var wn=Object.freeze(De([]));function ti(S){if(We(S.m))throw Error("Cannot mutate an immutable Message")}var qr,hu=typeof Symbol<"u"&&Symbol.hasInstance!==void 0;function _i(S){return{value:S,configurable:!1,writable:!1,enumerable:!1}}function qn(S,I,D){return I===-1?null:I>=S.i?S.g?S.g[I]:void 0:D!==void 0&&D&&S.g&&(D=S.g[I])!=null?D:S.m[I+S.h]}function Sn(S,I,D,L){L=L!==void 0&&L,ti(S),I<S.i&&!L?S.m[I+S.h]=D:(S.g||(S.g=S.m[S.i+S.h]={}))[I]=D}function Mn(S,I,D,L){D=D===void 0||D;var W=qn(S,I,L=L!==void 0&&L);return W==null&&(W=wn),We(S.m)?D&&(vt(W),Object.freeze(W)):(W===wn||We(W))&&Sn(S,I,W=De(W.slice()),L),W}function hs(S,I,D){return(S=(S=qn(S,I))==null?S:+S)==null?D===void 0?0:D:S}function wo(S,I,D,L){S.j||(S.j={});var W=We(S.m),V=S.j[D];if(!V){L=Mn(S,D,!0,L!==void 0&&L),V=[],W=W||We(L);for(var q=0;q<L.length;q++)V[q]=new I(L[q]),W&&vt(V[q].m);W&&(vt(V),Object.freeze(V)),S.j[D]=V}return V}function pn(S,I,D,L,W){var V=V!==void 0&&V;return ti(S),V=wo(S,D,I,V),D=L||new D,S=Mn(S,I),W!=null?(V.splice(W,0,D),S.splice(W,0,D.m)):(V.push(D),S.push(D.m)),D}function Hc(S,I){return(S=qn(S,I))==null?0:S}function pm(S,I){return(S=qn(S,I))==null?"":S}function So(S){var I=U0;return Rt(S,I=I===void 0?Ld:I)}function Oi(S,I){if(S!=null){if(Array.isArray(S))S=Rt(S,I);else if(dt(S)){var D,L={};for(D in S)L[D]=Oi(S[D],I);S=L}else S=I(S);return S}}function Rt(S,I){for(var D=S.slice(),L=0;L<D.length;L++)D[L]=Oi(D[L],I);return Array.isArray(S)&&1&Pe(S)&&De(D),D}function U0(S){return S&&typeof S=="object"&&S.toJSON?S.toJSON():(S=function(I){switch(typeof I){case"number":return isFinite(I)?I:String(I);case"object":if(I&&!Array.isArray(I)){if(Ne(I))return Q(I);if(I instanceof _e){var D=I.L;return D=D==null||typeof D=="string"?D:ue&&D instanceof Uint8Array?Q(D):null,(I.L=D)||""}}}return I}(S),Array.isArray(S)?So(S):S)}function Ld(S){return Ne(S)?new Uint8Array(S):S}function qc(S,I,D){S||(S=qr),qr=null;var L=this.constructor.h;if(S||(S=L?[L]:[]),this.h=(L?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=S,S=(L=this.m.length)-1,L&&dt(L=this.m[S])?(this.i=S-this.h,this.g=L):I!==void 0&&-1<I?(this.i=Math.max(I,S+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,D)for(I=0;I<D.length;I++)if((S=D[I])<this.i)S+=this.h,(L=this.m[S])?Array.isArray(L)&&De(L):this.m[S]=wn;else{var W=(L=this.g||(this.g=this.m[this.i+this.h]={}))[S];W?Array.isArray(W)&&De(W):L[S]=wn}}function Kc(){qc.apply(this,arguments)}if(qc.prototype.toJSON=function(){return So(this.m)},qc.prototype.toString=function(){return this.m.toString()},h(Kc,qc),hu){var To={};Object.defineProperties(Kc,(To[Symbol.hasInstance]=_i(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),To))}function zd(S,I,D){if(D){var L,W={};for(L in D){var V=D[L],q=V.ha;q||(W.F=V.la||V.fa.P,V.aa?(W.U=W0(V.aa),q=function(te){return function(fe,Te,Ae){return te.F(fe,Te,Ae,te.U)}}(W)):V.ca?(W.T=Bd(V.X.g,V.ca),q=function(te){return function(fe,Te,Ae){return te.F(fe,Te,Ae,te.T)}}(W)):q=W.F,V.ha=q),q(I,S,V.X),W={F:W.F,U:W.U,T:W.T}}}(function(te,fe){if(fe=fe.ba){ae(te,te.g.end());for(var Te=0;Te<fe.length;Te++)ae(te,fe[Te])}})(I,S)}var Di=Symbol();function Co(S,I,D){return S[Di]||(S[Di]=function(L,W){return I(L,W,D)})}function V0(S){var I=S[Di];if(!I){var D=X0(S);I=function(L,W){return mm(L,W,D)},S[Di]=I}return I}function b4(S){var I=function(W){var V=W.aa;return V?V0(V):(V=W.ka)?Co(W.X.g,V,W.ca):void 0}(S),D=S.X,L=S.fa.O;return I?function(W,V){return L(W,V,D,I)}:function(W,V){return L(W,V,D)}}function Kr(S,I,D,L,W,V){var q=0;for((S=S()).length&&typeof S[0]!="number"&&(D(I,S[0]),q++);q<S.length;){D=S[q++];for(var te=q+1;te<S.length&&typeof S[te]!="number";)te++;var fe=S[q++];switch(te-=q){case 0:L(I,D,fe);break;case 1:L(I,D,fe,S[q++]);break;case 2:W(I,D,fe,S[q++],S[q++]);break;case 3:te=S[q++];var Te=S[q++],Ae=S[q++];Array.isArray(Ae)?W(I,D,fe,te,Te,Ae):V(I,D,fe,te,Te,Ae);break;case 4:V(I,D,fe,S[q++],S[q++],S[q++],S[q++]);break;default:throw Error("unexpected number of binary field arguments: "+te)}}return I}var Eo=Symbol();function W0(S){var I=S[Eo];if(!I){var D=K0(S);I=function(L,W){return ym(L,W,D)},S[Eo]=I}return I}function Bd(S,I){var D=S[Eo];return D||(D=function(L,W){return zd(L,W,I)},S[Eo]=D),D}var G0=Symbol();function pu(S,I){S.push(I)}function x4(S,I,D){S.push(I,D.P)}function H0(S,I,D,L,W){var V=W0(W),q=D.P;S.push(I,function(te,fe,Te){return q(te,fe,Te,L,V)})}function q0(S,I,D,L,W,V){var q=Bd(L,V),te=D.P;S.push(I,function(fe,Te,Ae){return te(fe,Te,Ae,L,q)})}function K0(S){var I=S[G0];return I||Kr(S,S[G0]=[],pu,x4,H0,q0)}var jd=Symbol();function cl(S,I){S[0]=I}function w4(S,I,D,L){var W=D.O;S[I]=L?function(V,q,te){return W(V,q,te,L)}:W}function S4(S,I,D,L,W,V){var q=D.O,te=V0(W);S[I]=function(fe,Te,Ae){return q(fe,Te,Ae,L,te,V)}}function Ud(S,I,D,L,W,V,q){var te=D.O,fe=Co(L,W,V);S[I]=function(Te,Ae,Le){return te(Te,Ae,Le,L,fe,q)}}function X0(S){var I=S[jd];return I||Kr(S,S[jd]={},cl,w4,S4,Ud)}function mm(S,I,D){for(;Ct(I)&&I.h!=4;){var L=I.i,W=D[L];if(!W){var V=D[0];V&&(V=V[L])&&(W=D[L]=b4(V))}if(!(W&&W(I,S,L)||(W=I,L=S,V=W.j,St(W),W.W))){var q=W.g.h;W=V===(W=W.g.g)?be||(be=new Uint8Array(0)):Ee?q.slice(V,W):new Uint8Array(q.subarray(V,W)),(V=L.ba)?V.push(W):L.ba=[W]}}return S}function gm(S,I,D){if(Pn.length){var L=Pn.pop();S&&(Re(L.g,S),L.i=-1,L.h=-1),S=L}else S=new lt(S);try{return mm(new I,S,X0(D))}finally{(I=S.g).h=null,I.j=0,I.i=0,I.g=0,I.v=!1,S.i=-1,S.h=-1,100>Pn.length&&Pn.push(S)}}function ym(S,I,D){for(var L=D.length,W=L%2==1,V=W?1:0;V<L;V+=2)(0,D[V+1])(I,S,D[V]);zd(S,I,W?D[0]:void 0)}function Xc(S,I){var D=new K;ym(S,D,K0(I)),ae(D,D.g.end()),S=new Uint8Array(D.h);for(var L=(I=D.i).length,W=0,V=0;V<L;V++){var q=I[V];S.set(q,W),W+=q.length}return D.i=[S],S}function mu(S,I){return{O:S,P:I}}var Ri=mu(function(S,I,D){if(S.h!==5)return!1;var L=(S=S.g).h[S.g],W=S.h[S.g+1],V=S.h[S.g+2],q=S.h[S.g+3];return S.g+=4,Oe(S),S=2*((W=(L<<0|W<<8|V<<16|q<<24)>>>0)>>31)+1,L=W>>>23&255,W&=8388607,Sn(I,D,L==255?W?NaN:1/0*S:L==0?S*Math.pow(2,-149)*W:S*Math.pow(2,L-150)*(W+Math.pow(2,23))),!0},function(S,I,D){if((I=qn(I,D))!=null){ot(S.g,8*D+5),S=S.g;var L=I;(L=(D=0>L?1:0)?-L:L)===0?0<1/L?Me=0:Me=2147483648:isNaN(L)?Me=2147483647:34028234663852886e22<L?Me=(D<<31|2139095040)>>>0:11754943508222875e-54>L?(L=Math.round(L/Math.pow(2,-149)),Me=(D<<31|L)>>>0):(I=Math.floor(Math.log(L)/Math.LN2),L*=Math.pow(2,-I),16777216<=(L=Math.round(8388608*L))&&++I,Me=(D<<31|I+127<<23|8388607&L)>>>0),D=Me,S.g.push(D>>>0&255),S.g.push(D>>>8&255),S.g.push(D>>>16&255),S.g.push(D>>>24&255)}}),T4=mu(function(S,I,D){if(S.h!==0)return!1;for(var L=S.g,W=128,V=0,q=S=0;4>q&&128<=W;q++)W=L.h[L.g++],Oe(L),V|=(127&W)<<7*q;if(128<=W&&(W=L.h[L.g++],Oe(L),V|=(127&W)<<28,S|=(127&W)>>4),128<=W)for(q=0;5>q&&128<=W;q++)W=L.h[L.g++],Oe(L),S|=(127&W)<<7*q+3;if(!(128>W))throw Ze();return L=V>>>0,(S=2147483648&(W=S>>>0))&&(W=~W>>>0,(L=1+~L>>>0)==0&&(W=W+1>>>0)),L=4294967296*W+(L>>>0),Sn(I,D,S?-L:L),!0},function(S,I,D){if((I=qn(I,D))!=null&&I!=null){ot(S.g,8*D),S=S.g;var L=I;for(D=0>L,I=(L=Math.abs(L))>>>0,L=Math.floor((L-I)/4294967296),L>>>=0,D&&(L=~L>>>0,4294967295<(I=1+(~I>>>0))&&(I=0,4294967295<++L&&(L=0))),D=Me=I,I=L;0<I||127<D;)S.g.push(127&D|128),D=(D>>>7|I<<25)>>>0,I>>>=7;S.g.push(D)}}),C4=mu(function(S,I,D){return S.h===0&&(Sn(I,D,me(S.g)),!0)},function(S,I,D){if((I=qn(I,D))!=null&&I!=null)if(ot(S.g,8*D),S=S.g,0<=(D=I))ot(S,D);else{for(I=0;9>I;I++)S.g.push(127&D|128),D>>=7;S.g.push(1)}}),Y0=mu(function(S,I,D){if(S.h!==2)return!1;var L,W=me(S.g)>>>0,V=(S=S.g).g;if(S.g+=W,Oe(S),S=S.h,H)(L=z)||(L=z=new TextDecoder("utf-8",{fatal:!0})),L=L.decode(S.subarray(V,V+W));else{W=V+W;for(var q,te,fe,Te=[],Ae=null;V<W;)128>(q=S[V++])?Te.push(q):224>q?V>=W?R():(te=S[V++],194>q||(192&te)!=128?(V--,R()):Te.push((31&q)<<6|63&te)):240>q?V>=W-1?R():(192&(te=S[V++]))!=128||q===224&&160>te||q===237&&160<=te||(192&(L=S[V++]))!=128?(V--,R()):Te.push((15&q)<<12|(63&te)<<6|63&L):244>=q?V>=W-2?R():(192&(te=S[V++]))!=128||te-144+(q<<28)>>30||(192&(L=S[V++]))!=128||(192&(fe=S[V++]))!=128?(V--,R()):(q=(7&q)<<18|(63&te)<<12|(63&L)<<6|63&fe,q-=65536,Te.push(55296+(q>>10&1023),56320+(1023&q))):R(),8192<=Te.length&&(Ae=F(Ae,Te),Te.length=0);L=F(Ae,Te)}return Sn(I,D,L),!0},function(S,I,D){if((I=qn(I,D))!=null){var L=!1;if(L=L!==void 0&&L,J){if(L&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(I))throw Error("Found an unpaired surrogate");I=(j||(j=new TextEncoder)).encode(I)}else{for(var W=0,V=new Uint8Array(3*I.length),q=0;q<I.length;q++){var te=I.charCodeAt(q);if(128>te)V[W++]=te;else{if(2048>te)V[W++]=te>>6|192;else{if(55296<=te&&57343>=te){if(56319>=te&&q<I.length){var fe=I.charCodeAt(++q);if(56320<=fe&&57343>=fe){te=1024*(te-55296)+fe-56320+65536,V[W++]=te>>18|240,V[W++]=te>>12&63|128,V[W++]=te>>6&63|128,V[W++]=63&te|128;continue}q--}if(L)throw Error("Found an unpaired surrogate");te=65533}V[W++]=te>>12|224,V[W++]=te>>6&63|128}V[W++]=63&te|128}}I=V.subarray(0,W)}ot(S.g,8*D+2),ot(S.g,I.length),ae(S,S.g.end()),ae(S,I)}}),vm=mu(function(S,I,D,L,W){if(S.h!==2)return!1;I=pn(I,D,L),D=S.g.i,L=me(S.g)>>>0;var V=S.g.g+L,q=V-D;if(0>=q&&(S.g.i=V,W(I,S),q=V-S.g.g),q)throw Error("Message parsing ended unexpectedly. Expected to read "+L+" bytes, instead read "+(L-q)+" bytes, either the data ended unexpectedly or the message misreported its own length");return S.g.g=V,S.g.i=D,!0},function(S,I,D,L,W){if((I=wo(I,L,D))!=null)for(L=0;L<I.length;L++){var V=S;ot(V.g,8*D+2);var q=V.g.end();ae(V,q),q.push(V.h),V=q,W(I[L],S),q=S;var te=V.pop();for(te=q.h+q.g.length()-te;127<te;)V.push(127&te|128),te>>>=7,q.h++;V.push(te),q.h++}});function ni(){Kc.apply(this,arguments)}if(h(ni,Kc),hu){var Z0={};Object.defineProperties(ni,(Z0[Symbol.hasInstance]=_i(Object[Symbol.hasInstance]),Z0))}function fl(S){ni.call(this,S)}function Q0(){return[1,C4,2,Ri,3,Y0,4,Y0]}function bm(S){ni.call(this,S,-1,k4)}function E4(){return[1,vm,fl,Q0]}h(fl,ni),h(bm,ni),bm.prototype.addClassification=function(S,I){return pn(this,1,fl,S,I),this};var k4=[1];function gu(S){ni.call(this,S)}function J0(){return[1,Ri,2,Ri,3,Ri,4,Ri,5,Ri]}function ev(S){ni.call(this,S,-1,A4)}function N4(){return[1,vm,gu,J0]}h(gu,ni),h(ev,ni);var A4=[1];function xm(S){ni.call(this,S)}function wm(){return[1,Ri,2,Ri,3,Ri,4,Ri,5,Ri,6,T4]}h(xm,ni);var Sm=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Tm=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Cm=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Em=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],km=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],tv=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],nv=[].concat(o(Sm),o(Tm),o(Cm),o(Em),o(km),o(tv));function T(S,I,D){if(D=S.createShader(D===0?S.VERTEX_SHADER:S.FRAGMENT_SHADER),S.shaderSource(D,I),S.compileShader(D),!S.getShaderParameter(D,S.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+S.getShaderInfoLog(D));return D}function $(S){return wo(S,fl,1).map(function(I){return{index:Hc(I,1),ga:hs(I,2),label:qn(I,3)!=null?pm(I,3):void 0,displayName:qn(I,4)!=null?pm(I,4):void 0}})}function _(S){return{x:hs(S,1),y:hs(S,2),z:hs(S,3),visibility:qn(S,4)!=null?hs(S,4):void 0}}function G(S,I){this.h=S,this.g=I,this.l=0}function oe(S,I,D){return function(L,W){var V=L.g;if(L.o===void 0){var q=T(V,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),te=T(V,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),fe=V.createProgram();if(V.attachShader(fe,q),V.attachShader(fe,te),V.linkProgram(fe),!V.getProgramParameter(fe,V.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+V.getProgramInfoLog(fe));q=L.o=fe,V.useProgram(q),te=V.getUniformLocation(q,"sampler0"),L.j={K:V.getAttribLocation(q,"aVertex"),J:V.getAttribLocation(q,"aTex"),ma:te},L.u=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,L.u),V.enableVertexAttribArray(L.j.K),V.vertexAttribPointer(L.j.K,2,V.FLOAT,!1,0,0),V.bufferData(V.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null),L.s=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,L.s),V.enableVertexAttribArray(L.j.J),V.vertexAttribPointer(L.j.J,2,V.FLOAT,!1,0,0),V.bufferData(V.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null),V.uniform1i(te,0)}q=L.j,V.useProgram(L.o),V.canvas.width=W.width,V.canvas.height=W.height,V.viewport(0,0,W.width,W.height),V.activeTexture(V.TEXTURE0),L.h.bindTexture2d(W.glName),V.enableVertexAttribArray(q.K),V.bindBuffer(V.ARRAY_BUFFER,L.u),V.vertexAttribPointer(q.K,2,V.FLOAT,!1,0,0),V.enableVertexAttribArray(q.J),V.bindBuffer(V.ARRAY_BUFFER,L.s),V.vertexAttribPointer(q.J,2,V.FLOAT,!1,0,0),V.bindFramebuffer(V.DRAW_FRAMEBUFFER?V.DRAW_FRAMEBUFFER:V.FRAMEBUFFER,null),V.clearColor(0,0,0,0),V.clear(V.COLOR_BUFFER_BIT),V.colorMask(!0,!0,!0,!0),V.drawArrays(V.TRIANGLE_FAN,0,4),V.disableVertexAttribArray(q.K),V.disableVertexAttribArray(q.J),V.bindBuffer(V.ARRAY_BUFFER,null),L.h.bindTexture2d(0)}(S,I),typeof S.g.canvas.transferToImageBitmap=="function"?Promise.resolve(S.g.canvas.transferToImageBitmap()):D?Promise.resolve(S.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(S.g.canvas):(S.i===void 0&&(S.i=document.createElement("canvas")),new Promise(function(L){S.i.height=S.g.canvas.height,S.i.width=S.g.canvas.width,S.i.getContext("2d",{}).drawImage(S.g.canvas,0,0,S.g.canvas.width,S.g.canvas.height),L(S.i)}))}function Se(S){this.g=S}var ce=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ce(S,I){return I+S}function Fe(S,I){window[S]=I}function Ye(S){if(this.g=S,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=S&&S.locateFile||Ce,typeof window=="object")var I=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if(typeof location>"u")throw Error("solutions can only be loaded on a web page or in a web worker");I=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=I,S.options)for(var D=(I=a(Object.keys(S.options))).next();!D.done;D=I.next()){D=D.value;var L=S.options[D].default;L!==void 0&&(this.j[D]=typeof L=="function"?L():L)}}function yt(S){var I,D,L,W,V,q,te,fe,Te,Ae,Le;return C(function(ze){switch(ze.g){case 1:return S.Z?(I=S.g.files===void 0?[]:typeof S.g.files=="function"?S.g.files(S.j):S.g.files,y(ze,C(function(Ge){switch(Ge.g){case 1:return Ge.o=2,y(Ge,WebAssembly.instantiate(ce),4);case 4:Ge.g=3,Ge.o=0;break;case 2:return Ge.o=0,Ge.j=null,Ge.return(!1);case 3:return Ge.return(!0)}}),2)):ze.return();case 2:if(D=ze.h,typeof window=="object")return Fe("createMediapipeSolutionsWasm",{locateFile:S.locateFile}),Fe("createMediapipeSolutionsPackedAssets",{locateFile:S.locateFile}),q=I.filter(function(Ge){return Ge.data!==void 0}),te=I.filter(function(Ge){return Ge.data===void 0}),fe=Promise.all(q.map(function(Ge){var bt=Wt(S,Ge.url);if(Ge.path!==void 0){var At=Ge.path;bt=bt.then(function(un){return S.overrideFile(At,un),Promise.resolve(un)})}return bt})),Te=Promise.all(te.map(function(Ge){return Ge.simd===void 0||Ge.simd&&D||!Ge.simd&&!D?function(bt){var At=document.createElement("script");return At.setAttribute("src",bt),At.setAttribute("crossorigin","anonymous"),new Promise(function(un){At.addEventListener("load",function(){un()},!1),At.addEventListener("error",function(){un()},!1),document.body.appendChild(At)})}(S.locateFile(Ge.url,S.$)):Promise.resolve()})).then(function(){var Ge,bt,At;return C(function(un){if(un.g==1)return Ge=window.createMediapipeSolutionsWasm,bt=window.createMediapipeSolutionsPackedAssets,At=S,y(un,Ge(bt),2);At.h=un.h,un.g=0})}),Ae=C(function(Ge){return S.g.graph&&S.g.graph.url?Ge=y(Ge,Wt(S,S.g.graph.url),0):(Ge.g=0,Ge=void 0),Ge}),y(ze,Promise.all([Te,fe,Ae]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return L=I.filter(function(Ge){return Ge.simd===void 0||Ge.simd&&D||!Ge.simd&&!D}).map(function(Ge){return S.locateFile(Ge.url,S.$)}),importScripts.apply(null,o(L)),W=S,y(ze,createMediapipeSolutionsWasm(Module),6);case 6:W.h=ze.h,S.l=new OffscreenCanvas(1,1),S.h.canvas=S.l,V=S.h.GL.createContext(S.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),S.h.GL.makeContextCurrent(V),ze.g=4;break;case 7:if(S.l=document.createElement("canvas"),!(Le=S.l.getContext("webgl2",{}))&&!(Le=S.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),ze.return();S.G=Le,S.h.canvas=S.l,S.h.createContext(S.l,!0,!0,{});case 4:S.i=new S.h.SolutionWasm,S.Z=!1,ze.g=0}})}function Wt(S,I){var D,L;return C(function(W){return I in S.H?W.return(S.H[I]):(D=S.locateFile(I,""),L=fetch(D).then(function(V){return V.arrayBuffer()}),S.H[I]=L,W.return(L))})}function $t(S,I,D){var L,W,V,q,te,fe,Te,Ae,Le,ze,Ge,bt,At,un;return C(function(Tn){switch(Tn.g){case 1:if(!D)return Tn.return(I);for(L={},W=0,V=a(Object.keys(D)),q=V.next();!q.done;q=V.next())te=q.value,typeof(fe=D[te])!="string"&&fe.type==="texture"&&I[fe.stream]!==void 0&&++W;1<W&&(S.I=!1),Te=a(Object.keys(D)),q=Te.next();case 2:if(q.done){Tn.g=4;break}if(Ae=q.value,typeof(Le=D[Ae])=="string")return At=L,un=Ae,y(Tn,function(Yc,HR,Vd){var rv;return C(function($4){return typeof Vd=="number"||Vd instanceof Uint8Array||Vd instanceof Yc.h.Uint8BlobList?$4.return(Vd):Vd instanceof Yc.h.Texture2dDataOut?((rv=Yc.u[HR])||(rv=new G(Yc.h,Yc.G),Yc.u[HR]=rv),$4.return(oe(rv,Vd,Yc.I))):$4.return(void 0)})}(S,Ae,I[Le]),14);if(ze=I[Le.stream],Le.type==="detection_list"){if(ze){for(var zs=ze.getRectList(),oa=ze.getLandmarksList(),ri=ze.getClassificationsList(),Zt=[],ps=0;ps<zs.size();++ps){var yu=gm(zs.get(ps),xm,wm);yu={boundingBox:{xCenter:hs(yu,1),yCenter:hs(yu,2),height:hs(yu,3),width:hs(yu,4),rotation:hs(yu,5,0),rectId:Hc(yu,6)},landmarks:wo(gm(oa.get(ps),ev,N4),gu,1).map(_),V:$(gm(ri.get(ps),bm,E4))},Zt.push(yu)}zs=Zt}else zs=[];L[Ae]=zs,Tn.g=7;break}if(Le.type==="proto_list"){if(ze){for(zs=Array(ze.size()),oa=0;oa<ze.size();oa++)zs[oa]=ze.get(oa);ze.delete()}else zs=[];L[Ae]=zs,Tn.g=7;break}if(ze===void 0){Tn.g=3;break}if(Le.type==="float_list"){L[Ae]=ze,Tn.g=7;break}if(Le.type==="proto"){L[Ae]=ze,Tn.g=7;break}if(Le.type!=="texture")throw Error("Unknown output config type: '"+Le.type+"'");return(Ge=S.u[Ae])||(Ge=new G(S.h,S.G),S.u[Ae]=Ge),y(Tn,oe(Ge,ze,S.I),13);case 13:bt=Tn.h,L[Ae]=bt;case 7:Le.transform&&L[Ae]&&(L[Ae]=Le.transform(L[Ae])),Tn.g=3;break;case 14:At[un]=Tn.h;case 3:q=Te.next(),Tn.g=2;break;case 4:return Tn.return(L)}})}function xt(S,I){for(var D=I.name||"$",L=[].concat(o(I.wants)),W=new S.h.StringList,V=a(I.wants),q=V.next();!q.done;q=V.next())W.push_back(q.value);V=S.h.PacketListener.implement({onResults:function(te){for(var fe={},Te=0;Te<I.wants.length;++Te)fe[L[Te]]=te.get(Te);var Ae=S.listeners[D];Ae&&(S.D=$t(S,fe,I.outs).then(function(Le){Le=Ae(Le);for(var ze=0;ze<I.wants.length;++ze){var Ge=fe[L[ze]];typeof Ge=="object"&&Ge.hasOwnProperty&&Ge.hasOwnProperty("delete")&&Ge.delete()}Le&&(S.D=Le)}))}}),S.i.attachMultiListener(W,V),W.delete()}function rt(S){var I=this;S=S||{};var D={url:"face_detection_short.binarypb"},L={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Ye({locateFile:S.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:D,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window=="object"&&window.navigator!==void 0&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(W){var V,q,te,fe,Te;return C(function(Ae){switch(Ae.g){case 1:V=a(W==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),q=V.next();case 2:if(q.done){Ae.g=4;break}return te=q.value,fe="third_party/mediapipe/modules/face_detection/"+te,y(Ae,Wt(I.g,te),5);case 5:Te=Ae.h,I.g.overrideFile(fe,Te),q=V.next(),Ae.g=2;break;case 4:return D.url=W==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",L.graphOptionXref.calculatorName=W==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Ae.return(!0)}})}},minDetectionConfidence:L}})}(t=Ye.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var S=this;return C(function(I){S.i&&(S.i.reset(),S.o={},S.u={}),I.g=0})},t.setOptions=function(S,I){var D=this;if(I=I||this.g.options){for(var L=[],W=[],V={},q=a(Object.keys(S)),te=q.next();!te.done;V={R:V.R,S:V.S},te=q.next()){var fe=te.value;fe in this.j&&this.j[fe]===S[fe]||(this.j[fe]=S[fe],(te=I[fe])!==void 0&&(te.onChange&&(V.R=te.onChange,V.S=S[fe],L.push(function(Te){return function(){return C(function(Ae){if(Ae.g==1)return y(Ae,Te.R(Te.S),2);Ae.h===!0&&(D.s=!0),Ae.g=0})}}(V))),te.graphOptionXref&&(fe={valueNumber:te.type===1?S[fe]:0,valueBoolean:te.type===0&&S[fe],valueString:te.type===2?S[fe]:""},te=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),te.graphOptionXref),fe),W.push(te))))}L.length===0&&W.length===0||(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(W),this.A=(this.A===void 0?[]:this.A).concat(L))}},t.initialize=function(){var S=this;return C(function(I){return I.g==1?y(I,yt(S),2):I.g!=3?y(I,function(D){var L,W,V,q,te,fe,Te,Ae;return C(function(Le){if(Le.g==1)return D.g.graph&&D.g.graph.url&&D.Y===D.g.graph.url?Le.return():(D.s=!0,D.g.graph&&D.g.graph.url?(D.Y=D.g.graph.url,y(Le,Wt(D,D.g.graph.url),3)):void(Le.g=2));for(Le.g!=2&&(L=Le.h,D.i.loadGraph(L)),W=a(Object.keys(D.C)),V=W.next();!V.done;V=W.next())q=V.value,D.i.overrideFile(q,D.C[q]);if(D.C={},D.g.listeners)for(te=a(D.g.listeners),fe=te.next();!fe.done;fe=te.next())Te=fe.value,xt(D,Te);Ae=D.j,D.j={},D.setOptions(Ae),Le.g=0})}(S),3):y(I,function(D){var L,W,V,q,te,fe;return C(function(Te){switch(Te.g){case 1:if(!D.s)return Te.return();if(!D.A){Te.g=2;break}L=a(D.A),W=L.next();case 3:if(W.done){Te.g=5;break}return y(Te,(0,W.value)(),4);case 4:W=L.next(),Te.g=3;break;case 5:D.A=void 0;case 2:if(D.B){for(V=new D.h.GraphOptionChangeRequestList,q=a(D.B),te=q.next();!te.done;te=q.next())fe=te.value,V.push_back(fe);D.i.changeOptions(V),V.delete(),D.B=void 0}D.s=!1,Te.g=0}})}(S),0)})},t.overrideFile=function(S,I){this.i?this.i.overrideFile(S,I):this.C[S]=I},t.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},t.send=function(S,I){var D,L,W,V,q,te,fe,Te,Ae,Le=this;return C(function(ze){switch(ze.g){case 1:return Le.g.inputs?(D=1e3*(I??performance.now()),y(ze,Le.D,2)):ze.return();case 2:return y(ze,Le.initialize(),3);case 3:for(L=new Le.h.PacketDataList,W=a(Object.keys(S)),V=W.next();!V.done;V=W.next())if(q=V.value,te=Le.g.inputs[q]){e:{var Ge=S[q];switch(te.type){case"video":var bt=Le.o[te.stream];if(bt||(bt=new G(Le.h,Le.G),Le.o[te.stream]=bt),bt.l===0&&(bt.l=bt.h.createTexture()),typeof HTMLVideoElement<"u"&&Ge instanceof HTMLVideoElement)var At=Ge.videoWidth,un=Ge.videoHeight;else typeof HTMLImageElement<"u"&&Ge instanceof HTMLImageElement?(At=Ge.naturalWidth,un=Ge.naturalHeight):(At=Ge.width,un=Ge.height);un={glName:bt.l,width:At,height:un},(At=bt.g).canvas.width=un.width,At.canvas.height=un.height,At.activeTexture(At.TEXTURE0),bt.h.bindTexture2d(bt.l),At.texImage2D(At.TEXTURE_2D,0,At.RGBA,At.RGBA,At.UNSIGNED_BYTE,Ge),bt.h.bindTexture2d(0),bt=un;break e;case"detections":for((bt=Le.o[te.stream])||(bt=new Se(Le.h),Le.o[te.stream]=bt),bt.data||(bt.data=new bt.g.DetectionListData),bt.data.reset(Ge.length),un=0;un<Ge.length;++un){At=Ge[un];var Tn=bt.data,zs=Tn.setBoundingBox,oa=un,ri=At.boundingBox,Zt=new xm;if(Sn(Zt,1,ri.xCenter),Sn(Zt,2,ri.yCenter),Sn(Zt,3,ri.height),Sn(Zt,4,ri.width),Sn(Zt,5,ri.rotation),Sn(Zt,6,ri.rectId),ri=Xc(Zt,wm),zs.call(Tn,oa,ri),At.landmarks)for(Tn=0;Tn<At.landmarks.length;++Tn){var ps=!!(Zt=At.landmarks[Tn]).visibility;oa=(zs=bt.data).addNormalizedLandmark,ri=un,Zt=Object.assign(Object.assign({},Zt),{visibility:ps?Zt.visibility:0}),Sn(ps=new gu,1,Zt.x),Sn(ps,2,Zt.y),Sn(ps,3,Zt.z),Zt.visibility&&Sn(ps,4,Zt.visibility),Zt=Xc(ps,J0),oa.call(zs,ri,Zt)}if(At.V)for(Tn=0;Tn<At.V.length;++Tn)oa=(zs=bt.data).addClassification,ri=un,Zt=At.V[Tn],Sn(ps=new fl,2,Zt.ga),Zt.index&&Sn(ps,1,Zt.index),Zt.label&&Sn(ps,3,Zt.label),Zt.displayName&&Sn(ps,4,Zt.displayName),Zt=Xc(ps,Q0),oa.call(zs,ri,Zt)}bt=bt.data;break e;default:bt={}}}switch(fe=bt,Te=te.stream,te.type){case"video":L.pushTexture2d(Object.assign(Object.assign({},fe),{stream:Te,timestamp:D}));break;case"detections":(Ae=fe).stream=Te,Ae.timestamp=D,L.pushDetectionList(Ae);break;default:throw Error("Unknown input config type: '"+te.type+"'")}}return Le.i.send(L),y(ze,Le.D,4);case 4:L.delete(),ze.g=0}})},t.onResults=function(S,I){this.listeners[I||"$"]=S},O("Solution",Ye),O("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=rt.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(S){this.g.onResults(S)},t.initialize=function(){var S=this;return C(function(I){return y(I,S.g.initialize(),0)})},t.reset=function(){this.g.reset()},t.send=function(S){var I=this;return C(function(D){return y(D,I.g.send(S),0)})},t.setOptions=function(S){this.g.setOptions(S)},O("FaceDetection",rt),O("FACEDETECTION_LIPS",Sm),O("FACEDETECTION_LEFT_EYE",Tm),O("FACEDETECTION_LEFT_EYEBROW",Cm),O("FACEDETECTION_RIGHT_EYE",Em),O("FACEDETECTION_RIGHT_EYEBROW",km),O("FACEDETECTION_FACE_OVAL",tv),O("FACEDETECTION_CONTOURS",nv),O("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),O("VERSION","0.4.1646425229")}).call(xC);var Tc=function(){return Tc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Tc.apply(this,arguments)};function Jl(t,e,n,r){return new(n||(n=Promise))(function(s,i){function a(u){try{l(r.next(u))}catch(c){i(c)}}function o(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){var c;u.done?s(u.value):(c=u.value,c instanceof n?c:new n(function(f){f(c)})).then(a,o)}l((r=r.apply(t,[])).next())})}function eu(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&c[0]?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){a.label=c[1];break}if(c[0]===6&&a.label<s[1]){a.label=s[1],s=c;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(c);break}s[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(f){c=[6,f],r=0}finally{n=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Zee=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],wC={modelType:"short",runtime:"mediapipe",maxFaces:1},lZe=function(){function t(e){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new oZe.FaceDetection({locateFile:function(r,s){if(e.solutionPath){var i=e.solutionPath.replace(/\/+$/,"");return"".concat(i,"/").concat(r)}return"".concat(s,"/").concat(r)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.detections!==null)for(var s=0,i=r.detections;s<i.length;s++){var a=i[s];n.faces.push(n.normalizedToAbsolute(a.landmarks,{xMin:l=(o=a.boundingBox).xCenter-o.width/2,xMax:l+o.width,yMin:u=o.yCenter-o.height/2,yMax:u+o.height,width:o.width,height:o.height}))}var o,l,u})}return t.prototype.normalizedToAbsolute=function(e,n){var r=this;return{keypoints:e.map(function(s,i){return{x:s.x*r.width,y:s.y*r.height,name:Zee[i]}}),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},t.prototype.estimateFaces=function(e,n){return Jl(this,void 0,void 0,function(){var r,s;return eu(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Jt?(s=ImageData.bind,[4,qX(e)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.faceDetectorSolution.send({image:e})];case 4:return i.sent(),[2,this.faces]}})})},t.prototype.dispose=function(){this.faceDetectorSolution.close()},t.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},t}();function uZe(t){return Jl(this,void 0,void 0,function(){var e,n;return eu(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return Tc({},wC);var i=Tc({},s);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=wC.modelType),i.maxFaces==null&&(i.maxFaces=wC.maxFaces),i}(t),[4,(n=new lZe(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function Qee(t){return t instanceof Jt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function Jee(t){return t instanceof Jt?t:KX(t)}function SC(t,e){P(t.width!==0,function(){return"".concat(e," width cannot be 0.")}),P(t.height!==0,function(){return"".concat(e," height cannot be 0.")})}function cZe(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.borderMode,a=e.outputTensorFloatRange,o=Qee(t),l=function(d,h){return{xCenter:.5*d.width,yCenter:.5*d.height,width:d.width,height:d.height,rotation:0}}(o),u=function(d,h,p){if(p===void 0&&(p=!1),!p)return{top:0,left:0,right:0,bottom:0};var m=h.height,g=h.width;SC(h,"targetSize"),SC(d,"roi");var y,v,b=m/g,x=d.height/d.width,w=0,C=0;return b>x?(y=d.width,v=d.width*b,C=(1-x/b)/2):(y=d.height/b,v=d.height,w=(1-b/x)/2),d.width=y,d.height=v,{top:C,left:w,right:w,bottom:C}}(l,r,s),c=function(d,h,p,m){var g=d.width,y=d.height,v=1,b=Math.cos(d.rotation),x=Math.sin(d.rotation),w=d.xCenter,C=d.yCenter,E=1/h,A=1/p,O=new Array(16);return O[0]=g*b*v*E,O[1]=-y*x*E,O[2]=0,O[3]=(-.5*g*b*v+.5*y*x+w)*E,O[4]=g*x*v*A,O[5]=y*b*A,O[6]=0,O[7]=(-.5*y*b-.5*g*x*v+C)*A,O[8]=0,O[9]=0,O[10]=g*E,O[11]=0,O[12]=0,O[13]=0,O[14]=0,O[15]=1,function(R){if(R.length!==16)throw new Error("Array length must be 16 but got ".concat(R.length));return[[R[0],R[1],R[2],R[3]],[R[4],R[5],R[6],R[7]],[R[8],R[9],R[10],R[11]],[R[12],R[13],R[14],R[15]]]}(O)}(l,o.width,o.height),f=ie(function(){var d=Jee(t),h=nc(function(g,y,v){return SC(v,"inputResolution"),[1/v.width*g[0][0]*y.width,1/v.height*g[0][1]*y.width,g[0][3]*y.width,1/v.width*g[1][0]*y.height,1/v.height*g[1][1]*y.height,g[1][3]*y.height,0,0]}(c,o,r),[1,8]),p=i==="zero"?"constant":"nearest",m=Ys.transform(Sr(Be(d,"float32")),h,"bilinear",p,0,[r.height,r.width]);return a!=null?function(g,y){var v=function(b,x,w,C){var E=(C-w)/255;return{scale:E,offset:w-0*E}}(0,0,y[0],y[1]);return ie(function(){return ke(Z(g,v.scale),v.offset)})}(m,a):m});return{imageTensor:f,padding:u,transformationMatrix:c}}function p7(t){t.reduceBoxesInLowestLayer==null&&(t.reduceBoxesInLowestLayer=!1),t.interpolatedScaleAspectRatio==null&&(t.interpolatedScaleAspectRatio=1),t.fixedAnchorSize==null&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var r=[],s=[],i=[],a=[],o=n;o<t.strides.length&&t.strides[o]===t.strides[n];){var l=m7(t.minScale,t.maxScale,o,t.strides.length);if(o===0&&t.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),a.push(.1),a.push(l),a.push(l);else{for(var u=0;u<t.aspectRatios.length;++u)i.push(t.aspectRatios[u]),a.push(l);if(t.interpolatedScaleAspectRatio>0){var c=o===t.strides.length-1?1:m7(t.minScale,t.maxScale,o+1,t.strides.length);a.push(Math.sqrt(l*c)),i.push(t.interpolatedScaleAspectRatio)}}o++}for(var f=0;f<i.length;++f){var d=Math.sqrt(i[f]);r.push(a[f]/d),s.push(a[f]*d)}var h=0,p=0;if(t.featureMapHeight.length>0)h=t.featureMapHeight[n],p=t.featureMapWidth[n];else{var m=t.strides[n];h=Math.ceil(t.inputSizeHeight/m),p=Math.ceil(t.inputSizeWidth/m)}for(var g=0;g<h;++g)for(var y=0;y<p;++y)for(var v=0;v<r.length;++v){var b={xCenter:(y+t.anchorOffsetX)/p,yCenter:(g+t.anchorOffsetY)/h,width:0,height:0};t.fixedAnchorSize?(b.width=1,b.height=1):(b.width=s[v],b.height=r[v]),e.push(b)}n=o}return e}function m7(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function g7(t,e){var n=e[0],r=e[1];return[n*t[0]+r*t[1]+t[3],n*t[4]+r*t[5]+t[7]]}function fZe(t,e,n,r){return Jl(this,void 0,void 0,function(){var s,i,a,o,l;return eu(this,function(u){switch(u.label){case 0:return t.sort(function(c,f){return Math.max.apply(Math,f.score)-Math.max.apply(Math,c.score)}),s=nc(t.map(function(c){return[c.locationData.relativeBoundingBox.yMin,c.locationData.relativeBoundingBox.xMin,c.locationData.relativeBoundingBox.yMax,c.locationData.relativeBoundingBox.xMax]})),i=dr(t.map(function(c){return c.score[0]})),[4,Ys.nonMaxSuppressionAsync(s,i,e,n)];case 1:return[4,(a=u.sent()).array()];case 2:return o=u.sent(),l=t.filter(function(c,f){return o.indexOf(f)>-1}),mt([s,i,a]),[2,l]}})})}function dZe(t,e,n){return Jl(this,void 0,void 0,function(){var r,s,i,a,o;return eu(this,function(l){switch(l.label){case 0:return r=t[0],s=t[1],i=function(u,c,f){return ie(function(){var d,h,p,m;f.reverseOutputOrder?(h=Xn(ht(u,[0,f.boxCoordOffset+0],[-1,1])),d=Xn(ht(u,[0,f.boxCoordOffset+1],[-1,1])),m=Xn(ht(u,[0,f.boxCoordOffset+2],[-1,1])),p=Xn(ht(u,[0,f.boxCoordOffset+3],[-1,1]))):(d=Xn(ht(u,[0,f.boxCoordOffset+0],[-1,1])),h=Xn(ht(u,[0,f.boxCoordOffset+1],[-1,1])),p=Xn(ht(u,[0,f.boxCoordOffset+2],[-1,1])),m=Xn(ht(u,[0,f.boxCoordOffset+3],[-1,1]))),h=ke(Z(Ke(h,f.xScale),c.w),c.x),d=ke(Z(Ke(d,f.yScale),c.h),c.y),f.applyExponentialOnBoxSize?(p=Z(Ps(Ke(p,f.hScale)),c.h),m=Z(Ps(Ke(m,f.wScale)),c.w)):(p=Z(Ke(p,f.hScale),c.h),m=Z(Ke(m,f.wScale),c.h));var g=Xe(d,Ke(p,2)),y=Xe(h,Ke(m,2)),v=ke(d,Ke(p,2)),b=ke(h,Ke(m,2)),x=Zn([ne(g,[f.numBoxes,1]),ne(y,[f.numBoxes,1]),ne(v,[f.numBoxes,1]),ne(b,[f.numBoxes,1])],1);if(f.numKeypoints)for(var w=0;w<f.numKeypoints;++w){var C=f.keypointCoordOffset+w*f.numValuesPerKeypoint,E=void 0,A=void 0;f.reverseOutputOrder?(E=Xn(ht(u,[0,C],[-1,1])),A=Xn(ht(u,[0,C+1],[-1,1]))):(A=Xn(ht(u,[0,C],[-1,1])),E=Xn(ht(u,[0,C+1],[-1,1])));var O=ke(Z(Ke(E,f.xScale),c.w),c.x),R=ke(Z(Ke(A,f.yScale),c.h),c.y);x=Zn([x,ne(O,[f.numBoxes,1]),ne(R,[f.numBoxes,1])],1)}return x})}(s,e,n),a=ie(function(){var u=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(u=Qs(r,-n.scoreClippingThresh,n.scoreClippingThresh)),u=ao(u)):u}),[4,hZe(i,a,n)];case 1:return o=l.sent(),mt([i,a]),[2,o]}})})}function hZe(t,e,n){return Jl(this,void 0,void 0,function(){var r,s,i,a,o,l,u,c,f,d,h,p;return eu(this,function(m){switch(m.label){case 0:return r=[],[4,t.data()];case 1:return s=m.sent(),[4,e.data()];case 2:for(i=m.sent(),a=0;a<n.numBoxes;++a)if(!(n.minScoreThresh!=null&&i[a]<n.minScoreThresh||(o=a*n.numCoords,l=pZe(s[o+0],s[o+1],s[o+2],s[o+3],i[a],n.flipVertically,a),(u=l.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((c=l.locationData).relativeKeypoints=[],f=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<f;d+=n.numValuesPerKeypoint)h=o+n.keypointCoordOffset+d,p={x:s[h+0],y:n.flipVertically?1-s[h+1]:s[h+1]},c.relativeKeypoints.push(p);r.push(l)}return[2,r]}})})}function pZe(t,e,n,r,s,i,a){return{score:[s],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:i?1-n:t,xMax:r,yMax:i?1-t:n,width:r-e,height:n-t}}}}var Gx,mZe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},gZe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},TC={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},yZe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},vZe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},bZe={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},xZe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},wZe=function(){function t(e,n,r){this.detectorModel=n,this.maxFaces=r,e==="full"?(this.imageToTensorConfig=xZe,this.tensorsToDetectionConfig=vZe,this.anchors=p7(gZe)):(this.imageToTensorConfig=bZe,this.tensorsToDetectionConfig=yZe,this.anchors=p7(mZe));var s=dr(this.anchors.map(function(l){return l.width})),i=dr(this.anchors.map(function(l){return l.height})),a=dr(this.anchors.map(function(l){return l.xCenter})),o=dr(this.anchors.map(function(l){return l.yCenter}));this.anchorTensor={x:a,y:o,w:s,h:i}}return t.prototype.dispose=function(){this.detectorModel.dispose(),mt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){},t.prototype.detectFaces=function(e,n){return n===void 0&&(n=!1),Jl(this,void 0,void 0,function(){var r,s,i,a,o,l,u,c,f,d,h;return eu(this,function(p){switch(p.label){case 0:return e==null?(this.reset(),[2,[]]):(r=ie(function(){var m=Be(Jee(e),"float32");return n&&(m=Xn(Ys.flipLeftRight(Sr(m,0)),[0])),m}),s=cZe(r,this.imageToTensorConfig),i=s.imageTensor,a=s.transformationMatrix,o=this.detectorModel.execute(i,"Identity:0"),l=function(m){return ie(function(){var g=function(b){return ie(function(){return[ht(b,[0,0,0],[1,-1,1]),ht(b,[0,0,1],[1,-1,-1])]})}(m),y=g[0],v=g[1];return{boxes:Xn(v),logits:Xn(y)}})}(o),u=l.boxes,[4,dZe([c=l.logits,u],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(f=p.sent()).length===0?(mt([r,i,o,c,u]),[2,f]):[4,fZe(f,this.maxFaces,.3)];case 2:return d=p.sent(),h=function(m,g){m===void 0&&(m=[]);var y,v=(y=g,[].concat.apply([],y));return m.forEach(function(b){var x=b.locationData;x.relativeKeypoints.forEach(function(R){var F=g7(v,[R.x,R.y]),z=F[0],j=F[1];R.x=z,R.y=j});var w=x.relativeBoundingBox,C=Number.MAX_VALUE,E=Number.MAX_VALUE,A=Number.MIN_VALUE,O=Number.MIN_VALUE;[[w.xMin,w.yMin],[w.xMin+w.width,w.yMin],[w.xMin+w.width,w.yMin+w.height],[w.xMin,w.yMin+w.height]].forEach(function(R){var F=g7(v,R),z=F[0],j=F[1];C=Math.min(C,z),A=Math.max(A,z),E=Math.min(E,j),O=Math.max(O,j)}),x.relativeBoundingBox={xMin:C,xMax:A,yMin:E,yMax:O,width:A-C,height:O-E}}),m}(d,a),mt([r,i,o,c,u]),[2,h]}})})},t.prototype.estimateFaces=function(e,n){return Jl(this,void 0,void 0,function(){var r,s;return eu(this,function(i){return r=Qee(e),s=!!n&&n.flipHorizontal,[2,this.detectFaces(e,s).then(function(a){return a.map(function(o){for(var l=o.locationData.relativeKeypoints.map(function(p,m){return Tc(Tc({},p),{x:p.x*r.width,y:p.y*r.height,name:Zee[m]})}),u=o.locationData.relativeBoundingBox,c=0,f=["width","xMax","xMin"];c<f.length;c++)u[f[c]]*=r.width;for(var d=0,h=["height","yMax","yMin"];d<h.length;d++)u[h[d]]*=r.height;return{keypoints:l,box:u}})})]})})},t}();function SZe(t){return Jl(this,void 0,void 0,function(){var e,n,r;return eu(this,function(s){switch(s.label){case 0:return e=function(i){if(i==null)return Tc({},TC);var a=Tc({},i);return a.modelType==null&&(a.modelType=TC.modelType),a.maxFaces==null&&(a.maxFaces=TC.maxFaces),a.detectorModelUrl==null&&(a.modelType==="full"?a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),a}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,KQ(e.detectorModelUrl,{fromTFHub:n})];case 1:return r=s.sent(),[2,new wZe(e.modelType,r,e.maxFaces)]}})})}function TZe(t,e){return Jl(this,void 0,void 0,function(){var n,r;return eu(this,function(s){if(t===Gx.MediaPipeFaceDetector){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,SZe(n)];if(n.runtime==="mediapipe")return[2,uZe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(t," is not a supported model name."))})})}function CC(t){return t.width*t.height}function y7(t){var e=t.xCenter-t.width/2,n=e+t.width,r=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:r,yMax:r+t.height,width:t.width,height:t.height}}function CZe(t,e){var n=y7(t),r=y7(e);if(!function(a,o){return!(a.xMax<o.xMin||o.xMax<a.xMin||a.yMax<o.yMin||o.yMax<a.yMin)}(n,r))return 0;var s=CC(function(a,o){var l=Math.max(a.xMin,o.xMin),u=Math.min(a.xMax,o.xMax),c=Math.max(a.yMin,o.yMin),f=Math.min(a.yMax,o.yMax);return{xMin:l,xMax:u,yMin:c,yMax:f,width:Math.max(u-l,0),height:Math.max(f-c,0)}}(n,r)),i=CC(n)+CC(r)-s;return i>0?s/i:0}function EZe(t,e,n,r){var s=t.width,i=t.height,a=1,o=Math.cos(t.rotation),l=Math.sin(t.rotation),u=t.xCenter,c=t.yCenter,f=1/e,d=1/n,h=new Array(16);return h[0]=s*o*a*f,h[1]=-i*l*f,h[2]=0,h[3]=(-.5*s*o*a+.5*i*l+u)*f,h[4]=s*l*a*d,h[5]=i*o*d,h[6]=0,h[7]=(-.5*i*o-.5*s*l*a+c)*d,h[8]=0,h[9]=0,h[10]=s*f,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,function(p){if(p.length!==16)throw new Error("Array length must be 16 but got "+p.length);return[[p[0],p[1],p[2],p[3]],[p[4],p[5],p[6],p[7]],[p[8],p[9],p[10],p[11]],[p[12],p[13],p[14],p[15]]]}(h)}function ete(t){return t instanceof Jt?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function tte(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function nte(t){return t instanceof Jt?t:KX(t)}function EC(t,e){P(t.width!==0,function(){return e+" width cannot be 0."}),P(t.height!==0,function(){return e+" height cannot be 0."})}function kZe(t,e){var n=function(r,s,i,a){var o=s-r,l=a-i,u=l/o;return{scale:u,offset:i-r*u}}(0,255,e[0],e[1]);return ie(function(){return ke(Z(t,n.scale),n.offset)})}function NZe(t,e,n){var r=e.outputTensorSize,s=e.keepAspectRatio,i=e.outputTensorFloatRange,a=ete(t),o=function(f,d){return d?{xCenter:d.xCenter*f.width,yCenter:d.yCenter*f.height,width:d.width*f.width,height:d.height*f.height,rotation:d.rotation}:{xCenter:.5*f.width,yCenter:.5*f.height,width:f.width,height:f.height,rotation:0}}(a,n),l=function(f,d,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var p=d.height,m=d.width;EC(d,"targetSize"),EC(f,"roi");var g,y,v=p/m,b=f.height/f.width,x=0,w=0;return v>b?(g=f.width,y=f.width*v,w=(1-b/v)/2):(g=f.height/v,y=f.height,x=(1-v/b)/2),f.width=g,f.height=y,{top:w,left:x,right:x,bottom:w}}(o,r,s),u=EZe(o,a.width,a.height),c=ie(function(){var f=nte(t),d=nc(function(m,g,y){return EC(y,"inputResolution"),[1/y.width*m[0][0]*g.width,1/y.height*m[0][1]*g.width,m[0][3]*g.width,1/y.width*m[1][0]*g.height,1/y.height*m[1][1]*g.height,m[1][3]*g.height,0,0]}(u,a,r),[1,8]),h="nearest",p=Ys.transform(Sr(Be(f,"float32")),d,"bilinear",h,0,[r.height,r.width]);return i!=null?kZe(p,i):p});return{imageTensor:c,padding:l,transformationMatrix:u}}function v7(t){return{xCenter:t.xMin+t.width/2,yCenter:t.yMin+t.height/2,width:t.width,height:t.height}}function AZe(t){var e=t.relativeKeypoints;if(e.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,i=Number.MIN_VALUE;return e.forEach(function(a){n=Math.min(n,a.x),s=Math.max(s,a.x),r=Math.min(r,a.y),i=Math.max(i,a.y)}),{xCenter:(n+s)/2,yCenter:(r+i)/2,width:s-n,height:i-r}}function b7(t,e,n,r,s){var i=n==="rect"?function(a,o,l){var u,c=a.locationData;return u=v7(c.boundingBox),u}(t):function(a,o){var l=a.locationData;return o==="boundingbox"?v7(l.relativeBoundingBox):AZe(l)}(t,e);return s&&(i.rotation=function(a,o,l){var u,c=a.locationData,f=l.rotationVectorStartKeypointIndex,d=l.rotationVectorEndKeypointIndex;u=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var h=c.relativeKeypoints[f].x*o.width,p=c.relativeKeypoints[f].y*o.height,m=c.relativeKeypoints[d].x*o.width,g=c.relativeKeypoints[d].y*o.height;return tte(u-Math.atan2(-(g-p),m-h))}(t,r,s)),i}function $Ze(t,e,n){for(var r=0;r<e.length;++r){var s=e[r],i=n[t[r]];i.x=s.x,i.y=s.y}}function IZe(t,e,n,r){if(typeof e=="string"){if(e==="copy")for(var s=0;s<n.length;++s)r[t[s]].z=n[s].z}else{var i=function(a,o){for(var l=0,u=0;u<o.length;++u)l+=a[o[u]].z;return l/o.length}(r,e);for(s=0;s<t.length;++s)r[t[s]].z=i}}function _Ze(t,e){for(var n=function(o){var l=[].concat.apply([],o.map(function(h){return h.indexesMapping}));if(l.length===0)throw new Error("There should be at least one landmark in indexes mapping");var u=l[0],c=l[0],f=new Set(l);f.forEach(function(h){u=Math.min(u,h),c=Math.max(c,h)});var d=f.size;if(u!==0)throw new Error("Indexes are expected to start with 0 instead of "+u);if(c+1!==d)throw new Error("Indexes should have no gaps but "+(c-d+1)+" indexes are missing");return d}(e),r=new Array(n).fill(null).map(Object),s=0;s<t.length;++s){var i=t[s],a=e[s];if(i.length!==a.indexesMapping.length)throw new Error("There are "+i.length+" refinement landmarks while mapping has "+a.indexesMapping.length);$Ze(a.indexesMapping,i,r),IZe(a.indexesMapping,a.zRefinement,i,r)}return r}function OZe(t,e){return t.map(function(n){var r=lo(lo({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(r.z=n.z*e.width),r})}function DZe(t,e){return t==="none"?e:function(n){return 1/(1+Math.exp(-n))}(e)}function nf(t,e,n,r){return Ol(this,void 0,void 0,function(){var s,i,a,o,l,u,c,f;return Dl(this,function(d){switch(d.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,s=t.size,i=s/e.numLandmarks,[4,t.data()];case 1:for(a=d.sent(),o=[],l=0;l<e.numLandmarks;++l)u=l*i,(f={x:0,y:0}).x=n?e.inputImageWidth-a[u]:a[u],i>1&&(f.y=r?e.inputImageHeight-a[u+1]:a[u+1]),i>2&&(f.z=a[u+2]),i>3&&(f.score=DZe(e.visibilityActivation,a[u+3])),o.push(f);for(c=0;c<o.length;++c)(f=o[c]).x=f.x/e.inputImageWidth,f.y=f.y/e.inputImageHeight,f.z=f.z/e.inputImageWidth/(e.normalizeZ||1);return[2,o]}})})}function x7(t,e,n){var r=t.width,s=t.height,i=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(u,c){return c.rotation!=null?u+=c.rotation:c.rotationDegree!=null&&(u+=Math.PI*c.rotationDegree/180),tte(u)}(i,n)),i===0)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+s*n.shiftY;else{var a=(e.width*r*n.shiftX*Math.cos(i)-e.height*s*n.shiftY*Math.sin(i))/e.width,o=(e.width*r*n.shiftX*Math.sin(i)+e.height*s*n.shiftY*Math.cos(i))/e.height;t.xCenter=t.xCenter+a,t.yCenter=t.yCenter+o}{var l=Math.max(r*e.width,s*e.height);r=l/e.width,s=l/e.height}return t.width=r*n.scaleX,t.height=s*n.scaleY,t}(Gx||(Gx={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var kC={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},NC={flipHorizontal:!1,staticImageMode:!1},w7={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5},RZe={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1]},S7={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},PZe={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},T7={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},C7={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},MZe={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},FZe={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},LZe={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},zZe={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},BZe={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},jZe={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},Hx,UZe=function(){function t(e,n,r,s){this.detector=e,this.landmarkModel=n,this.maxFaces=r,this.withAttention=s,this.prevFaceRectsFromLandmarks=null}return t.prototype.estimateFaces=function(e,n){return Ol(this,void 0,void 0,function(){var r,s,i,a,o,l,u,c,f,d,h,p,m,g=this;return Dl(this,function(y){switch(y.label){case 0:return r=function(x){if(x==null)return lo({},NC);var w=lo({},x);return w.flipHorizontal==null&&(w.flipHorizontal=NC.flipHorizontal),w.staticImageMode==null&&(w.staticImageMode=NC.staticImageMode),w}(n),e==null?(this.reset(),[2,[]]):(s=ete(e),i=ie(function(){var x=Be(nte(e),"float32");return r.flipHorizontal&&(x=Xn(Ys.flipLeftRight(Sr(x,0)),[0])),x}),a=this.prevFaceRectsFromLandmarks,r.staticImageMode||a==null||a.length<this.maxFaces?[4,this.detector.detectFaces(i,!1)]:[3,2]);case 1:return(l=y.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(o=l.map(function(x){return g.faceDetectionFrontDetectionToRoi(x,s)}),[3,3]);case 2:o=[],y.label=3;case 3:return v=.5,b=[],[o,a||[]].forEach(function(x){return x.forEach(function(w){(b=b.filter(function(C){return CZe(w,C)<=v})).push(w)})}),u=b,[4,Promise.all(u.map(function(x){return g.faceLandmark(x,i)}))];case 4:for(c=y.sent(),f=[],this.prevFaceRectsFromLandmarks=[],d=0;d<c.length;++d)(h=c[d])!=null&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(h,s)),(p=OZe(h,s))!=null&&p.forEach(function(x,w){var C=Yee.get(w);C!=null&&(x.name=C)}),m=XN(p),f.push({keypoints:p,box:m.locationData.relativeBoundingBox}));return i.dispose(),[2,f]}var v,b})})},t.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},t.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},t.prototype.faceDetectionFrontDetectionToRoi=function(e,n){return x7(b7(e,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),n,w7)},t.prototype.faceLandmark=function(e,n){return Ol(this,void 0,void 0,function(){var r,s,i,a,o,l,u;return Dl(this,function(c){switch(c.label){case 0:return r=NZe(n,RZe,e).imageTensor,s=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),i=this.landmarkModel.execute(r,s),a=i[0],o=i.slice(1),[4,a.data()];case 1:return c.sent()[0]<.5?(mt(i),mt(r),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(o)]:[3,3];case 2:return l=c.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(o)];case 4:l=c.sent(),c.label=5;case 5:return u=function(f,d,h){h===void 0&&(h={ignoreRotation:!1});for(var p=[],m=0,g=f;m<g.length;m++){var y=g[m],v=y.x-.5,b=y.y-.5,x=h.ignoreRotation?0:d.rotation,w=Math.cos(x)*v-Math.sin(x)*b,C=Math.sin(x)*v+Math.cos(x)*b;w=w*d.width+d.xCenter,C=C*d.height+d.yCenter;var E=y.z*d.width,A=lo({},y);A.x=w,A.y=C,A.z=E,p.push(A)}return p}(l,e),mt(i),mt(r),[2,u]}})})},t.prototype.tensorsToFaceLandmarks=function(e){return Ol(this,void 0,void 0,function(){return Dl(this,function(n){return[2,nf(e[0],S7)]})})},t.prototype.tensorsToFaceLandmarksWithAttention=function(e){return Ol(this,void 0,void 0,function(){var n,r,s,i,a,o;return Dl(this,function(l){switch(l.label){case 0:return[4,nf(e[0],S7)];case 1:return n=l.sent(),[4,nf(e[1],PZe)];case 2:return r=l.sent(),[4,nf(e[3],T7)];case 3:return s=l.sent(),[4,nf(e[5],T7)];case 4:return i=l.sent(),[4,nf(e[4],C7)];case 5:return a=l.sent(),[4,nf(e[2],C7)];case 6:return o=l.sent(),[2,_Ze([n,r,s,i,a,o],[MZe,FZe,LZe,zZe,BZe,jZe])]}})})},t.prototype.faceLandmarksToRoi=function(e,n){return x7(b7(XN(e),"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),n,w7)},t}();function VZe(t){return Ol(this,void 0,void 0,function(){var e,n,r,s;return Dl(this,function(i){switch(i.label){case 0:return e=function(a){if(a==null)return lo({},kC);var o=lo({},a);return o.runtime="tfjs",o.maxFaces==null&&(o.maxFaces=kC.maxFaces),o.refineLandmarks==null&&(o.refineLandmarks=kC.refineLandmarks),o.landmarkModelUrl==null&&(o.landmarkModelUrl=o.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),o}(t),n=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,KQ(e.landmarkModelUrl,{fromTFHub:n})];case 1:return r=i.sent(),[4,TZe(Gx.MediaPipeFaceDetector,{modelType:"short",maxFaces:e.maxFaces,detectorModelUrl:e.detectorModelUrl,runtime:e.runtime})];case 2:return s=i.sent(),[2,new UZe(s,r,e.maxFaces,e.refineLandmarks)]}})})}function WZe(t,e){return Ol(this,void 0,void 0,function(){var n,r;return Dl(this,function(s){if(t===Hx.MediaPipeFaceMesh){if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,VZe(n)];if(n.runtime==="mediapipe")return[2,aZe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")})})}(function(t){t.MediaPipeFaceMesh="MediaPipeFaceMesh"})(Hx||(Hx={}));const GZe=t=>{if(!t||t.length===0)return console.log("No landmarks detected"),{emotion:"neutral",confidence:.5};const e=t[0].keypoints;if(!e||e.length<468)return console.log("Insufficient keypoints:",e==null?void 0:e.length),{emotion:"neutral",confidence:.4};try{const n=e[159],r=e[386],s=e[159],i=e[145],a=e[386],o=e[374],l=e[61],u=e[291],c=e[13],f=e[14],d=e[70],h=e[300];if([n,r,s,i,a,o,l,u,c,f,d,h].some(H=>!H||typeof H.x!="number"||typeof H.y!="number"))return console.log("Invalid landmark points detected"),{emotion:"neutral",confidence:.3};const m=Math.abs(s.y-i.y),g=Math.abs(a.y-o.y),y=(m+g)/2,v=Math.abs(l.x-u.x),b=Math.abs(c.y-f.y),x=v>0?b/v:0,w=(c.y+f.y)/2,C=l.y-w,E=u.y-w,A=(C+E)/2,O=d.y-n.y,R=h.y-r.y,F=(O+R)/2;console.log("Emotion detection features:",{avgEyeHeight:y.toFixed(2),mouthRatio:x.toFixed(3),mouthCurvature:A.toFixed(2),avgEyebrowDistance:F.toFixed(2),mouthWidth:v.toFixed(2),mouthHeight:b.toFixed(2)});let z="neutral",j=.6;return A<-2&&x>.03?(z="happy",j=Math.min(.9,.6+Math.abs(A)*.05)):A>1&&y<8?(z="sad",j=Math.min(.8,.5+A*.05)):y>12&&x>.05?(z="surprised",j=Math.min(.85,.6+(y-12)*.02)):F<-5&&x<.02?(z="angry",j=Math.min(.8,.6+Math.abs(F)*.02)):y<5&&(z="tired",j=Math.min(.75,.5+(5-y)*.05)),console.log(`Detected emotion: ${z} (confidence: ${(j*100).toFixed(1)}%)`),{emotion:z,confidence:j}}catch(n){return console.error("Error in emotion classification:",n),{emotion:"neutral",confidence:.3}}},HZe=t=>{const[e,n]=k.useState(!1),[r,s]=k.useState(null),[i,a]=k.useState([]),[o,l]=k.useState(null),[u,c]=k.useState(!1),f=k.useRef(null),d=k.useRef(null),h=k.useRef(null),{user:p,isAuthenticated:m}=wd();k.useEffect(()=>{if(!m||!p)return;const C=zg("http://localhost:5000/emotion",{autoConnect:!0});return f.current=C,C.on("connect",()=>{console.log("Connected to emotion namespace"),c(!0),C.emit("join",p.id)}),C.on("disconnect",()=>{console.log("Disconnected from emotion namespace"),c(!1)}),C.on("emotion_saved",E=>{console.log("Emotion saved:",E)}),C.on("emotion_history",E=>{a(E)}),C.on("error",E=>{console.error("Emotion socket error:",E),l(E.message)}),C.emit("get_emotion_history",{userId:p.id,limit:20}),()=>{C.disconnect()}},[m,p]);const g=async()=>{try{await kCe();const w=Hx.MediaPipeFaceMesh,C={runtime:"tfjs",refineLandmarks:!0};d.current=await WZe(w,C),console.log("Face detection model loaded")}catch(w){console.error("Error loading face detection model:",w),l("Failed to load face detection model")}},y=async()=>{try{console.log("Requesting camera access...");const w=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}});return t!=null&&t.current&&(t.current.srcObject=w,await new Promise((C,E)=>{const A=t.current,O=()=>{console.log("Video stream ready:",{width:A.videoWidth,height:A.videoHeight,readyState:A.readyState}),A.removeEventListener("loadeddata",O),A.removeEventListener("error",R),C()},R=F=>{console.error("Video loading error:",F),A.removeEventListener("loadeddata",O),A.removeEventListener("error",R),E(new Error("Video failed to load"))};A.addEventListener("loadeddata",O),A.addEventListener("error",R)}),await t.current.play(),console.log("Video playback started successfully")),w}catch(w){throw console.error("Error accessing camera:",w),l("Failed to access camera: "+w.message),w}},v=async()=>{if(!d.current||!(t!=null&&t.current)||!p){console.log("Detection requirements not met:",{detector:!!d.current,video:!!(t!=null&&t.current),user:!!p});return}try{if(t.current.readyState<2){console.log("Video not ready, readyState:",t.current.readyState);return}console.log("Starting face detection...");const w=await d.current.estimateFaces(t.current);if(console.log("Face detection result:",(w==null?void 0:w.length)||0,"faces detected"),w&&w.length>0){console.log("Processing landmarks for emotion detection...");const C=GZe(w);s(C),f.current&&Math.random()<.1&&(console.log("Sending emotion data to backend:",C),f.current.emit("emotion_data",{emotion:C.emotion,confidence:C.confidence,userId:p.id}))}else console.log("No faces detected in frame"),s({emotion:"neutral",confidence:.2})}catch(w){console.error("Error detecting emotions:",w),l("Emotion detection failed: "+w.message)}},b=async()=>{var w;try{l(null),n(!0),d.current||await g(),(w=t==null?void 0:t.current)!=null&&w.srcObject||await y(),h.current=setInterval(v,500)}catch{l("Failed to start emotion detection"),n(!1)}},x=()=>{var w;n(!1),s(null),h.current&&(clearInterval(h.current),h.current=null),(w=t==null?void 0:t.current)!=null&&w.srcObject&&(t.current.srcObject.getTracks().forEach(E=>E.stop()),t.current.srcObject=null)};return k.useEffect(()=>()=>{x()},[]),{isDetecting:e,currentEmotion:r,emotionHistory:i,startDetection:b,stopDetection:x,error:o,isConnected:u}},qZe=we.div`
  min-height: 100vh;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 2rem;
`,KZe=we.div`
  text-align: center;
  margin-bottom: 2rem;
`,XZe=we.h1`
  color: #333;
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
`,YZe=we.p`
  color: #666;
  font-size: 1.1rem;
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.6;
`,ZZe=we.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,QZe=we.div`
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  text-align: center;
`,JZe=we.div`
  position: relative;
  border-radius: 1rem;
  overflow: hidden;
  background: #000;
  margin-bottom: 1.5rem;
`,eQe=we.video`
  width: 100%;
  height: 300px;
  object-fit: cover;
`,tQe=we.div`
  width: 100%;
  height: 300px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 1.2rem;
  text-align: center;
  padding: 2rem;
`,E7=we.button`
  background: ${t=>t.variant==="stop"?"#e74c3c":"#27ae60"};
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin: 0 0.5rem;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  &:disabled {
    background: #bdc3c7;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }
`,nQe=we.div`
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
`,k7=we.div`
  text-align: center;
  margin-bottom: 2rem;
`,N7=we.h2`
  color: ${t=>t.color};
  font-size: 2rem;
  margin: 0.5rem 0;
  text-transform: capitalize;
`,A7=we.div`
  font-size: 4rem;
  margin: 1rem 0;
`,rQe=we.div`
  background: #ecf0f1;
  border-radius: 1rem;
  height: 1rem;
  margin: 1rem 0;
  overflow: hidden;
`,sQe=we.div`
  background: ${t=>t.color};
  height: 100%;
  width: ${t=>t.confidence*100}%;
  border-radius: 1rem;
  transition: width 0.3s ease;
`,$7=we.p`
  color: #666;
  margin: 0.5rem 0;
`,iQe=we.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  color: ${t=>t.connected?"#27ae60":"#e74c3c"};
`,aQe=we.div`
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: ${t=>t.connected?"#27ae60":"#e74c3c"};
`,oQe=we.div`
  grid-column: 1 / -1;
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin-top: 2rem;
`,lQe=we.h3`
  color: #333;
  margin-bottom: 1rem;
`,uQe=we.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
`,cQe=we.div`
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 0.5rem;
  text-align: center;
  border-left: 4px solid #667eea;
`,fQe=we.div`
  background: #fee;
  color: #c33;
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
  border-left: 4px solid #e74c3c;
`;we.div`
  grid-column: 1 / -1;
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 0.5rem;
  padding: 1rem;
  margin-top: 2rem;
`;we.h3`
  color: #495057;
  margin: 0 0 1rem 0;
  font-size: 1.1rem;
`;we.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 0.5rem;
`;we.div`
  padding: 0.5rem;
  background: white;
  border-radius: 0.25rem;
  font-size: 0.9rem;
  border: 1px solid #e9ecef;
`;const dQe=()=>{const t=k.useRef(null),{isDetecting:e,currentEmotion:n,emotionHistory:r,startDetection:s,stopDetection:i,error:a,isConnected:o}=HZe(t),l=async()=>{try{await s()}catch(c){console.error("Failed to start detection:",c)}},u=c=>{switch(c){case"happy":return"#f39c12";case"sad":return"#3498db";case"angry":return"#e74c3c";case"surprised":return"#9b59b6";case"neutral":return"#95a5a6";case"tired":return"#34495e";default:return"#7f8c8d"}};return B.jsxs(qZe,{children:[B.jsxs(KZe,{children:[B.jsx(XZe,{children:"Real-Time Emotion Detection"}),B.jsx(YZe,{children:"Using advanced AI and computer vision to analyze your facial expressions and track your emotional state in real-time."})]}),a&&B.jsx(fQe,{children:a}),B.jsxs(ZZe,{children:[B.jsxs(QZe,{children:[B.jsx("h3",{children:"Live Camera Feed"}),B.jsxs(iQe,{connected:o,children:[B.jsx(aQe,{connected:o}),o?"Connected to emotion server":"Connecting..."]}),B.jsx(JZe,{children:e?B.jsx(eQe,{ref:t,autoPlay:!0,muted:!0,playsInline:!0}):B.jsx(tQe,{children:'📹 Click "Start Detection" to begin emotion analysis'})}),B.jsx("div",{children:e?B.jsx(E7,{variant:"stop",onClick:i,children:"Stop Detection"}):B.jsx(E7,{variant:"start",onClick:l,disabled:!o,children:"Start Detection"})})]}),B.jsxs(nQe,{children:[B.jsx("h3",{children:"Current Emotion"}),n?B.jsxs(k7,{children:[B.jsx(A7,{children:Xk(n.emotion==="happy"?.8:n.emotion==="sad"?-.8:0)}),B.jsx(N7,{color:u(n.emotion),children:n.emotion}),B.jsx(rQe,{children:B.jsx(sQe,{confidence:n.confidence,color:u(n.emotion)})}),B.jsxs($7,{children:["Confidence: ",Math.round(n.confidence*100),"%"]})]}):B.jsxs(k7,{children:[B.jsx(A7,{children:"😐"}),B.jsx(N7,{color:"#95a5a6",children:e?"Detecting...":"No Detection"}),B.jsx($7,{children:e?"Looking for faces...":"Start detection to see emotions"})]})]})]}),B.jsxs(oQe,{children:[B.jsx(lQe,{children:"Recent Emotion History"}),r.length>0?B.jsx(uQe,{children:r.slice(0,10).map(c=>B.jsxs(cQe,{children:[B.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:Xk(c.emotion==="happy"?.8:c.emotion==="sad"?-.8:0)}),B.jsx("div",{style:{fontWeight:"bold",textTransform:"capitalize"},children:c.emotion}),B.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:[Math.round(c.confidence*100),"% confidence"]}),B.jsx("div",{style:{fontSize:"0.7rem",color:"#999"},children:new Date(c.timestamp).toLocaleTimeString()})]},c.id))}):B.jsx("p",{style:{color:"#666",textAlign:"center"},children:"No emotion data recorded yet. Start detection to begin tracking your emotions."})]}),!1]})},hQe=we.div`
  min-height: 100vh;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  padding: 2rem;
`,pQe=we.div`
  text-align: center;
  margin-bottom: 3rem;
`,mQe=we.h1`
  color: #333;
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
`,gQe=we.p`
  color: #666;
  font-size: 1.1rem;
`,yQe=we.div`
  max-width: 600px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin-bottom: 2rem;
`,AC=we.div`
  margin-bottom: 2rem;
`,$C=we.label`
  display: block;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
`,vQe=we.input`
  width: 100%;
  height: 8px;
  border-radius: 5px;
  background: linear-gradient(to right, #e74c3c, #f39c12, #f1c40f, #2ecc71);
  outline: none;
  -webkit-appearance: none;

  &::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3498db;
    cursor: pointer;
  }

  &::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #3498db;
    cursor: pointer;
    border: none;
  }
`,bQe=we.div`
  text-align: center;
  margin: 1rem 0;
  font-size: 1.2rem;
  font-weight: 600;
`,xQe=we.div`
  display: flex;
  justify-content: space-around;
  margin: 1rem 0;
  flex-wrap: wrap;
  gap: 0.5rem;
`,wQe=we.button.withConfig({shouldForwardProp:t=>!["selected"].includes(t)})`
  background: ${t=>t.selected?"#3498db":"transparent"};
  border: 2px solid ${t=>t.selected?"#3498db":"#ddd"};
  border-radius: 50%;
  padding: 0.5rem;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    transform: scale(1.1);
    border-color: #3498db;
  }
`,SQe=we.textarea`
  width: 100%;
  min-height: 120px;
  padding: 1rem;
  border: 2px solid #ddd;
  border-radius: 8px;
  font-size: 1rem;
  resize: vertical;
  font-family: inherit;

  &:focus {
    outline: none;
    border-color: #3498db;
  }
`,TQe=we.button`
  background: linear-gradient(135deg, #3498db, #2980b9);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  transition: all 0.3s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }
`,CQe=we.div`
  max-width: 600px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
`,EQe=we.h3`
  color: #333;
  margin-bottom: 1rem;
`,kQe=we.div`
  border-bottom: 1px solid #eee;
  padding: 1rem 0;
  
  &:last-child {
    border-bottom: none;
  }
`,NQe=we.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
`,AQe=we.span.withConfig({shouldForwardProp:t=>!["score"].includes(t)})`
  background: ${t=>t.score<=3?"#e74c3c":t.score<=5?"#f39c12":t.score<=7?"#f1c40f":"#2ecc71"};
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-weight: 600;
`,$Qe=we.span`
  color: #666;
  font-size: 0.9rem;
`,IQe=we.p`
  color: #333;
  margin: 0;
  font-style: italic;
`,I7=[{emoji:"😢",score:1,label:"Very sad"},{emoji:"😟",score:2,label:"Sad"},{emoji:"😕",score:3,label:"Down"},{emoji:"😐",score:4,label:"Neutral"},{emoji:"🙂",score:5,label:"Okay"},{emoji:"😊",score:6,label:"Good"},{emoji:"😄",score:7,label:"Happy"},{emoji:"😁",score:8,label:"Very happy"},{emoji:"🤗",score:9,label:"Excited"},{emoji:"🥳",score:10,label:"Euphoric"}],_Qe=()=>{const[t,e]=k.useState(5),[n,r]=k.useState(5),[s,i]=k.useState(!1),[a,o]=k.useState([]),{register:l,handleSubmit:u,reset:c,setValue:f}=o$();k.useEffect(()=>{d()},[]);const d=async()=>{try{const v=await Ea.get("/mood/history?limit=10");o(v.data)}catch(v){console.error("Error fetching mood history:",v),Bt.error("Failed to load mood history")}},h=async v=>{i(!0);try{await Ea.post("/mood",{moodScore:v.moodScore,text:v.text}),Bt.success("Mood entry saved successfully!"),c(),e(5),r(5),d()}catch(b){console.error("Error saving mood entry:",b),Bt.error("Failed to save mood entry")}finally{i(!1)}},p=v=>{e(v),r(v),f("moodScore",v)},m=v=>{r(v),e(v),f("moodScore",v)},g=v=>{const b=I7.find(x=>x.score===v);return b?b.label:"Neutral"},y=v=>new Date(v).toLocaleString();return B.jsxs(hQe,{children:[B.jsxs(pQe,{children:[B.jsx(mQe,{children:"Mood Journal"}),B.jsx(gQe,{children:"Track your daily mood and emotional well-being"})]}),B.jsx(yQe,{children:B.jsxs("form",{onSubmit:u(h),children:[B.jsxs(AC,{children:[B.jsx($C,{children:"How are you feeling today? (1-10)"}),B.jsx(vQe,{type:"range",min:"1",max:"10",value:t,...l("moodScore",{valueAsNumber:!0}),onChange:v=>p(parseInt(v.target.value))}),B.jsxs(bQe,{children:[t,"/10 - ",g(t)]})]}),B.jsxs(AC,{children:[B.jsx($C,{children:"Quick mood selection:"}),B.jsx(xQe,{children:I7.map(v=>B.jsx(wQe,{type:"button",selected:n===v.score,onClick:()=>m(v.score),title:v.label,children:v.emoji},v.score))})]}),B.jsxs(AC,{children:[B.jsx($C,{children:"How was your day? (Optional)"}),B.jsx(SQe,{...l("text"),placeholder:"Share your thoughts, experiences, or anything that's on your mind..."})]}),B.jsx(TQe,{type:"submit",disabled:s,children:s?"Saving...":"Save Mood Entry"})]})}),B.jsxs(CQe,{children:[B.jsx(EQe,{children:"Recent Mood Entries"}),a.length===0?B.jsx("p",{children:"No mood entries yet. Start tracking your mood above!"}):a.map(v=>B.jsxs(kQe,{children:[B.jsxs(NQe,{children:[B.jsxs(AQe,{score:v.moodScore,children:[v.moodScore,"/10"]}),B.jsx($Qe,{children:y(v.timestamp)})]}),v.text&&B.jsxs(IQe,{children:['"',v.text,'"']})]},v.id))]})]})};function OQe(){return B.jsx(foe,{children:B.jsx(Zse,{children:B.jsxs("div",{className:"App",children:[B.jsxs(Wse,{children:[B.jsx(Ao,{path:"/login",element:B.jsx(jue,{})}),B.jsx(Ao,{path:"/register",element:B.jsx(Xue,{})}),B.jsx(Ao,{path:"/dashboard",element:B.jsx(Mm,{children:B.jsx(d4e,{})})}),B.jsx(Ao,{path:"/profile",element:B.jsx(Mm,{children:B.jsx(w4e,{})})}),B.jsx(Ao,{path:"/chat",element:B.jsx(Mm,{children:B.jsx(DTe,{})})}),B.jsx(Ao,{path:"/emotion-detection",element:B.jsx(Mm,{children:B.jsx(dQe,{})})}),B.jsx(Ao,{path:"/mood-journal",element:B.jsx(Mm,{children:B.jsx(_Qe,{})})}),B.jsx(Ao,{path:"/",element:B.jsx(kE,{to:"/dashboard",replace:!0})}),B.jsx(Ao,{path:"*",element:B.jsx(kE,{to:"/dashboard",replace:!0})})]}),B.jsx(Pie,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})})}ese.createRoot(document.getElementById("root")).render(B.jsx(k.StrictMode,{children:B.jsx(OQe,{})}));
